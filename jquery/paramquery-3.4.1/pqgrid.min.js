/**
 * ParamQuery Pro v3.4.1
 * 
 * Copyright (c) 2012-2017 Paramvir Dhindsa (http://paramquery.com)
 * Released under Commercial license
 * http://paramquery.com/pro/license
 * 
 */
(function(k){var n=k.ui.autocomplete.prototype,h=n._renderMenu,d=n._renderItem;n._renderMenu=function(b,a){h.call(this,b,a);var f=this.options.selectItem;if(f&&f.on){var f=f.cls,f=void 0===f?"ui-state-highlight":f,c=this.element.val();c&&f&&k("a",b).filter(function(){return k(this).text()===c}).addClass(f)}};n._renderItem=function(b,a){var f=d.call(this,b,a),c=this.options.highlightText;if(c&&c.on){var g=this.element.val();if(g){var g=new RegExp("("+g+")","i"),e=a.label;if(g.test(e)){var l=c.style,
c=c.cls,e=e.replace(g,"<span style='"+(void 0===l?"font-weight:bold;":l)+"' class='"+(void 0===c?"":c)+"'>$1</span>");f.find("a").html(e)}}}return f};var n=k.paramquery=k.paramquery||{},c=function(b,a,f,c){a=a.slice();for(var g=[],e=0,l=a.length;e<l;e++){var w=a[e],B=w.cb,v=w.one;if(v){if(w._oncerun)continue;w._oncerun=!0}!1===B.call(b,f,c)&&(f.preventDefault(),f.stopPropagation());v&&g.push(e);if(f.isImmediatePropagationStopped())break}if(g.length)for(e=g.length-1;0<=e;e--)a.splice(g[e],1)};n._trigger=
function(b,a,f){var m,g,e=this.listeners,l=e[b],w=this.options,B=w.allEvents,v=w.bubble,d=this.element,t=w[b];f=f||{};a=k.Event(a);a.type=this.widgetName+":"+b;a.target=d[0];if(g=a.originalEvent)for(m in g)m in a||(a[m]=g[m]);B&&"function"==typeof B&&B.call(this,a,f);if(l&&l.length&&(c(this,l,a,f),a.isImmediatePropagationStopped())||w.trigger&&(d[v?"trigger":"triggerHandler"](a,f),a.isImmediatePropagationStopped()))return!a.isDefaultPrevented();t&&!1===t.call(this,a,f)&&(a.preventDefault(),a.stopPropagation());
(l=e[b+"Done"])&&l.length&&c(this,l,a,f);return!a.isDefaultPrevented()};n.on=function(){var b=arguments;if("boolean"==typeof b[0])var a=b[0],f=b[1],c=b[2],b=b[3];else f=b[0],c=b[1],b=b[2];for(var f=f.split(" "),g=0;g<f.length;g++){var e=f[g];if(e){var l=c,w=b,B=a,v=this.listeners[e];v||(v=this.listeners[e]=[]);v[B?"unshift":"push"]({cb:l,one:w})}}return this};n.one=function(){for(var b=arguments.length,a=[],f=0;f<b;f++)a[f]=arguments[f];a[b]=!0;return this.on.apply(this,a)};n.off=function(b,a){for(var f=
b.split(" "),c=0;c<f.length;c++){var g=f[c];if(g){var e=g;if(g=a){if(e=this.listeners[e]){for(var l=[],w=0,B=e.length;w<B;w++)g==e[w].cb&&l.push(w);if(l.length)for(w=l.length-1;0<=w;w--)e.splice(l[w],1)}}else delete this.listeners[e]}}return this};k.widget("paramquery.pqTooltip",k.ui.tooltip,{options:{items:"td.pq-has-tooltip,td[title]",position:{my:"center top",at:"center bottom"},content:function(){var b=k(this),a=b.closest(".pq-grid").pqGrid("getInstance").grid,f=a.getCellIndices({$td:b});return(a=
a.data({rowIndx:f.rowIndx,dataIndx:f.dataIndx,data:"pq_valid"}).data)?(b=a.icon,a=a.msg,(""==b?"":"<span class='ui-icon "+b+" pq-tooltip-icon'></span>")+(null!=a?a:"")):b.attr("title")}},_create:function(){this._super();var b=this.element,a=this.eventNamespace;b.on("pqtooltipopen"+a,function(a,b){var c=k(a.target),e=k(a.originalEvent.target);e.on("remove",function(e){c.pqTooltip("close",e,!0)});if(c.is(".pq-grid")){var l=c.pqGrid("getCellIndices",{$td:e}),w=l.dataIndx,B;(B=c.pqGrid("getRowData",{rowIndx:l.rowIndx}))&&
(B=B.pq_celldata)&&(B=B[w])&&(B=B.pq_valid)&&(w=B,l=w.style,b.tooltip.addClass(w.cls),w=b.tooltip.attr("style"),b.tooltip.attr("style",w+";"+l));c.find("div.pq-sb-horiz,div.pq-sb-vert").on("pqscrollbardrag",function(l,w){l.currentTarget=e[0];c.pqTooltip("close",l,!0)})}});b.on("pqtooltipclose"+a,function(a,b){var c=k(a.target);k(a.originalEvent.target).off("remove");c.is(".pq-grid")&&c.find("div.pq-sb-horiz,div.pq-sb-vert").off("pqscrollbardrag")})}})})(jQuery);
(function(k){var n=window.pq=n||{},h=k.paramquery,d=Array.prototype;d.find||(d.find=function(a,b){for(var c=0,e=this.length,l;c<e;c++)if(l=this[c],a.call(b,l,c,this))return l});d.findIndex||(d.findIndex=function(a,b){for(var c=0,e=this.length,l;c<e;c++)if(l=this[c],a.call(b,l,c,this))return c;return-1});d.map||(d.map=function(a,b){for(var c=0,e=this.length,l=[];c<e;c++)l.push(a.call(b,this[c],c,this));return l});d.forEach||(d.forEach=function(a,b){for(var c=0,e=this.length;c<e;c++)a.call(b,this[c],
c,this)});n.getFn=function(){var a={};return function(b){var c=b;"string"!==typeof b||(c=a[b])||(c=window,b.split(".").forEach(function(e){c=c[e]}),a[b]=c);return c}}();n.searchSeqArray=function(a,b){var c=a.length,e=b,l=b,w=0,l=l>c-1?c-1:l,B;do{B=a[l];w++;if(B<b){if(l==c-1){l=-1;break}l=Math.ceil((l+e)/2);l=l>c-1?c-1:l}else if(B>b)e=l,l=Math.floor(l/2);else break;if(100<w)throw"too many iterations";}while(1);return l};n.arrayUnique=function(a,b){var c=[],e,l=a.length,w,B={},v;for(e=0;e<l;e++)w=a[e],
v=b?w[b]:w,B.hasOwnProperty(v)||(B[v]=1,c.push(w));return c};h.select=function(a){var b=a.options,c=a.groupIndx,e=a.labelIndx,l=a.valueIndx,w=null!=e&&null!=l,B=null!=c,v=a.prepend,d=a.dataMap,t,q,p;a=["<select ",a.attr," >"];if(v)for(var k in v)a.push('<option value="',k,'">',v[k],"</option>");if(b&&b.length){for(var v=0,h=b.length;v<h;v++){var y=b[v];if(w){var z=y[l],x=y.pq_disabled?'disabled="disabled" ':"",n=y.pq_selected?'selected="selected" ':"";if(null!=z){if(d){t={};for(p=0;p<d.length;p++){var C=
d[p];t[C]=y[C]}t="data-map='"+JSON.stringify(t)+"'"}else t="";p=t;B&&(C=y.pq_disabled_group?'disabled="disabled" ':"",t=y[c],q!=t&&(null!=q&&a.push("</optgroup>"),a.push('<optgroup label="',t,'" ',C," >"),q=t));e==l?a.push("<option ",n,x,p,">",z,"</option>"):a.push("<option ",n,x,p,' value="',z,'">',y[e],"</option>")}}else if("object"==typeof y)for(k in y)a.push('<option value="',k,'">',y[k],"</option>");else a.push("<option>",y,"</option>")}B&&a.push("</optgroup>")}a.push("</select>");return a.join("")};
k.fn.pqval=function(a){if(a){if(a.incr)return a=this.data("pq_value"),this.prop("indeterminate",!1),a?(a=!1,this.prop("checked",!1)):!1===a?(a=null,this.prop("indeterminate",!0),this.prop("checked",!1)):(a=!0,this.prop("checked",!0)),this.data("pq_value",a),a;a=a.val;this.data("pq_value",a);this.prop("indeterminate",!1);null==a?(this.prop("indeterminate",!0),this.prop("checked",!1)):a?this.prop("checked",!0):this.prop("checked",!1);return this}return this.data("pq_value")};h.xmlToArray=function(a,
b){var c=b.itemParent,e=b.itemNames,l=[];k(a).find(c).each(function(w,a){var b=k(a),f=[];k(e).each(function(e,l){f.push(b.find(l).text().replace(/\r|\n|\t/g,""))});l.push(f)});return l};h.xmlToJson=function(a,b){var c=b.itemParent,e=b.itemNames,l=[];k(a).find(c).each(function(a,b){for(var f=k(b),c={},g=0,m=e.length;g<m;g++){var d=e[g];c[d]=f.find(d).text().replace(/\r|\n|\t/g,"")}l.push(c)});return l};h.tableToArray=function(a){var b=[],c=[];a=k(a).children("tbody").children("tr");var e=a.length?
k(a[0]):k(),l=1<a.length?k(a[1]):k();e.children("th,td").each(function(e,a){var f=k(a),c=f.html(),f=f.width(),g="left";if(l.length)var d=l.find("td:eq("+e+")").attr("align"),g=d?d:g;b.push({title:c,width:f,dataType:"string",align:g,dataIndx:e})});a.each(function(e,l){if(0!=e){var a=[];k(l).children("td").each(function(e,l){a.push(k.trim(k(l).html()))});c.push(a)}});return{data:c,colModel:b}};var c={};h.formatCurrency=function(a,b){var g=parseFloat(a);if(!isNaN(g)){var e=0>g,l;a:{var w=b,B,v;if(w){w=
w.split(":");w=e&&1<w.length?w[1]:w[0];if(B=c[w]){l=B;break a}v=/^([^#]*|&#[^#]*)?[\,\.#0]*?([\,\s\.]?)([#0]*)([\,\s\.]?)([0]*?)(\s*[^#^0]*|&#[^#]*)?$/;(v=w.match(v))&&v.length&&(B={symbol:v[1]||"",thouSep:v[2],thousand:v[3].length,decSep:v[4],decimal:v[5].length,symbolEnd:v[6]||""},c[w]=B)}l=B=B||{symbol:"",symbolEnd:"",thouSep:",",thousand:3,decSep:".",decimal:2}}w=l.symbol;B=l.symbolEnd;v=l.thousand;var d=l.thouSep,t=l.decSep,q=l.decimal,g=g.toFixed(q);l=g.length;var p=q+t.length,q=g.substring(0,
l-p),g=g.substring(l-p+t.length,l);l=q.match(/\d/g).reverse();q=[];for(p=0;p<l.length;p++)0<p&&0==p%v&&q.push(d),q.push(l[p]);q=q.reverse();q=q.join("");return(e?"-":"")+w+q+t+g+B}};n.formatNumber=h.formatCurrency;n.validation={is:function(a,b){if("string"==a||!a)return!0;a=a.substring(0,1).toUpperCase()+a.substring(1,a.length);return this["is"+a](b)},isFloat:function(a){var b=parseFloat(a);return isNaN(b)||b!=a?!1:!0},isInteger:function(a){var b=parseInt(a);return isNaN(b)||b!=a?!1:!0},isDate:function(a){a=
Date.parse(a);return isNaN(a)?!1:!0}};var b=[],a=h.toLetter=function(f){var c=b[f];if(!c){f++;var g=f%26,c=f/26|0,g=g?String.fromCharCode(64+g):(--c,"Z"),c=c?a(c-1)+g:g;f--;b[f]=c}return c};h.generateData=function(b,c){for(var g=[],e=0;e<c;e++)g[e]=a(e);for(var l=[],e=0;e<b;e++)for(var w=l[e]=[],B=0;B<c;B++)w[B]=g[B]+(e+1);return l}})(jQuery);
(function(k){function n(a,b,c){return a?k("<span tabindex='0' rel='tooltip' data-placement='top' title='"+b+"' class='btn btn-xs "+c+"'></span>"):k("<span class='pq-ui-button ui-widget-header' tabindex='0' rel='tooltip' title='"+b+"'><span class='ui-icon ui-icon-"+c+"'></span></span>")}function h(a,b){a.bind("click keydown",function(a){if("keydown"!=a.type||a.keyCode==k.ui.keyCode.ENTER)return b.call(this,a)})}function d(a,b,c){b[c?"addClass":"removeClass"]("disabled").css("pointer-events",c?"none":
"").attr("tabindex",c?"":"0")}var c={options:{bootstrap:{on:!1,pager:"",nextIcon:"glyphicon glyphicon-forward",prevIcon:"glyphicon glyphicon-backward",firstIcon:"glyphicon glyphicon-step-backward",lastIcon:"glyphicon glyphicon-step-forward",refreshIcon:"glyphicon glyphicon-refresh"},curPage:0,totalPages:0,totalRecords:0,msg:"",rPPOptions:[10,20,30,40,50,100],rPP:20},_regional:{strDisplay:"Displaying {0} to {1} of {2} items.",strFirstPage:"First Page",strLastPage:"Last Page",strNextPage:"Next Page",
strPage:"Page {0} of {1}",strPrevPage:"Previous Page",strRefresh:"Refresh",strRpp:"Records per page:{0}"}};k.extend(c.options,c._regional);c._create=function(){var a=this,b=this.options,c=this.element,g=b.bootstrap,e=g.on;this.listeners={};c.addClass("pq-pager "+(e?g.pager:""));this.first=n(e,b.strFirstPage,e?g.firstIcon:"seek-first").appendTo(c);h(this.first,function(e){1<b.curPage&&a._onChange(e,1)});this.prev=n(e,b.strPrevPage,e?g.prevIcon:"seek-prev").appendTo(c);h(this.prev,function(e){1<b.curPage&&
a._onChange(e,b.curPage-1)});k("<span class='pq-separator'></span>").appendTo(c);this.pageHolder=k("<span class='pq-page-placeholder'></span>").appendTo(c);k("<span class='pq-separator'></span>").appendTo(c);this.next=n(e,b.strNextPage,e?g.nextIcon:"seek-next").appendTo(c);h(this.next,function(e){b.curPage<b.totalPages&&a._onChange(e,b.curPage+1)});this.last=n(e,b.strLastPage,e?g.lastIcon:"seek-end").appendTo(c);h(this.last,function(e){b.curPage!==b.totalPages&&a._onChange(e,b.totalPages)});k("<span class='pq-separator'></span>").appendTo(c);
this.rPPHolder=k("<span class='pq-page-placeholder'></span>").appendTo(c);this.$refresh=n(e,b.strRefresh,e?g.refreshIcon:"refresh").appendTo(c);h(this.$refresh,function(e){if(!1===a._trigger("beforeRefresh",e))return!1;a._trigger("refresh",e)});k("<span class='pq-separator'></span>").appendTo(c);this.$msg=k("<span class='pq-pager-msg'></span>").appendTo(c);this._refresh()};c._destroy=function(){this.element.empty().removeClass("pq-pager").enableSelection()};c._setOption=function(a,b){if("curPage"==
a||"totalPages"==a)b*=1;this._super(a,b)};c._setOptions=function(a){var b,c=!1,g=this.options;for(b in a){var e=a[b],l=typeof e;"string"==l||"number"==l?e!=g[b]&&(this._setOption(b,e),c=!0):"function"==typeof e.splice||k.isPlainObject(e)?JSON.stringify(e)!=JSON.stringify(g[b])&&(this._setOption(b,e),c=!0):e!=g[b]&&(this._setOption(b,e),c=!0)}c&&this._refresh();return this};k.widget("paramquery.pqPager",c);pq.pager=function(a,b){var c=k(a).pqPager(b);return c.data("paramqueryPqPager")||c.data("paramquery-pqPager")};
var b=k.paramquery;b.pqPager.regional={};b.pqPager.regional.en=c._regional;c=b.pqPager.prototype;b.pqPager.defaults=c.options;c._refreshPage=function(){var a=this;this.pageHolder.empty();for(var b=this.options,c=b.bootstrap,g=b.strPage.split(" "),e=[],l=0,w=g.length;l<w;l++){var B=g[l];"{0}"==B?e.push("<input type='text' tabindex='0' class='pq-pager-input ",c.on?"":"ui-corner-all","' />"):"{1}"==B?e.push("<span class='total'></span>"):e.push("<span>",B,"</span>")}c=e.join("");c=k(c).appendTo(this.pageHolder);
this.page=c.filter("input").bind("keydown",function(e){e.keyCode===k.ui.keyCode.ENTER&&k(this).trigger("change")}).bind("change",function(e){var l=k(this),w=l.val();if(isNaN(w)||1>w)return l.val(b.curPage),!1;w=parseInt(w);if(w!==b.curPage&&(w>b.totalPages||!1===a._onChange(e,w)))return l.val(b.curPage),!1});this.$total=c.filter("span.total")};c._onChange=function(a,b){if(!1===this._trigger("beforeChange",a,{curPage:b})||!1===this._trigger("change",a,{curPage:b}))return!1;this.option({curPage:b})};
c._refresh=function(){this._refreshPage();var a=this,b=this.options,c=b.bootstrap;this.rPPHolder.empty();if(b.strRpp){var g=b.rPPOptions,e=b.strRpp;if(-1!=e.indexOf("{0}")){for(var c=["<select class='",c.on?"":"ui-corner-all","'>"],l=0,w=g.length;l<w;l++){var B=g[l];c.push('<option value="',B,'">',B,"</option>")}c.push("</select>");g=c.join("");e=e.replace("{0}","</span>"+g);e="<span>"+e+"<span class='pq-separator'></span>"}else e="<span>"+e+"</span><span class='pq-separator'></span>";this.$rPP=k(e).appendTo(this.rPPHolder).filter("select").val(b.rPP).change(function(e){var l=
k(this),w=l.val();if(!1===a._trigger("beforeChange",e,{rPP:w}))return l.val(a.options.rPP),!1;!1!==a._trigger("change",e,{rPP:w})&&(a.options.rPP=w)})}e=b.bootstrap.on;g=b.curPage>=b.totalPages;d(e,this.next,g);d(e,this.last,g);g=1>=b.curPage;d(e,this.first,g);d(e,this.prev,g);this.page.val(b.curPage);this.$total.text(b.totalPages);0<this.options.totalRecords?(e=b.rPP,g=b.curPage,c=b.totalRecords,l=g*e,l>c&&(l=c),b=b.strDisplay,b=b.replace("{0}",(g-1)*e+1),b=b.replace("{1}",l),b=b.replace("{2}",c),
this.$msg.html(b)):this.$msg.html("")};c.getInstance=function(){return{pager:this}};c._trigger=b._trigger;c.on=b.on;c.one=b.one;c.off=b.off})(jQuery);
(function(k){function n(b,a){return b?"<div class='"+a+"'></div>":"<div class='ui-icon ui-icon-"+a+"'></div>"}var h=k.paramquery,d={options:{length:200,num_eles:3,trigger:!1,cur_pos:0,ratio:0,timeout:350,pace:"optimum",direction:"vertical",bootstrap:{on:!1,slider:"btn btn-default",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",left:"glyphicon glyphicon-chevron-left",right:"glyphicon glyphicon-chevron-right"},theme:!1},_destroy:function(){k(document).off("."+this.eventNamespace);
this.element.removeClass("pq-sb pq-sb-vert pq-sb-vert-t pq-sb-vert-wt").enableSelection().removeClass("pq-sb-horiz pq-sb-horiz-t pq-sb-horiz-wt").unbind("click.pq-scrollbar").empty();this.element.removeData()},_create:function(){this.listeners={};this._createLayout()},_setOption:function(b,a){var c=this.options;"disabled"==b?(this._super(b,a),!0==a?this.$slider.draggable("disable"):this.$slider.draggable("enable")):"theme"==b?(c[b]=a,this._createLayout()):"ratio"==b?0<=a&&1>=a&&(c[b]=a):c[b]=a},_setOptions:function(){this._super.apply(this,
arguments);this.refresh()}};k.widget("paramquery.pqScrollBar",d);pq.scrollbar=function(b,a){var c=k(b).pqScrollBar(a);return c.data("paramqueryPqScrollBar")||c.data("paramquery-pqScrollBar")};d=h.pqScrollBar.prototype;h.pqScrollBar.defaults=d.options;d._createLayout=function(){var b=this,a=this.options,c=a.bootstrap,d=c.on,g=a.direction,e=this.eventNamespace,l=a.theme,w=this.element.empty();"vertical"==g?(w.removeClass("pq-sb-vert-t pq-sb-vert-wt").addClass("pq-sb pq-sb-vert"),l?(w.addClass("pq-sb-vert-t"),
w[0].innerHTML=["<div class='top-btn pq-sb-btn ",d?"":"ui-state-default ui-corner-top","'>",n(d,d?c.up:"triangle-1-n"),"</div><div class='pq-sb-slider ",d?c.slider:"ui-corner-all ui-state-default","'></div><div class='bottom-btn pq-sb-btn ",d?"":"ui-state-default ui-corner-bottom","'>",n(d,d?c.down:"triangle-1-s"),"</div>"].join("")):(w.addClass("pq-sb-vert-wt"),w[0].innerHTML="<div class='top-btn pq-sb-btn'></div><div class='pq-sb-slider'><div class='vert-slider-top'></div><div class='vert-slider-bg'></div><div class='vert-slider-center'></div><div class='vert-slider-bg'></div><div class='vert-slider-bottom'></div></div><div class='bottom-btn pq-sb-btn'></div>")):
(w.removeClass("pq-sb-horiz-t pq-sb-horiz-wt").addClass("pq-sb pq-sb-horiz"),l?(w.addClass("pq-sb-horiz-t"),w[0].innerHTML=["<div class='left-btn pq-sb-btn ",d?"":"ui-state-default ui-corner-left","'>",n(d,d?c.left:"triangle-1-w"),"</div><div class='pq-sb-slider pq-sb-slider-h ",d?c.slider:"ui-state-default ui-corner-all","'></div><div class='right-btn pq-sb-btn ",d?"":"ui-state-default ui-corner-right","'>",n(d,d?c.right:"triangle-1-e"),"</div>"].join("")):(w.addClass("pq-sb-horiz-wt"),w.width(this.width),
w[0].innerHTML="<div class='left-btn pq-sb-btn'></div><div class='pq-sb-slider pq-sb-slider-h'><span class='horiz-slider-left'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-center'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-right'></span></div><div class='right-btn pq-sb-btn'></div>"));w.disableSelection().unbind(".pq-scrollbar").on("mousedown.pq-scrollbar",function(l){if(!a.disabled&&!b.$slider.is(":hidden"))if(k(document).off("."+e).on("mouseup."+
e,function(e){b._mouseup(e)}),"vertical"==g){var w=l.pageY,c=b.element.offset().top,f=c+a.length,d=b.$slider,m=d.offset().top,h=d.height(),d=m+h;w<m&&w>c+17?b._setTimerPageLeft(w,h,l,0):w>d&&w<f-17&&b._setTimerPageRight(w,h,l,0)}else w=l.pageX,c=b.element.offset().left,f=c+a.length,m=b.$slider.offset().left,d=m+b.$slider.width(),w<m&&w>c+17?(b.$slider.css("left",w-b.element.offset().left),b._updateCurPosAndTrigger(l)):w>d&&w<f-17&&(b.$slider.css("left",w-b.element.offset().left-b.$slider.width()),
b._updateCurPosAndTrigger(l))});c=this.$slider=k("div.pq-sb-slider",this.element);c.attr("tabindex","0");this._bindSliderEvents(c);this.$top_btn=k("div.top-btn,div.left-btn",this.element).click(function(e){if(!b.options.disabled)return b.decr_cur_pos(e),!1}).mousedown(function(e){if(!b.options.disabled)return b.mousedownTimeout=setTimeout(function(){b.mousedownInterval=setInterval(function(){b.decr_cur_pos(e)},0)},b.options.timeout),!1}).bind("mouseup mouseout",function(e){b._mouseup(e)});this.$bottom_btn=
k("div.bottom-btn,div.right-btn",this.element).click(function(e){if(!b.options.disabled)return b.incr_cur_pos(e),!1}).mousedown(function(e){if(!b.options.disabled)return b.mousedownTimeout=setTimeout(function(){b.mousedownInterval=setInterval(function(){b.incr_cur_pos(e)},0)},b.options.timeout),!1}).bind("mouseup mouseout",function(e){b._mouseup(e)});this.refresh()};var c=0;d._setTimerPageLeft=function(b,a,f,d){var g=this,e=g.options;this.mousedownTimeout=window.setTimeout(function(){if(b>=g.$slider.offset().top)g._mouseup();
else{g._pageLeft(f);var l=c?0:e.timeout;c++;g._setTimerPageLeft(b,a,f,l)}},d)};d._setTimerPageRight=function(b,a,f,d){var g=this;this.mousedownTimeout=window.setTimeout(function(){if(b<=g.$slider.offset().top+a)g._mouseup();else{g._pageRight(f);var e=c?0:g.options.timeout;c++;g._setTimerPageRight(b,a,f,e)}},d)};d._bindSliderEvents=function(b){var a=this,c="x";"vertical"==this.options.direction&&(c="y");b.draggable({axis:c,helper:function(b,c){a._setDragLimits();return this},start:function(b){a.topWhileDrag=
null;a.dragging=!0},drag:function(b){a.dragging=!0;var c=a.options.pace;"optimum"==c?a._setNormalPace(b):"fast"==c&&a._updateCurPosAndTrigger(b)},stop:function(b){"fast"!=a.options.pace&&a._updateCurPosAndTrigger(b);a.dragging=!1;a.refresh()}}).on("keydown.pq-scrollbar",function(b){var c=b.keyCode,e=a.options,l=e.cur_pos,w=e.ratio,B=e.num_eles,f=k.ui.keyCode;null==a.keydownTimeout&&(a.keydownTimeout=window.setTimeout(function(){c==f.DOWN||c==f.RIGHT?a.incr_cur_pos(b):c==f.UP||c==f.LEFT?a.decr_cur_pos(b):
c==f.HOME?e.steps?0<l&&(e.cur_pos=0,a.updateSliderPos(),a.scroll(b)):0<w&&(e.ratio=0,a.updateSliderPos(),a.drag(b)):c==f.END?e.steps?l<B&&(e.cur_pos=B,a.updateSliderPos(),a.scroll(b)):1>w&&(e.ratio=1,a.updateSliderPos(),a.drag(b)):"vertical"==e.direction&&(c==f.PAGE_DOWN?a._pageRight(b):c==f.PAGE_UP&&a._pageLeft(b));a.keydownTimeout=null},0));if(c==f.DOWN||c==f.RIGHT||c==f.UP||c==f.LEFT||c==f.PAGE_DOWN||c==f.PAGE_UP||c==f.HOME||c==f.END)return b.preventDefault(),!1})};d.decr_cur_pos=function(b){var a=
this.options;if(a.steps)0<a.cur_pos&&(a.cur_pos--,this.updateSliderPos(),this.scroll(b));else if(0<a.ratio){var c=a.ratio-1/(a.num_eles-1);0>c&&(c=0);a.ratio=c;this.updateSliderPos();this.drag(b)}};d.incr_cur_pos=function(b){var a=this.options;if(a.steps)a.cur_pos<a.num_eles-1&&a.cur_pos++,this.updateSliderPos(),this.scroll(b);else{if(1>a.ratio){var c=a.ratio+1/(a.num_eles-1);1<c&&(c=1);a.ratio=c}this.updateSliderPos();this.drag(b)}};d._mouseup=function(b){this.options.disabled||(c=0,window.clearTimeout(this.mousedownTimeout),
this.mousedownTimeout=null,window.clearInterval(this.mousedownInterval),this.mousedownInterval=null)};d._setDragLimits=function(){var b=this.options;if("vertical"==b.direction){var a=this.element.offset().top+17,b=a+b.length-34-this.slider_length;this.$slider.draggable("option","containment",[0,a,0,b])}else a=this.element.offset().left+17,b=a+b.length-34-this.slider_length,this.$slider.draggable("option","containment",[a,0,b,0])};d._validateCurPos=function(){var b=this.options;b.cur_pos>=b.num_eles&&
(b.cur_pos=b.num_eles-1);0>b.cur_pos&&(b.cur_pos=0)};d._updateSliderPosRatio=function(){var b=this.options,a=b.direction,c=b.ratio,d=this.$slider[0],b=b.length-34-this.slider_length;if(null==c)throw"updateSliderPosRatio ratio N/A";c=c*b+17;"vertical"==a?d.style.top=c+"px":d.style.left=c+"px"};d._updateSliderPosCurPos=function(){var b=this.options,a=this.$slider[0],c=this.scroll_space*b.cur_pos/(b.num_eles-1);"vertical"==b.direction?a.style.top=17+c+"px":a.style.left=17+c+"px"};d.updateSliderPos=function(){var b=
this.options;if(void 0===b.steps)throw"updateSliderPos. steps N/A";b.steps?this._updateSliderPosCurPos():this._updateSliderPosRatio()};d.scroll=function(b){var a=this.options;this._trigger("scroll",b,{cur_pos:a.cur_pos,num_eles:a.num_eles})};d.drag=function(b){this._trigger("drag",b,{ratio:this.options.ratio})};d._pageRight=function(b){this._trigger("pageRight",b,null)};d._pageLeft=function(b){this._trigger("pageLeft",b,null)};d._setSliderBgLength=function(){var b=this.options,a=b.theme,c=this.$slider,
d=b.length,d=Math.round(((d-34)*d/(40*b.num_eles+d)-14)/2);1>d&&(d=1);var g=14+2*d;this.scroll_space=b.length-34-g;if(g!==this.slider_length)if(this.slider_length=g,b="vertical"===b.direction?{dim:"height",cls:".vert-slider-bg"}:{dim:"width",cls:".horiz-slider-bg"},a)c[b.dim](g-2);else k(b.cls,this.element)[b.dim](d),c[b.dim](g)};d._updateCurPosAndTrigger=function(b,a){var c=this.options,d=c.direction,g=this.$slider;null==a&&(a=parseInt(g[0].style["vertical"===d?"top":"left"]));d=(a-17)/(c.length-
34-this.slider_length);if(c.steps){if(d*=c.num_eles-1,d=Math.round(d),c.cur_pos!=d){if(this.dragging){if(null!=this.topWhileDrag&&(this.topWhileDrag<a&&c.cur_pos>d||this.topWhileDrag>a&&c.cur_pos<d))return;this.topWhileDrag=a}this.options.cur_pos=d;this.scroll(b)}}else c.ratio=d,this.drag(b)};d._setNormalPace=function(b){this.timer&&(window.clearInterval(this.timer),this.timer=null);var a=this,c=this.options.direction;a.timer=window.setInterval(function(){var d=parseInt(a.$slider[0].style["vertical"===
c?"top":"left"]);a.prev_top===d&&(a._updateCurPosAndTrigger(b,d),window.clearInterval(a.timer),a.timer=null);a.prev_top=d},20)};d.refresh=function(){var b=this.options,a=this.$slider[0],c=this.element;1>=b.num_eles?c[0].style.display="none":(c[0].style.display="",this._validateCurPos(),this.dragging||(c["vertical"===b.direction?"height":"width"](b.length),this._setSliderBgLength(),a.style.display=4>this.scroll_space||1>=b.num_eles?"none":""),this.updateSliderPos())};d._trigger=h._trigger;d.on=h.on;
d.one=h.one;d.off=h.off})(jQuery);
(function(k){k.paramquery=k.paramquery||{};k.paramquery.onResize=function(n,h){var d=k(n);"static"===d.css("position")&&d.css("position","relative");var c=k('<iframe type="text/html" src="about:blank" class="pq-resize-iframe" style="display:block;width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;overflow: hidden; pointer-events: none;" />').appendTo(d);c[0].data="about:blank";c.css("opacity","0");for(var b=0;b<d.length;b++)k(c[b].contentWindow).on("resize",function(a){h()})}})(jQuery);
(function(k){function n(e){return"<span class='btn btn-xs glyphicon glyphicon-"+e+"' ></span>"}function h(e){return"<span class='ui-widget-header pq-ui-button'><span class='ui-icon ui-icon-"+e+"'></span></span>"}var d=function(){};d.prototype.belongs=function(e){if(e.target==this.that.element[0])return!0};var c=k.paramquery;c.cClass=d;var b=function(e){this.that=e;var l=this.options=e.options,a=this;if(null!=l.postRenderInterval)e.on("refresh",function(){a.prColDef.length&&a.postRenderAll()}).on("refreshRow",
function(e,l){a.prColDef.length&&a.postRenderRow(l)}).on("refreshCell",function(e,l){l.column.postRender&&a.postRenderRow(l)}).on("refreshColumn",function(e,l){l.column.postRender&&a.setTimerPostRender(0,l.colIndx,l.column)});if(!l.mergeModel.flex)e.on("refresh refreshCell refreshRow refreshColumn",a.onRefreshMerge(e))};c.cGenerateView=b;d=b.prototype=new d;d.onRefreshMerge=function(e){return function(){for(var l=e.$cont.find(".pq-merge-cell-div"),a,b,c,f,g=l.length,d=[],m=[];g--;)a=l[g],a=a.parentNode,
b||(b=2*parseInt(k(a).css("paddingTop")),c=2*parseInt(k(a).css("paddingLeft"))),f=Math.max(a.offsetHeight,28),f-=b,a=a.offsetWidth-c,d[g]=f-1+"px",m[g]=a+"px";for(g=l.length;g--;)a=l[g],a.style.height=d[g],a.style.width=m[g]}};d.generateView=function(e){e=e||{};var l=this.that,a=l.options,b="flex"===a.width,f="flex"===a.height,g=a.cls,d=g.cont_inner,m=g.cont_inner_b,p,k,h=l.initH,y=l.finalH,z=l.pqpanes;if(e.$cont)p=this._generateTables(null,null,e),g=e.$cont,g.empty(),g[0].innerHTML=z.v?["<div class='",
d,"'>",p,"</div><div class='",d,"'>",p,"</div>"].join(""):["<div class='",d,"'>",p,"</div>"].join(""),a=g.children("div").children("table"),l.tables[0]={$tbl:a,$cont:g};else{p=l.initV;k=l.finalV;var x=l.pdata,g=l.$cont;null!=a.editModel.indices&&l.blurEditor({force:!0});h={pageData:x,initV:p,finalV:k,initH:h,finalH:y,source:e.source};l._trigger("beforeTableView",null,h);p=this._generateTables(p,k,e);g.empty();0===l.totalVisibleRows?g.append("<div class='"+d+" pq-grid-norows' >"+a.strNoRows+"</div>"):
(e=f||b?"style='position:relative;'":"",g[0].innerHTML=z.h&&z.v?["<div class='",d,"'>",p,"</div><div class='",d,"'>",p,"</div><div class='",d," ",m,"'>",p,"</div><div class='",d," ",m,"'>",p,"</div>"].join(""):z.v?["<div class='",d,"' ",e," >",p,"</div><div class='",d,"' >",p,"</div>"].join(""):z.h?["<div class='",d,"' style='position:static;' >",p,"</div><div class='",d," ",m,"' style='position:static;' >",p,"</div>"].join(""):["<div class='",d,"' ",e," >",p,"</div>"].join(""));l.$tbl=g.children("div").children("table");
if(a.scrollModel.flexContent&&l.$tbl[0])c.onResize(l.$tbl[0],function(){var e=l.iRefresh;e.ignoreTResize||e.softRefresh()});this.setPaneEvents();l._trigger("refresh",null,h)}this.setPanes()};d.postRenderRow=function(e){var l=this.that,a=this.prColDef,b=l.iMerge,c=e.rowIndx,f;null!=e.colIndx&&(a=[{colIndx:e.colIndx,column:e.column}]);for(var g=0,d=a.length;g<d;g++)e=a[g],f=e.column.postRender,e=e.colIndx,b.ismergedCell(c,e)?b.isRootCell(c,e,"a")&&(e=b.getRootCell(c,e),f.call(l,e)):(e=l.normalize({rowIndx:c,
colIndx:e}),f.call(l,e))};d.setTimerPostRender=function(e,l,a){var b=this.that,c=this,f=b.pdata,g=function(e){return-1==b.options.postRenderInterval?e():setTimeout(e,0)};f&&f.length&&(c.postRenderTimeoutID=g(function(){var g=b.initV,d=b.options.freezeRows;e<g&&e>=d&&(e=g);f[e].pq_hidden||c.postRenderRow({column:a,colIndx:l,rowIndx:e+b.rowIndxOffset});e++;e<=b.finalV&&c.setTimerPostRender(e)}))};d.postRenderAll=function(){var e=this.that,l=this,a=e.pdata,b=e.options.postRenderInterval,e=function(e){return-1==
b?e():setTimeout(e,b)};a&&a.length&&(clearTimeout(l.postRenderTimeoutID),l.postRenderTimeoutID=e(function(){l.setTimerPostRender(0)}))};d.scrollView=function(){var e=this.that,l=this.options,a=l.virtualY;l.virtualX||e.hscroll.drag();a||e.vscroll.drag()};d.setPaneEvents=function(){var e=this.that,l=e.pqpanes,a=e.$cont.children("div"),b=e.iMouseSelection;if((e=e.$tbl)&&e.length)if(l.h&&l.v){var l=k(a[0]),e=k(a[1]),c=k(a[2]),a=k(a[3]);l.on("scroll",function(e){this.scrollLeft=this.scrollTop=0});e.on("scroll",
function(e){this.scrollTop=0;this.scrollLeft=b.getScrollLeft(!0)});c.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=0});a.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)})}else if(l.v)l=k(a[0]),a=k(a[1]),l.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=0}),a.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)});else if(l.h)l=k(a[0]),a=k(a[1]),l.on("scroll",
function(e){this.scrollTop=0;this.scrollLeft=b.getScrollLeft(!0)}),a.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)});else a.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)})};d.setPanes=function(){var e=this.that,l=e.pqpanes,a=e.$cont.children("div"),b=e.iRefresh,c=e.$tbl,f=e.options,g=e.calcWidthCols(-1,1*f.freezeCols)+1,d="flex"!==f.width||f.maxWidth?b.getEContWd():"";if(e.tables.length){var m=e.tables[0].$tbl,
h=e.tables[0].$cont,s=m.parent("div");l.v?(k(s[0]).css({width:g}),k(s[1]).css({left:g,width:d-g}),k(m[1]).css({left:-1*g})):k(s[0]).css({width:d});h.height(m[0].scrollHeight-1);b.setContHeight()}if(c&&c.length)if(b="flex"!==f.height||f.maxHeight?b.getEContHt():"",l.h&&l.v){var m=k(a[0]),h=k(a[1]),s=k(c[1]),y=k(a[2]),z=k(c[2]),a=k(a[3]),x=k(c[3]),c=e.calcHeightFrozenRows();m.css({width:g,height:c});h.css({left:g,width:d-g,height:c});s.css({left:-1*g});y.css({width:g,top:c,height:b-c});z.css({marginTop:-(c+
1)});a.css({left:g,width:d-g,top:c,height:b-c});x.css({marginTop:-(c+1),left:-1*g})}else l.v?(m=k(a[0]),a=k(a[1]),c=k(c[1]),m.css({width:g,height:b}),a.css({left:g,width:d-g,height:b}),c.css({left:-1*g})):l.h?(m=k(a[0]),a=k(a[1]),h=k(c[1]),c=e.calcHeightFrozenRows(),m.css({height:c,width:d}),a.css({width:d,top:c,height:b-c}),h.css({marginTop:-(c+1)})):a.css({width:d,height:b});f.showHeader&&(l.vH?(e.$header_left.css({width:g}),e.$header_right.css({left:g,width:d-g}),e.$header_right_inner.css({left:-g})):
e.$header_left.css({width:d}))};d.createColDefs=function(){for(var e=this.that,l=e.colModel,a=e.initH,b=e.finalH,e=e.options.freezeCols,c=[],f=[],g=0;g<=b;g++){if(g<a&&g>=e&&(g=a,g>b))throw"initH>finalH";var d=l[g];d.hidden||(c.push({column:d,colIndx:g}),d.postRender&&"function"==typeof d.postRender&&f.push({column:d,colIndx:g}))}this.colDef=c;this.prColDef=f};d._generateTables=function(e,l,a){a=a||{};var b=this.that,c=b.options,f=c.bootstrap,g=c.numberCell,d=b.iRefresh,m=1*c.freezeRows,k=0,h=a.other;
l=h?a.data.length-1:l;h?a=a.data:(a=b.pdata,this.setFrozenRip(a,m));if(h||null!=e&&null!=l){this.vrows=d.vrows;this.vfrows=d.vfrows;k=["pq-grid-table"];f.on&&k.push(f.tbody);c.columnBorders&&k.push("pq-td-border-right");c.rowBorders&&k.push("pq-td-border-top");k.push(c.wrap?"pq-wrap":"pq-no-wrap");c=["<table class='"+k.join(" ")+"' >"];c.push("<tr class='pq-row-hidden'>");g.show&&(b=g.width,c.push("<td style='width:"+b+"px;' ></td>"));k=this.colDef;g=0;for(f=k.length;g<f;g++)b=k[g],d=b.colIndx,b=
b.column.outerWidth,c.push("<td style='width:",b,"px;' pq-col-indx='",d,"'></td>");c.push("</tr>");for(k=0;k<=l;k++)k<e&&k>=m&&(k=e),g=a[k],f=k,g&&g.pq_hidden||(d=g.pq_detail&&g.pq_detail.show,this._generateRow(g,f,c,h,d),d&&this._generateDetailRow(g,f,c));c.push("</table>");return c.join("")}};d.appendRow=function(e){var l=this.that,a=l.pdata,b=l.colModel,c=l.finalV;c+e>a.length&&(e=a.length-c);if(e){if(1<e)throw"noRows > 1";l._trigger("beforeTableView",null,{pageData:a,initV:c,finalV:c,initH:l.initH,
finalH:l.finalH,colModel:b});l.refreshRow({rowIndxPage:c,refresh:!1})}return e};d.prependRow=function(e){var l=this.that,a=l.options.freezeRows,b=l.calcVisibleRows(l.pdata,0,a),c=l.pdata,f=l.initV,g=l.colModel;if(l._mergeCells){if(b)for(b=0;b<a;b++)l.refreshRow({rowIndxPage:b,refresh:!1});l.refreshRow({rowIndxPage:f+1,refresh:!1})}l._trigger("beforeTableView",null,{pageData:c,initV:f,finalV:f,initH:l.initH,finalH:l.finalH,colModel:g});l.refreshRow({rowIndxPage:f,refresh:!1});return e};d.removeTopRow=
function(e){for(var l=this.that,a=l.options.freezeRows,b=l.calcVisibleRows(l.pdata,0,a),c=l.$tbl,f=k([]),g=0;g<c.length;g++)var d=k(c[g]).children("tbody").children("tr:gt(0)").slice(b,e+b),f=f.add(d);f.remove();if(l._mergeCells){if(b)for(g=0;g<a;g++)l.refreshRow({rowIndxPage:g,refresh:!1});l.refreshRow({rowIndxPage:l.initV,refresh:!1})}};d.removeBottomRow=function(e){var l=this.that.$tbl;if(e)for(var a=0;a<l.length;a++)k(l[a]).children("tbody").children("tr:gt(0)").slice(-e).remove()};d.format=function(){var e=
k.datepicker,l=pq.formatNumber;return function(a,b,c){if("date"==c){if(!isNaN(Date.parse(a)))return e.formatDate(b,new Date(a))}else return l(a,b)}}();d.renderCell=function(e){var l=this.that,a=[],b=[],c=e.Export,f=!1,g=this.options,d=["pq-grid-cell"];if(!e.other&&!c&&l._mergeCells){e=l.iMerge.renderCell(e);if(null==e)return"";e.rowspan&&(a.push("rowspan='"+e.rowspan+"'","colspan='"+e.colspan+"'"),g.mergeModel.flex||(f=!0,d.push("pq-merge-cell")));e.style&&b.push(e.style);e.cls&&d.push(e.cls)}var k=
e.rowData,h=e.column,s=e.colIndx,y=h.dataIndx,z=g.freezeCols,g=g.columnBorders;if(k){c||(a.push("pq-col-indx='"+s+"'"),"right"==h.align?d.push("pq-align-right"):"center"==h.align&&d.push("pq-align-center"),s==z-1&&g&&d.push("pq-last-frozen-col"),(s=h.cls)&&d.push(s),(s=l.iSelection.dirty?null:k.pq_cellselect)&&s[y]&&d.push(l.iCells.hclass));var x,z=k[y],s=(s=h.format)?this.format(z,s,h.dataType):z;e.dataIndx=y;e.cellData=z;e.formatVal=s;if(h.render&&(x=h.render.call(l,e))&&"string"!=typeof x){var z=
x.attr,g=x.cls,n=x.style;z&&a.push(z);g&&d.push(g);n&&b.push(n);x=x.text}null==x&&h._render&&(x=h._render.call(l,e));x&&"string"!=typeof x&&(z=x.attr,g=x.cls,n=x.style,z&&a.push(z),g&&d.push(g),n&&b.push(n),x=x.text);null==x&&(x=s);if(c)return x;if(""===x||void 0==x)x="&nbsp;";(e=k.pq_cellcls)&&(e=e[y])&&d.push(e);if(k=k.pq_cellattr)if(y=k[y]){var y=m(y),C;for(C in y)k=y[C],"style"==C?b.push(k):a.push(C+'="'+k+'"')}b=b.length?" style='"+b.join("")+"' ":"";return["<td class='",d.join(" "),"' ",a.join(" "),
b," >",f?"<div class='pq-merge-cell-div'><div><div class='pq-merge-inner'>":"",x,f?"</div></div></div>":"","</td>"].join("")}};d.setFrozenRip=function(e,l){if(e){for(var a;l--&&(a=e[l])&&a.pq_hidden;);this.frozenRip=l}};d.refreshRow=function(e,l){var a=this.that.pdata[e];this._generateRow(a,e,l,null,a.pq_detail&&a.pq_detail.show)};d._generateRow=function(e,l,a,b,c){var f=["pq-grid-row"];this.frozenRip===l&&f.push("pq-last-frozen-row");c&&f.push("pq-detail-master");var g=this.that,d=this.options,k=
d.rowInit;c=d.numberCell;var h="",s="",y=g.rowIndxOffset,z=l+y;k&&(k=k.call(g,{rowData:e,rowIndxPage:l,rowIndx:z}))&&(k.cls&&f.push(k.cls),h+=k.attr?" "+k.attr:"",s+=k.style?k.style:"");!b&&d.stripeRows&&this.isOdd(l,d.freezeRows)&&f.push("pq-grid-oddRow");e.pq_rowselect&&f.push(g.iRows.hclass);g=e.pq_rowcls;null!=g&&f.push(g);if(g=e.pq_rowattr){var g=m(g),x;for(x in g)h+=" "+x+'="'+g[x]+'"'}s=s?"style='"+s+"'":"";a.push("<tr pq-row-indx='",l,"' class='",f.join(" "),"' ",h," ",s," >");c.show&&a.push(["<td pq-col-indx='-1' class='pq-grid-number-cell'>",
b?"&nbsp;":z+1,"</td>"].join(""));e={rowIndx:l+y,rowIndxPage:l,other:b,rowData:e};l=this.colDef;b=0;for(f=l.length;b<f;b++)x=l[b],c=x.colIndx,e.column=x.column,e.colIndx=c,a.push(this.renderCell(e));a.push("</tr>");return a};d.isOdd=function(e,l){var a=pq.searchSeqArray(e<l?this.vfrows:this.vrows,e);return a/2==parseInt(a/2)};d._generateDetailRow=function(e,l,a){var b=["pq-grid-row pq-detail-child"],c=this.that,f=c.options,g=f.numberCell;f.stripeRows&&this.isOdd(l,f.freezeRows)&&b.push("pq-grid-oddRow");
e.pq_rowselect&&b.push(c.iRows.hclass);e=e.pq_rowcls;null!=e&&b.push(e);a.push("<tr pq-row-indx='"+l+"' class='"+b.join(" ")+"' >");g.show&&a.push("<td class='pq-grid-number-cell'>&nbsp;</td>");a.push("<td class='pq-grid-cell pq-detail-child' colSpan='20'></td>");a.push("</tr>");return a};d={widgetEventPrefix:"pqgrid",_create:function(){var e=this,l=this.options,w=l.dataModel,f=l.bootstrap,d=f.on,m=l.roundCorners&&!d,t=l.ui,q=l.sortModel;k(document).triggerHandler("pqGrid:bootup",{instance:this});
this.BS_on=d;l.collapsible||(l.collapsible={on:!1,collapsed:!1});l.flexHeight&&(l.height="flex");l.flexWidth&&(l.width="flex");if(w.sortIndx){q.on=l.sortable;q.type=w.sorting;var h=[],u=w.sortIndx,w=w.sortDir;if(k.isArray(u)){for(var s=0;s<u.length;s++){var y=w&&w[s]?w[s]:"up";h.push({dataIndx:u[s],dir:y})}q.single=!1}else h.push({dataIndx:u,dir:w?w:"up"}),q.single=!0;q.sorter=h}!1===l.virtualXHeader&&(l.virtualXHeader=null);this.setEditorPosTimer();this.iGenerateView=new b(this);this.iRefresh=new c.cRefresh(this);
this.iKeyNav=new g(this);this.iIsValid=new a(this);this.tables=[];this.$tbl=null;this.iColModel=new c.cColModel(this);this.iSort=new c.cSort(this);this.iHeader=new c.cHeader(this);this._initTypeColumns();q=this.element;q.on("scroll"+this.eventNamespace,function(){this.scrollTop=this.scrollLeft=0});h=d?f.grid:t.grid;u=d?"":t.header_o;w=d?"":t.bottom;f=d?f.top:t.top;q.empty().addClass("pq-grid "+h+" "+(m?" ui-corner-all":"")).html(["<div class='pq-grid-top ",f," ",m?" ui-corner-top":"","'><div class='pq-grid-title",
m?" ui-corner-top":"","'>&nbsp;</div></div><div class='pq-grid-center' ><div class='pq-header-outer ",u,"'></div><div class='pq-grid-cont-outer' ><div class='pq-grid-cont' tabindex='0'></div></div></div><div class='pq-grid-bottom ",w," ",m?" ui-corner-bottom":"","'><div class='pq-grid-footer'></div></div>"].join(""));this.$bottom=k("div.pq-grid-bottom",q);this._trigger("render",null,{dataModel:this.options.dataModel,colModel:this.colModel});this.$top=k("div.pq-grid-top",q);l.showTop||this.$top.css("display",
"none");this.$title=k("div.pq-grid-title",q);l.showTitle||this.$title.css("display","none");m=this.$grid_center=k("div.pq-grid-center",q).on("scroll",function(){this.scrollTop=0});this.$header_o=k("div.pq-header-outer",this.$grid_center).on("scroll",function(){this.scrollLeft=this.scrollTop=0});this.$footer=k("div.pq-grid-footer",q);this.$cont_o=k(".pq-grid-cont-outer",m);f=this.$cont=k("div.pq-grid-cont",m);k(window).bind("resize"+e.eventNamespace+" orientationchange"+e.eventNamespace,function(l,
a){e.onWindowResize(l,a)});f.on("click",".pq-grid-cell,.pq-grid-number-cell",function(l){if(!0!==k.data(l.target,e.widgetName+".preventClickEvent")&&k(l.target).closest(".pq-grid")[0]==e.element[0])return e._onClickCell(l)});f.on("click","tr.pq-grid-row",function(l){if(!0!==k.data(l.target,e.widgetName+".preventClickEvent")&&k(l.target).closest(".pq-grid")[0]==e.element[0])return e._onClickRow(l)});f.on("contextmenu","td.pq-grid-cell",function(l){if(k(l.target).closest(".pq-grid")[0]==e.element[0])return e._onRightClickCell(l)});
f.on("contextmenu","tr.pq-grid-row",function(l){if(k(l.target).closest(".pq-grid")[0]==e.element[0])return e._onRightClickRow(l)});f.on("dblclick","td.pq-grid-cell",function(l){if(k(l.target).closest(".pq-grid")[0]==e.element[0])return e._onDblClickCell(l)});f.on("dblclick","tr.pq-grid-row",function(l){if(k(l.target).closest(".pq-grid")[0]==e.element[0])return e._onDblClickRow(l)});f.on("blur",function(){e.onblur()});f.on("focus",function(){e.onfocus()});f.on("mousedown",function(l){if(1===l.which){var a=
k(l.target);if(a.closest(".pq-grid")[0]==e.element[0]){var b;b=a.closest(".pq-grid-cell:not(.pq-detail-child)");if(b.length&&(l.currentTarget=b[0],b=e._onCellMouseDown(l),!1===b))return!1;if(!l.isPropagationStopped()){a=a.closest(".pq-grid-row");if(a.length&&(l.currentTarget=a[0],b=e._onRowMouseDown(l),!1===b))return!1;if(!l.isPropagationStopped())return e._onContMouseDown(l)}}}});f.on("mouseenter","td.pq-grid-cell",function(l){if(k(l.target).closest(".pq-grid")[0]==e.element[0])return e._onCellMouseEnter(l,
k(this))});f.on("mouseenter","tr.pq-grid-row",function(l){if(k(l.target).closest(".pq-grid")[0]==e.element[0])return e._onRowMouseEnter(l,k(this))});f.on("mouseleave","td.pq-grid-cell",function(l){if(k(l.target).closest(".pq-grid")[0]==e.element[0])return e._onCellMouseLeave(l,k(this))});f.on("mouseleave","tr.pq-grid-row",function(l){if(k(l.target).closest(".pq-grid")[0]==e.element[0])return e._onRowMouseLeave(l,k(this))});f.on("keyup",function(l){k(l.target).closest(".pq-grid")[0]==e.element[0]&&
e._trigger("keyUp",l,null)});m.bind("mousewheel DOMMouseScroll",function(l){return e._onMouseWheel(l)});this.$hvscroll=k("<div class='pq-hvscroll-square ui-widget-content'></div>").appendTo(m);d=k("<div class='pq-vscroll'></div>").appendTo(m);this.prevVScroll=0;f=l.scrollModel;void 0===f.lastColumn&&l.virtualX&&(f.lastColumn="auto");this.vscroll=pq.scrollbar(d,{pace:f.pace,theme:f.theme,bootstrap:l.bootstrap,steps:l.virtualY&&!f.smooth,direction:"vertical",cur_pos:0,pageRight:function(){e.iKeyNav.pageDown()},
pageLeft:function(){e.iKeyNav.pageUp()},drag:function(l,a){e.iMouseSelection.syncViewWithScrollBarVert(a.ratio)},scroll:function(l,a){e.iRefresh.refreshVscroll(a)}});d=k("<div class='pq-hscroll'></div>").appendTo(m);"flex"===l.height&&d.css("position","relative");this.hscroll=pq.scrollbar(d,{direction:"horizontal",pace:f.pace,bootstrap:l.bootstrap,theme:f.theme,steps:l.virtualX&&!f.smooth,cur_pos:0,drag:function(l,a){e.iMouseSelection.syncViewWithScrollBarHor(a.ratio)},scroll:function(){l.virtualX&&
!l.scrollModel.smooth&&e.refresh()}});l.selectionModel["native"]||this.disableSelection();m.bind("keydown.pq-grid",function(l){k(l.target).closest(".pq-grid")[0]==e.element[0]&&e._onKeyPressDown(l)});this._refreshTitle();this.iRows=new c.cRows(this);this.iCells=new c.cCells(this);this.generateLoading();this._initPager();this._refreshResizable();this._refreshDraggable();this.iResizeColumns=new c.cResizeColumns(this);this._mouseInit()},_mouseDown:function(e){var l=this;if(k(e.target).closest(".pq-editor-focus").length)this._blurEditMode=
!0,window.setTimeout(function(){l._blurEditMode=!1},0);else return this._saveDims(),this._mousePQUpDelegate=function(e){return l._mousePQUp(e)},k(document).bind("mouseup"+this.eventNamespace,this._mousePQUpDelegate),this._super(e)},destroy:function(){this._trigger("destroy");this._super();window.clearInterval(this._refreshEditorPosTimer);this.autoResizeTimeout&&clearTimeout(this.autoResizeTimeout);for(var e in this)delete this[e];this.options=void 0;k.fragments={}},_setOption:function(e,l){var a=
this.options,b=a.dataModel;if("height"===e)"flex"===l?(b=this.vscroll,l&&b&&b.widget().hasClass("pq-sb-vert")&&(a.virtualY?b.option("cur_pos",0):b.option("ratio",0)),this.hscroll.widget().css("position","relative")):"flex"===a.height&&this.hscroll.widget().css("position",""),a[e]=l;else if("width"===e&&"flex"==l)a[e]=l,b=this.hscroll,l&&b&&b.widget().hasClass("pq-sb-horiz")&&(a.virtualX?b.option("cur_pos",0):b.option("ratio",0));else if("title"==e)a[e]=l,this._refreshTitle();else if("roundCorners"==
e)(a[e]=l)?(this.element.addClass("ui-corner-all"),this.$top.addClass("ui-corner-top"),this.$bottom.addClass("ui-corner-bottom")):(this.element.removeClass("ui-corner-all"),this.$top.removeClass("ui-corner-top"),this.$bottom.removeClass("ui-corner-bottom"));else if("virtualX"==e)a[e]=l,this.hscroll.option("steps",l);else if("virtualY"==e)a[e]=l,this.vscroll.option("steps",l);else if("freezeCols"==e)l=parseInt(l),!isNaN(l)&&0<=l&&l<=this.colModel.length-2&&(a[e]=l);else if("freezeRows"==e)l=parseInt(l),
!isNaN(l)&&0<=l&&(a[e]=l);else if("resizable"==e)a[e]=l,this._refreshResizable();else if("draggable"==e)a[e]=l,this._refreshDraggable();else if("scrollModel"==e)a[e]=l;else if("dataModel"==e)l.data!==b.data&&b.dataUF&&(b.dataUF.length=0),a[e]=l;else{if("groupModel"==e)throw"use groupOption() to set groupModel options.";"pageModel"==e?a[e]=l:"selectionModel"===e?a[e]=l:"colModel"===e||"columnTemplate"==e?(a[e]=l,this.iColModel.init()):"disabled"===e?(this._super(e,l),!0===l?this._disable():this._enable()):
"numberCell"===e?(a[e]=l,this.iRefresh.decidePanes()):"strLoading"===e?(a[e]=l,this._refreshLoadingString()):"showTop"===e?(a[e]=l,this.$top.css("display",l?"":"none")):"showTitle"===e?(a[e]=l,this.$title.css("display",l?"":"none")):"showToolbar"===e?(a[e]=l,this._toolbar.widget().css("display",l?"":"none")):"toolbar"==e?a[e]=l:"collapsible"===e?(a[e]=l,this._createCollapse()):"showBottom"===e?(a[e]=l,this.$bottom.css("display",l?"":"none")):a[e]=l}return this}};d.options={cancel:"input,textarea,button,select,option,.pq-no-capture,.ui-resizable-handle",
trigger:!1,bootstrap:{on:!1,thead:"table table-striped table-condensed table-bordered",tbody:"table table-condensed",grid:"panel panel-default",top:"",btn:"btn btn-default",groupModel:{icon:["glyphicon-triangle-bottom","glyphicon-triangle-right"]},header_active:"active"},ui:{on:!0,grid:"ui-widget ui-widget-content",top:"ui-widget-header",bottom:"ui-widget-header",header_o:"ui-widget-header",header:"ui-state-default",header_active:"ui-state-active"},cls:{cont_inner:"pq-grid-cont-inner",cont_inner_b:"pq-grid-cont-inner-b"},
distance:3,collapsible:{on:!0,toggle:!0,collapsed:!1,_collapsed:!1,refreshAfterExpand:!0,css:{zIndex:1E3}},colModel:null,columnBorders:!0,dataModel:{data:[],dataUF:[],cache:!1,dataType:"JSON",location:"local",sorting:"local",sortDir:"up",method:"GET"},direction:"",draggable:!1,editable:!0,editModel:{cellBorderWidth:0,pressToEdit:!0,clicksToEdit:2,filterKeys:!0,keyUpDown:!0,reInt:/^([\-]?[1-9][0-9]*|[\-]?[0-9]?)$/,reFloat:/^[\-]?[0-9]*\.?[0-9]*$/,onBlur:"validate",saveKey:k.ui.keyCode.ENTER,onSave:"nextFocus",
onTab:"nextFocus",allowInvalid:!1,invalidClass:"pq-cell-red-tr pq-has-tooltip",warnClass:"pq-cell-blue-tr pq-has-tooltip",validate:!0},editor:{select:!1,type:"textbox"},summaryOptions:{number:"avg,sum,max,min",date:"count,max,min",string:"count"},summaryTitle:{avg:"Avg: {0}",count:"Count: {0}",max:"Max: {0}",min:"Min: {0}",sum:"Sum: {0}"},validation:{icon:"ui-icon-alert",cls:"ui-state-error",style:"padding:3px 10px;"},warning:{icon:"ui-icon-info",cls:"",style:"padding:3px 10px;"},freezeCols:0,freezeRows:0,
freezeBorders:!0,calcDataIndxFromColIndx:!0,height:400,hoverMode:"null",_maxColWidth:"99%",_minColWidth:50,minWidth:100,numberCell:{width:30,title:"",resizable:!0,minWidth:30,maxWidth:100,show:!0},pageModel:{curPage:1,totalPages:0,rPP:10,rPPOptions:[10,20,50,100]},resizable:!1,roundCorners:!0,rowBorders:!0,rowHeight:25,scrollModel:{pace:"fast",smooth:!1,horizontal:!0,lastColumn:"auto",autoFit:!1,theme:!0},selectionModel:{type:"cell",onTab:"nextFocus",row:!0,mode:"block"},swipeModel:{on:!0,speed:20,
ratio:.15,repeat:20},showBottom:!0,showHeader:!0,showTitle:!0,showToolbar:!0,showTop:!0,sortable:!0,sql:!1,stripeRows:!0,title:"&nbsp;",treeModel:null,virtualX:!1,virtualY:!1,width:"auto",wrap:!0,hwrap:!0};k.extend(!0,d.options,{strAdd:"Add",strDelete:"Delete",strEdit:"Edit",strGroup_header:"Drag a column here to group by that column",strGroup_merge:"Merge cells",strGroup_fixCols:"Fix columns",strGroup_grandSummary:"Grand summary",strLoading:"Loading",strNoRows:"No rows to display."});k.widget("paramquery._pqGrid",
k.ui.mouse,d);d=c._pqGrid.prototype;d.refreshCM=function(e){e?this.option("colModel",e):this.iColModel.init()};d.readCell=function(e,l,a,b,c){l=l.dataIndx;return a&&!1===a.isRootCell(b,c,"o")?void 0:e[l]};d.saveCell=function(e,l,a){e[l.dataIndx]=a};d._destroyResizable=function(){var e=this.element,l=e.data();(l.resizable||l.uiResizable||l["ui-resizable"])&&e.resizable("destroy")};d._disable=function(){null==this.$disable&&(this.$disable=k("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};
d._enable=function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};d._destroy=function(){this.loading&&this.xhr.abort();this._destroyResizable();this._destroyDraggable();this._mouseDestroy();this.element.off(this.eventNamespace);k(window).unbind(this.eventNamespace);k(document).unbind(this.eventNamespace);this.element.empty().css("height","").css("width","").removeClass("pq-grid ui-widget ui-widget-content ui-corner-all").removeData()};d.collapse=function(e){var l=
this,a=this.element,b=this.options.collapsible,c=b.$collapse.children("span"),f=function(){a.css("overflow","hidden");c.addClass("ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-n");a.hasClass("ui-resizable")&&a.resizable("destroy");l._toolbar&&l._toolbar.disable();b.collapsed=!0;b._collapsed=!0;b.animating=!1;l._trigger("collapse")};e=e?e:{};if(b._collapsed)return!1;b.htCapture=a.height();!1===e.animate?(a.height(23),f()):(b.animating=!0,a.animate({height:"23px"},function(){f()}))};
d.expand=function(e){var l=this,a=this.element,b=this.options.collapsible,c=b.htCapture,f=b.$collapse.children("span"),g=function(){a.css("overflow","");b._collapsed=!1;b.collapsed=!1;l._refreshResizable();b.refreshAfterExpand&&l.refresh();f.addClass("ui-icon-circle-triangle-n").removeClass("ui-icon-circle-triangle-s");l._toolbar&&l._toolbar.enable();b.animating=!1;l._trigger("expand")};e=e?e:{};if(!1===b._collapsed)return!1;!1===e.animate?(a.height(c),g()):(b.animating=!0,a.animate({height:c},function(){g()}))};
d._createCollapse=function(){var e=this,l=this.$top,a=this.BS_on,b=this.options.collapsible;b.$stripe||(l=k("<div class='pq-slider-icon pq-no-capture'  ></div>").appendTo(l),b.$stripe=l);b.on?b.$collapse||(b.$collapse=k(a?n("collapse-down"):h("circle-triangle-n")).appendTo(b.$stripe).click(function(l){b.collapsed?e.expand():e.collapse()})):b.$collapse&&(b.$collapse.remove(),delete b.$collapse);b.collapsed&&!b._collapsed?e.collapse({animate:!1}):!b.collapsed&&b._collapsed&&e.expand({animate:!1});b.toggle?
b.$toggle||(b.$toggle=k(a?n("fullscreen"):h("arrow-4-diag")).prependTo(b.$stripe).click(function(l){e.toggle()})):b.$toggle&&(b.$toggle.remove(),delete b.$toggle)};d.toggle=function(){var e=this.options,l=e.collapsible,a=this.element,b,c=this._maxim;b=c?"min":"max";var f=k(document.body);if(!1===this._trigger("beforeToggle",null,{state:b}))return!1;"min"==b?(e=c.eleObj,l=c.docObj,this.option({height:e.height,width:e.width,maxHeight:e.maxHeight,maxWidth:e.maxWidth}),a[0].style.cssText=e.cssText,f[0].style.cssText=
l.cssText,k("html").css({overflow:"visible"}),window.scrollTo(l.scrollLeft,l.scrollTop),this._maxim=null):(e={height:e.height,width:e.width,cssText:a[0].style.cssText,maxHeight:e.maxHeight,maxWidth:e.maxWidth},this.option({height:"100%",width:"100%",maxHeight:null,maxWidth:null}),a.css(k.extend({position:"fixed",left:0,top:0,margin:0},l.css)),l={scrollLeft:k(window).scrollLeft(),scrollTop:k(window).scrollTop(),cssText:f[0].style.cssText},f.css({height:0,width:0,overflow:"hidden",position:"static"}),
k("html").css({overflow:"hidden"}),window.scrollTo(0,0),this._maxim={eleObj:e,docObj:l});this._trigger("toggle",null,{state:b});this._refreshResizable();this.refresh();k(window).trigger("resize",{$grid:a,state:b})};d._mouseCapture=function(e){var l=this.options;return l.virtualX&&l.virtualY&&!l.scrollModel.smooth||!e.target?!1:k(e.target).closest(".pq-grid")[0]==this.element[0]?(e=l.swipeModel,!1==e.on||"touch"==e.on&&!k.support.touch?!1:!0):!1};d._saveDims=function(){var e=this.$tbl,l=this.$tbl_header;
if(e)for(var a=0;a<e.length;a++){var b=e[a],c=k(b);c.data("offsetHeight",Math.round(b.offsetHeight)-1);c.data("scrollWidth",Math.round(b.scrollWidth))}if(l)for(a=0;a<l.length;a++)b=l[a],e=k(b).parent(),e.data("offsetHeight",Math.round(b.offsetHeight)),e.data("scrollWidth",Math.round(b.scrollWidth))};d._mousePQUp=function(e){k(document).unbind("mouseup"+this.eventNamespace,this._mousePQUpDelegate);this._trigger("mousePQUp",e,null)};d._mouseStart=function(e){this.blurEditor({force:!0});return!0};d._mouseDrag=
function(e){return!1==this._trigger("mouseDrag",e,null)?!1:!0};d._mouseStop=function(e){return!1==this._trigger("mouseStop",e,null)?!1:!0};d.onWindowResize=function(e,l){var a=this,b=a.options,c=a.element,f=c.parent();if(l){var g=l.$grid;if(g&&(g==c||0==c.closest(g).length))return}f.length&&(f[0]==document.body||"fixed"==c.css("position")?(c=window.innerHeight?window.innerHeight:k(window).height(),f=k(window).width()):(c=f.height(),f=f.width()),null==a._lastParentHt||c!=a._lastParentHt||f!=a._lastParentWd)&&
(a._lastParentHt=c,a._lastParentWd=f,k.support.touch&&b.editModel.indices&&k(document.activeElement).is(".pq-editor-focus")||(a.autoResizeTimeout&&clearTimeout(a.autoResizeTimeout),a.autoResizeTimeout=window.setTimeout(function(){a._refreshAfterResize();delete a.autoResizeTimeout},b.autoSizeInterval||0)))};d._onMouseWheel=function(e){this._saveDims();var l=this.options,a=0,b=!1;e=e.originalEvent;var c=e.wheelDeltaX,f=e.wheelDeltaY,g=e.wheelDelta;if(c&&Math.abs(c)>Math.abs(f)){if("flex"==l.width)return!0;
b=!0;a=c/120}else if(g){if(!this.iRefresh.vscroll)return!0;a=g/120}else if(e.detail){if(!this.iRefresh.vscroll)return!0;a=-1*e.detail/3}a*=3;e=b?this.hscroll:this.vscroll;f=parseInt(e.option("cur_pos"));c=parseInt(e.option("num_eles"));if(!l.scrollModel.smooth&&(b&&l.virtualX||!b&&l.virtualY)){a=0<a?Math[1>a?"ceil":"floor"](a):Math[-1>a?"ceil":"floor"](a);l=f-a;0>l?l=0:l>c-1&&(l=c-1);if(l==f)return!0;e.option("cur_pos",f-a);e.scroll()}else{l=e.option("ratio");a=l-a/(c-1);1<a?a=1:0>a&&(a=0);if(l==
a)return!0;e.option("ratio",a);e.drag()}return!1};d._onDblClickCell=function(e){var l=k(e.currentTarget),a=this.getCellIndices({$td:l}),b=a.rowIndxPage,c=b+this.rowIndxOffset,a=a.colIndx;if(null!=a){if(!1==this._trigger("cellDblClick",e,{$td:l,rowIndxPage:b,rowIndx:c,colIndx:a,column:this.colModel[a],rowData:this.pdata[b]}))return!1;1<this.options.editModel.clicksToEdit&&this.isEditableRow({rowIndx:c})&&this.isEditableCell({colIndx:a,rowIndx:c})&&this.editCell({rowIndxPage:b,colIndx:a})}};d._onClickCont=
function(e){};d._onClickRow=function(e){var l=k(e.currentTarget),a=parseInt(l.attr("pq-row-indx")),b=a+this.rowIndxOffset;if(!isNaN(a)&&!1==this._trigger("rowClick",e,{$tr:l,rowIndxPage:a,rowIndx:b,rowData:this.pdata[a]}))return!1};d._onRightClickRow=function(e){var l=k(e.currentTarget),a=parseInt(l.attr("pq-row-indx")),b=a+this.rowIndxOffset;if(!isNaN(a)&&!1==this._trigger("rowRightClick",e,{$tr:l,rowIndxPage:a,rowIndx:b,rowData:this.pdata[a]}))return!1};d._onDblClickRow=function(e){var l=k(e.currentTarget),
a=parseInt(l.attr("pq-row-indx")),b=this.getRowIndxOffset();if(!1==this._trigger("rowDblClick",e,{$tr:l,rowIndxPage:a,rowIndx:a+b,rowData:this.pdata[a]}))return!1};d.getValueFromDataType=function(e,l,a){if("date"==l)return l=Date.parse(e),isNaN(l)?"":a?l:e;if("object"==l)return e;if("integer"==l)l=parseInt(e);else if("float"==l)l=parseFloat(e);else return"bool"==l?(l=k.trim(e).toLowerCase(),0==l.length?null:"true"==l||"yes"==l||"1"==l?!0:"false"==l||"no"==l||"0"==l?!1:Boolean(l)):k.trim(e);return isNaN(l)||
null==l?null==e?e:null:l};var a=function(e){this.that=e},f=a.prototype;f._isValidCell=function(e){var l=this.that,a=e.column,b=a.validations;if(!b||!b.length)return{valid:!0};var c=e.value,f=a.dataType,g=function(e){return l.getValueFromDataType(e,f,!0)};e=e.rowData;if(!e)throw"rowData required.";for(var d=0;d<b.length;d++){var m=b[d],k=m.type,h=!1,y=m.msg,n=m.value;if(!1!==m.on&&(null==c&&"function"!=typeof k?h=!1:"minLen"==k?(c=g(c),n=g(n),c.length>=n&&(h=!0)):"nonEmpty"==k?null!=c&&""!==c&&(h=
!0):"maxLen"==k?(c=g(c),n=g(n),c.length<=n&&(h=!0)):"gt"==k?(c=g(c),n=g(n),c>n&&(h=!0)):"gte"==k?(c=g(c),n=g(n),c>=n&&(h=!0)):"lt"==k?(c=g(c),n=g(n),c<n&&(h=!0)):"lte"==k?(c=g(c),n=g(n),c<=n&&(h=!0)):"neq"==k?(c=g(c),n=g(n),c!==n&&(h=!0)):"regexp"==k?(new RegExp(n)).test(c)&&(h=!0):"function"==typeof k?(n={column:a,value:c,rowData:e,msg:y},!1==k.call(l,n)?(h=!1,n.msg!=y&&(y=n.msg)):h=!0):h=!0,!h))return{valid:!1,msg:y,column:a,warn:m.warn,dataIndx:a.dataIndx,validation:m}}return{valid:!0}};f.isValidCell=
function(e){var l=this.that,a=e.rowData,b=e.rowIndx,c=e.value,f=e.valueDef,g=e.column,d=e.focusInvalid,m=l.options,h=m.bootstrap,s=e.allowInvalid,n=g.dataIndx,z=m.validation,x=m.warning,A=m.editModel,C=A.invalidClass,D=A.warnClass,A=document.activeElement;if(e.checkEditable&&!1==l.isEditableCell({rowIndx:b,dataIndx:n}))return{valid:!0};e=this._isValidCell({column:g,value:c,rowData:a});var c=e.valid,g=e.warn,E=e.msg;if(c)l.data({rowData:a,dataIndx:n,data:"pq_valid"})&&(l.removeClass({rowData:a,rowIndx:b,
dataIndx:n,cls:D+" "+C}),l.removeData({rowData:a,dataIndx:n,data:"pq_valid"}));else var z=k.extend({},g?x:z,e.validation),G=z.css,O=z.cls,J=z.icon,M=z.style;if(s||g){if(c)return{valid:!0};l.addClass({rowData:a,rowIndx:b,dataIndx:n,cls:g?D:C});l.data({rowData:a,dataIndx:n,data:{pq_valid:{css:G,icon:J,style:M,msg:E,cls:O}}});return e}if(!c){if(null==b&&(a=l.getRowIndx({rowData:a,dataUF:!0}),b=a.rowIndx,null==b||a.uf))return e.uf=a.uf,e;if(d){var I;if(!f)l.goToPage({rowIndx:b}),b={rowIndx:b,dataIndx:n},
b=l.normalize(b),I=l.getCell(b),l["cell"==m.selectionModel.type?"setSelection":"scrollCell"](b),l.focus(b);else if(k(A).hasClass("pq-editor-focus")&&(f=m.editModel.indices)){m=f.rowIndx;f=f.dataIndx;if(null!=b&&b!=m)throw"incorrect usage of isValid rowIndx: "+b;if(n!=f)throw"incorrect usage of isValid dataIndx: "+n;l.editCell({rowIndx:m,dataIndx:n})}var F;if(I||(F=l.getEditCell())&&F.$cell){l=I||F.$cell;l.attr("title",E);I="tooltip";F="open";h.on&&h.tooltip&&(I=h.tooltip,F="show");try{l[I]("destroy")}catch(L){}l[I]({trigger:"manual",
position:{my:"left center+5",at:"right center"},content:function(){return(""==J?"":"<span class='ui-icon "+J+" pq-tooltip-icon'></span>")+E},open:function(e,a){var l=a.tooltip;O&&l.addClass(O);if(M){var b=l.attr("style");l.attr("style",b+";"+M)}G&&l.tooltip.css(G)}})[I](F)}}return e}if(f&&(F=l.getEditCell())&&F.$cell){l=F.$cell;l.removeAttr("title");try{l.tooltip("destroy")}catch(H){}}return{valid:!0}};d.isValid=function(e){return this.iIsValid.isValid(e)};f.isValid=function(e){e=e||{};var a=this.that,
b=e.allowInvalid,c=e.focusInvalid,f=e.checkEditable,b=null==b?!1:b,g=e.dataIndx;if(null!=g){var d=a.columns[g],m=e.rowData||a.getRowData(e),k=e.hasOwnProperty("value"),a=k?e.value:m[g],a=this.isValidCell({rowData:m,checkEditable:f,rowIndx:e.rowIndx,value:a,valueDef:k,column:d,allowInvalid:b,focusInvalid:c});return a.valid||a.warn?{valid:!0}:a}if(null!=e.rowIndx||null!=e.rowIndxPage||null!=e.rowData)for(var m=e.rowData||a.getRowData(e),h=a.colModel,k=[],s=0,n=h.length;s<n;s++){if(d=h[s],!d.hidden&&
(g=d.dataIndx,a=m[g],a=this.isValidCell({rowData:m,value:a,column:d,rowIndx:e.rowIndx,checkEditable:f,allowInvalid:b,focusInvalid:c}),!a.valid&&!a.warn))if(b)k.push({rowData:m,dataIndx:g,column:d});else return a}else{e=e.data?e.data:a.options.dataModel.data;k=[];if(!e)return null;s=0;for(n=e.length;s<n;s++){m=e[s];if(f&&(d=this.getRowIndx({rowData:m}).rowIndx,null==d||!1==a.isEditableRow({rowData:m,rowIndx:d})))continue;m=this.isValid({rowData:m,rowIndx:d,checkEditable:f,allowInvalid:b,focusInvalid:c});
g=m.cells;if(!1===b){if(!m.valid)return m}else g&&g.length&&(k=k.concat(g))}}return b&&k.length?{cells:k,valid:!1}:{valid:!0}};d.isValidChange=function(e){e=e||{};var a=this.getChanges(),a=a.updateList.concat(a.addList);e.data=a;return this.isValid(e)};d.isEditableRow=function(e){var a=this.options.editable;return null!=a?"function"==typeof a?a.call(this,this.normalize(e)):a:!0};d.isEditableCell=function(e){e=this.normalize(e);var a=e.column,b=a.editable;return e.checkVisible&&a.hidden?!1:null!=b?
"function"==typeof b?b.call(this,e):b:!0};d._onContMouseDown=function(e){this.blurEditor({blurIfFocus:!0});if(!1===this._trigger("contMouseDown",e,null))return!1;var a=k(e.target);e=a.closest(".pq-grid-cell,.pq-grid-number-cell");a=a.closest(".pq-grid-row");e.length||a.length||(e=this.$cont[0],e.setAttribute("tabindex",0),e.focus());return!0};d._onCellMouseDown=function(e){var a=k(e.currentTarget),b=this.getCellIndices({$td:a});if(null!=b.rowIndx)return b=this.iMerge.getRootCell(b.rowIndx,b.colIndx,
"o"),b=this.normalize(b),b.$td=a,!1==this._trigger("cellMouseDown",e,b)?!1:!0};d._onRowMouseDown=function(e){var a=k(e.currentTarget),b=this.getRowIndx({$tr:a});b.$tr=a;return!1==this._trigger("rowMouseDown",e,b)?!1:!0};d._onCellMouseEnter=function(e,a){var b=this.options,c=this.getCellIndices({$td:a});if(null!=c.rowIndx&&null!=c.colIndx){if(!1===this._trigger("cellMouseEnter",e,c))return!1;"cell"==b.hoverMode&&this.highlightCell(a);return!0}};d._onRowMouseEnter=function(e,a){var b=this.options,c=
this.getRowIndx({$tr:a}),f=c.rowIndxPage;if(!1===this._trigger("rowMouseEnter",e,c))return!1;"row"==b.hoverMode&&this.highlightRow(f);return!0};d._onCellMouseLeave=function(e,a){"cell"==this.options.hoverMode&&this.unHighlightCell(a);return!0};d._onRowMouseLeave=function(e,a){var b=this.getRowIndx({$tr:a}).rowIndxPage;"row"==this.options.hoverMode&&this.unHighlightRow(b);return!0};d.enableSelection=function(){this.element.removeClass("pq-disable-select").off("selectstart"+this.eventNamespace)};d.disableSelection=
function(){this.element.addClass("pq-disable-select").on("selectstart"+this.eventNamespace,function(e){if(e.target){var a=k(e.target);if(a.is("input,textarea,select")||a.closest(".pq-native-select").length)return!0;e.preventDefault()}})};d._onClickCell=function(e){var a=this.options.editModel,b=k(e.currentTarget),c=this.getCellIndices({$td:b}),c=this.iMerge.getRootCell(c.rowIndx,c.colIndx,"o"),c=this.normalize(c),f=c.rowIndx,g=c.colIndx;c.$td=b;c.evt=e;if(!1==this._trigger("cellClick",e,c))return!1;
null==g||0>g||1==a.clicksToEdit&&this.isEditableRow({rowIndx:f})&&this.isEditableCell({colIndx:g,rowIndx:f})&&this.editCell(c)};d._onRightClickCell=function(e){var a=k(e.currentTarget),b=this.getCellIndices({$td:a}),c=b.rowIndxPage,f=c+this.rowIndxOffset,b=b.colIndx,g=this.colModel;if(null!=b&&(g=g[b],!1==this._trigger("cellRightClick",e,{$td:a,rowIndxPage:c,rowIndx:f,colIndx:b,dataIndx:g.dataIndx,column:g,rowData:this.pdata[c]})))return!1};d.highlightCell=function(e){e.addClass("pq-grid-cell-hover ui-state-hover")};
d.unHighlightCell=function(e){e.removeClass("pq-grid-cell-hover ui-state-hover")};d.highlightRow=function(e){isNaN(e)||(e=this.getRow({rowIndxPage:e}))&&e.addClass("pq-grid-row-hover ui-state-hover")};d.unHighlightRow=function(e){isNaN(e)||(e=this.getRow({rowIndxPage:e}))&&e.removeClass("pq-grid-row-hover ui-state-hover")};d._getCreateEventData=function(){return{dataModel:this.options.dataModel,data:this.pdata,colModel:this.options.colModel}};d._findCellFromEvt=function(e){e=k(e.target).closest(".pq-grid-cell");
if(null==e||0==e.length)return{rowIndxPage:null,colIndx:null,$td:null};var a=this.getCellIndices({$td:e});a.$td=e;return a};d._initPager=function(){var e=this,a=e.options,b=a.pageModel;b.type&&(a={bootstrap:a.bootstrap,change:function(a,l){e.blurEditor({force:!0});var b=e.options.pageModel;void 0!=l.curPage&&(b.prevPage=b.curPage,b.curPage=l.curPage);void 0!=l.rPP&&(b.rPP=l.rPP);"remote"==b.type?e.remoteRequest({callback:function(){e._onDataAvailable({apply:!0,header:!1})}}):e.refreshView({header:!1,
source:"pager"})},refresh:function(a){e.refreshDataAndView()}},a=k.extend(a,b),this.pagerW=pq.pager(b.appendTo?b.appendTo:this.$footer,a))};d.generateLoading=function(){this.$loading&&this.$loading.remove();this.$loading=k("<div class='pq-loading'></div>").appendTo(this.element);k(["<div class='pq-loading-bg'></div><div class='pq-loading-mask ui-state-highlight'><div>",this.options.strLoading,"...</div></div>"].join("")).appendTo(this.$loading);this.$loading.find("div.pq-loading-bg").css("opacity",
.2)};d._refreshLoadingString=function(){this.$loading.find("div.pq-loading-mask").children("div").html(this.options.strLoading)};d.showLoading=function(){null==this.showLoadingCounter&&(this.showLoadingCounter=0);this.showLoadingCounter++;this.$loading.show()};d.hideLoading=function(){0<this.showLoadingCounter&&this.showLoadingCounter--;this.showLoadingCounter||this.$loading.hide()};d.refreshDataFromDataModel=function(e){e=e||{};var a=this.options,b=a.pageModel,c=a.dataModel.data,f;f=b.type;var g,
d=this._queueATriggers,m;for(m in d){var k=d[m];delete d[m];this._trigger(m,k.evt,k.ui)}this._trigger("beforeRefreshData",null,{});"local"==f?(a=b.totalRecords=c.length,b.totalPages=a=Math.ceil(a/b.rPP),b.curPage>a&&(b.curPage=a),a&&!b.curPage&&(b.curPage=1),a=(b.curPage-1)*b.rPP,a=0<=a?a:0,f=b.curPage*b.rPP,f>c.length&&(f=c.length),this.pdata=c.slice(a,f),g=a):"remote"==f?(b.totalPages=a=Math.ceil(b.totalRecords/b.rPP),b.curPage>a&&(b.curPage=a),a&&!b.curPage&&(b.curPage=1),f=b.rPP,f>c.length&&(f=
c.length),this.pdata=c.slice(0,f),g=b.rPP*(b.curPage-1)):this.pdata=a.backwardCompat?c.slice(0):c;this.rowIndxOffset=0<=g?g:0;this._trigger("dataReady",null,{source:e.source})};d.getQueryStringCRUD=function(){return""};d.remoteRequest=function(e){this.loading&&this.xhr.abort();e=e||{};var a=this,b="",c="",f=this.options,g=!1,d=this.colModel,m=f.dataModel,h=f.sortModel,u=f.filterModel,s=f.pageModel;if("function"==typeof m.getUrl)(d=m.getUrl.call(this,{colModel:d,dataModel:m,sortModel:h,groupModel:f.groupModel,
pageModel:s,filterModel:u}))&&d.url&&(b=d.url),d&&d.data&&(c=d.data);else if("string"==typeof m.url){var b=m.url,c={},f={},n={};"remote"==h.type&&(e.initBySort||this.sort({initByRemote:!0}),(h=this.iSort.getQueryStringSort())&&(c={pq_sort:h}));"remote"==s.type&&(n={pq_curpage:s.curPage,pq_rpp:s.rPP});"local"!=u.type&&(u=this.iFilterData.getQueryStringFilter())&&(g=!0,f={pq_filter:u});u=m.postData;s=m.postDataOnce;u&&"function"==typeof u&&(u=u.call(this,{colModel:d,dataModel:m}));c=k.extend({pq_datatype:m.dataType},
f,n,c,u,s)}b&&(this.loading=!0,this.showLoading(),this.xhr=k.ajax({url:b,dataType:m.dataType,async:null==m.async?!0:m.async,cache:m.cache,contentType:m.contentType,type:m.method,data:c,beforeSend:function(e,b){if("function"==typeof m.beforeSend)return m.beforeSend.call(a,e,b)},success:function(b,c,f){a.onRemoteSuccess(b,c,f,g,e)},error:function(e,b,c){a.hideLoading();a.loading=!1;if("function"==typeof m.error)m.error.call(a,e,b,c);else if("abort"!=c)throw"Error : "+c;}}))};d.onRemoteSuccess=function(e,
a,b,c,f){var g=this.options,d=this.colModel,m=g.pageModel,g=g.dataModel;e="function"==typeof g.getData?g.getData.call(this,e,a,b):e;g.data=e.data;"remote"==m.type&&(null!=e.curPage&&(m.curPage=e.curPage),null!=e.totalRecords&&(m.totalRecords=e.totalRecords));this.hideLoading();this.loading=!1;this._trigger("load",null,{dataModel:g,colModel:d});c&&(this._queueATriggers.filter={ui:{}});f.callback&&f.callback()};d._refreshTitle=function(){this.$title.html(this.options.title)};d._destroyDraggable=function(){var e=
this.element,a=e.parent(".pq-wrapper");a.length&&a.data("draggable")&&(a.draggable("destroy"),this.$title.removeClass("pq-draggable pq-no-capture"),e.unwrap(".pq-wrapper"))};d._refreshDraggable=function(){var e=this.element,a=this.$title;this.options.draggable?(a.addClass("pq-draggable pq-no-capture"),e.parent(".pq-wrapper").length||e.wrap("<div class='pq-wrapper' />"),e.parent(".pq-wrapper").draggable({handle:a})):this._destroyDraggable()};d._refreshResizable=function(){var e=this,a=this.element,
b=this.options,c=-1<(b.width+"").indexOf("%"),f=-1<(b.height+"").indexOf("%"),g="auto"==b.width,d="flex"==b.width,m="flex"==b.height;if(!b.resizable||(m||f)&&(d||c||g))this._destroyResizable();else{var h="e,s,se";if(m||f)h="e";else if(d||c||g)h="s";c=!0;a.hasClass("ui-resizable")&&(f=a.resizable("option","handles"),h==f?c=!1:this._destroyResizable());c&&a.resizable({helper:"ui-state-default",handles:h,minWidth:b.minWidth,minHeight:b.minHeight?b.minHeight:100,delay:0,start:function(e,a){k(a.helper).css({opacity:.5,
background:"#ccc",border:"1px solid steelblue"})},resize:function(e,a){},stop:function(a,l){var c=e.element,f=c[0],g=b.width,d=b.height,m=-1<(g+"").indexOf("%"),B=-1<(d+"").indexOf("%"),v=!1;f.style.width=f.offsetWidth+3+"px";f.style.height=f.offsetHeight+3+"px";B||"flex"==d||(v=!0,b.height=f.offsetHeight);m||"auto"==g||"flex"==g||(v=!0,b.width=f.offsetWidth);e.refresh();c.css("position","relative");v&&k(window).trigger("resize")}})}};d._refreshAfterResize=function(){var e=this.options,a=e.width,
b=e.height,e=-1!=(a+"").indexOf("%")?!0:!1,a="auto"===a,b=-1!=(b+"").indexOf("%")?!0:!1;(e||a||b)&&this.refresh()};d.refresh=function(e){this.iRefresh.refresh(e)};d.refreshView=function(e){null!=this.options.editModel.indices&&this.blurEditor({force:!0});this.refreshDataFromDataModel(e);this.refresh(e)};d._refreshPager=function(){var e=this.options,a=e.pageModel,b=a.rPP,c=a.totalRecords;a.type?(a=e.pageModel,this.pagerW||this._initPager(),this.pagerW.option(a),c>b?this.$bottom.css("display",""):e.showBottom||
this.$bottom.css("display","none")):(this.pagerW&&(this.pagerW.destroy(),this.pagerW=null),e.showBottom?this.$bottom.css("display",""):this.$bottom.css("display","none"))};d.getInstance=function(){return{grid:this}};d.refreshDataAndView=function(e){if("remote"==this.options.dataModel.location){var a=this;this.remoteRequest({callback:function(){a._onDataAvailable(e)}})}else this._onDataAvailable(e)};d.getColIndx=function(e){var a=e.dataIndx;e=e.column;var b;if(e)b=!0;else if(void 0===a)throw"dataIndx / column NA";
var c=this.colModel,f=c.length;if(b)for(a=0;a<f;a++){if(c[a]==e)return a}else if(a=this.colIndxs[a],null!=a)return a;return-1};d.getColumn=function(e){if(null==e.dataIndx)throw"dataIndx N/A";return this.columns[e.dataIndx]};d._generateCellRowOutline=function(){var e=this.options,a=e.editModel;if(this.$div_focus){if(e.debug)throw"this.$div_focus already present assert failed";}else e=this.element,a.inline&&(e=this.getCell(a.indices),e.css("padding",0).empty()),this.$div_focus=k("<div class='pq-editor-outer'><div class='pq-editor-inner'></div></div>").appendTo(e),
a=k.extend({all:!0},a.indices),a=this.getCell(a),a.css("height",a[0].offsetHeight),a.empty(),this.refreshEditorPos()};d._removeEditOutline=function(e){if(this.$div_focus){e=this.$div_focus.find(".pq-editor-focus");e.hasClass("hasDatepicker")&&e.datepicker("hide").datepicker("destroy");if(e[0]==document.activeElement){var a=this._blurEditMode;this._blurEditMode=!0;e.blur();this._blurEditMode=a}this.$div_focus.remove();delete this.$div_focus;e=this.options.editModel;a=k.extend({},e.indices);e.indices=
null;a.rowData=void 0;this.refreshCell(a)}};d.refreshEditorPos=function(){var e=this.options.editModel,a=e.cellBorderWidth,b=this.$div_focus,c=this.getCell(e.indices);if(!c||!c.length)return!1;var e=c[0].offsetWidth,f=c[0].offsetHeight,g=this.element.offset(),c=c.offset();b.css({height:f,width:e-1,borderWidth:a,left:c.left-g.left-1,top:c.top-g.top-1})};d.setEditorPosTimer=function(){var e=this,a=this.options;this._refreshEditorPosTimer&&(window.clearInterval(this._refreshEditorPosTimer),this._refreshEditorPosTimer=
null);this._refreshEditorPosTimer=window.setInterval(function(){a.editModel.indices&&e.refreshEditorPos()},200)};d.get$Tbl=function(e,a){var b=this.$tbl,c=[];if(b&&b.length){var f=this.pqpanes,g=this.options,d=g.freezeRows,g=g.freezeCols;f.h&&f.v?null==a?e>=d?c.push(b[2],b[3]):c.push(b[0],b[1]):c=a>=g&&e>=d?b[3]:a<g&&e>=d?b[2]:a>=g&&e<d?b[1]:b[0]:c=f.v?null==a?b:a>=g?b[1]:b[0]:f.h?e>=d?b[1]:b[0]:b[0];if(c)return k(c)}};d.scrollCell=function(e){this.scrollRow(e);this.scrollColumn(e)};d.scrollY=function(e){this.vscroll.option("cur_pos",
e);this.vscroll.scroll()};d.scrollRow=function(e){var a=this.options;e=this.normalize(e);var b=e.rowIndxPage,c=e.rowData;if(!this.pdata||b>=this.pdata.length||!c||c.pq_hidden)return!1;a.virtualY?this._scrollRowVirtual(e):this.iMouseSelection.scrollRowNonVirtual(e)};d._scrollRowVirtual=function(e){var a=this.options,b=e.rowIndxPage,c=this.iHierarchy?!0:!1,f=e.rowIndx;e=this.vscroll;var g=this.scrollCurPos,b=null==b?f-this.rowIndxOffset:b,f=parseInt(a.freezeRows);if(!(b<f)&&(a=this._calcCurPosFromRowIndxPage(b),
null!=a)){a<g&&(e.option("cur_pos",a),e.scroll());var d=this.get$Tbl(b);if(!d||!d.length)return null;var m=d.children("tbody").children("tr[pq-row-indx="+b+"]"),k=b=m.last();1<m.length&&(k=m.first());var h=b[0],m=parseInt(d.css("marginTop"));if(void 0==h)e.option("cur_pos",a),e.scroll();else{var h=h.offsetTop+h.offsetHeight,s=this.iRefresh.getEContHt(),n=this._getSBHeight(),k=k.prev("tr");if(!k.hasClass("pq-row-hidden")&&!k.hasClass("pq-last-frozen-row")&&h>s-m){k=h-(s-n-m);m=d.children().children("tr");
h=d=0;f?(f=m.filter("tr.pq-last-frozen-row").last().next(),0==f.length&&(f=m.filter("tr.pq-row-hidden").next())):f=m.filter("tr.pq-row-hidden").next();do{if(!f.length)break;d+=f[0].offsetHeight;if(f[0]==b[0])break;else if(c&&!1!=f.hasClass("pq-detail-child")||h++,d>=k)break;f=f.next()}while(1);c=g+h;c>a&&(c=a);g=e.option("num_eles");g<c+1&&(g=c+1);e.option({num_eles:g,cur_pos:c});e.scroll()}}}};d.blurEditor=function(e){if(this.$div_focus){var a=this.$div_focus.find(".pq-editor-focus");if(e&&e.blurIfFocus)document.activeElement==
a[0]&&a.blur();else return a.triggerHandler("blur",e)}};d._scrollColumnVirtual=function(e){var a=e.colIndx,b=this.hscroll,a=null==a?this.colIndxs[e.dataIndx]:a;e=this.options.freezeCols;var c=this._calcRightEdgeCol(a).width,f=this.iRefresh.getEContWd();if(c>f){for(var c=this.calcWidthCols(-1,a+1)-f,f=this.colModel,g=f.length,d=0,m=0,k=e;k<g;k++){var h=f[k];h.hidden||(d+=h.outerWidth);if(k==a){m=k-e-this._calcNumHiddenUnFrozens(k);break}else if(d>=c){m=k-e-this._calcNumHiddenUnFrozens(k)+1;break}}b.option("cur_pos",
m);b.scroll();return!0}return a>=e&&a<this.initH?(a=a-e-this._calcNumHiddenUnFrozens(a),b.option("cur_pos",a),b.scroll(),!0):!1};d.scrollColumn=function(e){var a=this.options;return"flex"!==a.width||a.maxWidth?a.virtualX?this._scrollColumnVirtual(e):this.iMouseSelection.scrollColumnNonVirtual(e):!1};d.selection=function(e){if(e){var a=e.method,b,c=e.type;"row"==c?b=this.iRows[a](e):"cell"==c&&(b=this.iCells[a](e));if("add"==a||"remove"==a||"removeAll"==a)this.iSelection.dirty=!0,this.iSelection._trigger();
return b}e=this.iSelection;e.isDirty()&&e.refresh();return e};d.goToPage=function(e){var a=this.options.pageModel;if("local"==a.type||"remote"==a.type){var b=e.rowIndx,c=a.rPP;e=null==e.page?Math.ceil((b+1)/c):e.page;e!=a.curPage&&(a.curPage=e,"local"==a.type?this.refreshView():this.refreshDataAndView())}};d.setSelection=function(e){if(null==e)return this.iSelection.removeAll(),!0;var a=this.pdata;if(!a||!a.length)return!1;e=this.normalize(e);var a=e.rowIndx,b=e.rowIndxPage,c=e.colIndx;e.rowData&&
null==a&&(b=this.getRowIndx(e),e.rowIndx=a=b.rowIndx,e.rowIndxPage=b.rowIndxPage);if(null==a||0>a||0>c||c>=this.colModel.length)return!1;this.goToPage(e);b=a-this.rowIndxOffset;this.scrollRow({rowIndxPage:b});null==c?this.range({r1:a}).select():(this.scrollColumn({colIndx:c}),this.range({r1:a,c1:c}).select());!1!==e.focus&&this.focus({rowIndxPage:b,colIndx:null==c?this.getFirstVisibleCI():c})};d.getColModel=function(){return this.colModel};d.saveEditCell=function(e){var a=this.options,b=a.editModel;
if(!b.indices)return null;var c=k.extend({},b.indices);e=e?e.evt:null;var f=c.rowIndxPage,b=f+this.rowIndxOffset,g=this.colModel[c.colIndx],c=g.dataIndx,d=this.pdata[f],m=a.dataModel,h;if(null==d)return null;if(null!=f){a=this.getEditCellData();if(k.isPlainObject(a)){h={};for(var u in a)h[u]=d[u]}else h=this.readCell(d,g);"<br>"==a&&(a="");null==h&&""===a&&(a=null);u={rowIndx:b,rowIndxPage:f,dataIndx:c,column:g,newVal:a,value:a,oldVal:h,rowData:d,dataModel:m};if(!1===this._trigger("cellBeforeSave",
e,u))return!1;f={};g=!1;k.isPlainObject(a)?(f=a,g=!0):f[c]=a;if(!1===this.updateRow({row:f,rowIndx:b,refresh:g,silent:!0,source:"edit",checkEditable:!1}))return!1;this._trigger("cellSave",e,u);return!0}};d._addInvalid=function(e){};d._digestData=function(e){if(!1===this._trigger("beforeValidate",null,e))return!1;var a=this.options,b=a.editModel,c=a.dataModel,f=c.data,g=a.colModel,d=a.pageModel,m=a.historyModel,k=e.validate,k=null==k?b.validate:k,h="remote"==d.type,s=e.allowInvalid,s=null==s?b.allowInvalid:
s,n=a.trackModel,b=e.track,b=null==b?null==a.track?n.on:a.track:b,z=e.history,z=null==z?m.on:z,x=this.iHistory,m=this.iUCData,A=e.checkEditable,A=null==A?!0:A,C=e.checkEditableAdd,C=null==C?A:C,n=this.saveCell,D=this.columns,E=this.colIndxs,G=e.source,O=this.rowIndxOffset,J=this.getValueFromDataType,M=e.rowList,I=M.length;f||(f=a.dataModel.data=[]);for(var F=[],L=0;L<I;L++){var H=M[L],K=H.newRow,S=H.rowData,N=H.type,U=H.checkEditable,P=H.rowIndx,V=H.oldRow;null==U&&("update"==N?U=A:"add"==N&&(U=C));
if("update"==N){if(!V)throw"oldRow required while update";if(U&&!0!==a.editable&&!1===this.isEditableRow({rowIndx:P,rowData:S}))continue}else if("delete"==N){F.push(H);continue}if("add"==N)for(var T=0,W=g.length;T<W;T++){var R=g[T],Q=R.dataIndx;K[Q]=K[Q]}for(Q in K)if(R=D[Q],T=E[Q],R)if(U&&null!=R.editable&&!1===this.isEditableCell({rowIndx:P,colIndx:T,dataIndx:Q}))delete K[Q],V&&delete V[Q];else{var X=R.dataType,T=J(K[Q],X),W=V?V[Q]:void 0,W=void 0!==W?J(W,X):void 0;K[Q]=T;if(k&&R.validations)if("edit"==
G&&!1===s){if(R=this.isValid({focusInvalid:!0,dataIndx:Q,rowIndx:P,value:T}),!1==R.valid&&!R.warn)return!1}else R=this.iIsValid.isValidCell({column:R,rowData:"add"==N?K:S,allowInvalid:s,value:T}),!1===R.valid&&(!1!==s||R.warn||delete K[Q]);"update"==N&&T===W&&(delete K[Q],V&&delete V[Q])}if(K)if("update"==N)for(Q in K){F.push(H);break}else F.push(H)}M=e.rowList=F;I=M.length;if(!I)return"edit"==G?null:!1;z&&(x.increment(),x.push({rowList:M}));for(L=0;L<I;L++)if(H=M[L],N=H.type,K=H.newRow,P=H.rowIndx,
a=H.rowIndxPage,S=H.rowData,"update"==N)for(Q in b&&m.update({rowData:S,row:K,refresh:!1}),K)R=D[Q],T=K[Q],n(S,R,T);else if("add"==N)b&&m.add({rowData:K}),null==P&&null==a?f.push(K):(a=P-O,a=h?a:P,f.splice(a,0,K)),h&&d.totalRecords++;else if("delete"==N){a=this.getRowIndx({rowData:S,dataUF:!0});g=a.uf;P=a.rowIndx;if(b)m["delete"]({rowIndx:P,rowData:S});a=P-O;a=h?a:P;g?c.dataUF.splice(P,1):(a=f.splice(a,1))&&a.length&&h&&d.totalRecords--}this._trigger("change",null,e);return!0};d.refreshColumn=function(e){e=
this.normalize(e);var a=this.initV,b=this.finalV,c=this.options.freezeRows,f=e.colIndx,g=e.dataIndx,d=e.column;e.skip=!0;for(var m=0;m<=b;m++)m<a&&m>=c&&(m=a),e.rowIndxPage=m,this.refreshCell(e);this._trigger("refreshColumn",null,{column:d,colIndx:f,dataIndx:g});this.iRefresh.softRefresh()};d.refreshCell=function(e){e=this.normalize(e);if(this.pdata){var a=e.skip,b=e.rowIndx,c=e.rowIndxPage,f=e.colIndx,g=this.iMerge;if(e.rowData){var d=this.getCell({all:!0,rowIndxPage:c,colIndx:f});if(d&&0<d.length){var m=
e;g.ismergedCell(b,f)&&(m=g.getRootCell(b,f,"a"));var b=this.iGenerateView.renderCell(m),k;b&&(d.replaceWith(b),(k=this._focusElement)&&k.rowIndxPage==c&&this.focus(),a||(this._trigger("refreshCell",null,e),this.iRefresh.softRefresh()))}}}};d.refreshRow=function(e){e=this.normalize(e);if(this.pdata){var a=e.rowIndx,b=e.rowIndxPage,c=this.options,f=c.freezeRows,g=e.rowData;if(!g||g.pq_hidden||b>this.finalV||b<this.initV&&b>=f)return null;var d=this.getRow({all:!0,rowIndxPage:b}),m,h=[];this.iGenerateView.refreshRow(b,
h);h=h.join("");if(d&&d.length)d.replaceWith(h);else if(c.virtualY)if(b==this.finalV)this.$tbl.append(h);else if(b==this.initV)for(c=this.$tbl,d=0;d<c.length;d++)k(c[d]).children("tbody").children(f?".pq-last-frozen-row":"tr:first").after(h);else throw"refreshRow > rip not found";else return!1;(m=this._focusElement)&&m.rowIndxPage==b&&this.focus();this._trigger("refreshRow",null,{rowData:g,rowIndx:a,rowIndxPage:b});!1!==e.refresh&&this.iRefresh.softRefresh();return!0}};d.quitEditMode=function(e){if(!this._quitEditMode){var a=
!1,b=!1,c=!1,f=this.options.editModel,g=f.indices,d=void 0;this._quitEditMode=!0;e&&(a=e.old,b=e.silent,c=e.fireOnly,d=e.evt);g&&(b||a||this._trigger("editorEnd",d,g),c||(this._removeEditOutline(e),f.indices=null));this._quitEditMode=null}};d.getViewPortRowsIndx=function(){return{beginIndx:this.initV,endIndx:this.finalV}};d.getViewPortIndx=function(){return{initV:this.initV,finalV:this.finalV,initH:this.initH,finalH:this.finalH}};d.getRowIndxOffset=function(){return this.rowIndxOffset};d.getEditCell=
function(){var e=this.options.editModel;if(e.indices){var e=this.getCell(e.indices),a=this.$div_focus.children(".pq-editor-inner"),b=a.find(".pq-editor-focus");return{$td:e,$cell:a,$editor:b}}return{}};d.editCell=function(e){e=this.normalize(e);var a=this.iMerge,b=e.rowIndx,c=e.colIndx;if(a.ismergedCell(b,c)&&(a=a.getRootCell(b,c,"o"),a.rowIndx!=e.rowIndx||a.colIndx!=e.colIndx))return!1;this.scrollRow(e);this.scrollColumn(e);if((a=this.getCell(e))&&a.length)return this._editCell(e)};d.getFirstEditableColIndx=
function(e){if(null==e.rowIndx)throw"rowIndx NA";if(!this.isEditableRow(e))return-1;for(var a=this.colModel,b=0;b<a.length;b++)if(e.colIndx=b,this.isEditableCell(e)&&!a[b].hidden)return b;return-1};d.editFirstCellInRow=function(e){var a=this.rowIndxOffset,b=e.rowIndx;e=e.rowIndxPage;b=null==b?e+a:b;e=null==e?b-a:e;a=this.getFirstEditableColIndx({rowIndx:b});-1!=a&&this.editCell({rowIndxPage:e,colIndx:a})};d._editCell=function(a){var b=this.normalize(a),f=this;a=b.evt;var g=b.rowIndxPage,d=b.colIndx,
m=f.pdata;if(!m||g>=m.length)return!1;var h=this.options,q=h.editModel,m=m[g],p=b.rowIndx,u=this.colModel[d],s=u.dataIndx,n=f.readCell(m,u),z={rowIndx:p,rowIndxPage:g,cellData:n,rowData:m,dataIndx:s,colIndx:d,column:u},x=u.editor,x="function"==typeof x?x.call(this,z):x;void 0===x&&"function"==typeof h.geditor&&(x=h.geditor.call(this,z));if(!1!==x){x&&x.getData&&(q._getData=x.getData);var A=h.editor,C=x?k.extend({},A,x):A,h=!1;if(q.indices){x=q.indices;if(x.rowIndxPage==g&&x.colIndx==d){this.refreshEditorPos();
var D=this.$div_focus.find(".pq-editor-focus");window.setTimeout(function(){D.focus()},0);return!1}if(!1===this.blurEditor({evt:a}))return!1;this.quitEditMode({evt:a})}q.indices={rowIndxPage:g,rowIndx:p,colIndx:d,column:u,dataIndx:s};this._generateCellRowOutline();x=this.$div_focus.children(".pq-editor-inner");"right"==u.align?x.addClass("pq-align-right"):"center"==u.align?x.addClass("pq-align-center"):x.addClass("pq-align-left");z.$cell=x;var E,G=C.type,b=null==b.select?C.select:b.select,O=C.init,
J=C.valueIndx,M=C.dataMap,I=C.mapIndices,I=I?I:{},F=C.cls||"",F="function"===typeof F?F.call(this,z):F;E="pq-editor-focus "+F;var F=E+" pq-cell-editor ",L=C.attr||"",L="function"===typeof L?L.call(this,z):L,H=C.style||"",H=(H="function"===typeof H?H.call(this,z):H)?"style='"+H+"'":"";z.cls=E;z.attr=L;"function"==typeof G&&(E=G.call(this,z))&&(G=E);A._type=G;"checkbox"==G?(C=C.subtype,x.html("<input "+(n?"checked='checked'":"")+" class='"+F+"' "+L+" "+H+" type=checkbox name='"+s+"' />"),A=x.children("input"),
"triple"==C&&(A.pqval({val:n}),x.click(function(a){k(this).children("input").pqval({incr:!0})}))):"textarea"==G||"select"==G||"textbox"==G?("textarea"==G?E="<textarea class='"+F+"' "+L+" "+H+" name='"+s+"' ></textarea>":"select"==G?(A=C.options||[],"function"===typeof A&&(A=A.call(this,z)),F=[L," class='",F,"' ",H," name='",s,"'"].join(""),E=c.select({options:A,attr:F,prepend:C.prepend,labelIndx:C.labelIndx,valueIndx:J,groupIndx:C.groupIndx,dataMap:M})):E="<input class='"+F+"' "+L+" "+H+" type=text name='"+
s+"' />",k(E).appendTo(x).val("select"==G&&null!=J&&(I[J]||this.columns[J])?I[J]?m[I[J]]:m[J]:n)):G&&"contenteditable"!=G||(x.html("<div contenteditable='true' tabindx='0' "+H+" "+L+" class='"+F+"'></div>"),x.children().html(n),h=!0);"function"==typeof O&&O.call(this,z);var f=this,D=x.children(".pq-editor-focus"),K=q.filterKeys;(n=u.editModel)&&void 0!==n.filterKeys&&(K=n.filterKeys);var S={$cell:x,$editor:D,dataIndx:s,column:u,colIndx:d,rowIndx:p,rowIndxPage:g,rowData:m};q.indices=S;D.data({FK:K}).on("click",
function(a){k(this).focus()}).on("keydown",function(a){f.iKeyNav._keyDownInEdit(a)}).on("keypress",function(a){return f.iKeyNav._keyPressInEdit(a,{FK:K})}).on("keyup",function(a){return f.iKeyNav._keyUpInEdit(a,{FK:K})}).on("blur",function(a,e){var b=f.options.editModel,c=b.onBlur,l="save"==c,g="validate"==c,d=b.cancelBlurCls,m=e?e.force:!1;if(!f._quitEditMode&&!f._blurEditMode&&b.indices){b=k(a.target);if(!m){if(!1===f._trigger("editorBlur",a,S)||!c||d&&b.hasClass(d))return;if(b.hasClass("hasDatepicker")){if(b.datepicker("widget").is(":visible"))return!1}else if(b.hasClass("ui-autocomplete-input")){if(b.autocomplete("widget").is(":visible"))return}else if(b.hasClass("ui-multiselect")){if(k(".ui-multiselect-menu").is(":visible")||
k(document.activeElement).closest(".ui-multiselect-menu").length)return}else if(b.hasClass("pq-select-button")&&(k(".pq-select-menu").is(":visible")||k(document.activeElement).closest(".pq-select-menu").length))return}f._blurEditMode=!0;if(!f.saveEditCell({evt:a,silent:m||l||!g})&&!m&&g)return f._deleteBlurEditMode(),!1;f.quitEditMode({evt:a});f._deleteBlurEditMode()}}).on("focus",function(a){f._trigger("editorFocus",a,S)});f._trigger("editorBegin",a,S);D.focus();window.setTimeout(function(){!1===
k(document.activeElement).hasClass("pq-editor-focus")&&(f.element?f.element.find(".pq-editor-focus"):k()).focus()},0);if(b)if(h)try{var N=D[0],U=document.createRange();U.selectNodeContents(N);var P=window.getSelection();P.removeAllRanges();P.addRange(U)}catch(V){}else D.select()}};d._deleteBlurEditMode=function(a){var b=this;a=a?a:{};b._blurEditMode&&(a.timer?window.setTimeout(function(){delete b._blurEditMode},0):delete b._blurEditMode)};d.getRow=function(a){var b=this.normalize(a);a=b.rowIndxPage;
var b=b.all?this.$tbl:this.get$Tbl(a),c=k();if(b&&b.length){var f=b.children("tbody");null!=a&&(c=f.children("tr[pq-row-indx="+a+"]"),c.length>b.length&&(c=c.filter(".pq-detail-master")))}return c};d.getCell=function(a){var b=a.all,c=this.options,f=this.normalize(a);a=f.rowIndxPage;var g=f.rowIndx,d=f.colIndx,m=this.iMerge;if(m.ismergedCell(g,d)){c=m.getRootCell(g,d,"a");g=m.getRootCell(g,d,"o");if(!(a===g.rowIndxPage&&d===g.colIndx||a===c.rowIndxPage&&d===c.colIndx))return k();a=c.rowIndxPage;d=
g.colIndx}else if(a>=c.freezeRows&&(a<this.initV||a>this.finalV)||d>=c.freezeCols&&(d<this.initH||d>this.finalH)||!f.rowData||!f.column||f.rowData.pq_hidden||f.column.hidden)return k();return(b=b?this.$tbl:this.get$Tbl(a,d))&&b.length?b.children().children("tr[pq-row-indx="+a+"]").children("[pq-col-indx="+d+"]"):k()};d.getCellHeader=function(a){var b=a.colIndx;a=a.dataIndx;b=null==b?this.colIndxs[a]:b;a=this.$tbl_header;var c=this.options.freezeCols;return a?(1<a.length&&(a=b>=c?k(a[1]):k(a[0])),
b=a.find("[pq-col-indx="+b+"].pq-grid-col-leaf")):k()};d.getEditorIndices=function(){var a=this.options.editModel.indices;return a?k.extend({},a):null};d.getEditCellData=function(){var a=this.options,b=a.editModel,c=b.indices;if(!c)return null;var f=c.colIndx,g=c.rowIndxPage,d=c.rowIndx,m=this.colModel[f],h=m.editor,p=a.editor,a=h?k.extend({},p,h):p,u=a.valueIndx,s=a.labelIndx,h=(h=a.mapIndices)?h:{},n=m.dataIndx,z=this.$div_focus.children(".pq-editor-inner"),x,A=b._getData||a.getData;b._getData=
void 0;if("function"==typeof A)x=A.call(this,{$cell:z,rowData:c.rowData,dataIndx:n,rowIndx:d,rowIndxPage:g,column:m,colIndx:f});else if(b=p._type,"checkbox"==b)x=z.children(),x="triple"==a.subtype?x.pqval():x.is(":checked")?!0:!1;else if("contenteditable"==b)x=z.children().html();else if((c=z.find('*[name="'+n+'"]'))&&c.length)if("select"==b&&null!=u)if(h[u]||this.columns[u]){if(x={},x[h[u]?h[u]:u]=c.val(),x[h[s]?h[s]:s]=c.find("option:selected").text(),a=a.dataMap)if(b=c.find("option:selected").data("map"))for(c=
0;c<a.length;c++)f=a[c],x[h[f]?h[f]:f]=b[f]}else x=c.val();else x=c.val();else(c=z.find(".pq-editor-focus"))&&c.length&&(x=c.val());return x};d.getCellIndices=function(a){a=a.$td;if(null==a||0==a.length||a.closest(".pq-grid")[0]!=this.element[0])return{};var b=a.parent("tr").attr("pq-row-indx"),c;null!=b&&(b=parseInt(b),c=b+this.rowIndxOffset);a=a.attr("pq-col-indx");null!=a&&(a=parseInt(a));return this.iMerge.getRootCell(c,a,"o")};d.getRowsByClass=function(a){var b=this.options,c="remote"==b.pageModel.type,
f=this.rowIndxOffset,b=b.dataModel.data,g=[];if(null==b)return g;for(var d=0,m=b.length;d<m;d++){var k=b[d];if(k.pq_rowcls&&(a.rowData=k,this.hasClass(a))){var k={rowData:k},h=c?d+f:d,u=h-f;k.rowIndx=h;k.rowIndxPage=u;g.push(k)}}return g};d.getCellsByClass=function(a){var b=this.options,c="remote"==b.pageModel.type,f=this.rowIndxOffset,b=b.dataModel.data,g=[];if(null==b)return g;for(var d=0,m=b.length;d<m;d++){var k=b[d],h=c?d+f:d,u=k.pq_cellcls;if(u)for(var s in u)u={rowData:k,rowIndx:h,dataIndx:s,
cls:a.cls},this.hasClass(u)&&(u=this.normalize(u),g.push(u))}return g};d.data=function(a){var b=a.dataIndx,c=a.colIndx,b=null!=c?this.colModel[c].dataIndx:b,c=a.data,f=null==c||"string"==typeof c?!0:!1;a=a.rowData||this.getRowData(a);if(!a)return{data:null};if(null==b){b=a.pq_rowdata;if(f){var g;null!=b&&(g=null==c?b:b[c]);return{data:g}}c=k.extend(!0,a.pq_rowdata,c);a.pq_rowdata=c}else{var d=a.pq_celldata;if(f)return null!=d&&(b=d[b],g=null==c||null==b?b:b[c]),{data:g};d||(a.pq_celldata={});c=k.extend(!0,
a.pq_celldata[b],c);a.pq_celldata[b]=c}};d.attr=function(a){var b=a.rowIndx,c=a.dataIndx,f=a.colIndx,c=null!=f?this.colModel[f].dataIndx:c,f=a.attr,g=null==f||"string"==typeof f?!0:!1,d=this.rowIndxOffset,h=a.refresh;a=a.rowData||this.getRowData(a);if(!a)return{attr:null};g||!1===h||null!=b||(b=this.getRowIndx({rowData:a}).rowIndx);if(null==c){c=a.pq_rowattr;if(g){var q;null!=c&&(q=null==f?c:c[f]);return{attr:q}}f=k.extend(!0,a.pq_rowattr,f);a.pq_rowattr=f;!1!==h&&null!=b&&(b=this.getRow({rowIndxPage:b-
d}))&&(c=m(f),b.attr(c))}else{var p=a.pq_cellattr;if(g)return null!=p&&(b=p[c],q=null==f||null==b?b:b[f]),{attr:q};p||(a.pq_cellattr={});f=k.extend(!0,a.pq_cellattr[c],f);a.pq_cellattr[c]=f;!1!==h&&null!=b&&(b=this.getCell({rowIndxPage:b-d,dataIndx:c}))&&(c=m(f),b.attr(c))}};var m=function(a){var b={},c;for(c in a){var f=a[c];if(f)if("title"==c)f=f.replace(/\"/g,"&quot;"),b[c]=f;else if("style"==c&&"object"==typeof f){var g=[],d,m;for(m in f)(d=f[m])&&g.push(m+":"+d);(f=g.join(";")+(g.length?";":
""))&&(b[c]=f)}else"object"==typeof f&&(f=JSON.stringify(f)),b[c]=f}return b};d.removeData=function(a){var b=a.dataIndx,c=a.colIndx,b=null!=c?this.colModel[c].dataIndx:b,c=a.data,c=null==c?[]:c,c="string"==typeof c?c.split(" "):c,f=c.length,g=a.rowData||this.getRowData(a);if(g)if(null==b){if(b=g.pq_rowdata){if(f)for(a=0;a<f;a++){var d=c[a];delete b[d]}f&&!k.isEmptyObject(b)||delete g.pq_rowdata}}else if((g=g.pq_celldata)&&g[b]){var m=g[b];if(f)for(a=0;a<f;a++)d=c[a],delete m[d];f&&!k.isEmptyObject(m)||
delete g[b]}};d.removeAttr=function(a){var b=a.rowIndx,c=a.dataIndx,f=a.colIndx,c=null!=f?this.colModel[f].dataIndx:c,g=a.attr,g=null==g?[]:g,g="string"==typeof g?g.split(" "):g,d=g.length,f=b-this.rowIndxOffset,m=a.refresh,h=a.rowData||this.getRowData(a);if(h)if(!1!==m&&null==b&&(b=this.getRowIndx({rowData:h}).rowIndx),null==c){if(c=h.pq_rowattr){if(d)for(a=0;a<d;a++){var p=g[a];delete c[p]}else for(p in c)g.push(p);d&&!k.isEmptyObject(c)||delete h.pq_rowattr}!1!==m&&null!=b&&g.length&&(g=g.join(" "),
(b=this.getRow({rowIndxPage:f}))&&b.removeAttr(g))}else{if((h=h.pq_cellattr)&&h[c]){var u=h[c];if(d)for(a=0;a<d;a++)p=g[a],delete u[p];else for(p in u)g.push(p);d&&!k.isEmptyObject(u)||delete h[c]}!1!==m&&null!=b&&g.length&&(g=g.join(" "),(b=this.getCell({rowIndxPage:f,dataIndx:c}))&&b.removeAttr(g))}};d.normalize=function(a){var b={},c;for(c in a)b[c]=a[c];var f=b.rowIndx,g=b.rowIndxPage;a=b.dataIndx;c=b.colIndx;if(null!=g||null!=f){var d=this.rowIndxOffset,f=null==f?parseInt(g,10)+d:f,g=null==g?
parseInt(f,10)-d:g;b.rowIndx=f;b.rowIndxPage=g;b.rowData=b.rowData||this.getRowData(b)}if(null!=c||null!=a)f=this.colModel,a=null==a?f[c]?f[c].dataIndx:void 0:a,c=null==c?this.colIndxs[a]:c,b.column=f[c],b.colIndx=c,b.dataIndx=a;return b};d.addClass=function(a){var b=this.normalize(a),c=b.rowIndxPage,f=b.dataIndx,g=pq.arrayUnique;a=b.cls;var d=b.refresh,m=b.rowData;if(m)if(!1!==d&&null==c&&(c=this.getRowIndx({rowData:m}).rowIndxPage),null==f){var f=m.pq_rowcls,k;k=g((f?f+" "+a:a).split(/\s+/)).join(" ");
m.pq_rowcls=k;!1!==d&&null!=c&&(c=this.getRow({rowIndxPage:c}))&&c.addClass(a)}else{b=[];"function"!=typeof f.push?b.push(f):b=f;var h=m.pq_cellcls;h||(h=m.pq_cellcls={});for(var m=0,u=b.length;m<u;m++)f=b[m],k=(k=h[f])?k+" "+a:a,k=g(k.split(/\s+/)).join(" "),h[f]=k,!1!==d&&null!=c&&(f=this.getCell({rowIndxPage:c,dataIndx:f}))&&f.addClass(a)}};d.removeClass=function(a){var b=this.normalize(a),c=b.rowIndx,f=b.rowData,g=b.dataIndx;a=b.cls;b=b.refresh;if(f){var d=f.pq_cellcls,m=f.pq_rowcls;!1!==b&&null==
c&&(c=this.getRowIndx({rowData:f}).rowIndx);if(null==g)m&&(f.pq_rowcls=this._removeClass(m,a),null!=c&&!1!==b&&(c=this.getRow({rowIndx:c}))&&c.removeClass(a));else if(d){m=[];"function"!=typeof g.push?m.push(g):m=g;for(var k=0,h=m.length;k<h;k++){var g=m[k],u=d[g];u&&(f.pq_cellcls[g]=this._removeClass(u,a),null!=c&&!1!==b&&(g=this.getCell({rowIndx:c,dataIndx:g}))&&g.removeClass(a))}}}};d.hasClass=function(a){var b=a.dataIndx,c=a.cls;a=this.getRowData(a);c=new RegExp("\\b"+c+"\\b");return a?null==
b?(b=a.pq_rowcls)&&c.test(b)?!0:!1:(a=a.pq_cellcls)&&a[b]&&c.test(a[b])?!0:!1:null};d._removeClass=function(a,b){if(a&&b){for(var c=a.split(/\s+/),f=b.split(/\s+/),g=[],d=0,m=c.length;d<m;d++){for(var k=c[d],h=!1,u=0,s=f.length;u<s;u++)if(k===f[u]){h=!0;break}h||g.push(k)}return 1<g.length?g.join(" "):1===g.length?g[0]:null}};d.getRowIndx=function(a){var b=a.$tr,c=a.rowData,f=this.rowIndxOffset;if(c){var g=this.options.dataModel,b=this.get_p_data(),d=!1;a=a.dataUF?g.dataUF:null;g=!1;if(b)for(var m=
0,k=b.length;m<k;m++)if(b[m]==c){g=!0;break}if(!g&&a)for(d=!0,m=0,k=a.length;m<k;m++)if(a[m]==c){g=!0;break}return g?{rowIndxPage:d?void 0:m-f,uf:d,rowIndx:m,rowData:c}:{}}if(null==b||0==b.length)return{};c=b.attr("pq-row-indx");if(null==c)return{};c=parseInt(c);return{rowIndxPage:c,rowIndx:c+f}};d.search=function(a){var b=this.options,c=a.row;a=a.first;for(var f=[],g=this.rowIndxOffset,d="remote"==b.pageModel.type,b=b.dataModel.data,m=0,k=b.length;m<k;m++){var h=b[m],u=!0,s;for(s in c)c[s]!==h[s]&&
(u=!1);if(u&&(h=this.normalize({rowIndx:d?m+g:m}),f.push(h),a))break}return f};var g=function(a){this.options=a.options;this.that=a},f=g.prototype;f._incrRowIndx=function(a,b){var c=this.that,f=a;b=1;for(var c=c.pdata,g=0,d=a+1,m=c.length;d<m&&(c[d].pq_hidden||(g++,f=d,g!=b));d++);return f};f._decrRowIndx=function(a,b){var c=a,f=this.that.pdata;b=1;for(var g=0,d=a-1;0<=d&&(f[d].pq_hidden||(g++,c=d,g!=b));d--);return c};f._decrRowIndx2=function(a,b){var c=this.that,f=a+c.rowIndxOffset,g=c.iMerge,c=
c.pdata;if(g.ismergedCell(f,b)){var d=g.getRootCell(f,b,"a"),f=g.getData(f,b,"proxy_cell");b=d.colIndx;b=f?f.colIndx:b}for(f=a-1;0<=f;f--)if(!c[f].pq_hidden){a=f;break}return{rowIndxPage:a,colIndx:b}};f._incrRowIndx2=function(a,b){var c=this.that,f=a+c.rowIndxOffset,g=c.iMerge,d,c=c.pdata;if(d=g.ismergedCell(f,b)){var m=g.getRootCell(f,b,"a"),f=g.getData(f,b,"proxy_cell");b=m.colIndx;a=d.rowspan?a+d.rowspan-1:0;b=f?f.colIndx:b}f=a+1;for(g=c.length;f<g;f++)if(!c[f].pq_hidden){a=f;break}return{rowIndxPage:a,
colIndx:b}};d.addColumn=function(a){for(var b=a.colList||[{colIndx:a.colIndx,column:a.column}],c=!1!==a.history,f=this.options.colModel,g=0;g<b.length;g++){var d=b[g].colIndx,m=b[g].column;void 0==m.dataIndx&&(m.dataIndx=Math.random());null==d&&(d=b.colIndx=f.length);f.splice(d,0,m)}this.iColModel.init();c&&(this.iHistory.increment(),b.type="add",this.iHistory.push({colList:b}));this._trigger("addColumn",null,{colList:b});!1!==a.refresh&&this.refreshView()};d.deleteColumn=function(a){for(var b=a.colList||
[{colIndx:a.colIndx}],c=!1!==a.history,f=this.options.colModel,g=b.length-1;0<=g;g--){var d=b[g],m=f.splice(d.colIndx,1)[0];d.column=m}this.iColModel.init();c&&(this.iHistory.increment(),b.type="delete",this.iHistory.push({colList:b}));this._trigger("deleteColumn",null,{colList:b});!1!==a.refresh&&this.refreshView()};f._incrIndx=function(a,b,c){var f=this.that,g=f.iMerge,d,m,k,h,u=f.pdata,s=f.rowIndxOffset,n=f[c?"getLastVisibleRIP":"getFirstVisibleRIP"](),z=f.colModel,x=z.length;if(null==b){if(a==
n)return null;a=this[c?"_incrRowIndx":"_decrRowIndx"](a);return{rowIndxPage:a}}do{m=a+s;if(f=g.ismergedCell(m,b))!h&&(d=g.getData(m,b,"proxy_cell"))&&(k=d.rowIndx-s,u[k].pq_hidden||(a=k)),u[a].pq_hidden&&(a=g.getRootCell(m,b).rowIndxPage),!h&&c&&(b+=f&&f.colspan?f.colspan-1:0);b=c?b+1:b-1;if(c&&b>=x||!c&&0>b){if(a==n)return null;a=this[c?"_incrRowIndx":"_decrRowIndx"](a);b=c?0:x-1}h=z[b]}while(h&&h.hidden);return{rowIndxPage:a,colIndx:b}};f._incrEditIndx=function(a,b,c){var f=this.that,g=f.colModel,
d=g.length,m=f.iMerge,k,h=f.rowIndxOffset,u=f[c?"getLastVisibleRIP":"getFirstVisibleRIP"]();do{var s=a+h;if(k=m.ismergedCell(s,b)){if(s=m.getData(s,b,"proxy_edit_cell"))s=s.rowIndx,a=s-h;b=c?b+k.colspan:b-1}else b=c?b+1:b-1;if(c&&b>=d||!c&&0>b){if(a==u)return null;do if(a=this[c?"_incrRowIndx":"_decrRowIndx"](a),b=f.isEditableRow({rowIndxPage:a}),a==u&&!1==b)return null;while(!1==b);b=c?0:d-1}s=a+h;if(k=m.ismergedCell(s,b))a=m.getRootCell(s,b,"o"),m.setData(a.rowIndx,a.colIndx,{proxy_edit_cell:{rowIndx:s,
colIndx:b}}),s=a.rowIndx,b=a.colIndx;k=g[b];var n=f.isEditableCell({rowIndx:s,colIndx:b,checkVisible:!0}),z=k.editor,z="function"==typeof z?z.call(f,f.normalize({rowIndx:s,colIndx:b})):z;a=s-h}while(k&&(k.hidden||!1==n||!1===z));return{rowIndxPage:a,colIndx:b}};f.getMergeCell=function(a,b){var c=this.that,f=c.options,g=c.iMerge,d,m;g.ismergedCell(a,b)&&(m=g.getRootCell(a,b,"o"),g.setData(m.rowIndx,m.colIndx,{proxy_cell:{rowIndx:a,colIndx:b}}),f.virtualY&&(d=g.getRootCell(a,b,"a")));d||(a=this.getVisibleRowIndx(a),
b=this.getVisibleColIndx(b),d=c.normalize({rowIndx:a,colIndx:b}));return d};f.getVisibleRowIndx=function(a){for(var b=this.that,c=b.pdata.length,f=a-b.rowIndxOffset,g=b.getRowData({rowIndx:a});g.pq_hidden&&f<c-1;)f++,a++,g=b.getRowData({rowIndx:a});return a};f.getVisibleColIndx=function(a){for(var b=this.that.colModel,c=b.length,f=b[a];f.hidden&&a<c-1;)a++,f=b[a];return a};d._onKeyPressDown=function(a){if(0<k(a.target).closest(".pq-grid-header").length)return!1==this._trigger("headerKeyDown",a,null)?
!1:!0;if(!1===this.iKeyNav._bodyKeyPressDown(a)||!1==this._trigger("keyDown",a,null))return!1};f._saveAndMove=function(a,b){if(null==a)return b.preventDefault(),!1;var c=this.that,f=a.rowIndxPage,g=a.colIndx;c._blurEditMode=!0;if(!1===c.saveEditCell({evt:b})||!c.pdata)return c.pdata||c.quitEditMode(b),c._deleteBlurEditMode({timer:!0,msg:"_saveAndMove saveEditCell"}),b.preventDefault(),!1;c.quitEditMode(b);if(a.incr)var d=this[a.edit?"_incrEditIndx":"_incrIndx"](f,g,!b.shiftKey),f=d?d.rowIndxPage:
f,g=d?d.colIndx:g;c.scrollRow({rowIndxPage:f});c.scrollColumn({colIndx:g});this.select({rowIndx:f+c.rowIndxOffset,colIndx:g,evt:b});a.edit&&c._editCell({rowIndxPage:f,colIndx:g});c._deleteBlurEditMode({timer:!0,msg:"_saveAndMove"});b.preventDefault();return!1};f._keyPressInEdit=function(a,b){var c=this.that,f=c.options.editModel.indices,g=(b||{}).FK,d=f.column,m=k.ui.keyCode,h="BACKSPACE LEFT RIGHT UP DOWN DELETE HOME END".split(" ").map(function(a){return m[a]}),d=d.dataType;return 0<=k.inArray(a.keyCode,
h)?!0:!1===c._trigger("editorKeyPress",a,k.extend({},f))||g&&("float"==d||"integer"==d)&&(c="float"==d?"0123456789.-":"0123456789-",(f=String.fromCharCode(a.charCode||a.keyCode))&&-1==c.indexOf(f))?!1:!0};f.getValText=function(a){a=a[0].nodeName.toLowerCase();var b="text";-1!=k.inArray(a,["input","textarea","select"])&&(b="val");return b};f._keyUpInEdit=function(a,b){var c=this.that,f=c.options;b=b?b:{};var g=b.FK,f=f.editModel,d=f.indices;c._trigger("editorKeyUp",a,k.extend({},d));c=d.column.dataType;
if(g&&("float"==c||"integer"==c)){var g=k(a.target),d="integer"==c?f.reInt:f.reFloat,f=this.getValText(g),m=g.data("oldVal"),h=g[f]();if(!1==d.test(h))if(d.test(m))g[f](m);else if(c="float"==c?parseFloat(m):parseInt(m),isNaN(c))g[f](0);else g[f](c)}};f._keyDownInEdit=function(a){var b=this.that,c=b.options,f=c.editModel.indices;if(f){var g=k(a.target),d=k.ui.keyCode,m=c.editModel,h=k.extend({},f),f=h.rowIndxPage,c=h.colIndx,p=h.column.editModel,m=p?k.extend({},m,p):m,p=this.getValText(g);g.data("oldVal",
g[p]());if(!1==b._trigger("editorKeyDown",a,h))return!1;if(a.keyCode==d.TAB||a.keyCode==m.saveKey)return b=a.keyCode==d.TAB?m.onTab:m.onSave,h={rowIndxPage:f,colIndx:c,incr:b?!0:!1,edit:"nextEdit"==b},this._saveAndMove(h,a);if(a.keyCode==d.ESCAPE)return b.quitEditMode({evt:a}),b.focus({rowIndxPage:f,colIndx:c}),a.preventDefault(),!1;if(a.keyCode==d.PAGE_UP||a.keyCode==d.PAGE_DOWN)return a.preventDefault(),!1;if(m.keyUpDown&&!a.altKey){if(a.keyCode==d.DOWN)return h=this._incrRowIndx2(f,c),this._saveAndMove(h,
a);if(a.keyCode==d.UP)return h=this._decrRowIndx2(f,c),this._saveAndMove(h,a)}}};f.select=function(a){var b=this.that,c=this,f=a.rowIndx,g=a.colIndx,d=a.evt;a=this.getMergeCell(f,g);var f=a.rowIndx,g=a.colIndx,m=a.rowIndxPage;a=b.options;var h=b.iSelection,p=a.selectionModel,u=p.type,s="row"==u,n="cell"==u;(a.realFocus?function(a){clearTimeout(c.timeoutID);c.timeoutID=setTimeout(function(){a()},0)}:function(a){a()})(function(){b.scrollCell({rowIndx:f,colIndx:g});var a=h.address();if(d.shiftKey&&d.keyCode!==
k.ui.keyCode.TAB&&p.type&&"single"!=p.mode&&a.length){var c=a[a.length-1],e=c.firstR,w=c.firstC,u=c.type,E=!1;"column"==u?(c.c1=w,c.c2=g,c.r1=c.r2=c.type=void 0):"row"==u?(c.r1=e,c.r2=f,c.c1=c.c2=c.type=void 0):(a={r1:e,r2:f,c1:w,c2:g,firstR:e,firstC:w},E=!0);b.range(a,E).select()}else s?b.range({r1:f,firstR:f},!1).select():n&&b.range({r1:f,c1:g,firstR:f,firstC:g}).select();b.focus({rowIndxPage:m,colIndx:g})})};f._bodyKeyPressDown=function(a){var b=this.that,c=b.rowIndxOffset,f,g,d;d=this.options;
var m=b.iMerge,h=b._focusElement,p=d.selectionModel,u=d.editModel,s=a.ctrlKey||a.metaKey,n=k.ui.keyCode,z=a.keyCode;if(u.indices)b.$div_focus.find(".pq-cell-focus").focus();else{if(h){if(d=document.activeElement,"pq-grid-cont"!=d.className&&"TD"!=d.nodeName.toUpperCase()&&"pq-grid-excel"!=d.id)return}else{h=k(a.target);if(!h.hasClass("pq-grid-cell"))return;h=b.getCellIndices({$td:h})}var x=b.normalize(h);g=x.rowIndxPage;f=x.rowIndx;d=x.colIndx;var A=b.pdata,C=x,h=!0;if(null!=f&&null!=d&&null!=x.rowData){m.ismergedCell(f,
d)&&(x=C=m.getRootCell(f,d,"o"),g=x.rowIndxPage,f=x.rowIndx,d=x.colIndx,z==n.PAGE_UP||z==n.PAGE_DOWN||z==n.SPACE||z==n.HOME||z==n.END)&&(m=m.getData(f,d,"proxy_cell"))&&(m=m.rowIndx-c,A[m].pq_hidden||(g=m,f=g+c));if(!1==b._trigger("cellKeyDown",a,C))return!1;if(z==n.LEFT||z==n.RIGHT||z==n.UP||z==n.DOWN||p.onTab&&z==n.TAB)b=null,z==n.LEFT||z==n.TAB&&a.shiftKey?b=this._incrIndx(g,d,!1):z==n.RIGHT||z==n.TAB&&!a.shiftKey?b=this._incrIndx(g,d,!0):z==n.UP?b=this._decrRowIndx2(g,d):z==n.DOWN&&(b=this._incrRowIndx2(g,
d)),b&&(f=b.rowIndxPage+c,this.select({rowIndx:f,colIndx:b.colIndx,evt:a}));else if(z==n.PAGE_DOWN||z==n.SPACE||z==n.PAGE_UP){if(b=this[z==n.PAGE_UP?"pageUp":"pageDown"](g))g=b.rowIndxPage,null!=g&&this.select({rowIndx:g+c,colIndx:d,evt:a})}else z==n.HOME?(s?f=b.getFirstVisibleRIP()+c:d=b.getFirstVisibleCI(),this.select({rowIndx:f,colIndx:d,evt:a})):z==n.END?(s?f=b.getLastVisibleRIP()+c:d=b.getLastVisibleCI(),this.select({rowIndx:f,colIndx:d,evt:a})):z==n.ENTER?(g=C.rowIndxPage,d=C.colIndx,(p=b.getCell({rowIndxPage:g,
colIndx:d}))&&0<p.length&&(f=g+c,c=b.isEditableRow({rowIndx:f}),n=b.isEditableCell({rowIndx:f,colIndx:d}),c&&n?b.editCell({rowIndxPage:g,colIndx:d}):(b=p.find("button"),b.length&&k(b[0]).click()))):s&&"65"==z?(b=b.iSelection,"row"==p.type&&"single"!=p.mode?b.selectAll({type:"row",all:p.all}):"cell"==p.type&&"single"!=p.mode&&b.selectAll({type:"cell",all:p.all})):u.pressToEdit&&(32<=z&&127>=z||189==z)&&!s?46==z?b.clear():(g=C.rowIndxPage,d=C.colIndx,(p=b.getCell({rowIndxPage:g,colIndx:d}))&&0<p.length&&
(f=g+c,c=b.isEditableRow({rowIndx:f}),n=b.isEditableCell({rowIndx:f,colIndx:d}),c&&n&&b.editCell({rowIndxPage:g,colIndx:d,select:!0})),h=!1):h=!1;h&&a.preventDefault()}}};f.incrPageSize=function(){for(var a=this.that,b=a.$tbl,c=b.children("tbody").children(".pq-grid-row"),b=parseInt(b.css("marginTop")),b=a.iRefresh.getEContHt()-b,f=c.length-1;0<=f;f--){var g=c[f];if(g.offsetTop<b)break}return{rowIndxPage:a.getRowIndx({$tr:k(g)}).rowIndxPage}};f.pageNonVirtual=function(a,b){var c=this.that,f=c.$cont[0].offsetHeight-
c._getSBHeight(),g=c.getRow({rowIndxPage:a}),d=0,m=0,h=k(g[0])[b]("tr.pq-grid-row"),p=h.length;if(0<p){do{g=h[m];d+=g.offsetHeight;if(d>=f)break;m++}while(m<p);m=0<m?m-1:m;do if(g=k(h[m]),a=c.getRowIndx({$tr:g}).rowIndxPage,null!=a)break;else m--;while(0<=m)}return a};f.pageDown=function(a){var b=this.that,c=b.options,f=b.vscroll,g=f.option("cur_pos"),d=f.option("num_eles"),m=f.option("ratio");if(c.virtualY){if(g<d-1){a=this.incrPageSize().rowIndxPage;var h=b._calcCurPosFromRowIndxPage(a);if(null==
h)return;f.option("cur_pos",h);f.scroll()}}else null!=a?a=this.pageNonVirtual(a,"nextAll"):1>m&&(c=b.iRefresh.getEContHt(),b=b.iMouseSelection,b.updateTableY(-1*c),b.syncScrollBarVert());return{rowIndxPage:a,curPos:h}};f.pageUp=function(a){var b=this.that,c=b.vscroll;if(b.options.virtualY){if(0<c.option("cur_pos")){a=this.decrPageSize().rowIndxPage;var f=b._calcCurPosFromRowIndxPage(a);if(null==f)return;c.option("cur_pos",f);c.scroll()}}else c=c.option("ratio"),null!=a?a=this.pageNonVirtual(a,"prevAll"):
0<c&&(c=b.iRefresh.getEContHt(),b=b.iMouseSelection,b.updateTableY(c),b.syncScrollBarVert());return{rowIndxPage:a,curPos:f}};f.decrPageSize=function(){var a=this.that,b=a.$tbl.children("tbody").children(".pq-grid-row"),c=a.options.freezeRows,f=a.pdata,g,d=0;if(b.length){var m;c?(m=b.filter("tr.pq-last-frozen-row"),m.length&&(m=m.next())):2<=b.length&&(m=k(b[1]));if(m&&m.length)for(g=d=a.getRowIndx({$tr:m}).rowIndxPage,b=0,a=a.pageSize-3;0<=d&&(f[d].pq_hidden||(b++,g=d,!(b>=a)));d--);}return{rowIndxPage:g}};
d._calcNumHiddenFrozens=function(){for(var a=0,b=this.options.freezeCols,c=0;c<b;c++)this.colModel[c].hidden&&a++;return a};d._calcNumHiddenUnFrozens=function(a){var b=0;a=null!=a?a:this.colModel.length;for(var c=this.options.freezeCols;c<a;c++)this.colModel[c].hidden&&b++;return b};d._getSBHeight=function(){return this.iRefresh.getSBHeight()};d._getSBWidth=function(){return this.iRefresh.getSBWidth()};d.getFirstVisibleRIP=function(a){var b=this.pdata;a=a?this.initV:0;for(var c=b.length;a<c;a++)if(!b[a].pq_hidden)return a};
d.getLastVisibleRIP=function(){for(var a=this.pdata,b=a.length-1;0<=b;b--)if(!a[b].pq_hidden)return b;return null};d.getFirstVisibleCI=function(a){var b=this.colModel,c=b.length;for(a=a?this.initH:0;a<c;a++)if(!b[a].hidden)return a;return null};d.getLastVisibleCI=function(){for(var a=this.colModel,b=a.length-1;0<=b;b--)if(!a[b].hidden)return b;return null};d.getTotalVisibleColumns=function(){for(var a=this.colModel,b=a.length,c=0,f=0;f<b;f++)a[f].hidden||c++;return c};d._calcCurPosFromRowIndxPage=
function(a){var b=this.pdata,c=this.options.freezeRows;if(a<c)return 0;for(var f=0,g=c,d=b.length;c<d;c++){var m=b[c];if(g==a)break;g++;m.pq_hidden||f++}return f>=d?null:f};d._calcCurPosFromColIndx=function(a){var b=this.colModel,c=this.options.freezeCols;if(a<c)return 0;for(var f=0,g=c,d=b.length;c<d;c++){var m=b[c];if(g==a)break;g++;m.hidden||f++}return f>=d?null:f};d.calcWidthCols=function(a,b,c){var f=0,g=this.options.numberCell,d=this.colModel;-1==a&&(g.show&&(f=c?f+1*g.width:f+g.outerWidth),
a=0);if(c)for(;a<b;a++){if((c=d[a])&&!c.hidden){if(!c._width)throw"assert failed";f+=c._width+0}}else for(;a<b;a++)(c=d[a])&&!c.hidden&&(f+=c.outerWidth);return f};d.calcHeightFrozenRows=function(){var a=this.$tbl,b=0;a&&a.length&&(a=k(a[0]).find("tr.pq-last-frozen-row"))&&a.length&&(b=a[0],b=b.offsetTop+b.offsetHeight);return b};d._calcRightEdgeCol=function(a){var b=0,c=0,f=this.colModel,g=this.initH,d=this.options,m=d.freezeCols,d=d.numberCell;d.show&&(b+=d.outerWidth,c++);for(d=0;d<=a;d++){d<g&&
d>=m&&(d=g);var h=f[d];h.hidden||(b+=h.outerWidth,c++)}return{width:b,cols:c}};d._createHeader=function(){this.iHeader.createHeader();this.options.showHeader&&this._trigger("createHeader")};d.createTable=function(a){a.other=!0;var b=this.iGenerateView;b.generateView(a);b.scrollView()}})(jQuery);
(function(k){function n(a){this.that=a}function h(a,b,c){for(var g=0;b<c;b++)!0!==a[b].hidden&&g++;return g}function d(a,b,c){for(var g,e;c;){g=a[c][b];e=a[c-1][b];if(g!=e)break;c--}return c}var c=k.paramquery,b=c._pqGrid.prototype;b.getHeadCell=function(a){var b=a.attr("pq-col-indx");a=a.attr("pq-row-indx");var c,g,e,d;null!=b&&null!=a&&(b*=1,a*=1,g=this.headerCells[a][b])&&(d=g.colModel,e=g.leftPos);d&&d.length&&(c=!0);return{col:g,ci:b,o_ci:e,ri:a,isParent:c}};b.flex=function(a){this.iResizeColumns.flex(a)};
c.cHeader=n;b=n.prototype;b.createHeader=function(){var a=this.that,b=this,c=a.options,g=c.bootstrap,e=(g.on?g.thead:"")+" pq-grid-header-table ",d=c.ui,w=g.on?"":d.header,h=c.hwrap,g=a.pqpanes,v=parseInt(c.freezeCols),r=c.numberCell,d=a.colModel,t=c.sortModel,q=a.depth,p=c.virtualX,n=a.iGenerateView.colDef,s=a.initH,y=a.finalH,z=a.headerCells,x=a.$header_o;x.empty();if(null!=y)if(!1===c.showHeader)x.css("display","none");else{x.css("display","");c=["<table class='"+(h?e+"pq-wrap ":e+"pq-no-wrap ")+
"' >"];if(1<=q){c.push("<tr class='pq-row-hidden'>");r.show&&c.push("<td style='width:"+r.width+"px;' ></td>");for(var h=0,A=n.length;h<A;h++){var C=n[h],e=C.colIndx;c.push("<td style='width:"+C.column.outerWidth+"px;' pq-col-indx="+e+"></td>")}c.push("</tr>")}for(n=0;n<q;n++){c.push("<tr class='pq-grid-title-row'>");0==n&&r.show&&c.push(["<th pq-col-indx='-1' class='pq-grid-number-col' rowspan='",q,"'><div class='pq-td-div'>",r.title?r.title:"&nbsp;","</div></th>"].join(""));for(e=0;e<=y;e++){if(e<
s&&e>=v&&p&&(e=s,e>y))throw"initH>finalH";b.createHeaderCell(n,e,z,c,"pq-grid-col ",v,s,q,t)}c.push("</tr>")}a.ovCreateHeader(c,"pq-grid-col ");c.push("</table>");v=c.join("");x[0].innerHTML=g.vH?["<span class='pq-grid-header pq-grid-header-left ",w,"'><div class='pq-grid-header-inner'>",v,"</div></span><span class='pq-grid-header ",w,"'><div class='pq-grid-header-inner'>",v,"</div></span>"].join(""):["<span class='pq-grid-header ",w,"'><div class='pq-grid-header-inner'>",v,"</div></span>"].join("");
w=a.$header=x.children(".pq-grid-header");x=w.children(".pq-grid-header-inner");a.$tbl_header=x.children("table");a.$header_left=k(w[0]);a.$header_left_inner=k(x[0]);g.vH&&(a.$header_right=k(w[1]),a.$header_right_inner=k(x[1]));w.click(function(a){return b._onHeaderClick(a)});b._refreshResizeColumn(s,y,d);a._trigger("refreshHeader",null,null)}};b._onHeaderClick=function(a){var b=this.that,c;c=b.iDragColumns;if(!c||"stop"==c.status){c=k(a.target);if(c.is("input,label"))return!0;c=c.closest(".pq-grid-col");
if(c.length&&(c=b.getHeadCell(c),(b=c.col)&&!c.isParent))return this._onHeaderCellClick(b,c.ci,a)}};b.createHeaderCell=function(a,b,d,g,e,l,w,k,v){var r=this.that,t=r.options.sheet,q=d[a][b],p=r.colModel,n=q.colSpan;if(!(q.hidden||0===n||0<a&&q==d[a-1][b])){if(0<b&&q==d[a][b-1]){if(b>w)return;a:{d=d[a];for(var s=0;s<d.length;s++)if(d[s]==q){d=s;break a}d=void 0}if(d<l)return;n-=h(p,d,b)}else l&&b<l&&b+n>l&&(n-=h(p,l,w),p=h(p,b,l),n=Math.max(n,p));p=q.halign||q.align;d=q.cls;e=[e];var s=q.title,y=
q.type,s="function"==typeof s?s.call(r,{column:q,colIndx:b,dataIndx:q.dataIndx}):s,s=t?c.toLetter(b):s,s=null!=s?s:"checkbox"==y&&q.cb.header?"<input type='checkbox'/>":q.dataIndx;q.pqtitle=s;p&&e.push("pq-align-"+p);b==l-1&&1==k&&e.push("pq-last-frozen-col");b<=l-1?e.push("pq-left-col"):b>=w&&e.push("pq-right-col");d&&e.push(d);null!=q.colModel&&0!=q.colModel.length||e.push("pq-grid-col-leaf");l=v.space?"pq-space":"";g.push(["<th  ","pq-col-indx="+b," ","pq-row-indx="+a,"  class='",e.join(" "),"' rowspan=",
q.rowSpan," colspan=",n,"><div class='pq-td-div'>",s,"<span class='pq-col-sort-icon ",l,"'></span>",v.number?"<span class='pq-col-sort-count "+l+"'></span>":"","</div></th>"].join(""))}};b._onHeaderCellClick=function(a,b,c){var g=this.that,e=g.options,d=e.sortModel,w=a.dataIndx;!1!==g._trigger("headerCellClick",c,{column:a,colIndx:b,dataIndx:w})&&(e.selectionModel.column&&-1==c.target.className.indexOf("pq-td-div")?(e={c1:b,firstC:b},a=g.iSelection.address(),c.shiftKey&&((c=a.length)&&"column"==a[c-
1].type&&(c=a[c-1],c.c1=c.firstC,c.c2=b,c.r1=c.r2=c.type=void 0),e=a),g.range(e,!1).select(),g.focus({rowIndxPage:g.getFirstVisibleRIP(!0),colIndx:b})):d.on&&!1!=a.sortable&&g.sort({sorter:[{dataIndx:w}],addon:!0,tempMultiple:d.multiKey&&c[d.multiKey],evt:c}))};b._refreshResizeColumn=function(a,b,c){a=this.that;c=a.options;b=c.filterModel.ficon?!0:!1;var g=c.numberCell;c=parseInt(c.freezeCols);var e=[],d=[],w=a.pqpanes.vH,h=0,k=0;g.show&&(h=g.outerWidth,g.resizable&&e.push("<div pq-col-indx='-1' style='left:",
h-5,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>"));for(var g=a.iGenerateView.colDef,r=0,t=g.length;r<t;r++){var k=g[r],q=k.colIndx,k=k.column,p=k.ficon,n=p||null==p&&b,p=e,h=h+k.outerWidth;if(!1!==k.resizable||n)w&&q>=c&&(p=d),k=h-5,p.push("<div pq-col-indx='",q,"' style='left:",k,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>")}d.length&&a.$header_right_inner.append(d.join(""));a.$header_left_inner.append(e.join(""))};b.refreshHeaderSortIcons=function(){var a=this.that,b=a.options,
c=b.bootstrap,b=b.ui,g=a.$header;if(g){var e=a.iSort.getSorter(),d=e.length,w=!1;a.options.sortModel.number&&1<d&&(w=!0);for(var h=0;h<d;h++){var k=e[h],r=a.getColIndx({dataIndx:k.dataIndx}),t=k.dir,k=c.on?c.header_active:b.header_active+" pq-col-sort-"+("up"==t?"asc":"desc"),t=c.on?" glyphicon glyphicon-arrow-"+t:"ui-icon ui-icon-triangle-1-"+("up"==t?"n":"s"),r=g.find(".pq-grid-col-leaf[pq-col-indx="+r+"]");r.addClass(k);r.find(".pq-col-sort-icon").addClass(t);w&&r.find(".pq-col-sort-count").html(h+
1)}}};b=function(a){this.that=a;var b=this;a.$header_o.on({mousedown:function(a){if(!a.pq_composed){var c=k(a.target);b.setDraggables(a);a.pq_composed=!0;a=k.Event("mousedown",a);c.trigger(a)}},dblclick:function(a){b.doubleClick(a)}},".pq-grid-col-resize-handle");var c=a.options.flex;if(c.on&&c.one)a.one("ready",function(){b.flex()})};c.cResizeColumns=b;b=b.prototype=new c.cClass;b.doubleClick=function(a){var b=this.that.options,c=b.flex;a=k(a.target);a=parseInt(a.attr("pq-col-indx"));isNaN(a)||c.on&&
this.flex(c.all&&!b.scrollModel.autoFit?{}:{colIndx:[a]})};b._initFlexTable=function(a,b){if(a.length){var c=a.css({tableLayout:"auto",width:""}).addClass("pq-no-wrap").removeClass("pq-wrap").children("tbody").children(".pq-row-hidden"),g,e=c.children("td").css("width","");if(b){var d=0,w=[],h,v=[];c.next().children("td").each(function(a,b){h=1*b.getAttribute("colspan");if(1<h&&(d+=h-1,w[d]=b.offsetWidth,g=e[d],!g||!g.offsetWidth))for(var c=d-(h-1);c<d;c++)v[c]=!0;d++})}}return[e||k(),v||[],w]};b.flex=
function(a){a=a||{};var b=this.that,c=b.element,g=b.options.numberCell,e=a.colIndx,d,w=a.dataIndx;a=null==a.refresh?!0:a.refresh;var h=!1,v=b.$tbl,r=b.$tbl_header,t=v&&v.length?k(v[0]).clone():k(),q=b.tables&&b.tables.length?b.tables[0].$tbl:null,q=q?k(q[0]).clone():k(),p=r&&r.length?k(r[0]).clone():k();t.find(".pq-merge-cell").each(function(a,b){b.innerHTML=k(b).find(".pq-merge-inner")[0].innerHTML;b.style.whiteSpace="noWrap"});if(null!=w)for(e=[],r=0,v=w.length;r<v;r++){var n=b.colIndxs[w[r]];null!=
n&&e.push(n)}null!=e&&(e.sort(function(a,b){return a-b}),d=e.length);p.find("tr.pq-grid-header-search-row").remove();w=k("<div class='pq-grid'>").append(p).append(q).append(t);w.addClass(c.attr("class"));c.parent().append(w);for(var r=this._initFlexTable(t,!0),c=r[0],t=r[1],n=r[2],s=0,q=this._initFlexTable(q)[0],p=this._initFlexTable(p)[0],g=g.show?0:-1,y=b.iGenerateView.colDef,r=0,v=y.length;r<v;r++){var z=y[r],x=z.colIndx,z=z.column;g++;if(e)if(e.length)if(e[0]===x)e.splice(0,1);else continue;else break;
var A=c[g],C=p[g],D=q[g],x=t[g],A=A?A.offsetWidth:0,D=D?D.offsetWidth:0,C=C?C.offsetWidth:0;x?A=0:s&&(A=n[g]-s,s=0);C=Math.max(A,D,C)-0+1;x&&(s+=C);z._width!==C&&(h=!0,z.width=C,1===d&&(z._resized=!0))}w.remove();h&&a&&b.refresh({source:"flex",colModel:!0})};b.setDraggables=function(a){var b=this,c,g,e;k(a.target).draggable({axis:"x",helper:function(a,c){var e=k(a.target),g=parseInt(e.attr("pq-col-indx"));b._setDragLimits(g);b._getDragHelper(a,c);return e},start:function(a,g){c=g.position.left;e=
parseInt(b.$cl[0].style.left)},drag:function(a,d){g=d.position.left;b.$cl[0].style.left=e+(g-c)+"px"},stop:function(a,e){return b.resizeStop(a,e,c)}})};b._getDragHelper=function(a){var b=this.that,c=parseInt(b.options.freezeCols);a=k(a.target);var g=b.$grid_center;a=parseInt(a.attr("pq-col-indx"));var e=g.outerHeight();this.$cl=k("<div class='pq-grid-drag-bar'></div>").appendTo(g);this.$clleft=k("<div class='pq-grid-drag-bar'></div>").appendTo(g);this.$cl.height(e);this.$clleft.height(e);g=k("[pq-col-indx="+
a+"]",b.$header)[0];e=g.offsetLeft;b.pqpanes.vH?a>=c&&(e-=b.$header[1].scrollLeft):(e+=b.$header[0].offsetLeft,e-=b.$header[0].scrollLeft);this.$clleft.css({left:e});e+=g.offsetWidth;this.$cl.css({left:e})};b._setDragLimits=function(a){if(!(0>a)){var b=this.that,c=b.colModel[a],g=b.$header_left;a>=b.options.freezeCols&&b.pqpanes.vH&&(g=b.$header_right);b=g.find("th[pq-col-indx='"+a+"']").offset().left+c._minWidth;c=b+c._maxWidth-c._minWidth;g.find("div.pq-grid-col-resize-handle[pq-col-indx="+a+"]").draggable("option",
"containment",[b,0,c,0])}};b.resizeStop=function(a,b,c){var g=this.that,e=g.colModel,d=g.options.numberCell;this.$clleft.remove();this.$cl.remove();c=b.position.left-c;b=k(b.helper);b=parseInt(b.attr("pq-col-indx"));if(-1==b){var e=null,w=parseInt(d.width);d.width=w+c}else e=e[b],w=parseInt(e.width),e.width=w+c,e._resized=!0;g.refresh();g._trigger("columnResize",a,{colIndx:b,column:e,dataIndx:e?e.dataIndx:null,oldWidth:w,newWidth:e?e.width:d.width})};b=function(a){this.that=a;this.$drag_helper=null;
var b=a.options.dragColumns,c=b.topIcon,g=b.bottomIcon;this.status="stop";this.$arrowTop=k("<div class='pq-arrow-down ui-icon "+c+"'></div>").appendTo(a.element);this.$arrowBottom=k("<div class='pq-arrow-up ui-icon "+g+"' ></div>").appendTo(a.element);this.hideArrows();if(b&&b.enabled)a.$header_o.on("mousedown",".pq-grid-col",this.onColMouseDown(this,a))};c.cDragColumns=b;b=b.prototype;b.onColMouseDown=function(a,b){return function(c){var g,e,d;g=k(this);c.pq_composed||k(c.target).is("input,select,textarea")||
(g=b.getHeadCell(g),d=(e=g.col)?e.parent:null,!e||e.nodrag||e._nodrag||d&&1==d.colSpan||!a.setDraggable(c,e,g)||(c.pq_composed=!0,g=k.Event("mousedown",c),k(c.target).trigger(g)))}};b.showFeedback=function(a,b){var c=this.that,g=a[0],e=c.$grid_center[0].offsetTop,d=g.offsetLeft-g.offsetParent.offsetParent.offsetParent.scrollLeft+(b?0:g.offsetWidth)-8,c=e+c.$header[0].offsetHeight;this.$arrowTop.css({left:d,top:e+g.offsetTop-16,display:""});this.$arrowBottom.css({left:d,top:c,display:""})};b.showArrows=
function(){this.$arrowTop.show();this.$arrowBottom.show()};b.hideArrows=function(){this.$arrowTop.hide();this.$arrowBottom.hide()};b.updateDragHelper=function(a){var b=this.that.options.dragColumns,c=b.acceptIcon,b=b.rejectIcon,g=this.$drag_helper;g&&(a?(g.children("span.pq-drag-icon").addClass(c).removeClass(b),g.removeClass("ui-state-error")):(g.children("span.pq-drag-icon").removeClass(c).addClass(b),g.addClass("ui-state-error")))};b.setDraggable=function(a,b,c){a=k(a.currentTarget);var g=this,
e=g.that;if(!a.hasClass("ui-draggable"))return a.draggable({distance:10,cursorAt:{top:-18,left:-10},zIndex:"1000",appendTo:e.element,revert:"invalid",helper:g.dragHelper(g,e,b),start:g.onStart(g,e,b,c),drag:g.onDrag(g,e),stop:function(){e.element&&(g.status="stop",e.$header.find(".pq-grid-col-resize-handle").show(),g.hideArrows())}}),!0};b.onStart=function(a,b,c,g){return function(e){if(!1===b._trigger("columnDrag",e.originalEvent,{column:c}))return!1;a.setDroppables(g)}};b.onDrag=function(a,b){return function(c,
g){a.status="drag";var e=k(".pq-drop-hover",b.$header);if(0<e.length){a.showArrows();a.updateDragHelper(!0);var d=e.width();c.clientX-e.offset().left+k(document).scrollLeft()<d/2?(a.leftDrop=!0,a.showFeedback(e,!0)):(a.leftDrop=!1,a.showFeedback(e,!1))}else a.hideArrows(),k(".pq-drop-hover",b.$top).length?a.updateDragHelper(!0):a.updateDragHelper()}};b.dragHelper=function(a,b,c){var g=b.options.dragColumns.rejectIcon;return function(){a.status="helper";b.$header.find(".pq-grid-col-resize-handle").hide();
var e=k("<div class='pq-col-drag-helper ui-widget-content ui-corner-all panel panel-default' ><span class='pq-drag-icon ui-icon "+g+" glyphicon glyphicon-remove'></span>"+c.pqtitle+"</div>");a.$drag_helper=e;return e[0]}};b._columnIndexOf=function(a,b){for(var c=0,g=a.length;c<g;c++)if(a[c]==b)return c;return-1};b.setDroppables=function(a){var b=this.that,c=a.col,g=a.ri;a=a.o_ci;var e=a+c.o_colspan,d,w,h,v,r;w=b.$header_left;var t,q={hoverClass:"pq-drop-hover ui-state-highlight",accept:".pq-grid-col",
tolerance:"pointer",drop:this.onDrop()},p=w.find(".pq-left-col");w=b.pqpanes.v||b.pqpanes.vH?b.$header_right.find(".pq-right-col"):w.find(".pq-right-col");p=p.add(w);for(t=p.length;t--;)v=k(p[t]),r=v.hasClass("ui-droppable"),d=b.getHeadCell(v),h=d.col,w=d.ri,d=d.ci,h==c||h.nodrop||h._nodrop||g<w&&d>=a&&d<e?r&&v.droppable("destroy"):r||v.droppable(q)};b.onDrop=function(){var a=this,b=this.that;return function(c,g){if(!a.dropPending){var e=1*g.draggable.attr("pq-col-indx"),d=1*g.draggable.attr("pq-row-indx"),
w=k(this),h=1*w.attr("pq-col-indx"),w=1*w.attr("pq-row-indx"),v=a.moveColumn(e,h,a.leftDrop,d,w);a.dropPending=!0;window.setTimeout(function(){b.iColModel.init();!1!==b._trigger("columnOrder",null,{dataIndx:v.dataIndx,column:v,oldcolIndx:e,colIndx:b.getColIndx({column:v})})&&b.refresh();a.dropPending=!1},0)}}};b.moveColumn=function(a,b,c,g,e){var l=this.that,w=l.options.colModel,h=l.headerCells,l=l.depth-1;g=null==g?d(h,a,l):g;e=null==e?d(h,b,l):e;var l=h[e][b],k=g?h[g-1][a].colModel:w;b=e?h[e-1][b].colModel:
w;a=this._columnIndexOf(k,h[g][a]);c=c?1:0;a=k.splice(a,1)[0];c=this._columnIndexOf(b,l)+1-c;b.splice(c,0,a);return a}})(jQuery);
(function(k){function n(d,c){this.that=d;var b=this,a=d.options;this.type="detail";this.refreshComplete=!0;this.detachView=!1;d.on("cellClick",function(a,c){return b.toggle(a,c)}).on("cellKeyDown",function(a,c){if(a.keyCode==k.ui.keyCode.ENTER)return b.toggle(a,c)}).on("refresh",function(a,c){return b.aftertable()}).on("beforeTableView",function(a,c){return b.beforeTableView(a,c)}).on("tableWidthChange",function(a,c){return b.tableWidthChange(a,c)});c._render=function(b){var c=a.detailModel,g=b.cellData;
b=b.rowData;if(!b.pq_gsummary&&!b.pq_gtitle)return c=g&&g.show?c.expandIcon:c.collapseIcon,"<div class='ui-icon "+c+"'></div>"}}k.paramquery.cHierarchy=n;var h=n.prototype=new k.paramquery.cClass;h.tableWidthChange=function(){if(this.refreshComplete){this.refreshComplete=!1;for(var d=this.that.$tbl.children("tbody").children("tr.pq-detail-child").children("td.pq-detail-child"),c=0,b=d.length;c<b;c++)for(var a=k(d[c]).find(".pq-grid"),f=0,m=a.length;f<m;f++){var g=k(a[f]);g.is(":visible")&&g.pqGrid("onWindowResize")}this.refreshComplete=
!0}};h.aftertable=function(d){var c=this.that,b=c.options.detailModel.init,a=c.pdata;if(this.refreshComplete){this.refreshComplete=!1;d=d?d:c.$tbl.children("tbody").children("tr.pq-detail-child");for(var f=0,m=d.length;f<m;f++){var g=k(d[f]),e=g.attr("pq-row-indx"),l=a[e],e=!1,w=l.pq_detail.child;w||"function"!=typeof b||(e=!0,w=b.call(c.element[0],{rowData:l}),l.pq_detail.child=w,l.pq_detail.height=25);g=g.children("td.pq-detail-child");g.append(w);g=g.find(".pq-grid");w=0;for(l=g.length;w<l;w++){var h=
k(g[w]);e?h.hasClass("pq-pending-refresh")&&h.is(":visible")&&(h.removeClass("pq-pending-refresh"),h.pqGrid("refresh")):h.is(":visible")&&h.pqGrid("onWindowResize")}}this.refreshComplete=!0;this.detachView=!1}};h.beforeTableView=function(d,c){this.detachView||(this.detachInitView(),this.detachView=!0)};h.detachInitView=function(d){var c=this.that.$tbl;if(c&&c.length)for(d=d?d:c.children("tbody").children("tr.pq-detail-child"),c=0;c<d.length;c++)k(d[c]).children("td.pq-detail-child").children().detach()};
h.toggle=function(d,c){var b=this.that,a=c.column,f=c.rowData,m=c.rowIndx,g=this.type;f.pq_gtitle||f.pq_gsummary||!a||a.type!==g||(a={rowIndx:m,focus:!0},null==f.pq_detail?b.rowExpand(a):!1===f.pq_detail.show?b.rowExpand(a):this.rowCollapse(a))};h.rowExpand=function(d){this.normalize(d);var c=this.that,b=d.rowData,a=d.rowIndx,f=d.rowIndxPage,m=c.options.detailModel;if(null!=b){if(!1===c._trigger("beforeRowExpand",null,d))return!1;null==b.pq_detail?b.pq_detail={show:!0}:!1===b.pq_detail.show&&(b.pq_detail.show=
!0);m.cache||this.rowInvalidate(d);c.refreshRow({rowIndx:a});m=[];c.iGenerateView._generateDetailRow(b,f,m);b=c.getRow({rowIndxPage:f});b.after(m.join(""));this.aftertable(b.next());d.focus&&c.getCell({rowIndx:a,dataIndx:"pq_detail"}).attr("tabindex","0").focus();d.scrollRow&&this.scrollRow({rowIndx:a})}};h.rowInvalidate=function(d){d=this.that.getRowData(d);var c=d.pq_detail;if(c=c?c.child:null)c.remove(),d.pq_detail.child=null,d.pq_detail.height=0};h.normalize=function(d){var c=this.that,b=d.rowIndx,
a=d.rowIndxPage,f=c.rowIndxOffset;d.rowIndx=null==b?a+f:b;d.rowIndxPage=null==a?b-f:a;d.rowData=c.getRowData(d)};h.rowCollapse=function(d){this.normalize(d);var c=this.that,b=c.options,a=d.rowData,f=d.rowIndx,m=d.rowIndxPage,g=b.detailModel;null!=a&&null!=a.pq_detail&&!0===a.pq_detail.show&&(g.cache||this.rowInvalidate(d),a.pq_detail.show=!1,b.virtualY?c.refresh():(b=c.getRow({rowIndxPage:m}).next("tr.pq-detail-child"),b.length&&(this.detachInitView(b),b.remove(),c.refreshRow({rowIndx:f})),d.focus&&
c.getCell({rowIndx:f,dataIndx:"pq_detail"}).attr("tabindex","0").focus()),d.scrollRow&&(f=d.rowIndx,this.scrollRow({rowIndx:f})))}})(jQuery);
(function(k){var n=function(h){var d=this;d.that=h;h.on("dataReadyDone",function(){d.calcVisibleV()}).on("CMInit",function(){d.calcVisibleH()}).on("refresh",function(){d.summaryTable()})};k.paramquery.cRefresh=n;n=n.prototype;n._computeOuterWidths=function(){for(var h=this.that,d=h.options.numberCell,h=h.colModel,c=h.length,b=0;b<c;b++){var a=h[b];a.outerWidth=a._width+0}d.show&&(d.outerWidth=d.width)};n.autoFit=function(){var h=this.that,d=h.colModel,c=d.length,h=h.calcWidthCols(-1,c,!0),b=this.contWd-
this.getSBWidth();if(h!==b){for(var h=h-b,a,b=[],f=0;f<c;f++){var m=d[f],g=m._percent,e=m._resized;m.hidden||g||e||(0>h?(g=m._maxWidth-m._width)&&b.push({availWd:-1*g,colIndx:f}):(g=m._width-m._minWidth)&&b.push({availWd:g,colIndx:f}));e&&(a=m,delete m._resized)}b.sort(function(a,b){return a.availWd>b.availWd?1:a.availWd<b.availWd?-1:0});f=0;for(c=b.length;f<c;f++){var m=b[f],g=m.availWd,m=m.colIndx,e=Math.round(h/(c-f)),m=d[m],l;l=m._width;Math.abs(g)>Math.abs(e)?(l-=e,h-=e):(l-=g,h-=g);m.width=
m._width=l}0!=h&&a&&(l=a._width-h,l>a._maxWidth?l=a._maxWidth:l<a._minWidth&&(l=a._minWidth),a.width=a._width=l)}};n.autoLastColumn=function(){var h=this.that,d=h.colModel,c=d.length,b=h.options.freezeCols,a=this.contWd-this.getSBWidth(),f=h.calcWidthCols(-1,b,!0),a=a-f,f=!1,h=h.getLastVisibleCI();if(null!=h&&(h=d[h],!h._percent)){for(var m=h._width,g,e=h._minWidth,l=h._maxWidth,c=c-1;c>=b;c--){var w=d[c];if(!w.hidden&&(w=w._width+0,a-=w,0>a)){f=!0;g=m+a>=e?m+a:m+w+a;break}}f||(g=m+a);g>l?g=l:g<e&&
(g=e);h.width=h._width=g}};n.numericVal=function(h,d){var c;c=-1<(h+"").indexOf("%")?parseInt(h)*d/100:parseInt(h);return Math.round(c)};n.refreshColumnWidths=function(h){h=h||{};var d=this.that,c=d.options,b=c.numberCell,a="flex"===c.width,f=d.colModel,m=c.scrollModel,g=m.lastColumn,m=m.autoFit,e=this.contWd,l=f.length,w=this.getSBWidth(),k=c._minColWidth,v=c._maxColWidth,r=0;b.show&&(b.width<b.minWidth&&(b.width=b.minWidth),r=b.outerWidth=b.width);b=a?null:e-w-r;k=Math.floor(this.numericVal(k,b));
v=Math.ceil(this.numericVal(v,b));e=0;if(!a&&5>b||isNaN(b)){if(c.debug)throw"availWidth N/A";}else{delete d.percentColumn;for(w=0;w<l;w++)if(r=f[w],!r.hidden){var t=r.width,q=-1<(t+"").indexOf("%")?!0:null,p=r.minWidth,n=r.maxWidth,p=p?this.numericVal(p,b):k,n=n?this.numericVal(n,b):v;n<p&&(n=p);if(void 0!=t){var s=0;!a&&q?(d.percentColumn=!0,r.resizable=!1,r._percent=!0,t=this.numericVal(t,b)-0,s=Math.floor(t),e+=t-s,1<=e&&(s+=1,e-=1)):t&&(s=parseInt(t));s<p?s=p:!a&&s>n&&(s=n);r._width=s}else r._width=
p;q||(r.width=r._width);r._minWidth=p;r._maxWidth=a?1E3:n}!1===a&&!1!==h.refreshWidth&&(m&&this.autoFit(),"auto"===g&&c.virtualX&&this.autoLastColumn());this._computeOuterWidths()}};n.estRowsInViewPort=function(){var h=Math.ceil(this.contHt/this.rowHt);return this.that.pageSize=h};n._refreshFrozenLine=function(){var h=this.that,d=h.options,c=d.numberCell,b=h.$cont_o,a=d.freezeBorders,f=d.freezeCols,d=d.freezeRows;this.$freezeLine&&this.$freezeLine.remove();this.$freezeLineH&&this.$freezeLineH.remove();
a&&(f&&(a=h.calcWidthCols(-1,f),isNaN(a)||0===a||0<a&&c.show&&a===c.width||(this.$freezeLine=k(["<div class='pqg-vert-frozen-line'  style = 'left:",a-1,"px;' ></div>"].join("")).appendTo(b))),d&&(h=h.$tbl))&&(h=h.children("tbody").children(".pq-last-frozen-row")[0])&&(this.$freezeLineH=k("<div class='pqg-horiz-frozen-line' style='top:"+(h.offsetTop+h.offsetHeight-1-1)+"px;' ></div>").appendTo(b))};n.setScrollVNumEles=function(h){var d=this.that;h=d.vscroll;var c=d.options;if(!c.maxHeight&&"flex"===
c.height)return h.option("num_eles",0),0;var c=d.iHierarchy?!0:!1,b=parseInt(h.option("num_eles")),b=parseInt(h.option("cur_pos")),a=this.getEContHt(),f=d.pdata?d.totalVisibleRows:0,m,g=0;d.$tbl&&0<d.$tbl.length&&(m=d.$tbl[d.$tbl.length-1],g=m.scrollHeight,m=k(m));if(0<g){m=m.children().children("tr");for(var e=0,d=0,b=1;b<m.length;b++)if(g=m[b],e+=g.offsetHeight,e>=a){c&&k(g).hasClass("pq-detail-child")&&(d=1<d?d-1:1);break}else c?!1===k(g).hasClass("pq-detail-child")&&d++:d++;b=f-d+1}else b+=1;
b>f&&(b=f);e>a&&c&&b++;h.option("num_eles",b);return b};n._setScrollVLength=function(h){h=this.that;var d=h.options;if("flex"!==d.height||d.maxHeight){var d=this.getSBHeight(),c=this.contHt-d+this.headerHt-2;h.vscroll.widget().css("bottom",d);h.vscroll.option("length",c)}};n.setHeaderHeight=function(){var h=this.that,d=h.$header,c,b,a;if(d&&d.length){if(1<d.length){if(c=d[0].scrollHeight,b=d[1].scrollHeight,a=Math.max(c,b),c!==b){var f=k(d[0]).find(".pq-grid-header-search-row"),m=k(d[1]).find(".pq-grid-header-search-row");
f.length&&(f.css("height",""),m.css("height",""),c=d[0].scrollHeight,b=d[1].scrollHeight,a=Math.max(c,b),c<a?f.height(m[0].scrollHeight):m.height(f[0].scrollHeight))}}else a=c=d[0].scrollHeight;h.$header_o.height(a-3);this.headerHt=a-1}else h.$header_o.height(0),this.headerHt=0};n.initContHeight=function(){var h=this.that,d=h.options;if("flex"!=d.height||d.maxHeight)this.contHt=this.height-(d.showHeader?this.rowHt:0)-(d.showTop?h.$top[0].offsetHeight:0)-(d.showBottom?h.$bottom[0].offsetHeight:0)};
n.initContWidth=function(){this.contWd=this.width};n.setContHeight=function(h){h=this.that;var d=h.$top,c=this.height-h.$header_o[0].offsetHeight,b;if(h.options.showTop){b=d[0].offsetHeight;var a=parseInt;d=d[0];window.getComputedStyle?d=getComputedStyle(d).marginTop:(d=d.currentStyle.marginTop,d="auto"==d?0:d);b+=a(d)}else b=0;c=c-b-h.$bottom[0].offsetHeight+1;c=0<=c?c:"";h.$cont.height(c);this.contHt=c};n.setContAndGridHeightForFlex=function(){var h=this.that,d=h.hscroll.widget();if(this.vscroll)d.css("position",
"");else{d.css("position","relative");var d=h.$cont,c=h.options.cls,b=d.children("."+c.cont_inner_b);d.height("");b.length||(b=d.children("."+c.cont_inner));b.height("");h.element.height("");h.$grid_center.height("")}};n.setContAndGridWidthForFlex=function(){var h=this.that,d=h.options.maxWidth,c=this.maxWidthPixel,b=h.calcWidthCols(-1,h.colModel.length),h=h.element,a=this.getSBWidth(),b=b+a;d&&b>=c&&(b=c);this.contWd=b;h.width(b+"px")};n.getTotalVisibleRows=function(h,d,c){var b=this.that,a=this.vrows,
f=this.estRowsInViewPort(),m=0,g=c?c.length:0,e=d,l=0,w=0,k=null,v=b.iHierarchy?!0:!1,b=b.options.detailModel.offset,r=0,t=this.rowHt,q=v?this.contHt:void 0;if(null==c||0==g)return{initV:null,finalV:null,tvRows:m,lastFrozenRow:null};for(var p=0,n=g>d?d:g;p<n;p++){var s=c[p],y=s.pq_hidden;y||(k=p,m++,v&&((s=s.pq_detail)&&s.show?(s=s.height||0,s>b&&(s=b),r+=s+t):r+=t))}if(g<d)return{initV:k,finalV:k,tvRows:m,lastFrozenRow:k};f-=m;e=l=a[h];w=0;p=e;for(n=g;p<n;p++){s=c[p];if(y=s.pq_hidden)l++;else if(w===
f)break;else l++,w++;if(v&&!y&&((s=s.pq_detail)&&s.show?(s=s.height||0,s>b&&(s=b),r+=s+t):r+=t,r>q))break}m+=a.length;e=e>=g?g-1:e;l=l>=g?g-1:l;return{initV:e,finalV:l<e?e:l,tvRows:m,lastFrozenRow:k}};n.setInitH=function(h,d){var c=this.that;c.initH=h;c.finalH=d};n.setInitV=function(h,d){var c=this.that,b;(null==h||null==d)&&(b=this.vrows)&&b.length&&(h=d=b[b.length-1]);c.initV=h;c.finalV=d};n.calcVisibleV=function(){var h=this.that,d=h.options.freezeRows,h=h.pdata||[],c,b=h.length,a=[],f=0;for(c=
0;c<d;c++)h[c].pq_hidden||(a[f++]=c);this.vfrows=a;f=0;a=[];for(c=d;c<b;c++)h[c].pq_hidden||(a[f++]=c);this.vrows=a};n.calcVisibleH=function(){for(var h=this.that,d=[],c=0,b=h.colModel,h=h.options.freezeCols,a=b.length;h<a;h++)b[h].hidden||(d[c++]=h);this.vcols=d};n.calcInitFinal=function(){var h=this.that,d=h.options,c=d.virtualY,b=d.freezeRows,a="flex"===d.height,f=h.pdata;if(null==f||0===f.length)b=this.getTotalVisibleRows(m,b,f),h.totalVisibleRows=b.tvRows,c=b.initV,d=b.finalV,h.lastFrozenRow=
b.lastFrozenRow;else if(c){var m=parseInt(h.vscroll.option("cur_pos"));if(isNaN(m)||0>m)throw"cur_pos NA";h.scrollCurPos=m;b=this.getTotalVisibleRows(m,b,f);h.totalVisibleRows=b.tvRows;c=b.initV;h.lastFrozenRow=b.lastFrozenRow;d=a&&!d.maxHeight?f.length-1:b.finalV}else b=this.getTotalVisibleRows(0,b,f),h.lastFrozenRow=b.lastFrozenRow,h.totalVisibleRows=b.tvRows,c=0,d=f.length-1;this.setInitV(c,d)};n.calcInitFinalH=function(){var h=this.that,d=h.options,c,b=h.colModel,a=b.length;if(d.virtualX){c=parseInt(h.hscroll.option("cur_pos"));
var f=parseInt(d.freezeCols),m="flex"===d.width,g=this.vcols;g||(this.calcVisibleH(),g=this.vcols);c>=g.length&&(c=g.length-1);c=g[c];c>a-1&&(c=a-1);if(0>c||null==c)c=0;if(m&&!d.maxWidth)d=a-1;else{h=h.calcWidthCols(-1,f);m=this.getEContWd();for(g=c;g<a;g++){var e=b[g];if(!e.hidden){e=e.outerWidth;if(!e&&d.debug)throw"outerwidth N/A";h+=e;if(h>m)break}}d=g;d>a-1&&(d=a-1);d<f-1&&(d=f-1)}}else c=0,d=a-1;this.setInitH(c,d)};n._calcOffset=function(h){return(h=/(-|\+)([0-9]+)/.exec(h))&&3===h.length?parseInt(h[1]+
h[2]):0};n.setMax=function(h){var d=this.that,c=d.element;(d=d.options[h])?(d==parseInt(d)&&(d+="px"),c.css(h,d)):c.css(h,"")};n.refreshGridWidthAndHeight=function(){var h=this.that,d=h.options,c,b,a=-1<(d.width+"").indexOf("%")?!0:!1,f=-1<(d.height+"").indexOf("%")?!0:!1,m=-1<(d.maxHeight+"").indexOf("%")?!0:!1,g="flex"==d.height,e=m&&g,l=-1<(d.maxWidth+"").indexOf("%")?!0:!1,w="flex"==d.width,B=l&&w,h=h.element;if(a||f||e||B){var v=h.parent();if(!v.length)return;var r;v[0]==document.body||"fixed"==
h.css("position")?(r=k(window).width(),v=window.innerHeight?window.innerHeight:k(window).height()):(r=v.width(),v=v.height());var n=this._calcOffset,q=a?n(d.width):0,n=f?n(d.height):0;B?c=parseInt(d.maxWidth)*r/100:a&&(c=parseInt(d.width)*r/100+q);e?b=parseInt(d.maxHeight)*v/100:f&&(b=parseInt(d.height)*v/100+n)}c||(w&&d.maxWidth?l||(c=d.maxWidth):a||(c=d.width));d.maxWidth&&(this.maxWidthPixel=c);b||(g&&d.maxHeight?m||(b=d.maxHeight):f||(b=d.height));parseFloat(c)==c?(c=c<d.minWidth?d.minWidth:c,
h.css("width",c)):"auto"===c&&h.width(c);parseFloat(b)==b&&(b=b<d.minHeight?d.minHeight:b,h.css("height",b));this.width=Math.round(h.width());this.height=Math.round(h.height())};n.decidePanes=function(){var h=this.that,d=h.pqpanes={v:!1,h:!1,vH:!1},c=h.options,h=c.virtualX,b=c.virtualY,a="flex"==c.height&&!c.maxHeight,f="flex"==c.width&&!c.maxWidth,m=c.numberCell,g=c.freezeRows,c=c.freezeCols;!g||a||!c&&!m.show||f?g&&!a?b||(d.h=!0):!c&&!m.show||f||h||(d.v=!0,d.vH=!0):(b||(d.h=!0),h||(d.v=!0,d.vH=
!0))};n._storeColumnWidths=function(h){for(var d=this.that,c=d.options,b=d.colModel,a=c.virtualX,c=c.freezeCols,f=d.initH,d=h?b.length-1:d.finalH,m=[],g=0;g<=d;g++)!h&&a&&g<f&&g>=c&&(g=f),m[g]={outerWidth:b[g].outerWidth};return m};n._isColumnWidthChanged=function(h){for(var d=this.that,c=d.colModel,d=d.iGenerateView.colDef,b=0,a=d.length;b<a;b++){var f=d[b].colIndx;if(c[f].outerWidth!==h[f].outerWidth)return!0}return!1};n.softRefresh=function(){var h=this.that,d=h.options;this.refreshScrollbars();
h.iGenerateView.setPanes();h._saveDims();h.iMouseSelection.syncScrollBarVert();"flex"==d.height&&this.setContAndGridHeightForFlex();"flex"==d.width&&this.setContAndGridWidthForFlex();this._refreshFrozenLine()};n.refreshScrollbars=function(h){h=h||{};var d=this.that,c=d.options,b=d.iGenerateView,a,f="flex"===c.height;a="flex"===c.width;if((f||this.contHt)&&(a||this.contWd)&&null!==d.totalVisibleRows){d=this.setScrollVNumEles(h);d=1<d?!0:!1;if((!f||c.maxHeight)&&d!==this.vscroll)if(this.vscroll=d,c.scrollModel.autoFit||
c.virtualX||a){if(c=this._storeColumnWidths(),this.refreshColumnWidths(),this._isColumnWidthChanged(c)||a)this.ignoreTResize=!0,this._refreshTableWidths(c,{table:!0,header:!0}),delete this.ignoreTResize,this.setHeaderHeight(),this.setContHeight(),b.setPanes(),d=this.setScrollVNumEles(!0),this.vscroll=1<d?!0:!1}else b.setPanes();d=this.setScrollHNumEles();a=1<d?!0:!1;this.hscroll!=a&&(this.hscroll=a,b.setPanes());this._setScrollHLength();this._setScrollVLength(h);this._setScrollHVLength()}};n._setScrollHVLength=
function(){var h=this.that;this.vscroll&&this.hscroll||h.$hvscroll.css("visibility","hidden")};n._setScrollHLength=function(){var h=this.that,d=h.hscroll.widget(),c=h.$hvscroll;if(h.options.scrollModel.horizontal){d.css("visibility","");c.css("visibility","");var c=this.contWd,b=this.getSBWidth();d.css("right",0===b?0:"");h.hscroll.option("length",c-b)}else d.css("visibility","hidden"),c.css("visibility","hidden")};n.estVscroll=function(){var h=this.that,d=!0;null==h.totalVisibleRows||null==this.contHt?
d=!1:h.totalVisibleRows*this.rowHt<this.contHt&&(d=!1);this.vscroll=d};n.getSBWidth=function(){null==this.vscroll&&this.estVscroll();return this.vscroll?17:0};n.estHscroll=function(){var h=this.that;if(null==this.contWd)throw"failed";var d=!1;1<this.calcColsOutsideCont(h.colModel)+1&&(d=!0);this.hscroll=d};n.getSBHeight=function(){null==this.hscroll&&this.estHscroll();return this.hscroll?17:0};n.getEContHt=function(){if(null==this.contHt)throw"contHt N/A";return this.contHt-this.getSBHeight()};n.getEContWd=
function(){if(null==this.contWd)throw"contWd N/A";return this.contWd-this.getSBWidth()};n.calcColsOutsideCont=function(h){var d=this.that.options,c=d.numberCell,d=d.freezeCols,b=this.contWd-this.getSBWidth(),a=0;c.show&&(a+=c.outerWidth);for(c=0;c<h.length;c++){var f=h[c];f.hidden||(a+=f.outerWidth)}var m=0,g=0,f=Math.round(a);f>b&&g++;for(c=d;c<h.length;c++)if(f=h[c],!f.hidden)if(m+=f.outerWidth,f=a-m,f>b)g++;else break;return g};n.setScrollHNumEles=function(){var h=this.that,d=h.options,c=h.colModel,
b=d.scrollModel,a=1*h.hscroll.option("cur_pos"),f=0;if("flex"!==d.width||d.maxWidth)f="fullScroll"===b.lastColumn?c.length-d.freezeCols-h._calcNumHiddenUnFrozens():this.calcColsOutsideCont(c)+1;a&&f<=a&&(f=a+1);h.hscroll.option("num_eles",f);return f};n.init=function(){var h=this.that,d=h.options;this.hscroll=this.vscroll=this.contHt=this.contWd=null;h.initH=h.initV=h.finalH=h.finalV=null;h.totalVisibleRows=h.lastFrozenRow=null;this.rowHt=d.rowHeight;this.headerHt=0;this.height=null};n.refresh=function(h){h=
h||{};var d=this.that,c=h.header,b=h.table,a=h.pager,f,m=d.iGenerateView;f=d.element;if(f[0].offsetWidth){h.toolbar&&d.refreshToolbar();d.iMouseSelection.resetMargins();this.init();f=d.options;this.decidePanes();f.collapsible._collapsed=!1;this.setMax("maxHeight");this.setMax("maxWidth");this.refreshGridWidthAndHeight();this.initContHeight();this.initContWidth();this.calcInitFinal();if(!1===c||!1===b)var g=this._storeColumnWidths(!0);this.refreshColumnWidths();this.calcInitFinalH();m.createColDefs();
!1!==c?d._createHeader():this._isColumnWidthChanged(g)&&this._refreshTableWidths(g,{header:!0});d._refreshHeaderSortIcons();!1!==a&&d._refreshPager();this.setHeaderHeight();this.setContHeight();!1!==b?m.generateView({source:h.source}):(this._refreshTableWidths(g,{table:!0}),m.setPanes());d._saveDims();m.scrollView();this.refreshScrollbars();"flex"==f.height&&this.setContAndGridHeightForFlex();"flex"==f.width&&this.setContAndGridWidthForFlex();this._refreshFrozenLine();d._createCollapse();f.dataModel.postDataOnce=
void 0}else f.addClass("pq-pending-refresh")};n.summaryTable=function(){var h=this.$summary,d=this.that,c=d.options.summaryData;c?(h||(h=this.$summary=k("<div class='pq-grid-summary'></div>").prependTo(d.$bottom)),h={data:c,$cont:h},d.createTable(h)):h&&h[0].innerHTML&&h.empty()};n.refreshVscroll=function(h){h=this.that;var d=h.iGenerateView,c=h.options;if(c.virtualY&&!c.scrollModel.smooth){var b=h.initV,a=h.finalV;this.calcInitFinal();var f=b-h.initV,m=a-h.finalV;c.fullrefreshOnScroll||c.detailModel.init||
h._mergeCells||1!=Math.abs(f)||1!=Math.abs(m)?b==h.initV&&a==h.finalV||d.generateView():-1==f?(d.removeTopRow(1),d.appendRow(h.finalV-a)):1==f&&(d.prependRow(),d.removeBottomRow(a-h.finalV));h._saveDims();d.scrollView();1>=this.setScrollVNumEles()&&this.refreshScrollbars()}};n._refreshTableWidths=function(h,d){var c=this.that,b=c.$tbl_header,a=d.header&&b,f=c.$tbl,m=d.table&&f,b=a?b.children().children(".pq-row-hidden"):null,g=a?c.$header.find(".pq-grid-col-resize-handle"):null,f=m&&f?f.children().children(".pq-row-hidden"):
null,e,l=!1,w=0;m&&c.tables.length&&(m=c.tables[0].$tbl.children().children(".pq-row-hidden"),f=f?f.add(m):m);for(var m=c.iGenerateView.colDef,k=0,v=m.length;k<v;k++){var r=m[k],n=r.colIndx,q=h[n].outerWidth,r=r.column.outerWidth;r!==q&&(a&&(e=b.find("td[pq-col-indx="+n+"]"),e.width(r)),f&&(e=f.find("td[pq-col-indx="+n+"]"),e.length&&(l=!0,e.width(r))));w+=r-q;a&&0!==w&&(n=g.filter("[pq-col-indx="+n+"]"),q=parseInt(n.css("left")),n.css("left",q+w))}l&&c._trigger("tableWidthChange");c._saveDims()}})(jQuery);
(function(k){function n(a,b,c){for(var f=0,d=a.length;f<d;f++){for(var m=a[f],h={},k=0,q=b.length;k<q;k++){var n=b[k];h[n]=m[n]}c.push(h)}}function h(a){var b=this;b.that=a;b.findformulas();a.on("columnChange",function(){b.findformulas()}).on("dataAvailable",function(){b._onDA()}).on(!0,"change",function(a,c){b._onchange(c)})}var d=k.paramquery,c=d.cClass;k.widget("paramquery.pqGrid",d._pqGrid,{options:{flex:{on:!0,one:!1,all:!0},detailModel:{cache:!0,offset:100,expandIcon:"ui-icon-triangle-1-se glyphicon glyphicon-minus",
collapseIcon:"ui-icon-triangle-1-e glyphicon glyphicon-plus"},dragColumns:{enabled:!0,acceptIcon:"ui-icon-check glyphicon-ok",rejectIcon:"ui-icon-closethick glyphicon-remove",topIcon:"ui-icon-circle-arrow-s glyphicon glyphicon-circle-arrow-down",bottomIcon:"ui-icon-circle-arrow-n glyphicon glyphicon-circle-arrow-up"},track:null,mergeModel:{flex:!1},realFocus:!0,sortModel:{on:!0,type:"local",multiKey:"shiftKey",number:!0,single:!0,cancel:!0,sorter:[],useCache:!0,ignoreCase:!1},filterModel:{on:!0,type:"local",
mode:"AND",header:!1}},_create:function(){var a=this,c=a.options;a.listeners={};a._queueATriggers={};a.iHistory=new d.cHistory(a);a.iGroup=new d.cGroup(a);d.cMerge&&(a.iMerge=new d.cMerge(a));a.iFilterData=new d.cFilterData(a);a.iSelection=new b.Selection(a);a.iHeaderSearch=new f(a);a.iUCData=new d.cUCData(a);a.iMouseSelection=new d.cMouseSelection(a);a._super();new h(a);a.iDragColumns=new d.cDragColumns(a);a.refreshToolbar();"remote"===c.dataModel.location&&a.refresh({table:!0});a.on("dataAvailable",
function(){a.one("refreshDone",function(){a._trigger("ready");setTimeout(function(){a.element&&a._trigger("complete")},0)})});a.refreshDataAndView({header:!0})}});k.widget.extend=function(){var a=Array.prototype.shift,b=k.isPlainObject,c=k.isArray,f=k.widget.extend,d=a.apply(arguments),m;"boolean"==typeof d&&(m=d,d=a.apply(arguments));var h=arguments,n=0,q=h.length,p,u,s;for(null==m&&(m=1<q?!0:!1);n<q;n++)for(u in p=h[n],p)s=p[u],void 0!==s&&(a=0<n?!1:!0,b(s)?(d[u]=d[u]||{},f(a,d[u],s)):c(s)?d[u]=
m&&a?s.slice():s:d[u]=s);return d};var b=window.pq=window.pq||{};b.grid=function(a,b){var c=k(a).pqGrid(b);return c.data("paramqueryPqGrid")||c.data("paramquery-pqGrid")};d.pqGrid.regional={};var a=d.pqGrid.prototype;d.pqGrid.defaults=a.options;a.focus=function(a){a=a||{};var b=a.$td,c,f=a.rowIndxPage,d=a.colIndx;a=document.activeElement;if(b){if(null==f||null==d)d=this.getCellIndices({$td:b}),f=d.rowIndxPage,d=d.colIndx}else{if(null==f||null==d){if(a&&a!=document.body&&"pq-grid-excel"!=a.id&&"pq-grid-cont"!=
a.className||!(b=this._focusElement))return;f=b.rowIndxPage,d=b.colIndx}var b=this.iMerge,m=f+this.rowIndxOffset;b.ismergedCell(m,d)&&(b=b.getRootCell(m,d,"o"),f=b.rowIndxPage,d=b.colIndx);b=this.getCell({rowIndxPage:f,colIndx:d})}if(this.options.realFocus)this._focusElement={$ele:b,rowIndxPage:f,colIndx:d},(c=b[0])&&"TD"==c.nodeName.toUpperCase()?!1===k(a).hasClass("pq-editor-focus")&&(c.setAttribute("tabindex",0),c.focus()):(f=this.options.dataModel.data)&&f.length||this.$cont.focus();else{if(c=
this._focusElement)this.removeClass({rowIndxPage:c.rowIndxPage,colIndx:c.colIndx,cls:"pq-focus",refresh:!1}),this.element.find(".pq-focus").removeClass("pq-focus");b&&(this.addClass({rowIndxPage:f,colIndx:d,cls:"pq-focus"}),this._focusElement={$ele:b,rowIndxPage:f,colIndx:d});f=this.$cont;document.activeElement!=f[0]&&f[0].focus()}};a.onfocus=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.addClass({rowIndxPage:a.rowIndxPage,colIndx:a.colIndx,cls:"pq-focus"})}};a.onblur=function(){if(!this.options.realFocus){var a=
this._focusElement;a&&this.removeClass({rowIndxPage:a.rowIndxPage,colIndx:a.colIndx,cls:"pq-focus"})}};a.range=function(a,c){return new b.Range(this,a,"range",c)};a.rowExpand=function(a){this.iHierarchy.rowExpand(a)};a.rowInvalidate=function(a){this.iHierarchy.rowInvalidate(a)};a.rowCollapse=function(a){this.iHierarchy.rowCollapse(a)};a.saveState=function(a){a=a||{};var b=this.element,c=k.extend,f=this.options,d=c(!0,{},{sorter:f.sortModel.sorter}),m=f.pageModel,m={rPP:m.rPP,curPage:m.curPage},h=
this.colModel,n=[],q,p,u=0,s=h.length;p=f.groupModel;c=c(!0,{},{dataIndx:p.dataIndx,dir:p.dir,collapsed:p.collapsed,merge:p.merge,grandSummary:p.grandSummary});for(b=b[0].id;u<s;u++){q=h[u];p={width:q.width,dataIndx:q.dataIndx,hidden:q.hidden};if(q=q.filter)p.filter={value:q.value,value2:q.value2,on:q.on};n[u]=p}f={colModel:n,height:f.height,datestamp:Date.now(),width:f.width,groupModel:c,pageModel:m,sortModel:d,freezeRows:f.freezeRows,freezeCols:f.freezeCols};!1!==a.stringify&&(f=JSON.stringify(f),
!1!==a.save&&"undefined"!==typeof Storage&&localStorage.setItem("pq-grid"+(b?b:""),f));return f};a.loadState=function(a){a=a||{};var b;b=k.widget.extend;var c=k.extend,f=this.element[0].id;if(f=a.state||("undefined"===typeof Storage?void 0:localStorage.getItem("pq-grid"+(f||""))))"string"==typeof f&&(f=JSON.parse(f));else return!1;for(var d=f.colModel,m,h,n=[],q=[],p=[],u=[],s=[],y=this.options,z=1<this.depth,x=z?this.colModel:y.colModel,A=0,C=d.length;A<C;A++)m=d[A],h=m.dataIndx,q[h]=!0,p[h]=A,n[h]=
m.width,u[h]=m.filter,s[h]=m.hidden;z||x.sort(function(a,b){return p[a.dataIndx]-p[b.dataIndx]});A=0;for(C=x.length;A<C;A++)d=x[A],h=d.dataIndx,q[h]&&(d.width=n[h]||d.width,d.filter=c(d.filter,u[h]),d.hidden=s[h]);this.iColModel.init();b(y.sortModel,f.sortModel);b(y.pageModel,f.pageModel);this.groupOption(f.groupModel,!1);b={freezeRows:f.freezeRows,freezeCols:f.freezeCols};isNaN(1*y.height)||isNaN(1*f.height)||(b.height=f.height);isNaN(1*y.width)||isNaN(1*f.width)||(b.width=f.width);this.option(b);
!1!==a.refresh&&this.refreshDataAndView();return!0};var f=function(a){function b(c,e,f){a.filter({data:[{dataIndx:c,value:e,value2:f}]})}this.that=a;var c=this;this.dataHS={};a.on("headerKeyDown",function(a,b){var e=k(a.originalEvent.target);return e.hasClass("pq-grid-hd-search-field")?c.onKeyDown(a,b,e):!0});a.on("createHeader",function(a,b){return c._onCreateHeader()});this.changeListener={change:function(a,c){b(c.dataIndx,c.value,c.value2)}};this.keyupListener={keyup:function(a,c){b(c.dataIndx,
c.value,c.value2)}};this.clickListener={click:function(a,c){b(c.dataIndx,c.value)}}},c=f.prototype=new c;c.get$Ele=function(a,b){var c=this.that,f=c.options.freezeCols,d=k(c.$tbl_header[0]),m=".pq-grid-hd-search-field[name='"+b+"']",c=k(c.$tbl_header[2==c.$tbl_header.length?1:0]);return a>=f?c.find(m):d.find(m)};c.onKeyDown=function(a,b,c){b=this.that;if(a.keyCode===k.ui.keyCode.TAB){var f=c.attr("name"),d=b.getColIndx({dataIndx:f}),m=b.colModel,h,n=a.shiftKey,q=m[d];if("between"==q.filter.condition&&
(b.scrollColumn({colIndx:d}),f=this.get$Ele(d,f),f[0]==c[0]?n||(h=f[1]):n&&(h=f[0]),h))return h.focus(),a.preventDefault(),!1;do{n?d--:d++;if(0>d||d>=m.length)break;q=m[d];c=q.filter;if(!q.hidden&&c){b.scrollColumn({colIndx:d});f=q.dataIndx;h=this.get$Ele(d,f);"between"==c.condition&&(h=n?k(h[1]):k(h[0]));if(h)return h.focus(),a.preventDefault(),!1;break}}while(1)}else return!0};c._bindFocus=function(){function a(f){f=k(f.target).closest(".pq-grid-hd-search-field").attr("name");if(b.scrollColumn({dataIndx:f})){var d=
b.getColIndx({dataIndx:f});c.get$Ele(d,f).focus()}}for(var b=this.that,c=this,f=b.$header.find(".pq-grid-header-search-row"),d=0;d<f.length;d++)k(f[d]).on("focusin",a)};c._onCreateHeader=function(){var a=this.that,b=a.options;if(b.filterModel.header){this._bindFocus();var c=a.colModel,b=b.freezeCols,f=a.$tbl_header,d=k(f[0]),m=k(f[1]),h="input,select";if(1<f.length){d.find(h).css("visibility","hidden");for(var n=0;n<b;n++){var q=c[n],h="*[name='"+q.dataIndx+"']";d.find(h).css("visibility","visible");
m.find(h).css("visibility","hidden")}}c=a.iGenerateView.colDef;n=0;for(h=c.length;n<h;n++){var p=c[n],u=p.colIndx,q=p.column,s=q.filter;if(s){var p=q.dataIndx,y=d;u>=b&&1<f.length&&(y=m);u=y.find("*[name='"+p+"']");if(0!=u.length){var y=s.type,z=s.value,x=s.value2;"checkbox"==y&&"triple"==s.subtype?u.pqval({val:z}):"select"==y&&null!=z&&u.val(z);(y=s.init)&&y.call(u,{dataIndx:p,column:q});if(q=s.listeners)for(s=0;s<q.length;s++){y=q[s];"string"==typeof y&&(y=this[y+"Listener"]);for(var A in y)(function(b,
c,e){b.bind(A,function(f){var d=a.getColumn({dataIndx:e}),m=d.filter;"checkbox"==m.type?z="triple"==m.subtype?b.pqval({incr:!0}):b.is(":checked")?!0:!1:"between"==m.condition?(z=k(b[0]).val(),x=k(b[1]).val()):z=b.val();return c.call(this,f,{column:d,dataIndx:e,value:z,value2:x})})})(u,y[A],p)}}}}}};var m=function(a,b){return["<div class='pq-from-div'>",a,"</div><span class='pq-from-to-center'>-</span><div class='pq-to-div'>",b,"</div>"].join("")};c.createDOM=function(a,b){var c=this.that,f=c.options,
h=f.bootstrap.on?" ":" ui-corner-all",f=f.numberCell;a.push("<tr class='pq-grid-header-search-row'>");f.show&&a.push("<td pq-col-indx='-1' class='pq-grid-number-col' rowspan='1'><div class='pq-td-div'>&nbsp;</div></td>");for(var f=c.iGenerateView.colDef,k=0,n=f.length;k<n;k++){var t=f[k].column,q=b,p=t.halign;p||(p=t.align);"right"==p?q+=" pq-align-right":"center"==p&&(q+=" pq-align-center");(p=t.cls)&&(q=q+" "+p);if(p=t.filter){var u=t.dataIndx,s=p.type,y=p.value,z=p.condition,x=p.cls,x="pq-grid-hd-search-field "+
(x?x:""),A=p.style,A=A?A:"",C=p.attr,C=C?C:"",D="";if("between"==z)var E=p.value2,E=null!=E?E:"";"textbox"===s?(y=y?y:"",x=x+" pq-search-txt"+h,D="between"==z?m(this._input(u,y,x+" pq-from",A,C),this._input(u,E,x+" pq-to",A,C)):this._input(u,y,x,A,C)):"textarea"===s?(y=y?y:"",x=x+" pq-search-txt"+h,D="between"==z?m(this._textarea(u,y,x+" pq-from",A,C),this._textarea(u,E,x+" pq-to",A,C)):this._textarea(u,y,x,A,C)):"select"===s?p.cache?D=p.cache:(s=p.options,"function"===typeof s&&(s=s.call(c,{column:t,
value:y,dataIndx:u,cls:x,style:A,attr:C})),x+=h,t=["name='",u,"' class='",x,"' style='",A,"' ",C].join(""),D=d.select({options:s,attr:t,prepend:p.prepend,valueIndx:p.valueIndx,labelIndx:p.labelIndx,groupIndx:p.groupIndx}),p.cache=D):"checkbox"==s?D=["<input ",null==y||!1==y?"":"checked=checked"," name='",u,"' type=checkbox class='"+x+"' style='"+A+"' "+C+"/>"].join(""):"string"==typeof s?D=s:"function"==typeof s&&(D=s.call(c,{width:t.outerWidth,value:y,value2:E,column:t,dataIndx:u,cls:x,attr:C,style:A}));
a.push(["<td class='",q,"'><div class='pq-td-div' >",D,"</div></td>"].join(""))}else a.push(["<td class='",q,"'><div class='pq-td-div' >&nbsp;</div></td>"].join(""))}a.push("</tr>")};c._input=function(a,b,c,f,d){return['<input value="',b,"\" name='",a,"' type=text style='"+f+"' class='"+c+"' "+d+" />"].join("")};c._textarea=function(a,b,c,f,d){return["<textarea name='",a,"' style='"+f+"' class='"+c+"' "+d+" >",b,"</textarea>"].join("")};a.refreshToolbar=function(){var a=this.options,c=a.toolbar,f;
this._toolbar&&(f=this._toolbar,f.destroy());if(c){var d=c.cls,m=c.style,h=c.attr,c=c.items,d=k("<div class='"+(d?d:"")+"' style='"+(m?m:"")+"' "+(h?h:"")+" ></div>");f?f.widget().replaceWith(d):this.$top.append(d);f=b.toolbar(d,{items:c,gridInstance:this,bootstrap:a.bootstrap});a.showToolbar||d.css("display","none");this._toolbar=f}};a.isLeftOrRight=function(a){return a>this.freezeCols?"right":"left"};a.ovCreateHeader=function(a,b){this.options.filterModel.header&&this.iHeaderSearch.createDOM(a,
b)};a.filter=function(a){var b=this,c=this.options,f=void 0===a.apply?!0:a.apply,d=void 0===a.sort?!0:a.sort,m=c.dataModel,c=c.filterModel;if(void 0!=a){var h="replace"==a.oper?!0:!1;a=a.data;for(var n=this.colModel,n=f?n:k.extend(!0,[],n),q=0,p=n.length,u=a.length,s=0;s<p;s++){for(var y=n[s],z=!1,x=0;x<u&&q!=u;x++){var A=a[x];if(A.dataIndx==y.dataIndx){z=!0;q++;var x=y.filter,C=A.condition,D=A.value;x?x.on=!0:x=y.filter={on:!0};C&&(x.condition=C);C=x.condition;x.value=D;if("between"==C)x.value2=
A.value2;else if("range"==C){A=[];if(D)if("string"==typeof D){var C=x.options,E=D.indexOf('"'),G=D.lastIndexOf('"'),D=D.substr(E,G+1),D=JSON.parse("["+D+"]");if(C)for(E=0,G=C.length;E<G;E++){var O=C[E];-1!=k.inArray(O,D)&&A.push(O)}else A=D.split(",s*")}else"function"==typeof D.push&&(A=D);x.value=A}break}}h&&!z&&y.filter&&(y.filter.on=!1)}}var J={header:!1,apply:f,sort:d,CM:n};if("remote"==m.location&&"local"!=c.type)this.remoteRequest({apply:f,CM:n,callback:function(){return b._onDataAvailable(J)}});
else return J.source="filter",J.trigger=!1,b._onDataAvailable(J)};a._initTypeColumns=function(){for(var a=this.colModel,b=0,c=a.length;b<c;b++){var f=a[b],m=f.type;"checkBoxSelection"===m||"checkbox"==m?(f.type="checkbox",new d.cCheckBoxColumn(this,f)):"detail"===m&&(f.dataIndx="pq_detail",this.iHierarchy=new d.cHierarchy(this,f))}};a.refreshHeader=function(){this._createHeader();this.iGenerateView.setPanes();this._refreshHeaderSortIcons()};a._refreshHeaderSortIcons=function(){this.iHeader.refreshHeaderSortIcons()};
a.getLargestRowCol=function(a){for(var b=0;b<a.length;b++);};a.bringCellToView=function(a){this._bringCellToView(a)};a._setUrl=function(a){this.options.dataModel.getUrl=function(){return{url:this.url+(null!=a?a:"")}}};a.pageData=function(){return this.pdata};a.getData=function(a){a=a||{};var b=a.dataIndx,c=b?b.length:0,f=a.data;a=this.options.dataModel;var d=a.data,m=a.dataUF;a=[];if(c)f?n(f,b,a):(d&&n(d,b,a),m&&n(m,b,a));else return d.concat(m?m:[]);f=[];for(d=0;d<c;d++){var m=b[d],h=this.getColumn({dataIndx:m});
f.push({dataIndx:m,dir:"up",dataType:h.dataType,sortType:h.sortType})}a=this.iSort._sortLocalData(f,a);b=[];c=void 0;f=0;for(d=a.length;f<d;f++)m=a[f],h=JSON.stringify(m),h!==c&&(b.push(m),c=h);return b};a.get_p_data=function(){var a=this.options,b="remote"==a.pageModel.type,c=a.dataModel.data,f=this.pdata,d=this.rowIndxOffset,a=a.groupModel,m=d&&b?Array(d):[];return a.on&&a.dataIndx.length?d?(b||(m=c.slice(0,d)),m.concat(f)):f:d&&b?m.concat(f):c};a._onDataAvailable=function(a){a=a||{};var b=this.options,
c=null==a.apply?!0:a.apply,f=a.source,d=a.sort,m=[],m=b.filterModel,h=b.dataModel,b=b.sortModel,k=h.location;!1!==c&&!1!==a.trigger&&this._trigger("dataAvailable",a.evt,{source:f});m=m&&m.on&&("local"==k&&"remote"!=m.type||"remote"==k&&"local"==m.type)?this.iFilterData.filterLocalData(a).data:h.data;"local"==b.type&&!1!==d&&(c?this.sort({refresh:!1}):m=this.iSort.sortLocalData(m));if(!1===c)return m;h.data=m;this.refreshView(a)};a.reset=function(a){a=a||{};var b=a.sort,c,f=0,d;c=this.options;d=k.extend;
var m,h=a.filter,n=a.group;if(b||h||n){b&&(m=!0===b?{sorter:[]}:b,d(c.sortModel,m));if(h)for(c=this.getColModel(),d=c.length;f<d;f++)if(m=c[f].filter)m.value=null,m.value2=null,m.cache=null;n&&(f=!0===n?{dataIndx:[]}:n,this.groupOption(f,!1));!1!==a.refresh&&(h?(this.filter({oper:"replace",data:[]}),this.refreshHeader()):b?this.sort():this.refreshView())}};a._trigger=d._trigger;a.on=d.on;a.one=d.one;a.off=d.off;a.pager=function(){return this.pagerW};a.vscrollbar=function(){return this.vscroll};a.hscrollbar=
function(){return this.hscroll};a.toolbar=function(){return this._toolbar.element};d.cCompute=h;a=h.prototype;a.callRow=function(a,b,c){if(a)for(;c--;){var f=b[c],d=f.column;a[d.dataIndx]=f.formula.call(this.that,{rowData:a,column:d})}};a._onDA=function(){var a=this.formulas.length;if(a)for(var b=this.that.options.dataModel.data,c=b.length,f=this.formulas;c--;)this.callRow(b[c],f,a)};a._onchange=function(a){var b=this.formulas.length;if(b){a=a.rowList;for(var c=this.formulas,f=a.length;f--;)this.callRow(a[f].rowData,
c,b)}};a.findformulas=function(){for(var a=this.that.colModel,b,c,f=[],d=a.length;d--;)b=a[d],(c=b.formula)&&f.push({formula:c,column:b});this.formulas=f};a=d.cColModel=a=function(a){this.that=a;this.init()};a=a.prototype;a.extend=function(a,b){for(var c,f,d=k.extend,m=a.length;m--;){var h=a[m];for(c in b)void 0===h[c]&&(f=b[c],h[c]=f&&"object"==typeof f?d(!0,{},f):f)}};a.init=function(){var a=this.that,b=a.options,c=b.columnTemplate,f;f=b.colModel;f||(this._autoGenColumns(),f=b.colModel);b=this.nestedCols(f);
a.depth=b.depth;b=a.colModel=b.colModel;f=b.length;c&&this.extend(b,c);this.getHeadersCells();this.alignColumns(b,f);this.assignRowSpan();this._refreshDataIndices();a._trigger("CMInit")};a.alignColumns=function(a,b){for(var c=0;c<b;c++){var f=a[c];if(!f.align){var d=f.dataType;!d||"integer"!=d&&"float"!=d||(f.align="right")}}};a.nestedCols=function(a,b,c,f){var d=a.length,m=[];null==b&&(b=1);for(var h=b,k=0,n=0,p=0,u=0;u<d;u++){var s=a[u];s.parent=f?f:void 0;!0===c&&(s.hidden=c);var y=s.colModel;
y&&y.length?(y=this.nestedCols(y,b+1,s.hidden,s),m=m.concat(y.colModel),0<y.colSpan?(y.depth>h&&(h=y.depth),s.colSpan=y.colSpan,k+=y.colSpan):s.colSpan=0,p+=y.o_colspan,s.o_colspan=y.o_colspan,s.childCount=y.childCount,n+=y.childCount):(s.hidden?s.colSpan=0:(s.colSpan=1,k++),p++,s.o_colspan=1,s.childCount=0,n++,m.push(s))}return{depth:h,colModel:m,colSpan:k,width:0,childCount:n,o_colspan:p}};a.getHeadersCells=function(){for(var a=this.that,b=a.options.colModel,c=a.colModel.length,f=a.depth,d=[],m=
0;m<f;m++){d[m]=[];for(var h=0,k=0,n=0;n<c;n++){var p;if(0==m)p=b[h];else{var u=d[m-1][n];if((p=u.colModel)&&0!=p.length){for(var u=n-u.leftPos,s=0,y=0,z=0;z<p.length;z++)if(s+=0<p[z].childCount?p[z].childCount:1,u<s){y=z;break}p=p[y]}else p=u}u=p.childCount?p.childCount:1;n==k?(p.leftPos=n,d[m][n]=p,k+=u,b[h+1]&&h++):d[m][n]=d[m][n-1]}}return a.headerCells=d};a.getDataType=function(){var a=this.colModel;if(a&&a[0])return"string"==typeof a[0].dataIndx?"JSON":"ARRAY"};a.assignRowSpan=function(){for(var a=
this.that,b=a.colModel.length,c=a.headerCells,a=a.depth,f=0;f<b;f++)for(var d=0;d<a;d++){var m=c[d][f];if(!(0<f&&m==c[d][f-1]||0<d&&m==c[d-1][f])){for(var h=1,k=d+1;k<a;k++)m==c[k][f]&&h++;m.rowSpan=h}}return c};a._autoGenColumns=function(){var a=this.that.options,c=a.columnTemplate||{},f=c.dataType,d=c.title,m=c.width,c=a.dataModel.data,h=b.validation,n=[];c&&c.length&&k.each(c[0],function(a,b){var c="string";h.isInteger(b)?c=-1<b+-1?"float":"integer":h.isDate(b)?c="date":h.isFloat(b)&&(c="float");
n.push({dataType:f?f:c,dataIndx:a,title:d?d:a,width:m?m:100})});a.colModel=n};a._refreshDataIndices=function(){for(var a=this.that,b="JSON"==this.getDataType()?!0:!1,c={},f={},d={},m=a.colModel,h=m.length,k=0;k<h;k++){var n=m[k],p=n.dataIndx;null==p&&(p="detail"==n.type?"pq_detail":b?"dataIndx_"+k:k,"pq_detail"==p&&(n.dataType="object"),n.dataIndx=p);c[p]=n;f[p]=k;n.validations&&(d[p]=d)}a.columns=c;a.colIndxs=f;a.validations=d}})(jQuery);
(function(k){var n=k.paramquery,h=n._pqGrid.prototype;h.exportExcel=function(c){c=c||{};c.format="xlsx";return this.exportData(c)};h.exportCsv=function(c){c=c||{};c.format="csv";return this.exportData(c)};h.exportData=function(c){return(new d(this,c)).Export(c)};var d=n.cExport=function(c,b){this.that=c;this.templates={content_types:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Override PartName="/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/worksheet.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/></Types>',
workbook:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><sheets><sheet name="',b.sheetName?b.sheetName:"ParamQuery Pro",'" sheetId="1" r:id="rId1"/></sheets></workbook>'].join(""),worksheet:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><%=content%></worksheet>',
rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="workbook.xml"/></Relationships>',workbook_rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheet.xml"/></Relationships>'}},
h=d.prototype;h.getTitle=function(c,b){var a=c.title;a?"function"==typeof a&&(a=a.call(this.that,{colIndx:b,column:c,dataIndx:c.dataIndx,Export:!0})):a="";return a};h.getRenderVal=function(c,b,a){var f=c.column,d=f.exportRender;return(b&&!1!==d||d)&&(f.render||f._render||f.format)?a.renderCell(c):c.rowData[c.dataIndx]};h.getXlsMergeCells=function(c,b,a,f){c=c.concat(a.getMergeCells(b,this.curPage,f));b=[];a=n.toLetter;f=c.length;b.push('<mergeCells count="'+f+'">');for(var d=0;d<f;d++){var g=c[d],
g=a(g.c1)+(g.r1+1)+":"+a(g.c2)+(g.r2+1);b.push('<mergeCell ref="',g,'"/>')}b.push("</mergeCells>");return f?b.join(""):""};h.getXlsCols=function(c,b){var a=[],f,d,g,e,l=0,h=function(a,b,c,f,d){a.push('<col min="',b,'" max="',c,'" hidden="',f,'" customWidth="1" width="',Math.ceil(d/7),'"/>')};a.push("<cols>");for(var k=0;k<b;k++){var n=c[k],r=n.hidden?"1":"0",t=n._width;!1!==n.copy&&(l++,t||(t=parseInt(n.width))||(t=100),g===t&&e===r?d=l:(null!=g&&(h(a,f,d,e,g),f=null),d=l,null==f&&(f=l)),g=t,e=r)}h(a,
f,d,e,g);a.push("</cols>");return a.join("")};h.getXlsHeader=function(c,b,a){for(var f=[],d=0;d<b;d++){var g=c[d];f.push("<row>");for(var e=0,l=g.length;e<l;e++){var h=g[e];if(!1!==h.copy){var k=h.o_colspan,n=h.rowSpan,r=this.getTitle(h,e);0<d&&h==c[d-1][e]?r="":0<e&&h==c[d][e-1]?r="":(1<k||1<n)&&a.push({r1:d,c1:e,r2:d+n-1,c2:e+k-1});f.push('<c t="inlineStr"><is><t><![CDATA['+r+"]]\x3e</t></is></c>")}}f.push("</row>")}return f.join("")};h.getXlsBody=function(c,b,a,f,d,g,e,l,h){var k=[],n,r,t,q,p,
u,s={integer:"Number","float":"Number",bool:"bool"};for(n=0;n<f;n++){p=a[n];r=p.pq_hidden?'hidden="1"':"";u=d?n+g:n;t=u-g;p={rowIndx:u,rowIndxPage:t,rowData:p,Export:!0};k.push("<row "+r+">");for(r=0;r<b;r++)q=c[r],!1!==q.copy&&(t=void 0,e.ismergedCell(u,r)&&(e.isRootCell(u,r,"o")||(t=null)),void 0===t&&(p.colIndx=r,p.column=q,p.dataIndx=q.dataIndx,t=this.getRenderVal(p,l,h)),q=null==t?null:s[q.dataType],"string"==typeof t&&(q="String"),q=q||"String",t=null==t?"":t,"String"==q?k.push('<c t="inlineStr"><is><t><![CDATA['+
t+"]]\x3e</t></is></c>"):"Number"==q?k.push("<c><v>"+t+"</v></c>"):"bool"==q?(t=t?"1":"0",k.push('<c t="b"><v>'+t+"</v></c>")):k.push("<c><v>"+t+"</v></c>"));k.push("</row>")}return k.join("\n")};h.getXlsContent=function(c,b,a,f,d,g,e,l,h,k,n,r){var t='<sheetViews><sheetView workbookViewId="0"><pane ySplit="<%=a%>" topLeftCell="A<%=b%>" activePane="bottomLeft" state="frozen"/></sheetView></sheetViews>',q=this.getXlsCols(c,b),p=[],u=r?f:0,t=t.replace("<%=a%>",u),t=t.replace("<%=b%>",u+1);a=r?this.getXlsHeader(a,
f,p):"";c=this.getXlsBody(c,b,d,g,e,l,h,k,n);return[t,q,"<sheetData>",a,c,"</sheetData>",this.getXlsMergeCells(p,r?f:0,h,g)].join("")};h.getHtmlHeader=function(c,b){for(var a=[],f,d,g,e,l=0;l<b;l++){var h=c[l],k=null;a.push("<tr>");for(var n=0,r=h.length;n<r;n++)f=h[n],d=f.colSpan,!f.hidden&&d&&!1!==f.copy&&(g=f.rowSpan,0<l&&f==c[l-1][n]||k&&0<n&&f==k||(e=this.getTitle(f,n),k=f,f=(f=f.halign||f.align)?"align="+f:"",a.push("<th colspan=",d," rowspan=",g," ",f,">",e,"</th>")));a.push("</tr>")}return a.join("")};
h.getHtmlBody=function(c,b,a,f,d,g,e,l,h){var k=[],n,r,t,q,p,u,s;for(n=0;n<f;n++)if(r=a[n],!r.pq_hidden){s=d?n+g:n;u=s-g;u={rowIndx:s,rowIndxPage:u,rowData:r,Export:!0};k.push("<tr>");for(r=0;r<b;r++)if(t=c[r],!t.hidden&&!1!==t.copy){p="";if(e.ismergedCell(s,r)){if(p=e.isRootCell(s,r))q=e.getRootCell(s,r,"o"),q.Export=!0,q=this.getRenderVal(q,l,h);else continue;p="rowspan="+p.rowspan+" colspan="+p.colspan+" "}else u.colIndx=r,u.column=t,u.dataIndx=t.dataIndx,q=this.getRenderVal(u,l,h);t=t.align;p+=
t?"align="+t:"";q=null==q?"":q;k.push("<td ",p,">",q,"</td>")}k.push("</tr>")}return k.join("")};h.getHtmlContent=function(c,b,a,f,d,g,e,l,h,k,n,r,t){var q=c.cssRules||"",p=this.that.element.find(".pq-grid-table"),u=p.css("font-family"),p=p.css("font-size"),s=[];s.push("<!DOCTYPE html><html><head>",'<meta charset="utf-8" />',"<title>",c.title?c.title:"ParamQuery Pro","</title>","</head><body>","<style>","table{empty-cells:show;font-family:"+u+";font-size:"+p+";border-collapse:collapse;}","td,th{padding: 5px;border:1px solid #ccc;}",
q,"</style>","<table>");s.push(t?this.getHtmlHeader(f,d,b):"");s.push(this.getHtmlBody(b,a,g,e,l,h,k,n,r));s.push("</table></body></html>");return s.join("")};h.getCsvHeader=function(c,b,a,f){for(var d=[],g=[],e,l,h=0;h<b;h++){for(var k=c[h],n=null,r=0,t=k.length;r<t;r++)e=a[r],e.hidden||!1===e.copy||(e=k[r],0<h&&e==c[h-1][r]?d.push(""):n&&0<r&&e==n?d.push(""):(l=(l=this.getTitle(e,r))?l.replace(/\"/g,'""'):"",n=e,d.push('"'+l+'"')));g.push(d.join(f));d=[]}return g};h.getCSVContent=function(c,b,a,
f,d,g,e,l,h,k,n,r,t){var q,p;c=c.separator||",";var u,s=[];t=t?this.getCsvHeader(f,d,b,c):[];for(f=0;f<e;f++)if(p=g[f],!p.pq_hidden){d=l?f+h:f;u=d-h;u={rowIndx:d,rowIndxPage:u,rowData:p,Export:!0};for(p=0;p<a;p++)q=b[p],q.hidden||!1===q.copy||(k.ismergedCell(d,p)?k.isRootCell(d,p)?(q=k.getRootCell(d,p,"o"),q.Export=!0,q=this.getRenderVal(q,n,r)):q="":(u.colIndx=p,u.column=q,u.dataIndx=q.dataIndx,q=this.getRenderVal(u,n,r)),q=(null==q?"":q)+"",q=q.replace(/\"/g,'""'),s.push('"'+q+'"'));t.push(s.join(c));
s=[]}return t.join("\n")};h.getJsonContent=function(c,b){function a(a,b){return 0===(a+"").indexOf("pq_")?void 0:b}return c.nostringify?b:JSON.stringify(b,c.nopqdata?a:null,c.nopretty?null:2)};h.postRequest=function(c){var b=c.format,a,f=c.url,d=c.filename||"pqGrid";c.zip&&"xlsx"!=b?(b=new JSZip,b.file(d+"."+c.format,c.data),c=b.generate({type:"base64",compression:"DEFLATE"}),a=!0,b="zip"):(a=c.decodeBase?!0:!1,c=c.data);f&&k.ajax({url:f,type:"POST",cache:!1,data:{pq_ext:b,pq_data:c,pq_decode:a,pq_filename:d},
success:function(a){f+=(0<f.indexOf("?")?"&":"?")+"pq_filename="+a;k(document.body).append("<iframe height='0' width='0' frameborder='0' src=\""+f+'"></iframe>')}});return c};h.Export=function(c){var b=this.that,a=b.options,f,d,g,e=this.templates,l=a.groupModel;d="remote"==a.pageModel.type;f=b.rowIndxOffset;var h=b.iGenerateView,k=b.iMerge,n=b.colModel,r=n.length,t=b.headerCells,q=t.length,l=(this.curPage=l.on&&l.dataIndx.length||d)?b.pdata:a.dataModel.data,l=a.summaryData?l.concat(a.summaryData):
l,p=l.length,a=c.url,u=c.render,s=!c.noheader,y=c.format;b._trigger("beforeExport",null,c);"xlsx"==y?(f=this.getXlsContent(n,r,t,q,l,p,d,f,k,u,h,s),d=new JSZip,d.file("[Content_Types].xml",e.content_types),d.file("workbook.xml",e.workbook),d.file("worksheet.xml",e.worksheet.replace("<%=content%>",f)),f=d.folder("_rels"),f.file(".rels",e.rels),f.file("workbook.xml.rels",e.workbook_rels),a?(c.data=d.generate({type:"base64",compression:"DEFLATE"}),c.decodeBase=!0):g=d.generate({type:"blob",compression:"DEFLATE"})):
c.data="json"==y?this.getJsonContent(c,l):"csv"==y?this.getCSVContent(c,n,r,t,q,l,p,d,f,k,u,h,s):this.getHtmlContent(c,n,r,t,q,l,p,d,f,k,u,h,s);g=g?g:this.postRequest(c);b._trigger("exportData",null,c);return g}})(jQuery);
(function(k){var n=k.paramquery,h={options:{items:[],gridInstance:null}};k.widget("paramquery.pqToolbar",h);h=n.pqToolbar.prototype;h.refresh=function(){this.element.empty();this._create()};h._create=function(){var d=this.options,c=d.gridInstance,b={button:"click",select:"change",checkbox:"change",textbox:"change"},a,f,m=d.bootstrap,g=m.on,e=c.colModel,d=d.items,l=this.element;l.addClass("pq-toolbar");for(var h=0,B=d.length;h<B;h++){var v=d[h],r=v.type,t=v.value,q=v.icon,p=v.options||{},u=v.label,
s=(f=v.listener)?[f]:v.listeners,s=s||[function(){}];f=(f=v.cls)?f:"";f=(f=g&&"button"==r?m.btn+" "+f:f)?"class='"+f+"'":"";var y=v.style,y=y?"style='"+y+"'":"",z=v.attr,x=z?z:"",z=u&&"button"!=r?[f,x]:[f,x,y],z=z.join(" "),A;v.options=p;"textbox"==r?A=k([u?"<label "+y+">"+u:"","<input type='text' "+z+">",u?"</label>":""].join("")):"textarea"==r?A=k([u?"<label "+y+">"+u:"","<textarea "+z+"></textarea>",u?"</label>":""].join("")):"checkbox"==r?A=k([u?"<label "+y+">":"","<input type='checkbox' ",t?
"checked='checked' ":"",z,">",u?u+"</label>":""].join("")):"separator"==r?A=k("<span class='pq-separator' "+[x,y].join(" ")+"></span>"):"button"==r?(A="",g&&(A=q?"<span class='glyphicon "+q+"'></span>":""),A=k("<button type='button' "+z+">"+A+u+"</button>"),k.extend(p,{label:u?u:!1,icons:{primary:g?"":q}}),A.button(p)):"select"==r?("function"===typeof p&&(p=p.call(c,{colModel:e})),p=p||[],A=n.select({options:p,attr:z,prepend:v.prepend,groupIndx:v.groupIndx,valueIndx:v.valueIndx,labelIndx:v.labelIndx}),
A=k([u?"<label "+y+">"+u:"",A,u?"</label>":""].join(""))):"string"==typeof r?A=k(r):"function"==typeof r&&(A=r.call(c,{colModel:e,cls:f}),A=k(A));A.appendTo(l);"checkbox"!==r&&void 0!==t&&(u?k(A[0].children[0]).val(t):A.val(t));t=0;for(u=s.length;t<u;t++)for(a in f=s[t],q={},"function"==typeof f?q[b[r]]=f:q=f,q)A.on(a,this._onEvent(c,q[a],v))}};h._onEvent=function(d,c,b){return function(a){b.value="checkbox"==b.type?k(a.target).prop("checked"):k(a.target).val();c.call(d,a)}};h._destroy=function(){this.element.empty().removeClass("pq-toolbar").enableSelection()};
h._disable=function(){null==this.$disable&&(this.$disable=k("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};h._enable=function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};h._setOption=function(d,c){"disabled"==d&&(!0==c?this._disable():this._enable())};pq.toolbar=function(d,c){var b=k(d).pqToolbar(c);return b.data("paramqueryPqToolbar")||b.data("paramquery-pqToolbar")}})(jQuery);
(function(k){var n=k.paramquery,h=n.pqGrid.prototype.options,d={on:!1,dirtyClass:"pq-cell-dirty"};h.trackModel=h.trackModel||d;h=(n.cUCData=function(c){this.that=c;this.udata=[];this.ddata=[];this.adata=[];this.options=c.options;var b=this;c.on("dataAvailable",function(a,c){"filter"!=c.source&&(b.udata=[],b.ddata=[],b.adata=[])})}).prototype=new n.cClass;h.add=function(c){var b=this.that,a=this.adata,f=this.ddata;c=c.rowData;for(var d=this.options.trackModel.dirtyClass,g=b.getRecId({rowData:c}),e=
0,l=a.length;e<l;e++){var h=a[e];if(null!=g&&h.recId==g)throw"primary key violation";if(h.rowData==c)throw"same data can't be added twice.";}e=0;for(l=f.length;e<l;e++)if(c==f[e].rowData){f.splice(e,1);return}var f=[],k;for(k in c)f.push(k);b.removeClass({rowData:c,dataIndx:f,cls:d});c={recId:g,rowData:c};a.push(c)};h.update=function(c){var b=this.that,a=this.options.trackModel.dirtyClass,f=c.rowData||b.getRowData(c),d=b.getRecId({rowData:f}),g=c.dataIndx,e=c.refresh,l=b.columns,h=b.getValueFromDataType;
c=c.row;var n=this.udata,v=n.slice(0),r=!1;if(null!=d){for(var t=0,q=n.length;t<q;t++){var p=n[t],u=p.oldRow;if(p.rowData==f){r=!0;for(g in c)n=l[g].dataType,q=c[g],q=h(q,n),p=u[g],p=h(p,n),u.hasOwnProperty(g)&&p===q?(n={rowData:f,dataIndx:g,refresh:e,cls:a},b.removeClass(n),delete u[g]):(n={rowData:f,dataIndx:g,refresh:e,cls:a},b.addClass(n),u.hasOwnProperty(g)||(u[g]=f[g]));k.isEmptyObject(u)&&v.splice(t,1);break}}if(!r){u={};for(g in c)u[g]=f[g],n={rowData:f,dataIndx:g,refresh:e,cls:a},b.addClass(n);
n={rowData:f,recId:d,oldRow:u};v.push(n)}this.udata=v}};h["delete"]=function(c){var b=this.that,a=c.rowIndx,f=c.rowIndxPage,d=b.rowIndxOffset,a=null==a?f+d:a,f="remote"==b.options.pageModel.type?null==f?a-d:f:a,d=this.adata,g=this.ddata;c=b.getRowData(c);for(var b=0,e=d.length;b<e;b++)if(d[b].rowData==c){d.splice(b,1);return}g.push({indx:f,rowData:c,rowIndx:a})};h.isDirty=function(c){var b=this.udata,a=this.adata,f=this.ddata,d=!1;if(c=this.that.getRowData(c))for(a=0;a<b.length;a++){if(c==b[a].rowData){d=
!0;break}}else if(b.length||a.length||f.length)d=!0;return d};h.getChangesValue=function(c){c=c||{};var b=this.that;c=c.all;for(var a=this.udata,f=this.adata,d=this.ddata,g=[],e=[],l=[],h=[],n=[],v=[],r=0,t=d.length;r<t;r++){var q=d[r],p=q.rowData,u={};n.push(p);for(var s in p)0!=s.indexOf("pq_")&&(u[s]=p[s]);v.push(u)}r=0;for(t=a.length;r<t;r++)if(q=a[r],d=q.oldRow,p=q.rowData,-1==k.inArray(p,n)&&-1==k.inArray(p,g)){u={};if(!1!==c)for(s in p)0!=s.indexOf("pq_")&&(u[s]=p[s]);else{for(s in d)u[s]=
p[s];u[b.options.dataModel.recIndx]=q.recId}g.push(p);e.push(u);l.push(d)}r=0;for(t=f.length;r<t;r++){q=f[r];p=q.rowData;u={};for(s in p)0!=s.indexOf("pq_")&&(u[s]=p[s]);h.push(u)}return{updateList:e,addList:h,deleteList:v,oldList:l}};h.getChanges=function(){for(var c=this.udata,b=this.adata,a=this.ddata,f=k.inArray,d=[],g=[],e=[],l=[],h=0,n=a.length;h<n;h++){var v=a[h],v=v.rowData;l.push(v)}h=0;for(n=c.length;h<n;h++)v=c[h],a=v.oldRow,v=v.rowData,-1==f(v,l)&&-1==f(v,d)&&(d.push(v),g.push(a));h=0;
for(n=b.length;h<n;h++)v=b[h],v=v.rowData,e.push(v);return{updateList:d,addList:e,deleteList:l,oldList:g}};h.getChangesRaw=function(){var c=this.adata,b=this.ddata,a={updateList:[],addList:[],deleteList:[]};a.updateList=this.udata;a.addList=c;a.deleteList=b;return a};h.commitAdd=function(c,b){for(var a=this.that,f=a.colModel,d=f.length,g=this.adata,e=k.inArray,l=g.length,h=a.getValueFromDataType,a=[],n=c.length,v=[],r=0;r<n;r++)for(var t=c[r],q=0;q<l;q++){var p=g[q].rowData,u=!0;if(-1==e(p,v)){for(var s=
0;s<d;s++){var y=f[s],z=y.dataType,x=y.dataIndx;if(!y.hidden&&x!=b&&(y=p[x],y=h(y,z),x=t[x],x=h(x,z),y!==x)){u=!1;break}}if(u){q={};u={};q[b]=t[b];u[b]=p[b];a.push({type:"update",rowData:p,oldRow:u,newRow:q});v.push(p);break}}}f=[];for(q=0;q<l;q++)p=g[q].rowData,-1==e(p,v)&&f.push(g[q]);this.adata=f;return a};h.commitUpdate=function(c,b){for(var a=this.that,f=this.options.trackModel.dirtyClass,d=this.udata,g=d.length,e=c.length,l=[],h=0;h<g;h++){var n=d[h],v=n.rowData,n=n.oldRow;if(-1==k.inArray(v,
l))for(var r=0;r<e;r++)if(v[b]==c[r][b]){l.push(v);for(var t in n)a.removeClass({rowData:v,dataIndx:t,cls:f})}}a=[];for(h=0;h<g;h++)v=d[h].rowData,-1==k.inArray(v,l)&&a.push(d[h]);this.udata=a;return[]};h.commitDelete=function(c,b){for(var a=this.ddata,f=a.length,d=this.udata,g,e,l;f--;){g=a[f].rowData;e=g[b];l=c.length;if(!l)break;for(;l--;)if(e==c[l][b]){c.splice(l,1);a.splice(f,1);for(e=d.length;e--;)d[e].rowData==g&&d.splice(e,1);break}}};h.commitUpdateAll=function(){for(var c=this.that,b=this.options.trackModel.dirtyClass,
a=this.udata,f=0,d=a.length;f<d;f++){var g=a[f],e=g.oldRow,g=g.rowData,l;for(l in e)c.removeClass({rowData:g,dataIndx:l,cls:b})}this.udata=[]};h.commitAddAll=function(){this.adata=[]};h.commitDeleteAll=function(){for(var c=this.ddata,b=this.udata,a=b.length,f,d=c.length,g=0;0<a&&g<d;g++){for(f=c[g].rowData;a--;)b[a].rowData==f&&b.splice(a,1);a=b.length}c.length=0};h.commit=function(c){var b=this.that,a=c?c.history:null,a=null==a?!1:a,f=[],f=[],d=[],g=b.options.dataModel.recIndx;if(null==c)this.commitAddAll(),
this.commitUpdateAll(),this.commitDeleteAll();else{var e=c.type;c=c.rows;"add"==e?c?f=this.commitAdd(c,g):this.commitAddAll():"update"==e?c?d=this.commitUpdate(c,g):this.commitUpdateAll():"delete"==e&&(c?this.commitDelete(c,g):this.commitDeleteAll())}f=f.concat(d);f.length&&(b._digestData({source:"commit",checkEditable:!1,track:!1,history:a,rowList:f}),b.refreshView())};h.rollbackAdd=function(c,b){for(var a=this.adata,f=[],d=0,g=a.length;d<g;d++)f.push({type:"delete",rowData:a[d].rowData});this.adata=
[];return f};h.rollbackDelete=function(c,b){for(var a=this.ddata,d=[],m=a.length-1;0<=m;m--){var g=a[m];d.push({type:"add",rowIndx:g.rowIndx,newRow:g.rowData})}this.ddata=[];return d};h.rollbackUpdate=function(c,b){for(var a=this.that,d=this.options.trackModel.dirtyClass,m=this.udata,g=[],e=0,l=m.length;e<l;e++){var h=m[e],k=h.rowData,n={},r=h.oldRow;if(null!=h.recId){var h=[],t;for(t in r)n[t]=k[t],h.push(t);a.removeClass({rowData:k,dataIndx:h,cls:d,refresh:!1});g.push({type:"update",rowData:k,newRow:r,
oldRow:n})}}this.udata=[];return g};h.rollback=function(c){var b=this.that,a=b.options.pageModel,d=c&&null!=c.refresh?c.refresh:!0;c=c&&null!=c.type?c.type:null;var m=[],m=[],g=[],e=[],l=b.options.dataModel.data;if(null==c||"update"==c)g=this.rollbackUpdate(a,l);if(null==c||"delete"==c)m=this.rollbackDelete(a,l);if(null==c||"add"==c)e=this.rollbackAdd(a,l);m=m.concat(e,g);b._digestData({history:!1,allowInvalid:!0,checkEditable:!1,source:"rollback",track:!1,rowList:m});d&&b.refreshView()};n=n.pqGrid.prototype;
n.getChanges=function(c){this.blurEditor({force:!0});if(c){var b=c.format;if(b){if("byVal"==b)return this.iUCData.getChangesValue(c);if("raw"==b)return this.iUCData.getChangesRaw()}}return this.iUCData.getChanges()};n.rollback=function(c){this.blurEditor({force:!0});this.iUCData.rollback(c)};n.isDirty=function(c){return this.iUCData.isDirty(c)};n.commit=function(c){this.iUCData.commit(c)};n.updateRow=function(c){for(var b=c.rowList||[{rowIndx:c.rowIndx,newRow:c.newRow||c.row,rowData:c.rowData,rowIndxPage:c.rowIndxPage}],
a=[],d=0,m=b.length;d<m;d++){var g=this.normalize(b[d]),e=g.newRow,l=g.rowData,h={};if(l){for(var k in e)h[k]=l[k];g.oldRow=h;g.type="update";a.push(g)}}if(!a.length||!1===this._digestData({source:c.source||"update",history:c.history,checkEditable:c.checkEditable,track:c.track,allowInvalid:c.allowInvalid,rowList:a}))return!1;!1!==c.refresh&&(1<a.length?this.refresh():this.refreshRow({rowIndx:a[0].rowIndx}))};n.getRecId=function(c){c.dataIndx=this.options.dataModel.recIndx;c=this.getCellData(c);return null==
c?null:c};n.getCellData=function(c){var b=c.rowData||this.getRowData(c);c=c.dataIndx;return b?b[c]:null};n.getRowData=function(c){if(!c)return null;var b=c.rowData;if(null!=b)return b;b=c.recId;if(null==b){var b=c.rowIndx,b=null!=b?b:c.rowIndxPage+this.rowIndxOffset,a=this.get_p_data()[b];return a}a=this.options.dataModel;c=a.recIndx;for(var d=a.data,m=0,g=d.length;m<g;m++)if(a=d[m],a[c]==b)return a;return null};n.deleteRow=function(c){for(var b=c.rowList||[{rowIndx:c.rowIndx,rowIndxPage:c.rowIndxPage}],
a=[],d=0,m=b.length;d<m;d++){var g=this.normalize(b[d]);g.oldRow=g.rowData;g.type="delete";a.push(g)}if(!a.length)return!1;this._digestData({source:c.source||"delete",history:c.history,track:c.track,rowList:a});!1!==c.refresh&&this.refreshView()};n.addRow=function(c){var b=c.rowList||[{rowIndx:c.rowIndx,rowIndxPage:c.rowIndxPage,newRow:c.newRow||c.rowData}],a=[],d=this.options.dataModel,m=d.data;null==m&&(d.data=[],m=d.data);for(var d=0,g=b.length;d<g;d++){var e=this.normalize(b[d]);e.type="add";
a.push(e)}if(!a.length||!1===this._digestData({source:c.source||"add",history:c.history,track:c.track,checkEditable:c.checkEditable,rowList:a}))return!1;!1!==c.refresh&&this.refreshView();c=a[0].rowIndx;return null==c?m.length-1:c}})(jQuery);
(function(k){var n=function(c){this.focusSelection=null};n.prototype.inViewRow=function(c){var b=this.that,a=b.finalV;return c<b.options.freezeRows?!0:c>=b.initV&&c<=a};var h=function(c){this.that=c;this.options=c=c.options;this.selection=[];this.hclass=" pq-state-select "+(c.bootstrap.on?"":"ui-state-highlight")};k.paramquery.cRows=h;var d=function(c){var b=c.options;this.that=c;this.selection=[];this.hclass="pq-state-select "+(b.bootstrap.on?"":"ui-state-highlight")};k.paramquery.cCells=d;d=d.prototype=
new n;n=h.prototype=new n;n.isSelected=function(c){return(c=c.rowData||this.that.getRowData(c))?!0===c.pq_rowselect:null};n.selectRange=function(c){var b=c.range,a=b.r1,b=b.r2;c=c.evt;var d=[];if(a>b)var m=a,a=b,b=m;for(;a<=b;a++)d.push({rowIndx:a});this.add({rows:d,evt:c})};d.removeAll=function(c){var b=this.that;c=b.get_p_data();var a=this.hclass;if(c&&c.length)for(b.$tbl&&b.$tbl.children().children().children().removeClass(a),b=0,a=c.length;b<a;b++){var d=c[b];d&&delete d.pq_cellselect}};n.removeAll=
function(c){c=c||{};var b=this.that,a=c.all,d=this.hclass,m=b.get_p_data();if(m&&m.length)for(c.refresh&&b.$tbl&&b.$tbl.children().children().removeClass(d),m=a?m:b.pdata,c=0,b=m.length;c<b;c++)(a=m[c])&&delete a.pq_rowselect};d.isSelected=function(c){var b=this.that,a=c.rowData||b.getRowData(c),d=c.dataIndx;c=c.colIndx;if(null==c&&null==d||null==a)return null;d=null==d?b.colModel[c].dataIndx:d;return!0==(a.pq_cellselect&&a.pq_cellselect[d])};n.getSelection=function(){for(var c=this.that,b=c.selection().address(),
a=[],d=0,m=b.length;d<m;d++){var g=b[d];if("row"==g.type)for(var e=g.r2,g=g.r1;g<=e;g++){var l=c.getRowData({rowIndx:g});a.push({rowIndx:g,rowData:l})}}return a};d.getSelection=function(){for(var c=this.that,b=c.selection(),a=c.colModel,b=b.address(),d=[],m=0,g=b.length;m<g;m++){var e=b[m],l=e.type;if("block"==l||"cell"==l||"column"==l)for(var l=e.r2,h=e.c1,k=e.c2,e=e.r1;e<=l;e++)for(var n=c.getRowData({rowIndx:e}),r=h;r<=k;r++)d.push({rowIndx:e,rowData:n,colIndx:r,dataIndx:a[r].dataIndx})}return d};
d.inViewCell=function(c,b){var a=this.that,d=a.options.freezeCols;return this.inViewRow(c)?b<d||b>=a.initH&&b<=a.finalH:!1};d._add=function(c){var b=this.that;c=b.normalize(c);var a=c.rowIndxPage,d=c.rowData,m,g=c.colIndx,e=c.dataIndx,l=this.isSelected({rowData:d,dataIndx:e});if(null==l)return!1;var h=b.iMerge.ismergedCell(c.rowIndx,g)||this.inViewCell(a,g);!1===l&&(h&&(b=b.getCell({rowIndxPage:a,colIndx:g}))&&b.addClass(this.hclass),m=(d.pq_cellselect=d.pq_cellselect||{})[e]=!0);if(m)return c};n._add=
function(c){var b=this.that,a=b.normalize(c),d=a.rowIndxPage;c=a.rowData;var m=this.isSelected({rowData:c});a.rowIndxPage=d;if(null==m)return!1;a=this.inViewRow(d);!1===m&&(!c.pq_hidden&&a&&(b=b.getRow({rowIndxPage:d}),b.length&&b.addClass(this.hclass)),c.pq_rowselect=!0)};d.add=function(c){this._add(c)};n.add=function(c){var b=c.rows;if(b&&"function"==typeof b.push){c=0;for(var a=b.length;c<a;c++){var d=b[c];d.trigger=!1;this._add(d)}}else this._add(c)};n._remove=function(c){var b=this.that,a=b.normalize(c);
c=a.rowIndx;var d=a.rowIndxPage,m=a.rowData,a=a.$tr;if(this.isSelected({rowData:m}))return this.inViewRow(d)&&(a=b.getRow({rowIndxPage:d}))&&(a.removeClass(this.hclass),a.removeAttr("tabindex")),m.pq_rowselect=!1,{rowIndx:c,rowData:m}};n.remove=function(c){var b=c.rows;if(b&&"function"==typeof b.push){c=0;for(var a=b.length;c<a;c++){var d=b[c];d.trigger=!1;this._remove(d)}}else this._remove(c)};d.selectBlock=function(c){var b=this.that,a=this.hclass,d=c.range,m=d.r1,g=d.c1,e=d.r2,d=d.c2,l=b.initH,
h=b.finalH,n=b.options.freezeCols,v=[],r=b.colModel,t=[];c=c.remove?!0:!1;for(var q=g;q<=d;q++)v[q]=r[q].dataIndx;for(;m<=e;m++)if(r=b.normalize({rowIndx:m}),q=r.rowData,r=r.rowIndxPage,q){var p=q.pq_cellselect=q.pq_cellselect||{};if(this.inViewRow(r))for(q=g;q<=d;q++){var u=v[q];if(c&&p[u]||!c&&!p[u]){if(q<n||q>=l&&q<=h){var s=b.getCell({rowIndxPage:r,colIndx:q});s.length&&t.push(s[0])}p[u]=c?void 0:!0}}else for(q=g;q<=d;q++)u=v[q],p[u]=c?void 0:!0}if(t.length)k(t)[c?"removeClass":"addClass"](a)}})(jQuery);
(function(k){var n=!0;k(function(){var d=k("<input type='checkbox' style='position:fixed;left:-50px;top:-50px;'/>").appendTo(document.body);d[0].indeterminate=!0;d.on("change",function(){n=!1});d.click();d.remove()});var h=(k.paramquery.cCheckBoxColumn=function(d,c){var b=this;this.that=d;this.options=d.options;this.column=c;c.cb=k.extend({},{all:!1,header:!1,select:!1,check:!0,uncheck:!1},c.cb);c._render=function(a){var b=a.rowData;if(!b.pq_gtitle&&!b.pq_gsummary)return"<input type='checkbox' "+
(c.cb.check===a.cellData?"checked":"")+" />"};this.dataIndx=c.dataIndx;var a=d.element,f=d.eventNamespace;d.on("dataAvailable",function(){d.one("dataReady",function(){return b._onDataReady()})}).on("dataReady",function(){b.setValCBox()});a.on("change"+f,function(a){var c=a.target;if("checkbox"==c.type&&k(c).closest(".pq-grid")[0]==this)return b.onCheckBoxChange(a)});d.on("cellKeyDown",function(a,c){return b.onCellKeyDown(a,c)});d.on("refreshHeader",function(a,c){return b.refreshHeader(a,c)})}).prototype=
new k.paramquery.cClass;h.hasHeaderChkBox=function(){return this.column.cb.header};h.setValCBox=function(){if(this.hasHeaderChkBox()){var d=this.that,c=this.options,b=this.dataIndx,a=this.column.cb,f=a.all,m=d.rowIndxOffset,m="remote"!=c.pageModel.type&&f?0:m,c=f?c.dataModel.data:d.pdata,f=null,g=0,e=0;if(c){for(var l=0,h=0,k=c.length;h<k;h++){var n=c[h],r=h+m;d.isEditableRow({rowIndx:r})&&d.isEditableCell({rowIndx:r,dataIndx:b})&&(l++,n[b]===a.check?g++:e++)}g==l&&l?f=!0:e==l&&(f=!1);this.$inp&&
this.$inp.pqval({val:f})}}};h.onHeaderChange=function(d){for(var c=k(d.target),b=this.that,a=this.column,f=a.dataIndx,m=b.options,g=a.cb,e=g.all,l=e?m.dataModel.data:b.pdata,h=b.rowIndxOffset,h="remote"!=m.pageModel.type&&e?0:h,m=[],a={column:a,dataIndx:f,source:"header"},c=c[0].checked,e=0,n=l.length;e<n;e++){var v=e+h,r=l[e],t={},q={};t[f]=c?g.check:g.uncheck;q[f]=r[f];m.push({rowIndx:v,rowData:r,newRow:t,oldRow:q,type:"update"})}f={rowList:m,source:"checkbox"};f.history=f.track=g.select?!1:null;
a.check=c;a.rows=m;if(!1===b._trigger("beforeCheck",d,a)||!1===b._digestData(f))return b.refreshHeader(),!1;b.refresh({header:!1});m=a.rows=f.rowList;b._trigger("check",d,a);g.select&&b.selection({type:"row",method:c?"add":"remove",rows:m})};h.refreshHeader=function(d,c){var b=this;if(this.hasHeaderChkBox()){var a=this.that;if(a.pdata&&(a=a.getCellHeader({dataIndx:this.dataIndx}))){var f=this.$inp=a.find("input");this.setValCBox();if(n)f.on("click",function(a){null==f.data("pq_value")&&(f[0].checked=
!0,f.data("pq_value",!0),b.onHeaderChange(a))});f.on("change",function(a){b.onHeaderChange(a)})}}};h._onDataReady=function(){var d=this.that,c=this.options,b=c.dataModel.data,c="remote"==c.pageModel.type?d.rowIndxOffset:0,a=this.column,f=a.cb,m=a.dataIndx;if(null!=m&&b){for(var g=[],e=0,l=b.length;e<l;e++){var h=b[e];h[m]===f.check&&g.push({rowIndx:e+c,rowData:h})}if(!1!==d._trigger("check",null,{rows:g,column:a,dataIndx:m,source:"dataAvailable"})&&f.select){for(e=0;e<l;e++)h=b[e],h[m]===f.check&&
(h.pq_rowselect=!0);d.selection().refresh()}}this.setValCBox()};h.rowSelect=function(d,c){var b=this.that,a=c.rows,f=c.rowData,m=this.dataIndx;if(a)for(var g=0,e=a.length;g<e;g++){var f=a[g],l=f.rowIndx,f=f.rowData;f[m]=!0;b.refreshCell({rowIndx:l,dataIndx:m})}else f&&(f[m]=!0,l=c.rowIndx,b.refreshCell({rowIndx:l,dataIndx:m}));this.setValCBox()};h.rowUnSelect=function(d,c){var b=this.that,a=c.rows,f=c.rowData,m=this.dataIndx;if(a)for(var g=0,e=a.length;g<e;g++){var f=a[g],l=f.rowIndx,f=f.rowData;
f[m]=!1;b.refreshCell({rowIndx:l,dataIndx:m})}else f&&(f[m]=!1,l=c.rowIndx,b.refreshCell({rowIndx:l,dataIndx:m}));this.setValCBox()};h.onCheckBoxChange=function(d){var c=this.that,b=this.column.cb,a=k(d.target),f=a.closest(".pq-grid-cell");if(f.length){var f=c.getCellIndices({$td:f}),f=c.normalize(f),m=f.rowData,g=f.rowIndx,e=f.dataIndx;if(e==this.dataIndx){var a=a[0].checked,l={},h={};l[e]=a?b.check:b.uncheck;h[e]=m[e];m=[{rowData:m,rowIndx:g,oldRow:h,newRow:l,type:"update"}];f.check=a;f.rows=m;
if(!1===c._trigger("beforeCheck",d,f))return c.refreshCell({rowIndx:g,dataIndx:e}),!1;m={source:"checkbox",rowList:m};m.history=m.track=b.select?!1:null;if(!1===c._digestData(m))return c.refreshCell({rowIndx:g,dataIndx:e}),!1;c.refreshRow({rowIndx:g});m=f.rows=m.rowList;c._trigger("check",d,f);b.select&&c.selection({type:"row",method:a?"add":"remove",rows:m});this.setValCBox()}}};h.onCellKeyDown=function(d,c){if(c.dataIndx==this.dataIndx&&(13==d.keyCode||32==d.keyCode))return k(d.originalEvent.target).find("input").click(),
!1}})(jQuery);
(function(){for(var k=0,n=["moz","webkit"],h=0;!window.requestAnimationFrame&&h<n.length;h++)window.requestAnimationFrame=window[n[h]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[h]+"CancelAnimationFrame"]||window[n[h]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(d){var c=(new Date).getTime(),c=Math.max(0,16-(c-k));return window.setTimeout(function(){k=(new Date).getTime();d()},c)});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(d){clearTimeout(d)})})();
(function(k){function n(d){this.that=d;var c=this;this.borderBottomExtra=this.borderBottom=this.borderLeftExtra=this.borderLeft=this.borderTopExtra=this.borderTop=this.borderRightExtra=this.borderRight=this.scrollLeft=this.scrollTop=0;this.maxBorder=5E3;this.rowht=d.options.rowHeight;this.colwd=60;d.on("contMouseDown",function(b,a){return c._onContMouseDown(b,a)}).on("mouseDrag",function(b,a){return c._onMouseDrag(b,a)}).on("mouseStop",function(b,a){return c._onMouseStop(b,a)}).on("mousePQUp",function(b,
a){return c._onMousePQUp(b,a)}).on("rowMouseDown",function(b,a){return c._onRowMouseDown(b,a)}).on("cellMouseDown",function(b,a){return c._onCellMouseDown(b,a)}).on("refresh",function(b,a){setTimeout(function(){d.element&&d.focus()},0)}).on("cellMouseEnter",function(b,a){return c._onCellMouseEnter(b,a)}).on("rowMouseEnter",function(b,a){return c._onRowMouseEnter(b,a)})}k.paramquery.cMouseSelection=n;var h=n.prototype=new k.paramquery.cClass;h.inViewPort=function(d){var c=this.that.iRefresh,b=c.getEContHt(),
c=c.getEContWd()+1;d=d[0];var a=this.scrollLeft;if(b>=d.offsetTop+d.offsetHeight+this.marginTop)if("TD"==d.nodeName.toUpperCase()){if(c>=d.offsetLeft+d.offsetWidth+a)return!0}else return!0};h._onCellMouseDown=function(d,c){var b=this.that,a=c.rowIndx,f=b.iSelection,m=c.colIndx,g=b.options.selectionModel,e=g.mode;if("cell"!=g.type)b.focus(c);else if(null!=m)return f=f.address()[0],d.shiftKey&&"single"!=e&&f?(e=f.firstR,f=f.firstC,b.range({r1:e,c1:f,r2:a,c2:m,firstR:e,firstC:f}).select()):(this.mousedown=
{r1:a,c1:m},b.range({r1:a,c1:m,firstR:a,firstC:m}).select()),b.focus(c),!0};h._onCellMouseEnter=function(d,c){var b=this.that,a=b.options.selectionModel,f=a.type,a=a.mode;if(this.mousedown&&"single"!=a){if("cell"==f){var f=this.mousedown,a=f.r1,m=f.c1,g=c.rowIndx,e=c.colIndx;if(a==g&&m==e||f.r2==g&&f.c2==e)return;this.mousedown.r2=g;this.mousedown.c2=e;b.scrollCell({rowIndx:g,colIndx:e});b.range({r1:a,c1:m,r2:g,c2:e,firstR:a,firstC:m}).select()}b.focus(c)}};h._onRowMouseEnter=function(d,c){var b=
this.that,a=b.options.selectionModel,f=a.mode;"row"==a.type&&this.mousedown&&"single"!=f&&(a=this.mousedown.r1,f=c.rowIndx,a==f?b.range({r1:a,firstR:a},!1).select():this.mousedown.r2!=f&&(this.mousedown.r2=f,b.scrollRow({rowIndx:f}),b.range({r1:a,r2:f,firstR:a},!1).select()))};h._onRowMouseDown=function(d,c){var b=this.that,a=c.rowIndx,f=b.iSelection,m;m=b.options.selectionModel;var g=k(d.originalEvent.target).hasClass("pq-grid-number-cell"),e=m.mode;if(("row"==m.type||m.row&&g)&&null!=a)return m=
b.iSelection.address(),d.shiftKey&&"single"!=e?((f=m.length)&&"row"==m[f-1].type&&(f=m[f-1],f.r1=f.firstR,f.r2=a,f.c1=f.c2=f.type=void 0),b.range(m).select()):(d.ctrlKey||d.metaKey)&&"single"!=e?(m=b.iRows.isSelected({rowIndx:a}),f[m?"removeRow":"add"]({r1:a,firstR:a})):(this.mousedown={r1:a,y1:d.pageY,x1:d.pageX},b.range({r1:a,firstR:a},!1).select()),g&&setTimeout(function(){b.focus({rowIndxPage:c.rowIndxPage,colIndx:b.getFirstVisibleCI(!0)})},0),!0};h._onContMouseDown=function(d,c){this.that.options.swipeModel.on&&
(this._stopSwipe(!0),this.swipedown={x:d.pageX,y:d.pageY});return!0};h._onMousePQUp=function(d,c){this.mousedown=null};h._stopSwipe=function(d){d&&(this.swipedownPrev=this.swipedown=null);window.clearInterval(this.intID);window.cancelAnimationFrame(this.intID);this.intID=null};h._onMouseStop=function(d,c){var b=this,a=this.that;if(this.swipedownPrev){var f=a.options.swipeModel,a=this.swipedownPrev,m=a.ts,g=(new Date).getTime()-m,e=d.pageX,l=d.pageY,h=e-a.x,k=l-a.y;if(Math.sqrt(h*h+k*k)/g>f.ratio){var n=
0,r=f.repeat;b._stopSwipe();var t=function(){n+=f.speed;r--;b._onMouseDrag({pageX:e+n*h/g,pageY:l+n*k/g});0<r?b.intID=window.requestAnimationFrame(t):b._stopSwipe(!0)};t()}else b.swipedown=null,b.swipedownPrev=null}};h._onMouseDrag=function(d,c){var b=this.that.options;if(this.swipedown){var a=this.swipedown,f=a.x,m=a.y,g=d.pageX,e=d.pageY;this.swipedownPrev={x:f,y:m,ts:(new Date).getTime()};var l=b.scrollModel.smooth;if(!b.virtualY||l)this.scrollVertSmooth(m,e),this.syncScrollBarVert();if(!b.virtualX||
l)this.scrollHorSmooth(f,g),this.syncScrollBarHor();a.x=g;a.y=e}return!0};h.updateTableY=function(d){if(0==d)return!1;var c=this.that,b=this.getTableForVertScroll(),c=c.iRefresh.getEContHt();if(!b||!b.length)return!1;var a=b.data("offsetHeight")-1,f=this.scrollTop-d;this.setScrollTop(0>f?0:0>d&&0<c-a+f?a-c:f,b,c);return!0};h.setScrollTop=function(d,c,b){0<=d&&(this.scrollTop=d=Math.round(d),c.parent("div").scrollTop(d))};h.getScrollLeft=function(d){return this.scrollLeft};h.getScrollTop=function(d){return this.scrollTop};
h.setScrollLeft=function(d,c,b,a){0<=d&&(this.scrollLeft=d=Math.round(d),b=b?b.parent():k(),b=b.add(c?c.parent("div"):k()),b.scrollLeft(d))};h.scrollVertSmooth=function(d,c){d!=c&&this.updateTableY(c-d)};h.scrollHorSmooth=function(d,c){if(d!=c){var b=this.that,a=b.options,f=c-d,m=this.getTableForHorScroll(),g=this.getTableHeaderForHorScroll(),b=b.iRefresh.getEContWd();if(m||g){var e=m?m:g,a=a.virtualX?this.getScrollWidth(e):e.data("scrollWidth"),f=this.scrollLeft-f;this.setScrollLeft(0>f?0:0>a-b-
f?a-b:f,m,g,b)}}};h.syncViewWithScrollBarVert=function(d){if(null!=d){var c=this.that,b=this.getTableForVertScroll();if(b&&b.length){c.options.editModel.indices&&c.blurEditor({force:!0});var a=b.data("offsetHeight"),c=c.iRefresh.getEContHt();if((d*=a-c)||0===d)0>d&&(d=0),this.setScrollTop(d,b,c)}}};h.syncViewWithScrollBarHor=function(d){if(null!=d){var c=this.that,b=this.getTableForHorScroll(),a=this.getTableHeaderForHorScroll();if(b||a){var f=c.options;f.editModel.indices&&c.blurEditor({force:!0});
var m=b?b:a,f=f.virtualX?this.getScrollWidth(m):m.data("scrollWidth"),c=c.iRefresh.getEContWd();d*=f-c;f&&c&&(0>d&&(d=0),this.setScrollLeft(d,b,a,c))}}};h.resetMargins=function(){this.scrollTop=this.scrollLeft=0};h.syncHeaderViewWithScrollBarHor=function(d){if(null!=d){var c=this.that,b=this.getTableHeaderForHorScroll();if(b){var a=c.options,f=a.freezeCols;a.editModel.indices&&c.blurEditor({force:!0});var a=b.data("scrollWidth"),m=c.iRefresh.getEContWd();d=c.calcWidthCols(f,d+f);a&&m&&(0>d&&(d=0),
b.css("marginLeft",-d))}}};h.syncScrollBarVert=function(){var d=this.that,c=this.getTableForVertScroll();if(c&&c.length){var c=c.data("offsetHeight"),b=d.iRefresh.getEContHt(),c=this.scrollTop/(c-b);0<=c&&1>=c&&d.vscroll.widget().hasClass("pq-sb-vert")&&d.vscroll.option("ratio",c)}};h.syncScrollBarHor=function(){var d=this.that,c=d.options,b=this.getTableForHorScroll(),a=this.getTableHeaderForHorScroll();if(b||a)b=b?b:a,c=c.virtualX?this.getScrollWidth(b):b.data("scrollWidth"),b=d.iRefresh.getEContWd(),
c=this.scrollLeft/(c-b),0<=c&&1>=c&&d.hscroll.widget().hasClass("pq-sb-horiz")&&d.hscroll.option("ratio",c)};h.getTableForVertScroll=function(){var d=this.that,c=d.pqpanes;if((d=d.$tbl)&&d.length)return c.h&&c.v?d=k([d[2],d[3]]):c.v?d=k([d[0],d[1]]):c.h&&(d=k(d[1])),d};h.getTableForHorScroll=function(){var d=this.that,c=d.pqpanes,b=[],a=d.$tbl;if(a&&a.length)return c.h&&c.v?b.push(a[1],a[3]):c.v?b.push(a[1]):c.h?b.push(a[0],a[1]):b.push(a[0]),d.tables.length&&(d=d.tables[0].$tbl,c.v?b.push(d[1]):
b.push(d[0])),k(b)};h.getTableHeaderForHorScroll=function(){var d=this.that,c=d.pqpanes;if((d=d.$tbl_header)&&d.length)return d=c.vH?k(d[1]):k(d[0]),d.parent()};h.scrollRowNonVirtual=function(d){var c=this.that,b=c.options,a=d.rowIndxPage,f=d.rowIndx;d=c.iRefresh.getEContHt();a=null==a?f-c.rowIndxOffset:a;b=parseInt(b.freezeRows);if(!(a<b)){var b=c.get$Tbl(a),m=c.getRow({rowIndxPage:a})[0];m&&(c=b[0].offsetTop+1,a=m.offsetHeight,f=this.getScrollTop(),m=m.offsetTop-1,0>c+m-f?(c=c+m+-1,this.setScrollTop(0>
c?0:c,b,d),this.syncScrollBarVert()):m+a-f>d&&(this.setScrollTop(a+m-d,b,d),this.syncScrollBarVert()))}};h.scrollColumnNonVirtual=function(d){var c=this.that,b=d.colIndx,b=null==b?c.getColIndx({dataIndx:d.dataIndx}):b,a=c.options.freezeCols;if(!(b<a)){d=c._calcRightEdgeCol(b).width;var b=c._calcRightEdgeCol(b-1).width,a=c._calcRightEdgeCol(a-1).width,f=this.getTableForHorScroll(),m=this.getTableHeaderForHorScroll(),c=c.iRefresh.getEContWd(),g=this.scrollLeft;d-g>c?(this.setScrollLeft(d-c,f,m,c),this.syncScrollBarHor()):
b-a<g&&(this.setScrollLeft(b-a,f,m,c),this.syncScrollBarHor())}}})(jQuery);
(function(k){var n=null,h=!1,d="",c=k.paramquery.pqGrid.prototype,b=c.options,a={on:!0,header:!0,zIndex:1E4},f={on:!0},m={on:!0,compare:"byVal",select:!0,validate:!0,allowInvalid:!0,type:"replace"};b.pasteModel=b.pasteModel||m;b.copyModel=b.copyModel||a;b.cutModel=b.cutModel||f;c._setGlobalStr=function(a){d=a};c.canPaste=function(){return d?!0:!1};c.copy=function(){n=new g(this);n.copy();n=null};c.paste=function(a){n=new g(this);n.paste(a);n=null};c.cut=function(){n=new g(this);n.copy({cut:!0,source:"cut"});
n=null};c.clear=function(){this.iSelection.clear()};var g=function(a,b){this.that=a},c=g.prototype;c.createClipBoard=function(){var a=k("#pq-grid-excel-div"),a=this.that.options.copyModel,b=k("#pq-grid-excel");0==b.length&&(a=k("<div id='pq-grid-excel-div'  style='position:fixed;top:20px;left:20px;height:1px;width:1px;overflow:hidden;z-index:"+a.zIndex+";'/>").appendTo(document.body),b=k("<textarea id='pq-grid-excel' autocomplete='off' spellcheck='false' style='overflow:hidden;height:10000px;width:10000px;opacity:0' />").appendTo(a),
b.css({opacity:0}));b.on("focusin",function(a){a.stopPropagation()});b.select()};c.destroyClipBoard=function(){this.clearClipBoard();var a=this.that,b=k(window).scrollTop(),c=k(window).scrollLeft();a.focus();var a=k(window).scrollTop(),d=k(window).scrollLeft();b==a&&c==d||window.scrollTo(c,b)};c.clearClipBoard=function(){k("#pq-grid-excel").val("")};c.copy=function(a){return this.that.iSelection.copy(a)};c.paste=function(a){a=a||{};var b=this.that,c=a.dest,f=a.clip,e=f?f.length?f.val():"":d,e=e.replace(/\n$/,
""),f=e.split("\n"),g=f.length,m,h=b.colModel,n=b.readCell,s=b.options.pasteModel,y="row",z=!1,x=h.length;if(s.on&&0!=e.length&&0!=g){e={rows:f};if(!1===b._trigger("beforePaste",null,e))return!1;var A=s.type,C,D,E,y=(c?b.range(c):b.selection())._areas;(E=y.length?y[0]:null)&&b.getRowData({rowIndx:E.r1})?(y="row"==E.type?"row":"cell",C=E.r1,D=E.r2,c=E.c1,E=E.c2):(y="cell",E=c=D=C=0);var G,O;"replace"==A?(G=C,O=D-C+1<g?"extend":"repeat"):"append"==A?(G=D+1,O="extend"):"prepend"==A&&(G=C,O="extend");
var J,g="extend"==O?g:D-C+1,M;C=0;a=a.rowList||[];for(var I=D=0;I<g;I++){var F=f[C],L=I+G,H="replace"==A?b.getRowData({rowIndx:L}):null,K=H?{}:null,S={};void 0===F&&"repeat"===O&&(C=0,F=f[C]);C++;var N=F.split("\t");if(!m)if("cell"==y){m=N.length;J=E-c+1<N.length?"extend":"repeat";m="extend"==J?m:E-c+1;if(isNaN(m))throw"lenH NaN. assert failed.";m+c>x&&(m=x-c)}else m=x,c=0;var U=0,P=0,F=0;M=m;for(var V=N.length,P=0;P<M;P++){U>=V&&(U=0);var T=h[P+c],W=N[U],R=T.dataIndx;!1===T.copy?(F++,"extend"==J&&
M+c<x&&M++):(U++,S[R]=W,K&&(K[R]=n(H,T)))}!1==k.isEmptyObject(S)&&(N="update",null==H&&(z=!0,N="add"),a.push({newRow:S,rowIndx:L,rowData:H,oldRow:K,type:N}),D++)}b._digestData({rowList:a,source:"paste",allowInvalid:s.allowInvalid,validate:s.validate});b[z?"refreshView":"refresh"]();s.select&&("cell"==y?b.range({r1:G,c1:c,r2:G+D-1,c2:"extend"==J?c+m-1+F:E}).select():b.range({r1:G,r2:G+D-1}).select());b._trigger("paste",null,e)}};k(document).unbind(".pqExcel").bind("keydown.pqExcel",function(a){if(a.ctrlKey||
a.metaKey){var b=k(a.target);if(b.hasClass("pq-grid-row")||b.hasClass("pq-grid-cell")||b.is("#pq-grid-excel")||b.hasClass("pq-grid-cont")){var c=b.closest(".pq-grid");if(n||b.length&&c.length){if(!n){try{var d=c.pqGrid("getInstance").grid;if(d.option("selectionModel.native"))return!0}catch(f){return!0}n=new g(d,b);n.createClipBoard()}"67"==a.keyCode||"99"==a.keyCode?n.copy({clip:k("#pq-grid-excel")}):"88"==a.keyCode?n.copy({cut:!0,clip:k("#pq-grid-excel")}):"86"==a.keyCode||"118"==a.keyCode?(h=!0,
n.clearClipBoard(),window.setTimeout(function(){n&&(n.paste({clip:k("#pq-grid-excel")}),n.destroyClipBoard(),n=null);h=!1},0)):(b=k("#pq-grid-excel"),b.length&&document.activeElement==b[0]&&n.that._onKeyPressDown(a))}}}else if(b=a.keyCode,c=k.ui.keyCode,b==c.UP||b==c.DOWN||b==c.LEFT||b==c.RIGHT||b==c.PAGE_UP||b==c.PAGE_DOWN){if(e)return!1;b=k(a.target);if(b.hasClass("pq-grid-row")||b.hasClass("pq-grid-cell"))e=!0}}).bind("keyup.pqExcel",function(a){var b=a.keyCode;h||!n||a.ctrlKey||a.metaKey||-1==
k.inArray(b,[17,91,93,224])||(n.destroyClipBoard(),n=null);e&&(a=k(a.target),a.hasClass("pq-grid-row")||a.hasClass("pq-grid-cell")||(e=!1))});var e=!1})(jQuery);
(function(k){var n=k.paramquery.pqGrid.prototype.options,h={on:!0,checkEditable:!0,checkEditableAdd:!1,allowInvalid:!0};n.historyModel=n.historyModel||h;n=(k.paramquery.cHistory=function(d){var c=this;this.that=d;this.options=d.options;this.records=[];this.id=this.counter=0;d.on("keyDown",function(b,a){return c._onKeyDown(b,a)}).on("dataAvailable",function(b,a){"filter"!=a.source&&c.reset()})}).prototype=new k.paramquery.cClass;n._onKeyDown=function(d,c){var b=d.ctrlKey||d.metaKey;if(b&&"90"==d.keyCode)return this.undo(),
!1;if(b&&"89"==d.keyCode)return this.redo(),!1};n.resetUndo=function(){if(0==this.counter)return!1;this.counter=0;this.that._trigger("history",null,{type:"resetUndo",num_undo:0,num_redo:this.records.length-this.counter,canUndo:!1,canRedo:!0})};n.reset=function(){if(0==this.counter&&0==this.records.length)return!1;this.records=[];this.id=this.counter=0;this.that._trigger("history",null,{num_undo:0,num_redo:0,type:"reset",canUndo:!1,canRedo:!1})};n.increment=function(){var d=this.records,c=d.length;
this.id=c?d[c-1].id+1:0};n.push=function(d){var c=this.canRedo(),b=this.records,a=this.counter;b.length>a&&b.splice(a,b.length-a);b[a]=k.extend({id:this.id},d);this.counter++;d=this.that;var f,m;1==this.counter&&(f=!0);c&&this.counter==b.length&&(m=!1);d._trigger("history",null,{type:"add",canUndo:f,canRedo:m,num_undo:this.counter,num_redo:0})};n.canUndo=function(){return 0<this.counter?!0:!1};n.canRedo=function(){return this.counter<this.records.length?!0:!1};n.processCol=function(d,c){var b=this.that;
if(d.length){var a="add"==d.type;b[(c?a:!a)?"addColumn":"deleteColumn"]({colList:d,history:!1})}};n.undo=function(){var d=this.canRedo(),c=this.that,b=!1,a=this.options.historyModel,f=this.records;if(0<this.counter)this.counter--;else return!1;for(var m=f[this.counter],f=(f=m.rowList)?f:[],m=(m=m.colList)?m:[],g=[],e=0,l=f.length;e<l;e++){var h=f[e],k=h.newRow,n=h.rowData,r=h.type,t=h.oldRow,h=h.rowIndx;"update"==r?(h=c.getRowIndx({rowData:n}).rowIndx,g.push({type:r,rowIndx:h,rowData:n,oldRow:k,newRow:t})):
"add"==r?(b=!0,g.push({type:"delete",rowData:k})):"delete"==r&&(b=!0,g.push({type:"add",rowIndx:h,newRow:n}))}m.length?this.processCol(m):(c._digestData({history:!1,source:"undo",checkEditable:a.checkEditable,checkEditableAdd:a.checkEditableAdd,allowInvalid:a.allowInvalid,rowList:g}),c[b?"refreshView":"refresh"]({source:"undo"}));var q,p;!1===d&&(q=!0);0==this.counter&&(p=!1);c._trigger("history",null,{canUndo:p,canRedo:q,type:"undo",num_undo:this.counter,num_redo:this.records.length-this.counter});
return!0};n.redo=function(){var d=this.canUndo(),c=this.that,b=this.options.historyModel,a=this.counter,f=this.records;if(a==f.length)return!1;for(var m=!1,g=f[a],a=(a=g.rowList)?a:[],g=(g=g.colList)?g:[],e=[],l=0,h=a.length;l<h;l++){var k=a[l],n=k.newRow,r=k.rowData,t=k.type,q=k.oldRow,k=k.rowIndx;"update"==t?(k=c.getRowIndx({rowData:r}).rowIndx,e.push({type:t,rowIndx:k,rowData:r,oldRow:q,newRow:n})):"add"==t?(m=!0,e.push({type:"add",rowIndx:k,newRow:n})):"delete"==t&&(m=!0,e.push({type:"delete",
rowData:r}))}g.length?this.processCol(g,!0):(c._digestData({history:!1,source:"redo",checkEditable:b.checkEditable,checkEditableAdd:b.checkEditableAdd,allowInvalid:b.allowInvalid,rowList:e}),c[m?"refreshView":"refresh"]({source:"redo"}));this.counter<f.length&&this.counter++;var p,u;!1==d&&(p=!0);this.counter==this.records.length&&(u=!1);c._trigger("history",null,{canUndo:p,canRedo:u,type:"redo",num_undo:this.counter,num_redo:this.records.length-this.counter});return!0};k.paramquery.pqGrid.prototype.history=
function(d){return this.iHistory[d.method](d)}})(jQuery);
(function(k){var n=k.paramquery;n.filter=function(){var c={begin:{text:"Begins With",TR:!0,string:!0},between:{text:"Between",TR:!0,string:!0,date:!0,number:!0},notbegin:{text:"Does not begin with",TR:!0,string:!0},contain:{text:"Contains",TR:!0,string:!0},notcontain:{text:"Does not contain",TR:!0,string:!0},equal:{text:"Equal To",TR:!0,string:!0,bool:!0},notequal:{text:"Not Equal To",TR:!0,string:!0},empty:{text:"Empty",TR:!1,string:!0,bool:!0},notempty:{text:"Not Empty",TR:!1,string:!0,bool:!0},
end:{text:"Ends With",TR:!0,string:!0},notend:{text:"Does not end with",TR:!0,string:!0},less:{text:"Less Than",TR:!0,number:!0,date:!0},lte:{text:"Less than or equal",TR:!0,number:!0,date:!0},range:{TR:!0,string:!0,number:!0,date:!0},regexp:{TR:!0,string:!0,number:!0,date:!0},great:{text:"Great Than",TR:!0,number:!0,date:!0},gte:{text:"Greater than or equal",TR:!0,number:!0,date:!0}};return{conditions:c,getAllConditions:function(){var b=[],a;for(a in c)b.push(a);return b}(),getConditions:function(b){var a=
[],d;for(d in c)c[d][b]&&a.push(d);return a},getTRConditions:function(){var b=[],a;for(a in c)c[a].TR&&b.push(a);return b}(),getWTRConditions:function(){var b=[],a;for(a in c)c[a].TR||b.push(a);return b}()}}();n.filter.rules={};n.filter.rules.en={begin:"Begins With",between:"Between",notbegin:"Does not begin with",contain:"Contains",notcontain:"Does not contain",equal:"Equal To",notequal:"Not Equal To",empty:"Empty",notempty:"Not Empty",end:"Ends With",notend:"Does not end with",less:"Less Than",
lte:"Less than or equal",great:"Great Than",gte:"Greater than or equal"};var h=function(c){this.that=c;c.on("load",function(){var b=c.options.dataModel.dataUF;b&&(b.length=0)})};n.cFilterData=h;var d=h.prototype;h.conditions={equal:function(c,b){if(c==b)return!0},contain:function(c,b){if(-1!=c.indexOf(b))return!0},notcontain:function(c,b){if(-1==c.indexOf(b))return!0},empty:function(c){if(0==c.length)return!0},notempty:function(c){if(0<c.length)return!0},begin:function(c,b){if(0==(c+"").indexOf(b))return!0},
notbegin:function(c,b){if(0!=c.indexOf(b))return!0},end:function(c,b){var a=c.lastIndexOf(b);if(-1!=a&&a+b.length==c.length)return!0},notend:function(c,b){var a=c.lastIndexOf(b);if(-1==a||a+b.length!=c.length)return!0},regexp:function(c,b){if(b.test(c))return b.lastIndex=0,!0},notequal:function(c,b){if(c!=b)return!0},great:function(c,b){if(c>b)return!0},gte:function(c,b){if(c>=b)return!0},between:function(c,b,a){if(c>=b&&c<=a)return!0},range:function(c,b){if(-1!=k.inArray(c,b))return!0},less:function(c,
b){if(c<b)return!0},lte:function(c,b){if(c<=b)return!0}};h.convert=function(c,b){c=null==c?"":c;"string"==b?c=k.trim(c).toUpperCase():"date"==b?c=Date.parse(c):"integer"==b?c=parseInt(c):"float"==b?c=parseFloat(c):"bool"==b&&(c=String(c).toLowerCase());return c};d.isMatchCellSingle=function(c,b){var a=c.dataType,d=c.value,m=c.value2,g=c.cbFn,e=b[c.dataIndx],e="regexp"==c.condition?null==e?"":e:h.convert(e,a);return g(e,d,m)?!0:!1};d.isMatchRow=function(c,b,a){if(0==b.length)return!0;for(var d=0;d<
b.length;d++){var m=this.isMatchCell(b[d],c);if("OR"==a&&m)return!0;if("AND"==a&&!m)return!1}if("AND"==a)return!0;if("OR"==a)return!1};d.getQueryStringFilter=function(){var c=this.that,b=c.options,a=b.stringify,b=b.filterModel,d=b.mode,c=this.getFilterData({CM:c.colModel,location:"remote"}),m="";b&&b.on&&c&&(c.length?(b={mode:d,data:c},m=!1===a?b:JSON.stringify(b)):m="");return m};d.filterLocalData=function(c){c=c||{};var b=this.that,a=c.apply,a=null==a?!0:a;c=this.getFilterData({CM:a?b.colModel:
c.CM});var d=b.options,m=d.dataModel,g=b.iSort,e=m.data,l=[],h=[],k=m.dataUF,n=d.filterModel,r=n.multiple,d=n?n.mode:null;e||(e=m.data=[]);k||(k=m.dataUF=[]);!1===a&&(e=e.slice());if(k.length){for(var t=0,q=k.length;t<q;t++)e.push(k[t]);0==g.readSorter().length&&g.sortLocalData(e);k=m.dataUF=[]}else if(c.length)g.saveOrder();else return{data:e,dataUF:k};this.isMatchCell=r?this.isMatchCellMultiple:this.isMatchCellSingle;if(n.on&&d&&c&&c.length){if(e.length)for(t=0,q=e.length;t<q;t++)g=e[t],this.isMatchRow(g,
c,d)?l.push(g):h.push(g);e=l;k=h;a&&(m.data=e,m.dataUF=k)}a&&(b._queueATriggers.filter={ui:{type:"local",filter:c}});return{data:e,dataUF:k}};d.getFilterData=function(c){var b=c.CM;if(!b)throw"CM N/A";var a=b.length,d=c.location,m=n.filter.getAllConditions,g=n.filter.getTRConditions;c=[];for(var e=n.cFilterData,l=function(a,b,c){return"function"==typeof a?!0:"between"==a?null!=b&&""!==b||null!=c&&""!==c?!0:!1:-1!=k.inArray(a,m)?null!=b&&""!==b||-1==k.inArray(a,g)?!0:!1:!0},h=function(a,b){return"remote"==
d?(null==a?"":a).toString():e.convert(a,b)},B=0;B<a;B++){var v=b[B],r=v.filter;if(r&&r.on){var t=v.dataIndx,v=(v=v.dataType)&&"stringi"!=v&&"function"!=typeof v?v:"string",q=r.value,p=r.value2,u=r.condition;if(l(u,q,p)){if("between"==u)""===q||null==q?(u="lte",q=h(p,v)):""===p||null==p?(u="gte",q=h(q,v)):(q=h(q,v),p=h(p,v));else if("regexp"==u)if("remote"==d)q=q.toString();else{if("string"==typeof q)try{var s=r.modifiers,s=s?s:"gi",q=new RegExp(q,s)}catch(y){q=/.*/}}else if("range"==u)if(null==q)continue;
else if("string"==typeof q)q=h(q,v),q=q.split(/\s*,\s*/);else{if(q&&"function"==typeof q.push){if(0==q.length)continue;for(var q=q.slice(),r=0,z=q.length;r<z;r++)q[r]=h(q[r],v)}}else q=h(q,v);c.push({dataIndx:t,value:q,value2:p,condition:u,dataType:v,cbFn:"remote"==d?"":"function"==typeof u?u:e.conditions[u]})}}}return c}})(jQuery);
(function(k){k=k.paramquery;var n=k.cSort=function(d){this.that=d;this.sorters=[];this.tmpPrefix="pq_tmp_";this.cancel=!1};k.pqGrid.prototype.sort=function(d){d=d||{};var c=this,b=this.options,a=b.dataModel,f=a.data,m=b.sortModel.type;if(f&&f.length||"local"!=m){var g=b.editModel,b=this.iSort,e=b.getSorter(),l,h=d.evt,k=null==d.single?b.readSingle():d.single;l=b.readCancel();d.sorter?d.addon?(d.single=k,d.cancel=l,l=b.addon(d)):l=d.sorter:l=b.readSorter();if(l.length||e.length)g.indices&&c.blurEditor({force:!0}),
g={dataIndx:l.length?l[0].dataIndx:null,oldSorter:e,sorter:l,source:d.source,single:k},!1===c._trigger("beforeSort",h,g)?b.cancelSort():(b.resumeSort(),"local"==m&&b.saveOrder(),b.setSorter(l),b.setSingle(k),b.writeSorter(l),b.writeSingle(k),"local"==m?(a.data=b.sortLocalData(f),this._queueATriggers.sort={evt:h,ui:g},!1!==d.refresh&&this.refreshView()):"remote"==m&&(this._queueATriggers.sort={evt:h,ui:g},d.initByRemote||this.remoteRequest({initBySort:!0,callback:function(){c._onDataAvailable()}})))}};
k=n.prototype;k.cancelSort=function(){this.cancel=!0};k.resumeSort=function(){this.cancel=!1};k.readSorter=function(){var d=this.that,c=d.columns,b,a=[];if((d=d.options.sortModel.sorter)&&(b=d.length)){for(;b--;)null==c[d[b].dataIndx]&&d.splice(b,1);a=a.concat(d)}return a=pq.arrayUnique(a,"dataIndx")};k.setSingle=function(d){this.single=d};k.getSingle=function(){return this.single};k.readSingle=function(){return this.that.options.sortModel.single};k.writeSingle=function(d){this.that.options.sortModel.single=
d};k.setCancel=function(d){this.cancel=d};k.getCancel=function(){return this.cancel};k.readCancel=function(){return this.that.options.sortModel.cancel};k.writeCancel=function(d){this.that.options.sortModel.cancel=d};k.writeSorter=function(d){this.that.options.sortModel.sorter=d};k.addon=function(d){d=d||{};var c=d.sorter,b=c[0].dataIndx,a=c[0].dir,f=d.single,m=d.cancel,c=this.readSorter();if(null==f)throw"sort single N/A";null!=b&&(f&&!d.tempMultiple?(c=c.length?[c[0]]:[],c[0]&&c[0].dataIndx==b?(b=
c[0].dir,b="up"===b?"down":m&&"down"===b?"":"up",""===b?c.length--:c[0].dir=b):c[0]={dataIndx:b,dir:a?a:"up"}):(d=this.inSorters(c,b),-1<d?(b=c[d].dir,"up"==b?c[d].dir="down":m&&"down"==b?c.splice(d,1):1==c.length?c[d].dir="up":c.splice(d,1)):c.push({dataIndx:b,dir:"up"})));return c};k.saveOrder=function(d){var c=this.that.options.dataModel;d=c.data;if(!(!d||!d.length||c.dataUF&&c.dataUF.length||this.getSorter().length&&null!=d[0].pq_order))for(var c=0,b=d.length;c<b;c++)d[c].pq_order=c};k.getQueryStringSort=
function(){if(this.cancel)return"";var d=this.sorters,c=this.that.options.stringify;return d.length?!1===c?d:JSON.stringify(d):""};k.getSorter=function(){return this.sorters};k.setSorter=function(d){this.sorters=d.slice(0)};k.inSorters=function(d,c){for(var b=0;b<d.length;b++)if(d[b].dataIndx==c)return b;return-1};k.sortLocalData=function(d){var c=this.sorters;c.length||(c=[{dataIndx:"pq_order",dir:"up",dataType:"integer"}]);return this._sortLocalData(c,d)};k.compileSorter=function(d,c){var b=this.that,
a=b.columns,f=b.options,b=[],m=[],g=[],e=this.tmpPrefix,l=f.sortModel,k=l.useCache,l=l.ignoreCase,n=d.length;c=c?c:f.dataModel.data;for(f=0;f<n;f++){var v=d[f],r=v.dataIndx,t=a[r]||{},q="up"==(v.dir=v.dir||"up")?1:-1,p=t.sortType,p=pq.getFn(p),v=t.dataType||v.dataType||"string",v="string"==v&&l?"stringi":v,u=(t=k&&"date"==v)?e+r:r;m[f]=u;g[f]=q;b[f]=p?function(a,b){return function(c,d,f,e){return b(c,d,f,e,a)}}(p,h.sort_sortType):"integer"==v?h.sort_number:"float"==v?h.sort_number:"function"==typeof v?
function(a,b){return function(c,d,f,e){return b(c,d,f,e,a)}}(v,h.sort_dataType):"date"==v?h["sort_date"+(t?"_fast":"")]:"bool"==v?h.sort_bool:"stringi"==v?h.sort_locale:h.sort_string;t&&this.useCache(c,v,r,u)}return this._composite(b,m,g,n)};k._composite=function(d,c,b,a){return function(f,m){for(var g=0,e=0;e<a&&(g=d[e](f,m,c[e],b[e]),0==g);e++);return g}};k._sortLocalData=function(d,c){if(!c)return[];if(!c.length||!d||!d.length)return c;var b=this.that,a=b.options.sortModel,f=this.compileSorter(d),
m={sort_composite:f};!1!==b._trigger("customSort",null,m)?c.sort(f):c=m.data;a.useCache&&setTimeout(this.removeCache(d,c),0);return c};k.useCache=function(d,c,b,a){c=h["get_"+c];for(var f=d.length;f--;){var m=d[f];m[a]=c(m[b])}};k.removeCache=function(d,c){var b=this.tmpPrefix;return function(){for(var a=d.length;a--;){var f=b+d[a].dataIndx,m=c.length;if(m&&c[0].hasOwnProperty(f))for(;m--;)delete c[m][f]}}};var h={get_date:function(d){var c;return d?isNaN(c=Date.parse(d))?0:c:0},sort_number:function(d,
c,b,a){d=d[b];c=c[b];return((d?1*d:0)-(c?1*c:0))*a},sort_date:function(d,c,b,a){d=d[b];c=c[b];d=d?Date.parse(d):0;c=c?Date.parse(c):0;return(d-c)*a},sort_date_fast:function(d,c,b,a){return(d[b]-c[b])*a},sort_dataType:function(d,c,b,a,f){return f(d[b],c[b])*a},sort_sortType:function(d,c,b,a,f){return f(d,c,b)*a},sort_string:function(d,c,b,a){d=d[b]||"";c=c[b]||"";b=0;d>c?b=1:d<c&&(b=-1);return b*a},sort_locale:function(d,c,b,a){return(d[b]||"").localeCompare(c[b]||"")*a},sort_bool:function(d,c,b,a){d=
d[b];c=c[b];b=0;if(d&&!c||!1===d&&null===c)b=1;else if(c&&!d||!1===c&&null===d)b=-1;return b*a}};pq.sortObj=h})(jQuery);
(function(k){function n(b){this.that=b;this.mc=null;var a=this,c=b.options;this.DM=c.dataModel;b.on("dataReady columnOrder groupShowHide",function(b,d){c.mergeCells&&"pager"!==d.source&&a.init()})}function h(b,a,c){var d=0,g=b.length;for(c=c>g?g:c;a<c;a++)!0!==b[a].hidden&&d++;return d}function d(b,a,c){var d=0,g=b.length;for(c=c>g?g:c;a<c;a++)!0!==b[a].pq_hidden&&d++;return d}k.paramquery.cMerge=n;var c=n.prototype=new k.paramquery.cClass;c.init=function(){for(var b=this.that,a=b.colModel,c=b.options.mergeCells||
[],m=b.get_p_data(),g=[],e=[],l=0,k=c.length;l<k;l++){var n=c[l],v=n.r1,r=v,t=m[v],q=n.c1,p=q,u=a[q],s=n.rc,y=n.cc;if(u&&t){if(u.hidden)a:{for(p=q;p<q+y;p++){u=a[p];if(!u){p=-1;break a}if(!u.hidden)break a}p=void 0}u=h(a,q,q+y);if(t.pq_hidden)a:{for(r=v;r<v+s;r++){t=m[r];if(!t){r=-1;break a}if(!t.pq_hidden)break a}r=void 0}t=d(m,v,v+s);if(!(1>t||1>u))for(g.push({r1:v,c1:q,rc:s,cc:y,e_rc:t,e_cc:u}),e[r]=e[r]||[],e[r][p]={show:!0,rowspan:t,colspan:u,o_rowspan:s,o_colspan:y,style:n.style,cls:n.cls,attr:n.attr,
r1:v,c1:q,v_r1:r,v_c1:p},n={show:!1,r1:v,c1:q,v_r1:r,v_c1:p},t=v;t<v+s;t++)for(e[t]=e[t]||[],u=q;u<q+y;u++)if(t!=r||u!=p)e[t][u]=n}}b._mergeCells=0<e.length;this.mc=e;this.mc2=g};c.isHidden=function(b,a){var c,d=this.mc;return d&&d[b]&&(c=d[b][a])&&!c.show?!0:!1};c.setData=function(b,a,c){var d,g=this.mc;g[b]&&(d=g[b][a])&&(d.data=c)};c.getData=function(b,a,c){var d,g=this.mc;if(g[b]&&(d=g[b][a]))return(b=d.data)?b[c]:null};c.removeData=function(b,a,c){var d,g=this.mc;g&&g[b]&&(d=g[b][a])&&(b=d.data)&&
(b[c]=null)};c.ismergedCell=function(b,a){var c=this.mc,d;return c&&c[b]&&(d=c[b][a])?(c=c[d.v_r1][d.v_c1],b==c.r1&&a==c.c1?{rowspan:c.o_rowspan,colspan:c.o_colspan}:!0):!1};c.isRootCell=function(b,a,c){var d=this.mc,g;if(d&&d[b]&&(g=d[b][a])){if("o"==c)return b==g.r1&&a==g.c1;var e=g.v_r1;g=g.v_c1;if("a"==c)return c=d[e][g],c.a_r1==b&&c.a_c1==a;if(e==b&&g==a)return c=d[e][g],{rowspan:c.rowspan,colspan:c.colspan}}};c.getRootCell=function(b,a,c){var d=this.that,g=this.mc,e;if(g&&g[b]&&(e=g[b][a])){"a"==
c?(b=e.v_r1,a=e.v_c1,c=g[b][a],c.a_r1&&(b=c.a_r1,a=c.a_c1)):"o"==c?(b=e.r1,a=e.c1):(b=e.v_r1,a=e.v_c1);c=d.colModel[a];var g=d.rowIndxOffset,l=b-g;0>l&&(l=0,b=g);return{rowIndxPage:l,colIndx:a,column:c,dataIndx:c.dataIndx,rowData:d.getRowData({rowIndx:b}),rowIndx:b,rowspan:e.rowspan,colspan:e.colspan}}return d.normalize({rowIndx:b,colIndx:a})};c.inflateRange=function(b,a,c,d){var g=this.that,e=!1,l=g.options,l=l.groupModel.on?g.rowIndxOffset+g.pdata.length-1:l.dataModel.data.length-1,g=g.colModel.length-
1,h=this.mc2;if(!h)return[b,a,c,d];var k=0,n=h.length;a:for(;k<n;k++){var r=h[k],t=r.r1,q=r.c1,p=t+r.rc-1,r=q+r.cc-1,p=p>l?l:p,r=r>g?g:r,u=t<=c&&p>c,s=q<a&&r>=a,y=q<=d&&r>d;if((t<b&&p>=b||u)&&r>=a&&q<=d||(s||y)&&p>=b&&t<=c){e=!0;b=t<b?t:b;a=q<a?q:a;c=p>c?p:c;d=r>d?r:d;break a}}return e?this.inflateRange(b,a,c,d):[b,a,c,d]};k.paramquery.pqGrid.prototype.calcVisibleRows=d;c.renderCell=function(b){var a=this.that,c=b.rowIndx,m=b.rowIndxPage,g=b.colIndx,e,l=this.mc,k;if(l[c]&&(k=l[c][g])){var n=k.v_r1,
v=k.v_c1;e=k.r1;var r=k.c1,t=a.options,q=a.colModel,p=a.rowIndxOffset,u=t.freezeCols,s=(t=t.freezeRows)?t+p:0,y=a.initH,z=a.initV;if(k.show||g==v&&m==z&&n>=s||g==v&&c==z&&n>=s||c==n&&g==y&&v>=u||c==z&&g==y&&v>=u&&n>=s){k=e-p;m=a.pdata;a=a.get_p_data();e={rowData:a[e],rowIndx:e,colIndx:r,column:q[r],rowIndxPage:k};l=l[n][v];k=l.colspan;var x=l.rowspan,A=h(q,g,u),r=d(m,c-p,t);u&&g<u&&k>A?(v=k-h(q,u,y),k=Math.max(v,A)):k-=h(q,v,g);t&&c>p&&c<s&&x>r?(n=x-d(m,t,z),x=Math.max(n,r)):x-=d(a,n,c);l.a_r1=c;
l.a_c1=g;e.rowspan=x;e.colspan=k;e.style=l.style;e.attr=l.attr;e.cls=l.cls}else return null}return e?e:b};c.getMergeCells=function(b,a,c){for(var d=this.that,g=d.options.mergeCells,e,l,d=d.rowIndxOffset,h=d+c,k=[],n=g?g.length:0,r=0;r<n;r++)if(c=g[r],e=c.r1,l=c.c1,!a||e>=d&&e<h)a&&(e-=d),e+=b,k.push({r1:e,c1:l,r2:e+c.rc-1,c2:l+c.cc-1});return k}})(jQuery);
(function(){var k=window.pq=window.pq||{};k.extend=function(a,b,c){var d=function(){};d.prototype=a.prototype;var d=b.prototype=new d,e=a.prototype,l;for(l in c){var h=e[l],k=c[l];d[l]=h?function(a,b){return function(){var c=this._super,d;this._super=function(){return a.apply(this,arguments)};d=b.apply(this,arguments);this._super=c;return d}}(h,k):k}d.constructor=b;d._base=a;d._bp=function(a){var b=arguments;Array.prototype.shift.call(b);return e[a].apply(this,b)}};var n=k.Range=function(a,b,c,d){if(null==
a)throw"invalid param";this.that=a;if(!1==this instanceof n)return new n(a,b,c,d);this._type=c?c:"range";this.init(b,d)},h=n.prototype;h._areas=[];h.init=function(a,b){b=!1!==b;if(a)if("function"==typeof a.push)for(var c=0,d=a.length;c<d;c++)this.init(a[c],b);else if(c=this._normal(a,b))d=this._areas,d.length?d.push(c):this._areas=[c]};h.address=function(){this.dirty&&this.refresh();return this._areas};h.areas=function(a){this.dirty&&this.refresh();var b=this.that,c=this._areas,c=null==a?c:c[a];return k.Range(b,
c,"area")};h.merge=function(a){a=a||{};var b=this.that,c=b.options.mergeCells,d,e,l=this._areas[0];l&&(d=l.r2-l.r1+1,e=l.c2-l.c1+1,1<d||1<e)&&(l.rc=d,l.cc=e,c.push(l),!1!==a.refresh&&b.refreshView())};h.unmerge=function(a){a=a||{};var b=this.that,c=b.options.mergeCells,d=this._areas[0];if(d){for(var e=0;e<c.length;e++){var l=c[e];if(l.r1==d.r1&&l.c1==d.c1){c.splice(e,1);break}}!1!==a.refresh&&b.refreshView()}};h.hide=function(a){a=a||{};for(var b=this.that,c=b.colModel,d=b.get_p_data(),e=this._areas,
l=0,h=e.length;l<h;l++){var k=e[l],n=k.type,r=k.r1,t=k.r2,q=k.c1,k=k.c2;if("column"==n)for(n=q;n<=k;n++)c[n].hidden=!0;else if("row"==n)for(n=r;n<=t;n++)d[n].pq_hidden=!0}!1!==a.refresh&&b.refreshView()};h.unhide=function(a){a=a||{};for(var b=this.that,c=b.colModel,d=b.get_p_data(),e=this._areas,l=0,h=e.length;l<h;l++){var k=e[l],n=k.type,r=k.r1,t=k.r2,q=k.c1,k=k.c2;if("column"==n)for(n=q;n<=k;n++)c[n].hidden=!1;else if("row"==n)for(n=r;n<=t;n++)d[n].pq_hidden=!1}!1!==a.refresh&&b.refreshView()};
h.select=function(){var a=this.that,b=a.iSelection,c=b._areas[0],d=this._areas,e=d[0];if(!e)return this;var l=e.r1,h=e.c1;if(b.dirty||1!=d.length||"block"!=d[0].type||!c||"cell"!=c.type&&"block"!=c.type||l!=c.r1||h!=c.c1)for(b.removeAll({trigger:!1}),l=0,h=d.length;l<h;l++)b.add(d[l],!1);else{var k=c.r1,n=c.c1,r=c.r2,c=c.c2,t=e.r2,e=e.c2,a=a.iCells;if(t==r&&e==c)return this;e>c?a.selectBlock({range:{r1:l,c1:c+1,r2:t,c2:e}}):e<c&&a.selectBlock({range:{r1:Math.max(l,k),c1:e+1,r2:Math.max(t,r),c2:c},
remove:!0});t>r?a.selectBlock({range:{r1:r+1,c1:h,r2:t,c2:e}}):t<r&&a.selectBlock({range:{r1:t+1,c1:Math.max(h,n),r2:r,c2:Math.max(e,c)},remove:!0});b._areas=d}b._trigger();return this};h.resize=function(a,b){var c=this._areas[0];return n(this.that,{r1:c.r1,c1:c.c1,rc:a,cc:b})};h.cut=function(a){a=a||{};a.cut=!0;return this.copy(a)};h.copy=function(a){a=a||{};this.dirty&&this.refresh();var b=this.that,c=a.dest,d=a.cut?!0:!1,e=null==a.copy?!0:a.copy,l=a.source||(d?"cut":"copy"),h=null==a.history?!0:
a.history,k=null==a.allowInvalid?!0:a.allowInvalid,n=[],r=[],t=b.get_p_data(),q=b.colModel,p=b.readCell,u=b.iMerge,s=this._areas;if(s.length){var y=this._areas[0],z=y.type,x=y.r1,A=y.c1,C="cell"==z?x:y.r2,y="cell"==z?A:y.c2,D=0;do{for(;x<=C;x++){for(var E=[],G=t[x],O={},J={},M=A;M<=y;M++){var I=q[M],F=I.dataIndx;if(!1!==I.copy){var L=G[F];e&&E.push(p(G,I,u,x,M));d&&(O[F]=void 0,J[F]=L)}}d&&n.push({rowIndx:x,rowData:G,oldRow:J,newRow:O,type:"update"});E=E.join("\t");r.push(E)}D++;y=s[D];if("row"==
z&&y&&"row"==y.type)x=y.r1,A=y.c1,C=y.r2,y=y.c2;else break}while(1);e&&(E=r.join("\n"),a.clip?(a=a.clip,a.val(E),a.select()):b._setGlobalStr(E));c?b.paste({dest:c,rowList:n,history:h,allowInvalid:k}):d&&!1!==b._digestData({rowList:n,source:l,history:h,allowInvalid:k})&&b.refresh({source:"cut"})}};h.clear=function(){return this.copy({copy:!1,cut:!0,source:"clear"})};h.add=function(a){this.init(a)};h._countArea=function(a){var b=a.r1,c=a.c1,d=a.r2,e=a.c2;return"cell"==a.type?1:(d-b+1)*(e-c+1)};h.count=
function(){this.dirty&&this.refresh();for(var a="range"==this._type,b=this._areas,c=0,d=b.length,e=0;e<d;e++)c+=a?this._countArea(b[e]):1;return c};h.rows=function(a){this.dirty&&this.refresh();var b=this.that,c=[],d=this._areas[0];if(d){var e=d.r1,l=d.c1,h=d.r2,n=d.c2,d=d.type,h=null==a?h:e+a;for(a=null==a?e:e+a;a<=h;a++)c.push({r1:a,c1:l,r2:a,c2:n,type:d})}return k.Range(b,c,"row")};h.columns=function(a){this.dirty&&this.refresh();var b=this.that,c=[],d=this._areas[0];if(d){var e=d.r1,l=d.c1,h=
d.r2,n=d.c2,d=d.type,n=null==a?n:l+a;for(a=null==a?l:l+a;a<=n;a++)c.push({r1:e,c1:a,r2:h,c2:a,type:d})}return k.Range(b,c,"column")};h.cell=function(a,b){this.dirty&&this.refresh();var c=this.that,d=[],e=this._areas[0];e&&(d=e.r1+a,e=e.c1+b,d=[d,e,d,e]);return k.Range(c,d,"cell")};h.item=function(a){this.dirty&&this.refresh();for(var b=0,c=!1,d=this._areas,e=0,h=d.length;e<h;e++){var k=d[e],n=this._countArea(k);if(b+n>a){c=!0;a-=b;break}else b+=n}if(c){if(k)var v=k.r1,r=k.c1,b=k.c2-r+1,v=v+Math.floor(a/
b),r=r+a%b;return{r1:v,c1:r}}};h._normal=function(a,b){if(a.type)return a;if("function"==a.push){for(var c=[],d=0,e=a.length;d<e;d++){var h=this._normal(a[d],b);h&&c.push(h)}return c}var c=this.that,k=c.get_p_data().length-1,n=c.colModel.length-1,d=a.r1,e=a.c1,d=d>k?k:d,e=e>n?n:e,v=a.rc,r=a.cc,h=a.r2,t=a.c2,h=v?d+v-1:h>k?k:h,t=r?e+r-1:t>n?n:t;if(0>n||0>k)return null;d>h&&(v=d,d=h,h=v);e>t&&(v=e,e=t,t=v);if(null!=d||null!=e)return null==d?(d=0,h=k,t=null==t?e:t,k="column"):null==e?(e=0,h=null==h?d:
h,t=n,k="row"):null==h?(k="cell",h=d,t=e):k="block",b&&(c=c.iMerge.inflateRange(d,e,h,t),d=c[0],e=c[1],h=c[2],t=c[3]),a.r1=d,a.c1=e,a.r2=h,a.c2=t,a.type=a.type||k,a};h.getValue=function(){var a=this.address(),b,c=[],d,e,h=this.that,k,n,v,r,t,q;if(a.length){b=a[0];a=b.r1;k=b.c1;n=b.r2;v=b.c2;q=h.get_p_data();for(r=a;r<=n;r++)for(b=q[r],d=c[r-a]=[],t=k;t<=v;t++)e=b[h.colModel[t].dataIndx],d.push(e);return c}};h.value=function(a){var b,c,d,e=this.that,h=e.colModel,k,n,v,r,t=[],q=this.address();if(void 0===
a)return this.getValue();d="function"===typeof a.push;for(var p=0;p<q.length;p++){k=q[p];n=k.r1;v=k.c1;r=k.r2;k=k.c2;for(var u=n;u<=r;u++){b=e.normalize({rowIndx:u});var s=b.rowData,y=b.rowIndx,z={},x={};b=d?a[u-n]:a;for(var A=v;A<=k;A++){var C=h[A].dataIndx;c=d?b[A-v]:a;x[C]=c;z[C]=s[C]}t.push({rowData:s,rowIndx:y,type:"update",newRow:x,oldRow:z})}}t.length&&(e._digestData({rowList:t,source:"range"}),e.refresh());return this};var d=k.Selection=function(a,b){if(null==a)throw"invalid param";if(!1==
this instanceof d)return new d(a,b);this.that=a;var c=this;a.on("dataReady columnOrder addColumn deleteColumn",function(a,b){"pager"!=b.source&&c.renew()});this._base(a,b)},c={renew:function(){this.dirty=!0},isDirty:function(){return this.dirty}},b=function(a){a.shiftKey&&"pqGrid:mousePQUp"!=a.type||(this._trigger("selectEnd",null,{selection:this.selection()}),this.off("mousePQUp",b),this.off("keyUp",b))};c._trigger=function(){var a=this.that;this.dirty&&this.refresh();a._trigger("selectChange",null,
{selection:this});a.off("mousePQUp",b);a.off("keyUp",b);a.on("mousePQUp",b);a.on("keyUp",b)};c.removeAll=function(a){a=a||{};var b=this.that;b.iCells.removeAll({refresh:!0});b.iRows.removeAll({refresh:!0,all:!0});this._areas=[];!1!==a.trigger&&this._trigger()};h.indexOf=function(a){this.dirty&&this.refresh();a=this._normal(a);var b=a.type,c=a.r1,d=a.c1,e=a.r2;a=a.c2;for(var h=this._areas,k=0,n=h.length;k<n;k++){var v=h[k],r=v;if(b==v.type&&c>=r.r1&&e<=r.r2&&d==r.c1&&a==r.c2)return k}return-1};c.add=
function(a,b){var c=this.that,d=this._normal(a,!0),e=c.iCells,c=c.iRows,h=d.r1,k=d.c1,n=d.r2,v=d.type;0<=this.indexOf(d)||("row"==v?(e=this._areas,e.length&&(e=e[e.length-1],v=e.type,"row"==v&&h<=e.r2&&(this.dirty=!0)),n>h?c.selectRange({range:d}):c.add({rowIndx:h})):"column"==v||"block"==v?e.selectBlock({range:d}):"cell"==v&&e.add({rowIndx:h,colIndx:k}),this._super(d),!1!==b&&this._trigger())};c._adjust=function(a){var b=this.that,c=b.get_p_data().length-1,b=b.colModel.length-1,d=a.r1,e=a.c1,h=a.r2,
k=a.c2,h=h>c?c:h,k=k>b?b:k;if(0>b||0>c||d>h||e>k)return null;a.r1=d;a.r2=h;a.c1=e;a.c2=k;return a};h.removeRow=function(a,b){var c=a.r1,d=a.r2,e=this._areas,h=this._areas[b],k=h.r1,n=h.r2;c==k&&d==n?e.splice(b,1):c>k?(h.r2=c-1,d<n&&(c=this._normal({r1:d+1,r2:n}),e.splice(b+1,0,c))):d<n&&(c>k&&(c=this._normal({r1:d+1,r2:n}),e.splice(b,0,c)),h.r1=d+1)};c.removeRow=function(a,b){var c=this.that,d=this._normal(a),e=this.indexOf(d);-1<e&&"row"==d.type&&d.r1==d.r2&&(c.iRows.remove({rowIndx:d.r1}),this._super(a,
e),!1!==b&&this._trigger())};c.selectAll=function(a){a=a||{};var b=this.that,c=a.all,d=c?0:b.rowIndxOffset,e=b.colModel.length-1,h=d+(c?b.options.dataModel.data.length-1:b.pdata.length-1);"cell"==a.type?(a={r1:d,c1:0},a.r2=h,a.c2=e,b.range(a).select()):(a={r1:d},a.r2=h,c||this.removeRows({all:!1,trigger:!1}),b.iRows.selectRange({range:a}),b=c?[]:this._areas,b.push({r1:d,c1:0,r2:h,c2:e,type:"row"}),this._areas=b,this._trigger());return this};c.removeRows=function(a){a=a||{};var b=a.all;this.that.iRows.removeAll({refresh:!0,
all:a.all});b?this._areas=[]:this.refresh();!1!==a.trigger&&this._trigger()};c.refresh=function(){for(var a=this.that,b=[],c=a.colModel.length-1,a=a.get_p_data(),d=0,e=a.length;d<e;d++){var h=a[d],k;h&&(h.pq_cellselect=void 0,h.pq_rowselect?k?k.r2=d:k={r1:d,r2:d,c1:0,c2:c,type:"row"}:k&&(b.push(k),k=null))}k&&b.push(k);this.dirty=!1;this._areas=b};k.extend(n,d,c)})();
(function(k){function n(b,a,c,d){b.push("<li data-option='",c,"' class='pq-menu-item'>","<label>","<input type='checkbox' ",a[c]?"checked":"","/>",d["strGroup_"+c],"</label></li>")}var h=k.paramquery;h.pqGrid.defaults.groupModel={on:!1,title:[],titleDefault:"{0} ({1})",header:!0,headerMenu:!0,menuItems:["merge","fixCols","grandSummary"],fixCols:!0,icon:["ui-icon-triangle-1-se","ui-icon-triangle-1-e"],dataIndx:[],collapsed:[],dir:[],showSummary:[],calcSummary:[],summaryInTitleRow:"collapsed",summaryEdit:!0,
refreshOnChange:!0};pq.aggregate={sum:function(b){for(var a=0,c=b.length,d;c--;)d=b[c],null!=d&&(a+=d-0);return a},avg:function(b,a){return this.sum(b,a,!0)/b.length},max:function(b,a){var c;c=a.dataType;"float"==c||"integer"==c?c=Math.max.apply(Math,b):"date"==c?(b.sort(function(a,b){a=Date.parse(a);b=Date.parse(b);isNaN(a)&&(a=0);isNaN(b)&&(b=0);return b-a}),c=b[0]):(b.sort(),c=b[b.length-1]);return c},min:function(b,a){var c;c=a.dataType;var d,g;if("integer"==c||"float"==c)c=Math.min.apply(Math,
b);else if("date"==c){g=b.length;for(c=[];g--;)(d=b[g])&&c.push({dateO:d,dateP:Date.parse(d)});c.sort(function(a,b){return a.dateP-b.dateP});c=c.length?c[0].dateO:void 0}else b.sort(),c=b[0];return c},count:function(b){return b.length}};var d=h.cGroup=function(b){this.that=b;b.options.groupModel.on&&this.init()},c=d.prototype;c.init=function(){var b,a,c,d;this._init||(this.mc=[],this.tree=[],this.summaryData=[],d=this.that,b=d.options,a=b.groupModel,b=b.bootstrap,c=(b=b.on)?"glyphicon ":"ui-icon ",
this.groupRemoveIcon="pq-group-remove "+c+(b?"glyphicon-remove":"ui-icon-close"),this.toggleIcon="pq-group-toggle "+c,d.on("cellClick",this.onCellClick(this)).on("cellKeyDown",this.onCellKeyDown(this,a)).on(!0,"cellMouseDown",this.onCellMouseDown()).on("change",this.onChange(this,a)).on("dataReady",this.onDataReady(this,d)).on("columnDragDone",this.onColumnDrag(this)).on("columnOrder",this.onColumnOrder(this)),this._init=!0)};c.onCellClick=function(b){return function(a,c){c.rowData.pq_gtitle&&k(a.originalEvent.target).hasClass("pq-group-icon")&&
b.toggleRow(c.rowIndxPage,a)}};c.onChange=function(b,a){return function(){b.saveState(a.refreshOnChange)}};c.onCellMouseDown=function(){return function(b,a){a.rowData.pq_gtitle&&k(b.originalEvent.target).hasClass("pq-group-icon")&&b.stopImmediatePropagation()}};c.onCellKeyDown=function(b,a){return function(c,d){if(d.rowData.pq_gtitle&&0<=k.inArray(d.dataIndx,a.dataIndx)&&c.keyCode==k.ui.keyCode.ENTER)return b.toggleRow(d.rowIndxPage,c),!1}};c.showRows=function(){this.that.options.dataModel.data.forEach(function(b){b.pq_hidden&&
(b.pq_hidden=void 0)})};c.removeGroup=function(b){for(var a=0,c=this.that.options.groupModel.dataIndx;a<c.length;a++)if(b===c[a]){c.splice(a,1);break}c.length||(this.showRows(),this.mc.length=0);this._triggerChange=!0;this.refreshFull()};c.addGroup=function(b,a){var c=this.that.options.groupModel,c=c.dataIndx=c.dataIndx||[];null!=b&&-1===k.inArray(b,c)&&(null==a?c.push(b):c.splice(a,0,b),this._triggerChange=!0,this.refreshFull())};c._initHeadSortable=function(){this.$header.sortable({axis:"x",distance:3,
tolerance:"pointer",cancel:".pq-group-menu",stop:this.onSortable(this,this.that.options)})};c.onColumnDrag=function(b){return function(a,c){var d=c.column,g=d.colModel;g&&g.length||!1===d.groupable?b.acceptDrop=!1:b._initHeadDroppable()}};c._initHeadDroppable=function(){var b=this,a=b.that,c=b.$header;c&&(c.droppable({accept:function(c){c=1*c.attr("pq-col-indx");if(!isNaN(c)&&a.colModel[c])return b.acceptDrop},tolerance:"pointer",hoverClass:"pq-drop-hover",drop:b.onDrop(a,b)}),b.acceptDrop=!0)};c.onDrop=
function(b,a){return function(c,d){var g=1*d.draggable.attr("pq-col-indx");a.addGroup(b.colModel[g].dataIndx);a.acceptDrop=!1}};c.onSortable=function(b,a){return function(){for(var c=[],d=a.groupModel,g=d.dataIndx,e=[],h=!1,n=k(this).find(".pq-group-item"),B=0;B<n.length;B++){var v=k(n[B]),r=v.data("indx"),v=v.data("dir");g[B]!==r&&(h=!0);c.push(r);e.push(v)}h&&(d.dataIndx=c,d.dir=e,b._triggerChange=!0,b.refreshFull())}};c._initHeader=function(b,a){if(this.$header){var c=this.$header,d=c.find(".pq-group-item");
c.data("uiSortable")||this._initHeadSortable();d.length||c.append("<span class='pq-group-placeholder'>"+b.strGroup_header+"</span>");a.headerMenu&&this._initHeaderMenu()}};c.createHeader=function(){for(var b=this.that,a=this.$header,c=b.options,h=c.bootstrap,g=b.columns,e=h.on,l=c.groupModel,n=l.dataIndx,B=n.length;B--;)null==g[n[B]]&&n.splice(B,1);B=n.length;if(l.header&&l.on){a?a.empty():(a=this.$header=k("<div class='pq-group-header ui-helper-clearfix' ></div>").appendTo(b.$top),a.on("click",".pq-group-item",
d.onGroupItemClick(this)));if(B){for(var b=[],v=0;v<B;v++){var r=n[v],t=g[r],q=e?h.groupModel.icon:l.icon;b.push("<div tabindex='0' class='pq-group-item' data-indx='",r,"' data-dir='",l.dir[v],"'>","<span class='",this.toggleIcon,l.collapsed[v]?q[1]:q[0],"' ></span>",t.pqtitle||("string"==typeof t.title?t.title:r),"<span class='",this.groupRemoveIcon,"' ></span></div>")}a[0].innerHTML=b.join("")}this._initHeader(c,l)}else a&&(a.remove(),this.$header=null)};d.onGroupItemClick=function(b){return function(a){var c=
k(a.target),d=k(this).data("indx");c.hasClass("pq-group-remove")?b.removeGroup(d):b.toggleLevel(d,a)}};c._initHeaderMenu=function(){for(var b=this.that,a=b.options,c=this.$header,d=["<ul class='pq-group-menu'><li>",b.BS_on?"<span class='glyphicon glyphicon-chevron-left'></span>":"","<ul>"],g=a.groupModel,e=g.menuItems,h=0,w=e.length;h<w;h++)n(d,g,e[h],a);d.push("</ul></li></ul>");c=k(d.join("")).appendTo(c);c.menu({icons:{submenu:"ui-icon-carat-1-w"},position:{my:"right top",at:"left top"}});c.change(function(c){if("INPUT"==
c.target.nodeName){c=k(c.target).closest("li").data("option");var d={};d[c]=!a.groupModel[c];b.groupOption(d)}})};c.setOption=function(){this._init&&(this.refreshColumns(),this.summaryData.length=0,this.tree.length=0,this._initmerge())};c.onDataReady=function(b,a){return function(){b.tree.length=0;var c=a.options.groupModel,d=c.dataIndx.length;c.on&&(d||c.grandSummary)&&(b._groupData(),b.refreshColumns(),d&&(b._initcollapsed(),b._initmerge()));b.createHeader()}};c.onColumnOrder=function(b){return function(){b._initmerge()}};
c.toggleLevel=function(b,a){var c=this.that.options.groupModel,d=c.collapsed,c=k.inArray(b,c.dataIndx);this[(d[c]?"expand":"collapse")+(a.ctrlKey?"All":"")](c)};c.collapseTo=function(b){this.expandTo(b,!0)};c.expandTo=function(b,a){var c=this.that,d=!!a,g=b.split(","),e=g.length,h=this.tree,k,n,v;k=0;var r,t=c.pdata;if(!(e>h.length)){for(var q=0;q<e;q++){r=1*g[q]+k;k=h[q][r];if(!k){if(0==q)return;break}k=k.rip;if(!d||d&&q==e-1)n=t[k],n.pq_close!=d&&(v=n,n.pq_close=d);n=h[q+1];var p=void 0,u=r;if(n){do p=
n[u].rip,u++;while(p<k);k=u-1}else k=void 0}v&&!1!==c._trigger("group",null,{indx:r,close:d})&&this.saveState(!0)}};c._editorSummary=function(b,a){var c=b.summaryOptions,d=this;return function(b){var e=b.rowData;if(e.pq_gsummary||e.pq_gtitle){var e=pq.aggregate,h=b.column,n=h.summary,n=n?n.edit:null,B=h.dataType,h=[""];if(-1<k.inArray(b.dataIndx,a.dataIndx)||!a.summaryEdit&&!n||!1===n)return!1;"integer"==B||"float"==B?B="number":"date"!==B&&(B="string");n=c[B].split(",");b=k.inArray;for(var v in e)-1<
b(v,n)&&h.push(v);return 1==h.length?!1:{type:"select",prepend:a.prepend,options:a.options||h,valueIndx:a.valueIndx,labelIndx:a.labelIndx,init:a.init||d._editorInit,getData:a.getData||d._editorGetData}}}};c._editorInit=function(b){var a=b.column.summary;a||(a=b.column.summary={});a=a.type;b.$cell.find("select").val(a)};c._editorGetData=function(b){var a=b.column,c=a.dataType;b=b.$cell.find("select").val();a.summary.type=b;this.one("beforeValidate",function(b,d){d.allowInvalid=!0;d.track=!1;d.history=
!1;a.dataType="string";this.one(!0,"change",function(b,d){a.dataType=c})});return b};c._renderTitle=function(b,a){var c=this.that,d=b.bootstrap,g=d.on,d=g?d.groupModel.icon:a.icon,e=g?["glyphicon "+d[0],"glyphicon "+d[1]]:["ui-icon "+d[0],"ui-icon "+d[1]];return function(b){var d=b.rowData,g,h,k;if(d.pq_gtitle&&null!=b.cellData)return g=d.pq_close,h=d.pq_level,k=a.title,k=k[h]||a.titleDefault,k="function"===typeof k?k.call(c,b):k.replace("{0}",b.cellData).replace("{1}",d.pq_items),{text:(b.Export?
"":"<span class='pq-group-icon "+e[g?1:0]+"'></span>")+k,cls:"pq-group-title-cell",style:"text-align:left;"}}};c._renderSummary=function(b){var a=this.that;return function(c){var d=c.rowData,g,e;if(d.pq_gsummary||d.pq_gtitle){d=c.column;g=d.summary.type;e=b.summaryTitle[g];if("function"==typeof e)return e.call(a,c);g=c.formatVal;null==g&&(g=c.cellData,g=null==g?"":g);"number"!=typeof g||d.format||parseInt(g)===g||(g=g.toFixed(2));return e?e.replace("{0}",g):g}}};c.refreshColumns=function(){for(var b=
this.that,a=b.options,c=a.groupModel,d=c.on,g=c.fixCols,e,h,k,n,v,r=c.dataIndx,t=r.length,q=b.colModel,p=q.length;p--;){n=q[p];if(k=n._render)k==n._renderGT?(delete n._renderGT,delete n._render):k==n._renderGS&&(delete n._renderGS,delete n._render);n._nodrag&&(delete n._nodrag,delete n._nodrop);d&&(v=n.summary)&&v.type&&(h=h||this._renderSummary(a),n._render=n._renderGS=h)}a.geditor=d?this._editorSummary(a,c):void 0;if(d)for(p=t-1;0<=p;p--)n=b.getColumn({dataIndx:r[p]}),e=e||this._renderTitle(a,c),
n._renderGT=n._render=e;if(g&&d)for(p=0;p<t;p++)a=b.getColIndx({dataIndx:r[p]}),n=q[a],n._nodrag=n._nodrop=!0,a!=p&&(b.iDragColumns.moveColumn(a,p,!0),b.iColModel.init())};c.refreshFull=function(){var b=this.that;this.refreshColumns();this._triggerChange&&(b._trigger("groupChange"),this._triggerChange=!1);b.refreshView()};c.refreshView=function(){this.that.refreshView()};c.collapseAll=function(b){this.expandAll(b,!0)};c.expandAll=function(b,a){!1!==this.trigger({all:!0,close:!!a,level:b||0})&&this.that.refreshView()};
c.collapse=function(b){this.expand(b,!0)};c.expand=function(b,a){!1!==this.trigger({close:!!a,level:b||0})&&this.that.refreshView()};c.showHideRows=function(b,a,c){for(var d=this.that.pdata,g=b,e=d.length;g<e;g++)if(b=d[g],b.pq_gsummary)c.merge||c.summaryInTitleRow?b.pq_level>=a&&(b.pq_hidden=!0):b.pq_level>a&&(b.pq_hidden=!0);else if(b.pq_gtitle)if(b.pq_level<=a)break;else b.pq_hidden=!0;else b.pq_hidden=!0};d.beforeTrigger=function(b,a){return function(c){return!1===a._trigger("beforeGroupExpand",
b,c)}};c.trigger=function(b){var a=b.rd,c=b.level,h=b.all,g=b.close,e=this.that,k,n=e.options.groupModel;k=n.dataIndx;n=n.collapsed;b=d.beforeTrigger(b.evt,e);var B={};if(a){c=a.pq_level;g=k[c];k=a[g];g=!a.pq_close;B={level:c,close:g,group:k};if(b(B))return!1;a.pq_close=g}else if(h){B={all:!0,close:g,level:c};if(b(B))return!1;for(a=c;a<k.length;a++)n[a]=g}else if(null!=c){B={level:c,close:g};if(b(B))return!1;n[c]=g}return e._trigger("group",null,B)};c.toggleRow=function(b,a){!1!==this.trigger({evt:a,
rd:this.that.pdata[b]})&&this.saveState(!0)};c.saveState=function(b){var a=this.that,c=a.options.groupModel;if(c.on&&c.dataIndx.length){for(var c=a.pdata,d=c.length,g=Array(d),e=0;e<d;e++)g[e]=c[e];this.pdata=g;b&&a.refreshView()}};c._initmerge=function(){for(var b=this.that,a=b.options,c=a.groupModel,d=c.dataIndx,g=b.colIndxs,e=c.merge,h,k=this.tree,n=b.rowIndxOffset,v,r,t,q,p=b.colModel.length,u=[],s=b.pdata,y=0;y<k.length;y++){v=k[y];t=g[d[y]];for(var z=0,x=v.length;z<x;z++){r=v[z];h=r.rip;if(null==
h)break;e?(r=r.rip2,q=r-h,r=h+n,u.push({r1:r,rc:q,c1:t,cc:1})):(r=h+n,q=s[h],(h=c.summaryInTitleRow)&&(q.pq_close||"collapsed"!==h)||u.push({r1:r,rc:1,c1:t,cc:p-t}))}}u.length?(this.mc=a.mergeCells=u,b.iMerge.init()):this.mc.length&&(this.mc.length=0,b.iMerge.init())};c._initcollapsed=function(){var b=this.that,a=b.options.groupModel,c=a.merge,d=this.pdata,b=b.pdata,g,e,h,k;if(b){for(var n=0,v=b.length;n<v;n++)g=b[n],e=g.pq_gtitle,void 0!==e&&(e=g.pq_level,k=null,d&&(h=(h=d[n])?h.pq_close:null,null!=
h&&(k=g.pq_close=h)),null==k&&(k=g.pq_close),k?this.showHideRows(n+1,e,a):c&&(g.pq_hidden=!0));delete this.pdata}};c.setSumCols=function(b){var a=k.inArray,c=[],d=[];this.that.colModel.forEach(function(g){var e=g.summary;e&&e.type&&(e=g.dataIndx,-1===a(e,b)&&(c.push(g),d.push(e)))});this._sumCols=c;this._sumDIs=d;return[c,d]};c.getSumCols=function(){return this._sumCols};c.getSumDIs=function(){return this._sumDIs};c.group=function(b){return function(a,c,d){var g={},e=[];a.forEach(function(a){a.pq_hidden=
void 0;var h=b(a,c,d),k=g[h];null==k&&(g[h]=k=e.length,e[k]=[h,[]]);e[k][1].push(a)});return e}};c.summary=function(b,a){var c=pq.aggregate,d=b.map(function(a){return a.summary.type});return function(g,e,h){a.forEach(function(a,k){var n=[],r;g.forEach(function(b,c){n[c]=b[a]});r=c[d[k]](n,b[k]);e[a]=r;h&&(h[a]=r)})}};c.flatten=function(b,a,c,d){var g=c.dataIndx,e=this.concat(),h=this.tree=[],k=g.length,n=[];return function r(t,q,p){if(!k)return t;var u=q||0,s=g[u],y=c.collapsed[u],z=!1!==c.calcSummary[u],
x=c.showSummary[u],A=h[u]=h[u]||[];a(t,s,b[s]).forEach(function(a){var b,c=a[1],f=x?{pq_gsummary:!0,pq_level:u,pq_rowcls:"pq-summary-row"}:0,g=n.length;b={pq_gtitle:!0,pq_level:u,pq_close:y,pq_items:c.length,pq_children:[]};b[s]=a[0];n.push(b);p&&p.push(b);z&&d(c,b,f);u+1<k?r(c,u+1,b.pq_children):n=e(n,c,b);f&&n.push(f);A.push({rip:g,rip2:n.length})});return n}};c.concat=function(){return function(b,a,c){a.forEach(function(a){b.push(a)});c.pq_children=a;return b}};c._getVal=function(b){var a=k.trim;
return function(c,d,g){c=c[d];if(g=g.groupChange)return g=pq.getFn(g),g(c);c=a(c);return b?c.toUpperCase():c}};c._groupData=function(){var b=this.that,a=b.options,c=a.groupModel,d=this._getVal(c.ignoreCase),g=b.pdata,e=b.columns,h=this.setSumCols(c.dataIndx),h=this.summary(h[0],h[1]);if(c.grandSummary){var k={pq_grandsummary:!0,pq_gsummary:!0};h(g,k);this.summaryData=a.summaryData=[k]}else this.summaryData.length=0;b.pdata=this.flatten(e,this.group(d),c,h)(g)};h=h.pqGrid.prototype;h.group=function(b){var a=
this.iGroup;if(null==b)return a;a.expandTo(b.indx)};h.groupOption=function(b,a){var c=b.dataIndx,c=c?c.length:0,d=this.iGroup,g=this.options.groupModel,e=g.dataIndx;(b.on||null==b.on&&g.on)&&d.init();g.on&&e.length&&(!1===b.on||0===c)&&d.showRows();k.extend(g,b);d.setOption();!1!==a&&this.refreshView()}})(jQuery);
(function(k){var n=k.paramquery;k(document).on("pqGrid:bootup",function(d,c){new h(c.instance)});var h=n.cScroll=function(d){var c=k(document);this.that=d;d.one("refresh",this.oneRefresh(d,this,c,".pqgrid-csroll"))};n.cScroll=h;n=h.prototype;n.oneRefresh=function(d,c,b,a){return function(){d.$cont.on("mousedown",function(d){k(d.target).closest(".pq-sb").length||(b.on("mousemove"+a,function(a){c.onMouseDrag(a)}),b.on("mouseup"+a,function(){b.off(a)}))})}};n.onMouseDrag=function(d){var c=this.that.$cont,
b=c[0].offsetHeight,a=c[0].offsetWidth,f=c.offset(),c=f.top,f=f.left,b=c+b,a=f+a,h=d.pageY;d=d.pageX;var g=h-b,e=d-a,k=c-h,n=f-d;d>f&&d<a&&(0<g||0<k)?0<g?this.scrollV(g,!0):0<k&&this.scrollV(k):h>c&&h<b&&(0<e?this.scrollH(e,!0):0<n&&this.scrollH(n))};n.scrollH=function(d,c){this[this.that.options.virtualX?"scrollVirtual":"scrollNV"](d,c,!0)};n.scrollV=function(d,c){this[this.that.options.virtualY?"scrollVirtual":"scrollNV"](d,c)};n.scrollVirtual=function(d,c,b){var a=this.that;b=b?a.hscrollbar():
a.vscrollbar();var f=b.options,a=f.cur_pos,f=f.num_eles;d=Math.ceil(d/10);c=Math.pow(5,d-1)*(c?1:-1);a+=c;0>a?a=0:a>=f&&(a=f-1);b.option("cur_pos",a).scroll()};n.scrollNV=function(d,c,b){var a=this.that,f=a.$tbl[0][b?"offsetWidth":"offsetHeight"];b=b?a.hscrollbar():a.vscrollbar();d=(b.options.ratio*f+(c?d:-d))/f;1<d?d=1:0>d&&(d=0);b.option("ratio",d).drag()}})(jQuery);
(function(k){var n=k.paramquery;k(document).on("pqGrid:bootup",function(d,c){var b=c.instance;b.iFillHandle=new h(b)});n.pqGrid.defaults.fillHandle="all";n.pqGrid.defaults.autofill=!0;var h=n.cFillHandle=function(d){this.$wrap;this.locked;this.sel;this.that=d;d.on("selectChange",this.onSelectChange(this)).on("selectEnd",this.onSelectEnd(this)).on("refresh refreshRow",this.onRefresh(this))},n=h.prototype;n.onSelectChange=function(d){return function(){this.options.fillHandle&&d.create()}};n.onSelectEnd=
function(d){return function(){this.options.fillHandle&&(d.setDraggable(),d.setDoubleClickable())}};n.onRefresh=function(d){var c;return function(){this.options.fillHandle&&(clearTimeout(c),c=setTimeout(function(){d.that.element&&(d.create(),d.setDraggable())},300))}};n.remove=function(){var d=this.$wrap;d&&d.remove()};n.create=function(){if(!this.locked){this.remove();var d=this.that,c=d.selection().address();if(1===c.length){var c=c[0],b=c.r2,c=c.c2,a={rowIndx:b,colIndx:c},f=d.iMerge,b=f.ismergedCell(b,
c)?f.getRootCell(b,c,"a"):a,c=d.getCell(b);c.length&&!1!==d._trigger("beforeFillHandle",null,d.normalize(b))&&(b=c[0],c=c.closest(".pq-grid-cont-inner"),a=c[0],d=b.offsetLeft+b.offsetWidth-8-a.offsetLeft,b=b.offsetTop+b.offsetHeight-8-a.offsetTop,c=k("<div class='pq-fill-handle'></div>").appendTo(c),c.css({position:"absolute",top:b,left:d,height:10,width:10,background:"#333",cursor:"crosshair",border:"2px solid #fff"}),this.$wrap=c)}}};n.setDoubleClickable=function(){var d=this.$wrap;d&&d.on("dblclick",
this.onDblClick(this.that,this))};n.setDraggable=function(){var d=this,c=d.$wrap,b=d.that.$cont;c&&c.draggable({helper:function(){return"<div style='height:10px;width:10px;cursor:crosshair;'></div>"},appendTo:b,start:function(){d.onStart()},drag:function(a){d.onDrag(a)},stop:function(){d.onStop()}})};n.patternDate=function(d,c){var b=this;return function(a){var f=new Date(d);f.setDate(f.getDate()+(c?1-a:a-1));return b.formatDate(f)}};n.formatDate=function(d){return d.getMonth()+1+"/"+d.getDate()+
"/"+d.getFullYear()};n.patternDate2=function(d,c){var b=new Date(d),a=new Date(c),f,h=this,g=a.getDate()-b.getDate(),e=a.getMonth()-b.getMonth(),k=a.getFullYear()-b.getFullYear();if(!e&&!k||!g&&!e||!k&&!g)return function(a){var b=new Date(d);g?b.setDate(b.getDate()+g*(a-1)):e?b.setMonth(b.getMonth()+e*(a-1)):b.setFullYear(b.getFullYear()+k*(a-1));return h.formatDate(b)};b=Date.parse(b);f=Date.parse(a)-b;return function(a){return h.formatDate(new Date(b+f*(a-1)))}};n.pattern=function(d,c,b){var a,
f,h,g=d.length;c="date"===c;if(1===g)return a=d[0],c?this.patternDate(a,b):function(c){return a+(b?1-c:c-1)};if(2===g){if(c)return this.patternDate2(d[0],d[1]);a=d[1]-d[0];f=d[0]-a;return function(b){return a*b+f}}return 3===g?(a=(d[2]-2*d[1]+d[0])/2,f=d[1]-d[0]-3*a,h=d[0]-a-f,function(b){return a*b*b+f*b+h}):!1};n.autofillVal=function(d,c,b){var a=this.that,f=d.r1,h=d.c1,g=d.r2;d=d.c2;var e=c.r2;c=c.r1;var k=[],n,B,v,r,t,q=0;if(c<f){t=e-c+2;for(v=c;v<=f-1;v++)for(n=k[q++]=[],t--,B=0,r=h;r<=d;r++)n[B]=
b[B](t),B++;n={r1:c,r2:f-1,c1:h,c2:d}}else if(e>g){t=g-f+1;for(v=g+1;v<=e;v++)for(n=k[q++]=[],t++,B=0,r=h;r<=d;r++)n[B]=b[B](t),B++;n={r1:g+1,r2:e,c1:h,c2:d}}n&&a.range(n).value(k);return!0};n.autofill=function(d,c){var b=this.that,a=b.colModel,f,h,g,e,k,b=b.get_p_data(),n=[],B=d.r1;k=d.c1;var v=d.r2,r=d.c2,t=c.r1<B;if(c.c1==k&&c.c2==r){for(;k<=r;k++){f=a[k];h=f.dataType;if("date"!=h&&"integer"!=h&&"float"!=h)return;g=f.dataIndx;f=[];if(t)for(e=v;e>=B;e--)f.push(b[e][g]);else for(e=B;e<=v;e++)f.push(b[e][g]);
if(h=this.pattern(f,h,t))n.push(h);else return}return this.autofillVal(d,c,n)}};n.onStop=function(){var d=this.that,c=d.options.autofill,b=this.sel,a=d.selection().address()[0];this.locked=!1;c&&this.autofill(b,a)||d.range(b).copy({dest:a})};n.onStart=function(){this.locked=!0;this.sel=this.that.selection().address()[0]};n.onDrag=function(d){var c=this.that,b=c.options.fillHandle,a="all"==b,f=a||"horizontal"==b,b=a||"vertical"==b;d=document.elementFromPoint(d.clientX-10,d.clientY);d=k(d).closest(".pq-grid-cell");
if(d.length){var h=c.getCellIndices({$td:d}),g=this.sel;d=g.r1;var e=g.c1,l=g.r2,g=g.c2,n={r1:d,c1:e,r2:l,c2:g},B=function(a,b){n[a]=b;c.range(n).select()},v=h.rowIndx,h=h.colIndx;a&&v<=l&&v>=d||f&&!b?h>g?B("c2",h):h<e&&B("c1",h):b&&(v>l?B("r2",v):v<d&&B("r1",v))}};n.onDblClick=function(d,c){return function(){var b=d.options,a=b.fillHandle;if("all"==a||"vertical"==a){for(var a=d.selection().address()[0],f=a.c2,h=a.r2+1,g=b.dataModel.data,e=d.getColModel()[f].dataIndx;b=g[h];)if(null==b[e]||""===b[e])h++;
else{h--;break}c.onStart();d.range({r1:a.r1,c1:a.c1,r2:h,c2:f}).select();c.onStop()}}}})(jQuery);
