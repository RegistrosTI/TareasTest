/**
 * ParamQuery Pro v3.3.5
 * 
 * Copyright (c) 2012-2017 Paramvir Dhindsa (http://paramquery.com)
 * Released under Commercial license
 * http://paramquery.com/pro/license
 * 
 */
(function(l){var m=l.ui.autocomplete.prototype,g=m._renderMenu,d=m._renderItem;m._renderMenu=function(b,a){g.call(this,b,a);var f=this.options.selectItem;if(f&&f.on){var f=f.cls,f=void 0===f?"ui-state-highlight":f,n=this.element.val();n&&f&&l("a",b).filter(function(){return l(this).text()===n}).addClass(f)}};m._renderItem=function(b,a){var f=d.call(this,b,a),n=this.options.highlightText;if(n&&n.on){var h=this.element.val();if(h){var h=new RegExp("("+h+")","i"),e=a.label;if(h.test(e)){var k=n.style,
n=n.cls,e=e.replace(h,"<span style='"+(void 0===k?"font-weight:bold;":k)+"' class='"+(void 0===n?"":n)+"'>$1</span>");f.find("a").html(e)}}}return f};var m=l.paramquery=l.paramquery||{},c=function(b,a,f,n){a=a.slice();for(var h=[],e=0,k=a.length;e<k;e++){var w=a[e],A=w.cb,c=w.one;if(c){if(w._oncerun)continue;w._oncerun=!0}!1===A.call(b,f,n)&&(f.preventDefault(),f.stopPropagation());c&&h.push(e);if(f.isImmediatePropagationStopped())break}if(h.length)for(e=h.length-1;0<=e;e--)a.splice(h[e],1)};m._trigger=
function(b,a,f){var n,h,e=this.listeners,k=e[b],w=this.options,A=w.allEvents,t=w.bubble,d=this.element,u=w[b];f=f||{};a=l.Event(a);a.type=this.widgetName+":"+b;a.target=d[0];if(h=a.originalEvent)for(n in h)n in a||(a[n]=h[n]);A&&"function"==typeof A&&A.call(this,a,f);if(k&&k.length&&(c(this,k,a,f),a.isImmediatePropagationStopped())||w.trigger&&(d[t?"trigger":"triggerHandler"](a,f),a.isImmediatePropagationStopped()))return!a.isDefaultPrevented();u&&!1===u.call(this,a,f)&&(a.preventDefault(),a.stopPropagation());
(k=e[b+"Done"])&&k.length&&c(this,k,a,f);return!a.isDefaultPrevented()};m.on=function(){var b=arguments;if("boolean"==typeof b[0])var a=b[0],f=b[1],c=b[2],b=b[3];else f=b[0],c=b[1],b=b[2];for(var f=f.split(" "),h=0;h<f.length;h++){var e=f[h];if(e){var k=c,w=b,A=a,t=this.listeners[e];t||(t=this.listeners[e]=[]);t[A?"unshift":"push"]({cb:k,one:w})}}return this};m.one=function(){for(var b=arguments.length,a=[],f=0;f<b;f++)a[f]=arguments[f];a[b]=!0;return this.on.apply(this,a)};m.off=function(b,a){for(var f=
b.split(" "),c=0;c<f.length;c++){var h=f[c];if(h){var e=h;if(h=a){if(e=this.listeners[e]){for(var k=[],w=0,A=e.length;w<A;w++)h==e[w].cb&&k.push(w);if(k.length)for(w=k.length-1;0<=w;w--)e.splice(k[w],1)}}else delete this.listeners[e]}}return this};l.widget("paramquery.pqTooltip",l.ui.tooltip,{options:{items:"td.pq-has-tooltip,td[title]",position:{my:"center top",at:"center bottom"},content:function(){var b=l(this),a=b.closest(".pq-grid").pqGrid("getInstance").grid,f=a.getCellIndices({$td:b});return(a=
a.data({rowIndx:f.rowIndx,dataIndx:f.dataIndx,data:"pq_valid"}).data)?(b=a.icon,a=a.msg,(""==b?"":"<span class='ui-icon "+b+" pq-tooltip-icon'></span>")+(null!=a?a:"")):b.attr("title")}},_create:function(){this._super();var b=this.element,a=this.eventNamespace;b.on("pqtooltipopen"+a,function(a,b){var h=l(a.target),e=l(a.originalEvent.target);e.on("remove",function(e){h.pqTooltip("close",e,!0)});if(h.is(".pq-grid")){var k=h.pqGrid("getCellIndices",{$td:e}),w=k.dataIndx,A;(A=h.pqGrid("getRowData",{rowIndx:k.rowIndx}))&&
(A=A.pq_celldata)&&(A=A[w])&&(A=A.pq_valid)&&(w=A,k=w.style,b.tooltip.addClass(w.cls),w=b.tooltip.attr("style"),b.tooltip.attr("style",w+";"+k));h.find("div.pq-sb-horiz,div.pq-sb-vert").on("pqscrollbardrag",function(k,w){k.currentTarget=e[0];h.pqTooltip("close",k,!0)})}});b.on("pqtooltipclose"+a,function(a,b){var h=l(a.target);l(a.originalEvent.target).off("remove");h.is(".pq-grid")&&h.find("div.pq-sb-horiz,div.pq-sb-vert").off("pqscrollbardrag")})}})})(jQuery);
(function(l){var m=window.pq=m||{},g=l.paramquery,d=Array.prototype;d.find||(d.find=function(a,b){for(var h=0,e=this.length,k;h<e;h++)if(k=this[h],a.call(b,k,h,this))return k});d.findIndex||(d.findIndex=function(a,b){for(var h=0,e=this.length,k;h<e;h++)if(k=this[h],a.call(b,k,h,this))return h;return-1});d.map||(d.map=function(a,b){for(var h=0,e=this.length,k=[];h<e;h++)k.push(a.call(b,this[h],h,this));return k});d.forEach||(d.forEach=function(a,b){for(var h=0,e=this.length;h<e;h++)a.call(b,this[h],
h,this)});m.getFn=function(){var a={};return function(b){var h=b;"string"!==typeof b||(h=a[b])||(h=window,b.split(".").forEach(function(e){h=h[e]}),a[b]=h);return h}}();m.searchSeqArray=function(a,b){var h=a.length,e=b,k=b,w=0,k=k>h-1?h-1:k,A;do{A=a[k];w++;if(A<b){if(k==h-1){k=-1;break}k=Math.ceil((k+e)/2);k=k>h-1?h-1:k}else if(A>b)e=k,k=Math.floor(k/2);else break;if(100<w)throw"too many iterations";}while(1);return k};m.arrayUnique=function(a,b){var h=[],e,k=a.length,w,A={},c;for(e=0;e<k;e++)w=a[e],
c=b?w[b]:w,A.hasOwnProperty(c)||(A[c]=1,h.push(w));return h};g.select=function(a){var b=a.options,h=a.groupIndx,e=a.labelIndx,k=a.valueIndx,w=null!=e&&null!=k,A=null!=h,c=a.prepend,d=a.dataMap,u,p,g;a=["<select ",a.attr," >"];if(c)for(var l in c)a.push('<option value="',l,'">',c[l],"</option>");if(b&&b.length){for(var c=0,s=b.length;c<s;c++){var y=b[c];if(w){var z=y[k],x=y.pq_disabled?'disabled="disabled" ':"",m=y.pq_selected?'selected="selected" ':"";if(null!=z){if(d){u={};for(g=0;g<d.length;g++){var D=
d[g];u[D]=y[D]}u="data-map='"+JSON.stringify(u)+"'"}else u="";g=u;A&&(D=y.pq_disabled_group?'disabled="disabled" ':"",u=y[h],p!=u&&(null!=p&&a.push("</optgroup>"),a.push('<optgroup label="',u,'" ',D," >"),p=u));e==k?a.push("<option ",m,x,g,">",z,"</option>"):a.push("<option ",m,x,g,' value="',z,'">',y[e],"</option>")}}else if("object"==typeof y)for(l in y)a.push('<option value="',l,'">',y[l],"</option>");else a.push("<option>",y,"</option>")}A&&a.push("</optgroup>")}a.push("</select>");return a.join("")};
l.fn.pqval=function(a){if(a){if(a.incr)return a=this.data("pq_value"),this.prop("indeterminate",!1),a?(a=!1,this.prop("checked",!1)):!1===a?(a=null,this.prop("indeterminate",!0),this.prop("checked",!1)):(a=!0,this.prop("checked",!0)),this.data("pq_value",a),a;a=a.val;this.data("pq_value",a);this.prop("indeterminate",!1);null==a?(this.prop("indeterminate",!0),this.prop("checked",!1)):a?this.prop("checked",!0):this.prop("checked",!1);return this}return this.data("pq_value")};g.xmlToArray=function(a,
b){var h=b.itemParent,e=b.itemNames,k=[];l(a).find(h).each(function(w,a){var f=l(a),b=[];l(e).each(function(e,k){b.push(f.find(k).text().replace(/\r|\n|\t/g,""))});k.push(b)});return k};g.xmlToJson=function(a,b){var h=b.itemParent,e=b.itemNames,k=[];l(a).find(h).each(function(w,a){for(var f=l(a),b={},h=0,c=e.length;h<c;h++){var n=e[h];b[n]=f.find(n).text().replace(/\r|\n|\t/g,"")}k.push(b)});return k};g.tableToArray=function(a){var b=[],h=[];a=l(a).children("tbody").children("tr");var e=a.length?
l(a[0]):l(),k=1<a.length?l(a[1]):l();e.children("th,td").each(function(e,a){var f=l(a),h=f.html(),f=f.width(),c="left";if(k.length)var d=k.find("td:eq("+e+")").attr("align"),c=d?d:c;b.push({title:h,width:f,dataType:"string",align:c,dataIndx:e})});a.each(function(e,k){if(0!=e){var a=[];l(k).children("td").each(function(e,k){a.push(l.trim(l(k).html()))});h.push(a)}});return{data:h,colModel:b}};var c={};g.formatCurrency=function(a,b){var h=parseFloat(a);if(!isNaN(h)){var e=0>h,k;a:{var w=b,A,t;if(w){w=
w.split(":");w=e&&1<w.length?w[1]:w[0];if(A=c[w]){k=A;break a}t=/^([^#]*|&#[^#]*)?[\,\.#0]*?([\,\s\.]?)([#0]*)([\,\s\.]?)([0]*?)(\s*[^#^0]*|&#[^#]*)?$/;(t=w.match(t))&&t.length&&(A={symbol:t[1]||"",thouSep:t[2],thousand:t[3].length,decSep:t[4],decimal:t[5].length,symbolEnd:t[6]||""},c[w]=A)}k=A=A||{symbol:"",symbolEnd:"",thouSep:",",thousand:3,decSep:".",decimal:2}}w=k.symbol;A=k.symbolEnd;t=k.thousand;var d=k.thouSep,u=k.decSep,p=k.decimal,h=h.toFixed(p);k=h.length;var g=p+u.length,p=h.substring(0,
k-g),h=h.substring(k-g+u.length,k);k=p.match(/\d/g).reverse();p=[];for(g=0;g<k.length;g++)0<g&&0==g%t&&p.push(d),p.push(k[g]);p=p.reverse();p=p.join("");return(e?"-":"")+w+p+u+h+A}};m.formatNumber=g.formatCurrency;m.validation={is:function(a,b){if("string"==a||!a)return!0;a=a.substring(0,1).toUpperCase()+a.substring(1,a.length);return this["is"+a](b)},isFloat:function(a){var b=parseFloat(a);return isNaN(b)||b!=a?!1:!0},isInteger:function(a){var b=parseInt(a);return isNaN(b)||b!=a?!1:!0},isDate:function(a){a=
Date.parse(a);return isNaN(a)?!1:!0}};var b=[],a=g.toLetter=function(f){var c=b[f];if(!c){f++;var h=f%26,c=f/26|0,h=h?String.fromCharCode(64+h):(--c,"Z"),c=c?a(c-1)+h:h;f--;b[f]=c}return c};g.generateData=function(f,b){for(var h=[],e=0;e<b;e++)h[e]=a(e);for(var k=[],e=0;e<f;e++)for(var w=k[e]=[],A=0;A<b;A++)w[A]=h[A]+(e+1);return k}})(jQuery);
(function(l){function m(a,b,c){return a?l("<span tabindex='0' rel='tooltip' data-placement='top' title='"+b+"' class='btn btn-xs "+c+"'></span>"):l("<span class='pq-ui-button ui-widget-header' tabindex='0' rel='tooltip' title='"+b+"'><span class='ui-icon ui-icon-"+c+"'></span></span>")}function g(a,b){a.bind("click keydown",function(a){if("keydown"!=a.type||a.keyCode==l.ui.keyCode.ENTER)return b.call(this,a)})}function d(a,b,c){b[c?"addClass":"removeClass"]("disabled").css("pointer-events",c?"none":
"").attr("tabindex",c?"":"0")}var c={options:{bootstrap:{on:!1,pager:"",nextIcon:"glyphicon glyphicon-forward",prevIcon:"glyphicon glyphicon-backward",firstIcon:"glyphicon glyphicon-step-backward",lastIcon:"glyphicon glyphicon-step-forward",refreshIcon:"glyphicon glyphicon-refresh"},curPage:0,totalPages:0,totalRecords:0,msg:"",rPPOptions:[10,20,30,40,50,100],rPP:20},_regional:{strDisplay:"Displaying {0} to {1} of {2} items.",strFirstPage:"First Page",strLastPage:"Last Page",strNextPage:"Next Page",
strPage:"Page {0} of {1}",strPrevPage:"Previous Page",strRefresh:"Refresh",strRpp:"Records per page:{0}"}};l.extend(c.options,c._regional);c._create=function(){var a=this,b=this.options,c=this.element,h=b.bootstrap,e=h.on;this.listeners={};c.addClass("pq-pager "+(e?h.pager:""));this.first=m(e,b.strFirstPage,e?h.firstIcon:"seek-first").appendTo(c);g(this.first,function(e){1<b.curPage&&a._onChange(e,1)});this.prev=m(e,b.strPrevPage,e?h.prevIcon:"seek-prev").appendTo(c);g(this.prev,function(e){1<b.curPage&&
a._onChange(e,b.curPage-1)});l("<span class='pq-separator'></span>").appendTo(c);this.pageHolder=l("<span class='pq-page-placeholder'></span>").appendTo(c);l("<span class='pq-separator'></span>").appendTo(c);this.next=m(e,b.strNextPage,e?h.nextIcon:"seek-next").appendTo(c);g(this.next,function(e){b.curPage<b.totalPages&&a._onChange(e,b.curPage+1)});this.last=m(e,b.strLastPage,e?h.lastIcon:"seek-end").appendTo(c);g(this.last,function(e){b.curPage!==b.totalPages&&a._onChange(e,b.totalPages)});l("<span class='pq-separator'></span>").appendTo(c);
this.rPPHolder=l("<span class='pq-page-placeholder'></span>").appendTo(c);this.$refresh=m(e,b.strRefresh,e?h.refreshIcon:"refresh").appendTo(c);g(this.$refresh,function(e){if(!1===a._trigger("beforeRefresh",e))return!1;a._trigger("refresh",e)});l("<span class='pq-separator'></span>").appendTo(c);this.$msg=l("<span class='pq-pager-msg'></span>").appendTo(c);this._refresh()};c._destroy=function(){this.element.empty().removeClass("pq-pager").enableSelection()};c._setOption=function(a,b){if("curPage"==
a||"totalPages"==a)b*=1;this._super(a,b)};c._setOptions=function(a){var b,c=!1,h=this.options;for(b in a){var e=a[b],k=typeof e;"string"==k||"number"==k?e!=h[b]&&(this._setOption(b,e),c=!0):"function"==typeof e.splice||l.isPlainObject(e)?JSON.stringify(e)!=JSON.stringify(h[b])&&(this._setOption(b,e),c=!0):e!=h[b]&&(this._setOption(b,e),c=!0)}c&&this._refresh();return this};l.widget("paramquery.pqPager",c);pq.pager=function(a,b){var c=l(a).pqPager(b);return c.data("paramqueryPqPager")||c.data("paramquery-pqPager")};
var b=l.paramquery;b.pqPager.regional={};b.pqPager.regional.en=c._regional;c=b.pqPager.prototype;b.pqPager.defaults=c.options;c._refreshPage=function(){var a=this;this.pageHolder.empty();for(var b=this.options,c=b.bootstrap,h=b.strPage.split(" "),e=[],k=0,w=h.length;k<w;k++){var A=h[k];"{0}"==A?e.push("<input type='text' tabindex='0' class='pq-pager-input ",c.on?"":"ui-corner-all","' />"):"{1}"==A?e.push("<span class='total'></span>"):e.push("<span>",A,"</span>")}c=e.join("");c=l(c).appendTo(this.pageHolder);
this.page=c.filter("input").bind("change",function(e){var k=l(this),w=k.val();if(isNaN(w)||1>w)return k.val(b.curPage),!1;w=parseInt(w);if(w>b.totalPages||!1===a._onChange(e,w))return k.val(b.curPage),!1});this.$total=c.filter("span.total")};c._onChange=function(a,b){if(!1===this._trigger("beforeChange",a,{curPage:b})||!1===this._trigger("change",a,{curPage:b}))return!1;this.option({curPage:b})};c._refresh=function(){this._refreshPage();var a=this,b=this.options,c=b.bootstrap;this.rPPHolder.empty();
if(b.strRpp){var h=b.rPPOptions,e=b.strRpp;if(-1!=e.indexOf("{0}")){for(var c=["<select class='",c.on?"":"ui-corner-all","'>"],k=0,w=h.length;k<w;k++){var A=h[k];c.push('<option value="',A,'">',A,"</option>")}c.push("</select>");h=c.join("");e=e.replace("{0}","</span>"+h);e="<span>"+e+"<span class='pq-separator'></span>"}else e="<span>"+e+"</span><span class='pq-separator'></span>";this.$rPP=l(e).appendTo(this.rPPHolder).filter("select").val(b.rPP).change(function(e){var k=l(this),w=k.val();if(!1===
a._trigger("beforeChange",e,{rPP:w}))return k.val(a.options.rPP),!1;!1!==a._trigger("change",e,{rPP:w})&&(a.options.rPP=w)})}e=b.bootstrap.on;h=b.curPage>=b.totalPages;d(e,this.next,h);d(e,this.last,h);h=1>=b.curPage;d(e,this.first,h);d(e,this.prev,h);this.page.val(b.curPage);this.$total.text(b.totalPages);0<this.options.totalRecords?(e=b.rPP,h=b.curPage,c=b.totalRecords,k=h*e,k>c&&(k=c),b=b.strDisplay,b=b.replace("{0}",(h-1)*e+1),b=b.replace("{1}",k),b=b.replace("{2}",c),this.$msg.html(b)):this.$msg.html("")};
c.getInstance=function(){return{pager:this}};c._trigger=b._trigger;c.on=b.on;c.one=b.one;c.off=b.off})(jQuery);
(function(l){function m(b,a){return b?"<div class='"+a+"'></div>":"<div class='ui-icon ui-icon-"+a+"'></div>"}var g=l.paramquery,d={options:{length:200,num_eles:3,trigger:!1,cur_pos:0,ratio:0,timeout:350,pace:"optimum",direction:"vertical",bootstrap:{on:!1,slider:"btn btn-default",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",left:"glyphicon glyphicon-chevron-left",right:"glyphicon glyphicon-chevron-right"},theme:!1},_destroy:function(){l(document).off("."+this.eventNamespace);
this.element.removeClass("pq-sb pq-sb-vert pq-sb-vert-t pq-sb-vert-wt").enableSelection().removeClass("pq-sb-horiz pq-sb-horiz-t pq-sb-horiz-wt").unbind("click.pq-scrollbar").empty();this.element.removeData()},_create:function(){this.listeners={};this._createLayout()},_setOption:function(b,a){var f=this.options;"disabled"==b?(this._super(b,a),!0==a?this.$slider.draggable("disable"):this.$slider.draggable("enable")):"theme"==b?(f[b]=a,this._createLayout()):"ratio"==b?0<=a&&1>=a&&(f[b]=a):f[b]=a},_setOptions:function(){this._super.apply(this,
arguments);this.refresh()}};l.widget("paramquery.pqScrollBar",d);pq.scrollbar=function(b,a){var f=l(b).pqScrollBar(a);return f.data("paramqueryPqScrollBar")||f.data("paramquery-pqScrollBar")};d=g.pqScrollBar.prototype;g.pqScrollBar.defaults=d.options;d._createLayout=function(){var b=this,a=this.options,f=a.bootstrap,c=f.on,h=a.direction,e=this.eventNamespace,k=a.theme,w=this.element.empty();"vertical"==h?(w.removeClass("pq-sb-vert-t pq-sb-vert-wt").addClass("pq-sb pq-sb-vert"),k?(w.addClass("pq-sb-vert-t"),
w[0].innerHTML=["<div class='top-btn pq-sb-btn ",c?"":"ui-state-default ui-corner-top","'>",m(c,c?f.up:"triangle-1-n"),"</div><div class='pq-sb-slider ",c?f.slider:"ui-corner-all ui-state-default","'></div><div class='bottom-btn pq-sb-btn ",c?"":"ui-state-default ui-corner-bottom","'>",m(c,c?f.down:"triangle-1-s"),"</div>"].join("")):(w.addClass("pq-sb-vert-wt"),w[0].innerHTML="<div class='top-btn pq-sb-btn'></div><div class='pq-sb-slider'><div class='vert-slider-top'></div><div class='vert-slider-bg'></div><div class='vert-slider-center'></div><div class='vert-slider-bg'></div><div class='vert-slider-bottom'></div></div><div class='bottom-btn pq-sb-btn'></div>")):
(w.removeClass("pq-sb-horiz-t pq-sb-horiz-wt").addClass("pq-sb pq-sb-horiz"),k?(w.addClass("pq-sb-horiz-t"),w[0].innerHTML=["<div class='left-btn pq-sb-btn ",c?"":"ui-state-default ui-corner-left","'>",m(c,c?f.left:"triangle-1-w"),"</div><div class='pq-sb-slider pq-sb-slider-h ",c?f.slider:"ui-state-default ui-corner-all","'></div><div class='right-btn pq-sb-btn ",c?"":"ui-state-default ui-corner-right","'>",m(c,c?f.right:"triangle-1-e"),"</div>"].join("")):(w.addClass("pq-sb-horiz-wt"),w.width(this.width),
w[0].innerHTML="<div class='left-btn pq-sb-btn'></div><div class='pq-sb-slider pq-sb-slider-h'><span class='horiz-slider-left'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-center'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-right'></span></div><div class='right-btn pq-sb-btn'></div>"));w.disableSelection().unbind(".pq-scrollbar").on("mousedown.pq-scrollbar",function(k){if(!a.disabled&&!b.$slider.is(":hidden"))if(l(document).off("."+e).on("mouseup."+
e,function(e){b._mouseup(e)}),"vertical"==h){var w=k.pageY,f=b.element.offset().top,c=f+a.length,n=b.$slider,d=n.offset().top,g=n.height(),n=d+g;w<d&&w>f+17?b._setTimerPageLeft(w,g,k,0):w>n&&w<c-17&&b._setTimerPageRight(w,g,k,0)}else w=k.pageX,f=b.element.offset().left,c=f+a.length,d=b.$slider.offset().left,n=d+b.$slider.width(),w<d&&w>f+17?(b.$slider.css("left",w-b.element.offset().left),b._updateCurPosAndTrigger(k)):w>n&&w<c-17&&(b.$slider.css("left",w-b.element.offset().left-b.$slider.width()),
b._updateCurPosAndTrigger(k))});f=this.$slider=l("div.pq-sb-slider",this.element);f.attr("tabindex","0");this._bindSliderEvents(f);this.$top_btn=l("div.top-btn,div.left-btn",this.element).click(function(e){if(!b.options.disabled)return b.decr_cur_pos(e),!1}).mousedown(function(e){if(!b.options.disabled)return b.mousedownTimeout=setTimeout(function(){b.mousedownInterval=setInterval(function(){b.decr_cur_pos(e)},0)},b.options.timeout),!1}).bind("mouseup mouseout",function(e){b._mouseup(e)});this.$bottom_btn=
l("div.bottom-btn,div.right-btn",this.element).click(function(e){if(!b.options.disabled)return b.incr_cur_pos(e),!1}).mousedown(function(e){if(!b.options.disabled)return b.mousedownTimeout=setTimeout(function(){b.mousedownInterval=setInterval(function(){b.incr_cur_pos(e)},0)},b.options.timeout),!1}).bind("mouseup mouseout",function(e){b._mouseup(e)});this.refresh()};var c=0;d._setTimerPageLeft=function(b,a,f,n){var h=this,e=h.options;this.mousedownTimeout=window.setTimeout(function(){if(b>=h.$slider.offset().top)h._mouseup();
else{h._pageLeft(f);var k=c?0:e.timeout;c++;h._setTimerPageLeft(b,a,f,k)}},n)};d._setTimerPageRight=function(b,a,f,n){var h=this;this.mousedownTimeout=window.setTimeout(function(){if(b<=h.$slider.offset().top+a)h._mouseup();else{h._pageRight(f);var e=c?0:h.options.timeout;c++;h._setTimerPageRight(b,a,f,e)}},n)};d._bindSliderEvents=function(b){var a=this,f="x";"vertical"==this.options.direction&&(f="y");b.draggable({axis:f,helper:function(b,f){a._setDragLimits();return this},start:function(b){a.topWhileDrag=
null;a.dragging=!0},drag:function(b){a.dragging=!0;var f=a.options.pace;"optimum"==f?a._setNormalPace(b):"fast"==f&&a._updateCurPosAndTrigger(b)},stop:function(b){"fast"!=a.options.pace&&a._updateCurPosAndTrigger(b);a.dragging=!1;a.refresh()}}).on("keydown.pq-scrollbar",function(b){var f=b.keyCode,e=a.options,k=e.cur_pos,w=e.ratio,A=e.num_eles,c=l.ui.keyCode;null==a.keydownTimeout&&(a.keydownTimeout=window.setTimeout(function(){f==c.DOWN||f==c.RIGHT?a.incr_cur_pos(b):f==c.UP||f==c.LEFT?a.decr_cur_pos(b):
f==c.HOME?e.steps?0<k&&(e.cur_pos=0,a.updateSliderPos(),a.scroll(b)):0<w&&(e.ratio=0,a.updateSliderPos(),a.drag(b)):f==c.END?e.steps?k<A&&(e.cur_pos=A,a.updateSliderPos(),a.scroll(b)):1>w&&(e.ratio=1,a.updateSliderPos(),a.drag(b)):"vertical"==e.direction&&(f==c.PAGE_DOWN?a._pageRight(b):f==c.PAGE_UP&&a._pageLeft(b));a.keydownTimeout=null},0));if(f==c.DOWN||f==c.RIGHT||f==c.UP||f==c.LEFT||f==c.PAGE_DOWN||f==c.PAGE_UP||f==c.HOME||f==c.END)return b.preventDefault(),!1})};d.decr_cur_pos=function(b){var a=
this.options;if(a.steps)0<a.cur_pos&&(a.cur_pos--,this.updateSliderPos(),this.scroll(b));else if(0<a.ratio){var f=a.ratio-1/(a.num_eles-1);0>f&&(f=0);a.ratio=f;this.updateSliderPos();this.drag(b)}};d.incr_cur_pos=function(b){var a=this.options;if(a.steps)a.cur_pos<a.num_eles-1&&a.cur_pos++,this.updateSliderPos(),this.scroll(b);else{if(1>a.ratio){var f=a.ratio+1/(a.num_eles-1);1<f&&(f=1);a.ratio=f}this.updateSliderPos();this.drag(b)}};d._mouseup=function(b){this.options.disabled||(c=0,window.clearTimeout(this.mousedownTimeout),
this.mousedownTimeout=null,window.clearInterval(this.mousedownInterval),this.mousedownInterval=null)};d._setDragLimits=function(){var b=this.options;if("vertical"==b.direction){var a=this.element.offset().top+17,b=a+b.length-34-this.slider_length;this.$slider.draggable("option","containment",[0,a,0,b])}else a=this.element.offset().left+17,b=a+b.length-34-this.slider_length,this.$slider.draggable("option","containment",[a,0,b,0])};d._validateCurPos=function(){var b=this.options;b.cur_pos>=b.num_eles&&
(b.cur_pos=b.num_eles-1);0>b.cur_pos&&(b.cur_pos=0)};d._updateSliderPosRatio=function(){var b=this.options,a=b.direction,f=b.ratio,c=this.$slider[0],b=b.length-34-this.slider_length;if(null==f)throw"updateSliderPosRatio ratio N/A";f=f*b+17;"vertical"==a?c.style.top=f+"px":c.style.left=f+"px"};d._updateSliderPosCurPos=function(){var b=this.options,a=this.$slider[0],f=this.scroll_space*b.cur_pos/(b.num_eles-1);"vertical"==b.direction?a.style.top=17+f+"px":a.style.left=17+f+"px"};d.updateSliderPos=function(){var b=
this.options;if(void 0===b.steps)throw"updateSliderPos. steps N/A";b.steps?this._updateSliderPosCurPos():this._updateSliderPosRatio()};d.scroll=function(b){var a=this.options;this._trigger("scroll",b,{cur_pos:a.cur_pos,num_eles:a.num_eles})};d.drag=function(b){this._trigger("drag",b,{ratio:this.options.ratio})};d._pageRight=function(b){this._trigger("pageRight",b,null)};d._pageLeft=function(b){this._trigger("pageLeft",b,null)};d._setSliderBgLength=function(){var b=this.options,a=b.theme,f=this.$slider,
c=b.length,c=Math.round(((c-34)*c/(40*b.num_eles+c)-14)/2);1>c&&(c=1);var h=14+2*c;this.scroll_space=b.length-34-h;if(h!==this.slider_length)if(this.slider_length=h,b="vertical"===b.direction?{dim:"height",cls:".vert-slider-bg"}:{dim:"width",cls:".horiz-slider-bg"},a)f[b.dim](h-2);else l(b.cls,this.element)[b.dim](c),f[b.dim](h)};d._updateCurPosAndTrigger=function(b,a){var f=this.options,c=f.direction,h=this.$slider;null==a&&(a=parseInt(h[0].style["vertical"===c?"top":"left"]));c=(a-17)/(f.length-
34-this.slider_length);if(f.steps){if(c*=f.num_eles-1,c=Math.round(c),f.cur_pos!=c){if(this.dragging){if(null!=this.topWhileDrag&&(this.topWhileDrag<a&&f.cur_pos>c||this.topWhileDrag>a&&f.cur_pos<c))return;this.topWhileDrag=a}this.options.cur_pos=c;this.scroll(b)}}else f.ratio=c,this.drag(b)};d._setNormalPace=function(b){this.timer&&(window.clearInterval(this.timer),this.timer=null);var a=this,f=this.options.direction;a.timer=window.setInterval(function(){var c=parseInt(a.$slider[0].style["vertical"===
f?"top":"left"]);a.prev_top===c&&(a._updateCurPosAndTrigger(b,c),window.clearInterval(a.timer),a.timer=null);a.prev_top=c},20)};d.refresh=function(){var b=this.options,a=this.$slider[0],f=this.element;1>=b.num_eles?f[0].style.display="none":(f[0].style.display="",this._validateCurPos(),this.dragging||(f["vertical"===b.direction?"height":"width"](b.length),this._setSliderBgLength(),a.style.display=4>this.scroll_space||1>=b.num_eles?"none":""),this.updateSliderPos())};d._trigger=g._trigger;d.on=g.on;
d.one=g.one;d.off=g.off})(jQuery);
(function(l){l.paramquery=l.paramquery||{};l.paramquery.onResize=function(m,g){var d=l(m);"static"===d.css("position")&&d.css("position","relative");var c=l('<iframe type="text/html" src="about:blank" class="pq-resize-iframe" style="display:block;width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;overflow: hidden; pointer-events: none;" />').appendTo(d);c[0].data="about:blank";c.css("opacity","0");for(var b=0;b<d.length;b++)l(c[b].contentWindow).on("resize",function(a){g()})}})(jQuery);
(function(l){function m(e){return"<span class='btn btn-xs glyphicon glyphicon-"+e+"' ></span>"}function g(e){return"<span class='ui-widget-header pq-ui-button'><span class='ui-icon ui-icon-"+e+"'></span></span>"}var d=function(){};d.prototype.belongs=function(e){if(e.target==this.that.element[0])return!0};var c=l.paramquery;c.cClass=d;var b=function(e){this.that=e;var k=this.options=e.options,w=this;if(null!=k.postRenderInterval)e.on("refresh",function(){w.prColDef.length&&w.postRenderAll()}).on("refreshRow",
function(e,k){w.prColDef.length&&w.postRenderRow(k)}).on("refreshCell",function(e,k){k.column.postRender&&w.postRenderRow(k)}).on("refreshColumn",function(e,k){k.column.postRender&&w.setTimerPostRender(0,k.colIndx,k.column)});if(!k.mergeModel.flex)e.on("refresh refreshCell refreshRow refreshColumn",w.onRefreshMerge(e))};c.cGenerateView=b;d=b.prototype=new d;d.onRefreshMerge=function(e){return function(){for(var k=e.$cont.find(".pq-merge-cell-div"),w,a,b,f,c=k.length,h=[],n=[];c--;)w=k[c],w=w.parentNode,
a||(a=2*parseInt(l(w).css("paddingTop")),b=2*parseInt(l(w).css("paddingLeft"))),f=Math.max(w.offsetHeight,28),f-=a,w=w.offsetWidth-b,h[c]=f-1+"px",n[c]=w+"px";for(c=k.length;c--;)w=k[c],w.style.height=h[c],w.style.width=n[c]}};d.generateView=function(e){e=e||{};var k=this.that,w=k.options,a="flex"===w.width,b="flex"===w.height,f=w.cls,h=f.cont_inner,n=f.cont_inner_b,d,g,l=k.initH,y=k.finalH,z=k.pqpanes;if(e.$cont)d=this._generateTables(null,null,e),f=e.$cont,f.empty(),f[0].innerHTML=z.v?["<div class='",
h,"'>",d,"</div><div class='",h,"'>",d,"</div>"].join(""):["<div class='",h,"'>",d,"</div>"].join(""),w=f.children("div").children("table"),k.tables[0]={$tbl:w,$cont:f};else{d=k.initV;g=k.finalV;var x=k.pdata,f=k.$cont;null!=w.editModel.indices&&k.blurEditor({force:!0});l={pageData:x,initV:d,finalV:g,initH:l,finalH:y,source:e.source};k._trigger("beforeTableView",null,l);d=this._generateTables(d,g,e);f.empty();0===k.totalVisibleRows?f.append("<div class='"+h+" pq-grid-norows' >"+w.strNoRows+"</div>"):
(e=b||a?"style='position:relative;'":"",f[0].innerHTML=z.h&&z.v?["<div class='",h,"'>",d,"</div><div class='",h,"'>",d,"</div><div class='",h," ",n,"'>",d,"</div><div class='",h," ",n,"'>",d,"</div>"].join(""):z.v?["<div class='",h,"' ",e," >",d,"</div><div class='",h,"' >",d,"</div>"].join(""):z.h?["<div class='",h,"' style='position:static;' >",d,"</div><div class='",h," ",n,"' style='position:static;' >",d,"</div>"].join(""):["<div class='",h,"' ",e," >",d,"</div>"].join(""));k.$tbl=f.children("div").children("table");
if(w.scrollModel.flexContent&&k.$tbl[0])c.onResize(k.$tbl[0],function(){var e=k.iRefresh;e.ignoreTResize||e.softRefresh()});this.setPaneEvents();k._trigger("refresh",null,l)}this.setPanes()};d.postRenderRow=function(e){var k=this.that,w=this.prColDef,a=k.iMerge,b=e.rowIndx,f;null!=e.colIndx&&(w=[{colIndx:e.colIndx,column:e.column}]);for(var c=0,h=w.length;c<h;c++)e=w[c],f=e.column.postRender,e=e.colIndx,a.ismergedCell(b,e)?a.isRootCell(b,e,"a")&&(e=a.getRootCell(b,e),f.call(k,e)):(e=k.normalize({rowIndx:b,
colIndx:e}),f.call(k,e))};d.setTimerPostRender=function(e,k,w){var a=this.that,b=this,f=a.pdata,c=function(e){return-1==a.options.postRenderInterval?e():setTimeout(e,0)};f&&f.length&&(b.postRenderTimeoutID=c(function(){var c=a.initV,h=a.options.freezeRows;e<c&&e>=h&&(e=c);f[e].pq_hidden||b.postRenderRow({column:w,colIndx:k,rowIndx:e+a.rowIndxOffset});e++;e<=a.finalV&&b.setTimerPostRender(e)}))};d.postRenderAll=function(){var e=this.that,k=this,a=e.pdata,b=e.options.postRenderInterval,e=function(e){return-1==
b?e():setTimeout(e,b)};a&&a.length&&(clearTimeout(k.postRenderTimeoutID),k.postRenderTimeoutID=e(function(){k.setTimerPostRender(0)}))};d.scrollView=function(){var e=this.that,k=this.options,a=k.virtualY;k.virtualX||e.hscroll.drag();a||e.vscroll.drag()};d.setPaneEvents=function(){var e=this.that,k=e.pqpanes,a=e.$cont.children("div"),b=e.iMouseSelection;if((e=e.$tbl)&&e.length)if(k.h&&k.v){var k=l(a[0]),e=l(a[1]),f=l(a[2]),a=l(a[3]);k.on("scroll",function(e){this.scrollLeft=this.scrollTop=0});e.on("scroll",
function(e){this.scrollTop=0;this.scrollLeft=b.getScrollLeft(!0)});f.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=0});a.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)})}else if(k.v)k=l(a[0]),a=l(a[1]),k.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=0}),a.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)});else if(k.h)k=l(a[0]),a=l(a[1]),k.on("scroll",
function(e){this.scrollTop=0;this.scrollLeft=b.getScrollLeft(!0)}),a.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)});else a.on("scroll",function(e){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)})};d.setPanes=function(){var e=this.that,k=e.pqpanes,a=e.$cont.children("div"),b=e.iRefresh,f=e.$tbl,c=e.options,h=e.calcWidthCols(-1,1*c.freezeCols)+1,d="flex"!==c.width||c.maxWidth?b.getEContWd():"";if(e.tables.length){var n=e.tables[0].$tbl,
g=e.tables[0].$cont,s=n.parent("div");k.v?(l(s[0]).css({width:h}),l(s[1]).css({left:h,width:d-h}),l(n[1]).css({left:-1*h})):l(s[0]).css({width:d});g.height(n[0].scrollHeight-1);b.setContHeight()}if(f&&f.length)if(b="flex"!==c.height||c.maxHeight?b.getEContHt():"",k.h&&k.v){var n=l(a[0]),g=l(a[1]),s=l(f[1]),y=l(a[2]),z=l(f[2]),a=l(a[3]),x=l(f[3]),f=e.calcHeightFrozenRows();n.css({width:h,height:f});g.css({left:h,width:d-h,height:f});s.css({left:-1*h});y.css({width:h,top:f,height:b-f});z.css({marginTop:-(f+
1)});a.css({left:h,width:d-h,top:f,height:b-f});x.css({marginTop:-(f+1),left:-1*h})}else k.v?(n=l(a[0]),a=l(a[1]),f=l(f[1]),n.css({width:h,height:b}),a.css({left:h,width:d-h,height:b}),f.css({left:-1*h})):k.h?(n=l(a[0]),a=l(a[1]),g=l(f[1]),f=e.calcHeightFrozenRows(),n.css({height:f,width:d}),a.css({width:d,top:f,height:b-f}),g.css({marginTop:-(f+1)})):a.css({width:d,height:b});c.showHeader&&(k.vH?(e.$header_left.css({width:h}),e.$header_right.css({left:h,width:d-h}),e.$header_right_inner.css({left:-h})):
e.$header_left.css({width:d}))};d.createColDefs=function(){for(var e=this.that,k=e.colModel,a=e.initH,b=e.finalH,e=e.options.freezeCols,f=[],c=[],h=0;h<=b;h++){if(h<a&&h>=e&&(h=a,h>b))throw"initH>finalH";var d=k[h];d.hidden||(f.push({column:d,colIndx:h}),d.postRender&&"function"==typeof d.postRender&&c.push({column:d,colIndx:h}))}this.colDef=f;this.prColDef=c};d._generateTables=function(e,k,a){a=a||{};var b=this.that,f=b.options,c=f.bootstrap,h=f.numberCell,d=b.iRefresh,n=1*f.freezeRows,g=0,l=a.other;
k=l?a.data.length-1:k;l?a=a.data:(a=b.pdata,this.setFrozenRip(a,n));if(l||null!=e&&null!=k){this.vrows=d.vrows;this.vfrows=d.vfrows;g=["pq-grid-table"];c.on&&g.push(c.tbody);f.columnBorders&&g.push("pq-td-border-right");f.rowBorders&&g.push("pq-td-border-top");g.push(f.wrap?"pq-wrap":"pq-no-wrap");f=["<table class='"+g.join(" ")+"' >"];f.push("<tr class='pq-row-hidden'>");h.show&&(b=h.width,f.push("<td style='width:"+b+"px;' ></td>"));g=this.colDef;h=0;for(c=g.length;h<c;h++)b=g[h],d=b.colIndx,b=
b.column.outerWidth,f.push("<td style='width:",b,"px;' pq-col-indx='",d,"'></td>");f.push("</tr>");for(g=0;g<=k;g++)g<e&&g>=n&&(g=e),h=a[g],c=g,h&&h.pq_hidden||(d=h.pq_detail&&h.pq_detail.show,this._generateRow(h,c,f,l,d),d&&this._generateDetailRow(h,c,f));f.push("</table>");return f.join("")}};d.appendRow=function(e){var k=this.that,a=k.pdata,b=k.colModel,f=k.finalV;f+e>a.length&&(e=a.length-f);if(e){if(1<e)throw"noRows > 1";k._trigger("beforeTableView",null,{pageData:a,initV:f,finalV:f,initH:k.initH,
finalH:k.finalH,colModel:b});k.refreshRow({rowIndxPage:f,refresh:!1})}return e};d.prependRow=function(e){var k=this.that,a=k.options.freezeRows,b=k.calcVisibleRows(k.pdata,0,a),f=k.pdata,c=k.initV,h=k.colModel;if(k._mergeCells){if(b)for(b=0;b<a;b++)k.refreshRow({rowIndxPage:b,refresh:!1});k.refreshRow({rowIndxPage:c+1,refresh:!1})}k._trigger("beforeTableView",null,{pageData:f,initV:c,finalV:c,initH:k.initH,finalH:k.finalH,colModel:h});k.refreshRow({rowIndxPage:c,refresh:!1});return e};d.removeTopRow=
function(e){for(var k=this.that,a=k.options.freezeRows,b=k.calcVisibleRows(k.pdata,0,a),f=k.$tbl,c=l([]),h=0;h<f.length;h++)var d=l(f[h]).children("tbody").children("tr:gt(0)").slice(b,e+b),c=c.add(d);c.remove();if(k._mergeCells){if(b)for(h=0;h<a;h++)k.refreshRow({rowIndxPage:h,refresh:!1});k.refreshRow({rowIndxPage:k.initV,refresh:!1})}};d.removeBottomRow=function(e){var k=this.that.$tbl;if(e)for(var a=0;a<k.length;a++)l(k[a]).children("tbody").children("tr:gt(0)").slice(-e).remove()};d.format=function(){var e=
l.datepicker,k=pq.formatNumber;return function(a,b,f){if("date"==f){if(!isNaN(Date.parse(a)))return e.formatDate(b,new Date(a))}else return k(a,b)}}();d.renderCell=function(e){var k=this.that,a=[],b=[],f=e.Export,c=!1,h=this.options,d=["pq-grid-cell"];if(!e.other&&!f&&k._mergeCells){e=k.iMerge.renderCell(e);if(null==e)return"";e.rowspan&&(a.push("rowspan='"+e.rowspan+"'","colspan='"+e.colspan+"'"),h.mergeModel.flex||(c=!0,d.push("pq-merge-cell")));e.style&&b.push(e.style);e.cls&&d.push(e.cls)}var g=
e.rowData,l=e.column,s=e.colIndx,y=l.dataIndx,z=h.freezeCols,h=h.columnBorders;if(g){f||(a.push("pq-col-indx='"+s+"'"),"right"==l.align?d.push("pq-align-right"):"center"==l.align&&d.push("pq-align-center"),s==z-1&&h&&d.push("pq-last-frozen-col"),(s=l.cls)&&d.push(s),(s=k.iSelection.dirty?null:g.pq_cellselect)&&s[y]&&d.push(k.iCells.hclass));var x,z=g[y],s=(s=l.format)?this.format(z,s,l.dataType):z;e.dataIndx=y;e.cellData=z;e.formatVal=s;if(l.render&&(x=l.render.call(k,e))&&"string"!=typeof x){var z=
x.attr,h=x.cls,m=x.style;z&&a.push(z);h&&d.push(h);m&&b.push(m);x=x.text}null==x&&l._render&&(x=l._render.call(k,e));x&&"string"!=typeof x&&(z=x.attr,h=x.cls,m=x.style,z&&a.push(z),h&&d.push(h),m&&b.push(m),x=x.text);null==x&&(x=s);if(f)return x;if(""===x||void 0==x)x="&nbsp;";(e=g.pq_cellcls)&&(e=e[y])&&d.push(e);if(g=g.pq_cellattr)if(y=g[y]){var y=n(y),D;for(D in y)g=y[D],"style"==D?b.push(g):a.push(D+'="'+g+'"')}b=b.length?" style='"+b.join("")+"' ":"";return["<td class='",d.join(" "),"' ",a.join(" "),
b," >",c?"<div class='pq-merge-cell-div'><div><div class='pq-merge-inner'>":"",x,c?"</div></div></div>":"","</td>"].join("")}};d.setFrozenRip=function(e,k){if(e){for(var a;k--&&(a=e[k])&&a.pq_hidden;);this.frozenRip=k}};d.refreshRow=function(e,k){var a=this.that.pdata[e];this._generateRow(a,e,k,null,a.pq_detail&&a.pq_detail.show)};d._generateRow=function(e,k,a,b,f){var c=["pq-grid-row"];this.frozenRip===k&&c.push("pq-last-frozen-row");f&&c.push("pq-detail-master");var h=this.that,d=this.options,g=
d.rowInit;f=d.numberCell;var l="",s="",y=h.rowIndxOffset,z=k+y;g&&(g=g.call(h,{rowData:e,rowIndxPage:k,rowIndx:z}))&&(g.cls&&c.push(g.cls),l+=g.attr?" "+g.attr:"",s+=g.style?g.style:"");!b&&d.stripeRows&&this.isOdd(k,d.freezeRows)&&c.push("pq-grid-oddRow");e.pq_rowselect&&c.push(h.iRows.hclass);h=e.pq_rowcls;null!=h&&c.push(h);if(h=e.pq_rowattr){var h=n(h),x;for(x in h)l+=" "+x+'="'+h[x]+'"'}s=s?"style='"+s+"'":"";a.push("<tr pq-row-indx='",k,"' class='",c.join(" "),"' ",l," ",s," >");f.show&&a.push(["<td pq-col-indx='-1' class='pq-grid-number-cell'>",
b?"&nbsp;":z+1,"</td>"].join(""));e={rowIndx:k+y,rowIndxPage:k,other:b,rowData:e};k=this.colDef;b=0;for(c=k.length;b<c;b++)x=k[b],f=x.colIndx,e.column=x.column,e.colIndx=f,a.push(this.renderCell(e));a.push("</tr>");return a};d.isOdd=function(e,k){var a=pq.searchSeqArray(e<k?this.vfrows:this.vrows,e);return a/2==parseInt(a/2)};d._generateDetailRow=function(e,k,a){var b=["pq-grid-row pq-detail-child"],f=this.that,c=f.options,h=c.numberCell;c.stripeRows&&this.isOdd(k,c.freezeRows)&&b.push("pq-grid-oddRow");
e.pq_rowselect&&b.push(f.iRows.hclass);e=e.pq_rowcls;null!=e&&b.push(e);a.push("<tr pq-row-indx='"+k+"' class='"+b.join(" ")+"' >");h.show&&a.push("<td class='pq-grid-number-cell'>&nbsp;</td>");a.push("<td class='pq-grid-cell pq-detail-child' colSpan='20'></td>");a.push("</tr>");return a};d={widgetEventPrefix:"pqgrid",_create:function(){var e=this,k=this.options,w=k.dataModel,f=k.bootstrap,d=f.on,n=k.roundCorners&&!d,u=k.ui,g=k.sortModel;l(document).triggerHandler("pqGrid:bootup",{instance:this});
this.BS_on=d;k.collapsible||(k.collapsible={on:!1,collapsed:!1});k.flexHeight&&(k.height="flex");k.flexWidth&&(k.width="flex");if(w.sortIndx){g.on=k.sortable;g.type=w.sorting;var q=[],v=w.sortIndx,w=w.sortDir;if(l.isArray(v)){for(var s=0;s<v.length;s++){var y=w&&w[s]?w[s]:"up";q.push({dataIndx:v[s],dir:y})}g.single=!1}else q.push({dataIndx:v,dir:w?w:"up"}),g.single=!0;g.sorter=q}!1===k.virtualXHeader&&(k.virtualXHeader=null);this.setEditorPosTimer();this.iGenerateView=new b(this);this.iRefresh=new c.cRefresh(this);
this.iKeyNav=new h(this);this.iIsValid=new a(this);this.tables=[];this.$tbl=null;this.iColModel=new c.cColModel(this);this.iSort=new c.cSort(this);this.iHeader=new c.cHeader(this);this._initTypeColumns();g=this.element;g.on("scroll"+this.eventNamespace,function(){this.scrollTop=this.scrollLeft=0});q=d?f.grid:u.grid;v=d?"":u.header_o;w=d?"":u.bottom;f=d?f.top:u.top;g.empty().addClass("pq-grid "+q+" "+(n?" ui-corner-all":"")).html(["<div class='pq-grid-top ",f," ",n?" ui-corner-top":"","'><div class='pq-grid-title",
n?" ui-corner-top":"","'>&nbsp;</div></div><div class='pq-grid-center' ><div class='pq-header-outer ",v,"'></div><div class='pq-grid-cont-outer' ><div class='pq-grid-cont' tabindex='0'></div></div></div><div class='pq-grid-bottom ",w," ",n?" ui-corner-bottom":"","'><div class='pq-grid-footer'></div></div>"].join(""));this.$bottom=l("div.pq-grid-bottom",g);this._trigger("render",null,{dataModel:this.options.dataModel,colModel:this.colModel});this.$top=l("div.pq-grid-top",g);k.showTop||this.$top.css("display",
"none");this.$title=l("div.pq-grid-title",g);k.showTitle||this.$title.css("display","none");n=this.$grid_center=l("div.pq-grid-center",g).on("scroll",function(){this.scrollTop=0});this.$header_o=l("div.pq-header-outer",this.$grid_center).on("scroll",function(){this.scrollLeft=this.scrollTop=0});this.$footer=l("div.pq-grid-footer",g);this.$cont_o=l(".pq-grid-cont-outer",n);f=this.$cont=l("div.pq-grid-cont",n);l(window).bind("resize"+e.eventNamespace+" orientationchange"+e.eventNamespace,function(k,
a){e.onWindowResize(k,a)});f.on("click",".pq-grid-cell,.pq-grid-number-cell",function(k){if(!0!==l.data(k.target,e.widgetName+".preventClickEvent")&&l(k.target).closest(".pq-grid")[0]==e.element[0])return e._onClickCell(k)});f.on("click","tr.pq-grid-row",function(k){if(!0!==l.data(k.target,e.widgetName+".preventClickEvent")&&l(k.target).closest(".pq-grid")[0]==e.element[0])return e._onClickRow(k)});f.on("contextmenu","td.pq-grid-cell",function(k){if(l(k.target).closest(".pq-grid")[0]==e.element[0])return e._onRightClickCell(k)});
f.on("contextmenu","tr.pq-grid-row",function(k){if(l(k.target).closest(".pq-grid")[0]==e.element[0])return e._onRightClickRow(k)});f.on("dblclick","td.pq-grid-cell",function(k){if(l(k.target).closest(".pq-grid")[0]==e.element[0])return e._onDblClickCell(k)});f.on("dblclick","tr.pq-grid-row",function(k){if(l(k.target).closest(".pq-grid")[0]==e.element[0])return e._onDblClickRow(k)});f.on("blur",function(){e.onblur()});f.on("focus",function(){e.onfocus()});f.on("mousedown",function(k){if(1===k.which){var a=
l(k.target);if(a.closest(".pq-grid")[0]==e.element[0]){var b;b=a.closest(".pq-grid-cell:not(.pq-detail-child)");if(b.length&&(k.currentTarget=b[0],b=e._onCellMouseDown(k),!1===b))return!1;if(!k.isPropagationStopped()){a=a.closest(".pq-grid-row");if(a.length&&(k.currentTarget=a[0],b=e._onRowMouseDown(k),!1===b))return!1;if(!k.isPropagationStopped())return e._onContMouseDown(k)}}}});f.on("mouseenter","td.pq-grid-cell",function(k){if(l(k.target).closest(".pq-grid")[0]==e.element[0])return e._onCellMouseEnter(k,
l(this))});f.on("mouseenter","tr.pq-grid-row",function(k){if(l(k.target).closest(".pq-grid")[0]==e.element[0])return e._onRowMouseEnter(k,l(this))});f.on("mouseleave","td.pq-grid-cell",function(k){if(l(k.target).closest(".pq-grid")[0]==e.element[0])return e._onCellMouseLeave(k,l(this))});f.on("mouseleave","tr.pq-grid-row",function(k){if(l(k.target).closest(".pq-grid")[0]==e.element[0])return e._onRowMouseLeave(k,l(this))});f.on("keyup",function(k){l(k.target).closest(".pq-grid")[0]==e.element[0]&&
e._trigger("keyUp",k,null)});n.bind("mousewheel DOMMouseScroll",function(k){return e._onMouseWheel(k)});this.$hvscroll=l("<div class='pq-hvscroll-square ui-widget-content'></div>").appendTo(n);d=l("<div class='pq-vscroll'></div>").appendTo(n);this.prevVScroll=0;f=k.scrollModel;void 0===f.lastColumn&&k.virtualX&&(f.lastColumn="auto");this.vscroll=pq.scrollbar(d,{pace:f.pace,theme:f.theme,bootstrap:k.bootstrap,steps:k.virtualY&&!f.smooth,direction:"vertical",cur_pos:0,pageRight:function(){e.iKeyNav.pageDown()},
pageLeft:function(){e.iKeyNav.pageUp()},drag:function(k,a){e.iMouseSelection.syncViewWithScrollBarVert(a.ratio)},scroll:function(k,a){e.iRefresh.refreshVscroll(a)}});d=l("<div class='pq-hscroll'></div>").appendTo(n);"flex"===k.height&&d.css("position","relative");this.hscroll=pq.scrollbar(d,{direction:"horizontal",pace:f.pace,bootstrap:k.bootstrap,theme:f.theme,steps:k.virtualX&&!f.smooth,cur_pos:0,drag:function(k,a){e.iMouseSelection.syncViewWithScrollBarHor(a.ratio)},scroll:function(){k.virtualX&&
!k.scrollModel.smooth&&e.refresh()}});k.selectionModel["native"]||this.disableSelection();n.bind("keydown.pq-grid",function(k){l(k.target).closest(".pq-grid")[0]==e.element[0]&&e._onKeyPressDown(k)});this._refreshTitle();this.iRows=new c.cRows(this);this.iCells=new c.cCells(this);this.generateLoading();this._initPager();this._refreshResizable();this._refreshDraggable();this.iResizeColumns=new c.cResizeColumns(this);this._mouseInit()},_mouseDown:function(e){var k=this;if(l(e.target).closest(".pq-editor-focus").length)this._blurEditMode=
!0,window.setTimeout(function(){k._blurEditMode=!1},0);else return this._saveDims(),this._mousePQUpDelegate=function(e){return k._mousePQUp(e)},l(document).bind("mouseup"+this.eventNamespace,this._mousePQUpDelegate),this._super(e)},destroy:function(){this._trigger("destroy");this._super();window.clearInterval(this._refreshEditorPosTimer);this.autoResizeTimeout&&clearTimeout(this.autoResizeTimeout);for(var e in this)delete this[e];this.options=void 0;l.fragments={}},_setOption:function(e,k){var a=
this.options,b=a.dataModel;if("height"===e)"flex"===k?(b=this.vscroll,k&&b&&b.widget().hasClass("pq-sb-vert")&&(a.virtualY?b.option("cur_pos",0):b.option("ratio",0)),this.hscroll.widget().css("position","relative")):"flex"===a.height&&this.hscroll.widget().css("position",""),a[e]=k;else if("width"===e&&"flex"==k)a[e]=k,b=this.hscroll,k&&b&&b.widget().hasClass("pq-sb-horiz")&&(a.virtualX?b.option("cur_pos",0):b.option("ratio",0));else if("title"==e)a[e]=k,this._refreshTitle();else if("roundCorners"==
e)(a[e]=k)?(this.element.addClass("ui-corner-all"),this.$top.addClass("ui-corner-top"),this.$bottom.addClass("ui-corner-bottom")):(this.element.removeClass("ui-corner-all"),this.$top.removeClass("ui-corner-top"),this.$bottom.removeClass("ui-corner-bottom"));else if("virtualX"==e)a[e]=k,this.hscroll.option("steps",k);else if("virtualY"==e)a[e]=k,this.vscroll.option("steps",k);else if("freezeCols"==e)k=parseInt(k),!isNaN(k)&&0<=k&&k<=this.colModel.length-2&&(a[e]=k);else if("freezeRows"==e)k=parseInt(k),
!isNaN(k)&&0<=k&&(a[e]=k);else if("resizable"==e)a[e]=k,this._refreshResizable();else if("draggable"==e)a[e]=k,this._refreshDraggable();else if("scrollModel"==e)a[e]=k;else if("dataModel"==e)k.data!==b.data&&b.dataUF&&(b.dataUF.length=0),a[e]=k;else{if("groupModel"==e)throw"use groupOption() to set groupModel options.";"pageModel"==e?a[e]=k:"selectionModel"===e?a[e]=k:"colModel"===e||"columnTemplate"==e?(a[e]=k,this.iColModel.init()):"disabled"===e?(this._super(e,k),!0===k?this._disable():this._enable()):
"numberCell"===e?(a[e]=k,this.iRefresh.decidePanes()):"strLoading"===e?(a[e]=k,this._refreshLoadingString()):"showTop"===e?(a[e]=k,this.$top.css("display",k?"":"none")):"showTitle"===e?(a[e]=k,this.$title.css("display",k?"":"none")):"showToolbar"===e?(a[e]=k,this._toolbar.widget().css("display",k?"":"none")):"toolbar"==e?a[e]=k:"collapsible"===e?(a[e]=k,this._createCollapse()):"showBottom"===e?(a[e]=k,this.$bottom.css("display",k?"":"none")):a[e]=k}return this}};d.options={cancel:"input,textarea,button,select,option,.pq-no-capture,.ui-resizable-handle",
trigger:!1,bootstrap:{on:!1,thead:"table table-striped table-condensed table-bordered",tbody:"table table-condensed",grid:"panel panel-default",top:"",btn:"btn btn-default",groupModel:{icon:["glyphicon-triangle-bottom","glyphicon-triangle-right"]},header_active:"active"},ui:{on:!0,grid:"ui-widget ui-widget-content",top:"ui-widget-header",bottom:"ui-widget-header",header_o:"ui-widget-header",header:"ui-state-default",header_active:"ui-state-active"},cls:{cont_inner:"pq-grid-cont-inner",cont_inner_b:"pq-grid-cont-inner-b"},
distance:3,collapsible:{on:!0,toggle:!0,collapsed:!1,_collapsed:!1,refreshAfterExpand:!0,css:{zIndex:1E3}},colModel:null,columnBorders:!0,dataModel:{data:[],dataUF:[],cache:!1,dataType:"JSON",location:"local",sorting:"local",sortDir:"up",method:"GET"},direction:"",draggable:!1,editable:!0,editModel:{cellBorderWidth:0,pressToEdit:!0,clicksToEdit:2,filterKeys:!0,keyUpDown:!0,reInt:/^([\-]?[1-9][0-9]*|[\-]?[0-9]?)$/,reFloat:/^[\-]?[0-9]*\.?[0-9]*$/,onBlur:"validate",saveKey:l.ui.keyCode.ENTER,onSave:"nextFocus",
onTab:"nextFocus",allowInvalid:!1,invalidClass:"pq-cell-red-tr pq-has-tooltip",warnClass:"pq-cell-blue-tr pq-has-tooltip",validate:!0},editor:{select:!1,type:"textbox"},groupModel:{on:!1,title:[],titleDefault:"{0} ({1})",header:!0,headerMenu:!0,menuItems:["merge","fixCols","grandSummary"],fixCols:!0,icon:["ui-icon-triangle-1-se","ui-icon-triangle-1-e"],dataIndx:[],collapsed:[],dir:[],showSummary:[],summaryEdit:!0,refreshOnChange:!0},summaryOptions:{number:"avg,sum,max,min",date:"count,max,min",string:"count"},
summaryTitle:{avg:"Avg: {0}",count:"Count: {0}",max:"Max: {0}",min:"Min: {0}",sum:"Sum: {0}"},validation:{icon:"ui-icon-alert",cls:"ui-state-error",style:"padding:3px 10px;"},warning:{icon:"ui-icon-info",cls:"",style:"padding:3px 10px;"},freezeCols:0,freezeRows:0,freezeBorders:!0,calcDataIndxFromColIndx:!0,height:400,hoverMode:"null",_maxColWidth:"99%",_minColWidth:50,minWidth:100,numberCell:{width:30,title:"",resizable:!0,minWidth:30,maxWidth:100,show:!0},pageModel:{curPage:1,totalPages:0,rPP:10,
rPPOptions:[10,20,50,100]},resizable:!1,roundCorners:!0,rowBorders:!0,rowHeight:25,scrollModel:{pace:"fast",smooth:!1,horizontal:!0,lastColumn:"auto",autoFit:!1,theme:!0},selectionModel:{type:"cell",onTab:"nextFocus",row:!0,mode:"block"},swipeModel:{on:!0,speed:20,ratio:.15,repeat:20},showBottom:!0,showHeader:!0,showTitle:!0,showToolbar:!0,showTop:!0,sortable:!0,sql:!1,stripeRows:!0,title:"&nbsp;",treeModel:null,virtualX:!1,virtualY:!1,width:"auto",wrap:!0,hwrap:!0};l.extend(!0,d.options,{strAdd:"Add",
strDelete:"Delete",strEdit:"Edit",strGroup_header:"Drag a column here to group by that column",strGroup_merge:"Merge cells",strGroup_fixCols:"Fix columns",strGroup_grandSummary:"Grand summary",strLoading:"Loading",strNoRows:"No rows to display."});l.widget("paramquery._pqGrid",l.ui.mouse,d);d=c._pqGrid.prototype;d.refreshCM=function(e){e?this.option("colModel",e):this.iColModel.init()};d.readCell=function(e,k,a,b,f){k=k.dataIndx;return a&&!1===a.isRootCell(b,f,"o")?void 0:e[k]};d.saveCell=function(e,
k,a){e[k.dataIndx]=a};d._destroyResizable=function(){var e=this.element,k=e.data();(k.resizable||k.uiResizable||k["ui-resizable"])&&e.resizable("destroy")};d._disable=function(){null==this.$disable&&(this.$disable=l("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};d._enable=function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};d._destroy=function(){this.loading&&this.xhr.abort();this._destroyResizable();this._destroyDraggable();
this._mouseDestroy();this.element.off(this.eventNamespace);l(window).unbind(this.eventNamespace);l(document).unbind(this.eventNamespace);this.element.empty().css("height","").css("width","").removeClass("pq-grid ui-widget ui-widget-content ui-corner-all").removeData()};d.collapse=function(e){var k=this,a=this.element,b=this.options.collapsible,f=b.$collapse.children("span"),c=function(){a.css("overflow","hidden");f.addClass("ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-n");a.hasClass("ui-resizable")&&
a.resizable("destroy");k._toolbar&&k._toolbar.disable();b.collapsed=!0;b._collapsed=!0;b.animating=!1;k._trigger("collapse")};e=e?e:{};if(b._collapsed)return!1;b.htCapture=a.height();!1===e.animate?(a.height(23),c()):(b.animating=!0,a.animate({height:"23px"},function(){c()}))};d.expand=function(e){var k=this,a=this.element,b=this.options.collapsible,f=b.htCapture,c=b.$collapse.children("span"),h=function(){a.css("overflow","");b._collapsed=!1;b.collapsed=!1;k._refreshResizable();b.refreshAfterExpand&&
k.refresh();c.addClass("ui-icon-circle-triangle-n").removeClass("ui-icon-circle-triangle-s");k._toolbar&&k._toolbar.enable();b.animating=!1;k._trigger("expand")};e=e?e:{};if(!1===b._collapsed)return!1;!1===e.animate?(a.height(f),h()):(b.animating=!0,a.animate({height:f},function(){h()}))};d._createCollapse=function(){var e=this,k=this.$top,a=this.BS_on,b=this.options.collapsible;b.$stripe||(k=l("<div class='pq-slider-icon pq-no-capture'  ></div>").appendTo(k),b.$stripe=k);b.on?b.$collapse||(b.$collapse=
l(a?m("collapse-down"):g("circle-triangle-n")).appendTo(b.$stripe).click(function(k){b.collapsed?e.expand():e.collapse()})):b.$collapse&&(b.$collapse.remove(),delete b.$collapse);b.collapsed&&!b._collapsed?e.collapse({animate:!1}):!b.collapsed&&b._collapsed&&e.expand({animate:!1});b.toggle?b.$toggle||(b.$toggle=l(a?m("fullscreen"):g("arrow-4-diag")).prependTo(b.$stripe).click(function(k){e.toggle()})):b.$toggle&&(b.$toggle.remove(),delete b.$toggle)};d.toggle=function(){var e=this.options,k=e.collapsible,
a=this.element,b,f=this._maxim;b=f?"min":"max";var c=l(document.body);if(!1===this._trigger("beforeToggle",null,{state:b}))return!1;"min"==b?(e=f.eleObj,k=f.docObj,this.option({height:e.height,width:e.width,maxHeight:e.maxHeight,maxWidth:e.maxWidth}),a[0].style.cssText=e.cssText,c[0].style.cssText=k.cssText,l("html").css({overflow:"visible"}),window.scrollTo(k.scrollLeft,k.scrollTop),this._maxim=null):(e={height:e.height,width:e.width,cssText:a[0].style.cssText,maxHeight:e.maxHeight,maxWidth:e.maxWidth},
this.option({height:"100%",width:"100%",maxHeight:null,maxWidth:null}),a.css(l.extend({position:"fixed",left:0,top:0,margin:0},k.css)),k={scrollLeft:l(window).scrollLeft(),scrollTop:l(window).scrollTop(),cssText:c[0].style.cssText},c.css({height:0,width:0,overflow:"hidden",position:"static"}),l("html").css({overflow:"hidden"}),window.scrollTo(0,0),this._maxim={eleObj:e,docObj:k});this._trigger("toggle",null,{state:b});this._refreshResizable();this.refresh();l(window).trigger("resize",{$grid:a,state:b})};
d._mouseCapture=function(e){var k=this.options;return k.virtualX&&k.virtualY&&!k.scrollModel.smooth||!e.target?!1:l(e.target).closest(".pq-grid")[0]==this.element[0]?(e=k.swipeModel,!1==e.on||"touch"==e.on&&!l.support.touch?!1:!0):!1};d._saveDims=function(){var e=this.$tbl,k=this.$tbl_header;if(e)for(var a=0;a<e.length;a++){var b=e[a],f=l(b);f.data("offsetHeight",Math.round(b.offsetHeight)-1);f.data("scrollWidth",Math.round(b.scrollWidth))}if(k)for(a=0;a<k.length;a++)b=k[a],e=l(b).parent(),e.data("offsetHeight",
Math.round(b.offsetHeight)),e.data("scrollWidth",Math.round(b.scrollWidth))};d._mousePQUp=function(e){l(document).unbind("mouseup"+this.eventNamespace,this._mousePQUpDelegate);this._trigger("mousePQUp",e,null)};d._mouseStart=function(e){this.blurEditor({force:!0});return!0};d._mouseDrag=function(e){return!1==this._trigger("mouseDrag",e,null)?!1:!0};d._mouseStop=function(e){return!1==this._trigger("mouseStop",e,null)?!1:!0};d.onWindowResize=function(e,k){var a=this,b=a.options,f=a.element,c=f.parent();
if(k){var h=k.$grid;if(h&&(h==f||0==f.closest(h).length))return}c.length&&(c[0]==document.body||"fixed"==f.css("position")?(f=window.innerHeight?window.innerHeight:l(window).height(),c=l(window).width()):(f=c.height(),c=c.width()),null==a._lastParentHt||f!=a._lastParentHt||c!=a._lastParentWd)&&(a._lastParentHt=f,a._lastParentWd=c,l.support.touch&&b.editModel.indices&&l(document.activeElement).is(".pq-editor-focus")||(a.autoResizeTimeout&&clearTimeout(a.autoResizeTimeout),a.autoResizeTimeout=window.setTimeout(function(){a._refreshAfterResize();
delete a.autoResizeTimeout},b.autoSizeInterval||0)))};d._onMouseWheel=function(e){this._saveDims();var k=this.options,a=0,b=!1;e=e.originalEvent;var f=e.wheelDeltaX,c=e.wheelDeltaY,h=e.wheelDelta;if(f&&Math.abs(f)>Math.abs(c)){if("flex"==k.width)return!0;b=!0;a=f/120}else if(h){if(!this.iRefresh.vscroll)return!0;a=h/120}else if(e.detail){if(!this.iRefresh.vscroll)return!0;a=-1*e.detail/3}a*=3;e=b?this.hscroll:this.vscroll;c=parseInt(e.option("cur_pos"));f=parseInt(e.option("num_eles"));if(!k.scrollModel.smooth&&
(b&&k.virtualX||!b&&k.virtualY)){a=0<a?Math[1>a?"ceil":"floor"](a):Math[-1>a?"ceil":"floor"](a);k=c-a;0>k?k=0:k>f-1&&(k=f-1);if(k==c)return!0;e.option("cur_pos",c-a);e.scroll()}else{k=e.option("ratio");a=k-a/(f-1);1<a?a=1:0>a&&(a=0);if(k==a)return!0;e.option("ratio",a);e.drag()}return!1};d._onDblClickCell=function(e){var k=l(e.currentTarget),a=this.getCellIndices({$td:k}),b=a.rowIndxPage,f=b+this.rowIndxOffset,a=a.colIndx;if(null!=a){if(!1==this._trigger("cellDblClick",e,{$td:k,rowIndxPage:b,rowIndx:f,
colIndx:a,column:this.colModel[a],rowData:this.pdata[b]}))return!1;1<this.options.editModel.clicksToEdit&&this.isEditableRow({rowIndx:f})&&this.isEditableCell({colIndx:a,rowIndx:f})&&this.editCell({rowIndxPage:b,colIndx:a})}};d._onClickCont=function(e){};d._onClickRow=function(e){var k=l(e.currentTarget),a=parseInt(k.attr("pq-row-indx")),b=a+this.rowIndxOffset;if(!isNaN(a)&&!1==this._trigger("rowClick",e,{$tr:k,rowIndxPage:a,rowIndx:b,rowData:this.pdata[a]}))return!1};d._onRightClickRow=function(e){var k=
l(e.currentTarget),a=parseInt(k.attr("pq-row-indx")),b=a+this.rowIndxOffset;if(!isNaN(a)&&!1==this._trigger("rowRightClick",e,{$tr:k,rowIndxPage:a,rowIndx:b,rowData:this.pdata[a]}))return!1};d._onDblClickRow=function(e){var k=l(e.currentTarget),a=parseInt(k.attr("pq-row-indx")),b=this.getRowIndxOffset();if(!1==this._trigger("rowDblClick",e,{$tr:k,rowIndxPage:a,rowIndx:a+b,rowData:this.pdata[a]}))return!1};d.getValueFromDataType=function(e,k,a){if("date"==k)return k=Date.parse(e),isNaN(k)?"":a?k:e;
if("object"==k)return e;if("integer"==k)k=parseInt(e);else if("float"==k)k=parseFloat(e);else return"bool"==k?(k=l.trim(e).toLowerCase(),0==k.length?null:"true"==k||"yes"==k||"1"==k?!0:"false"==k||"no"==k||"0"==k?!1:Boolean(k)):l.trim(e);return isNaN(k)||null==k?null==e?e:null:k};var a=function(e){this.that=e},f=a.prototype;f._isValidCell=function(e){var k=this.that,a=e.column,b=a.validations;if(!b||!b.length)return{valid:!0};var f=e.value,c=a.dataType,h=function(e){return k.getValueFromDataType(e,
c,!0)};e=e.rowData;if(!e)throw"rowData required.";for(var d=0;d<b.length;d++){var n=b[d],g=n.type,l=!1,y=n.msg,m=n.value;if(!1!==n.on&&(null==f&&"function"!=typeof g?l=!1:"minLen"==g?(f=h(f),m=h(m),f.length>=m&&(l=!0)):"nonEmpty"==g?null!=f&&""!==f&&(l=!0):"maxLen"==g?(f=h(f),m=h(m),f.length<=m&&(l=!0)):"gt"==g?(f=h(f),m=h(m),f>m&&(l=!0)):"gte"==g?(f=h(f),m=h(m),f>=m&&(l=!0)):"lt"==g?(f=h(f),m=h(m),f<m&&(l=!0)):"lte"==g?(f=h(f),m=h(m),f<=m&&(l=!0)):"neq"==g?(f=h(f),m=h(m),f!==m&&(l=!0)):"regexp"==
g?(new RegExp(m)).test(f)&&(l=!0):"function"==typeof g?(m={column:a,value:f,rowData:e,msg:y},!1==g.call(k,m)?(l=!1,m.msg!=y&&(y=m.msg)):l=!0):l=!0,!l))return{valid:!1,msg:y,column:a,warn:n.warn,dataIndx:a.dataIndx,validation:n}}return{valid:!0}};f.isValidCell=function(e){var k=this.that,a=e.rowData,b=e.rowIndx,f=e.value,c=e.valueDef,h=e.column,d=e.focusInvalid,n=k.options,g=n.bootstrap,s=e.allowInvalid,y=h.dataIndx,m=n.validation,x=n.warning,B=n.editModel,D=B.invalidClass,C=B.warnClass,B=document.activeElement;
if(e.checkEditable&&!1==k.isEditableCell({rowIndx:b,dataIndx:y}))return{valid:!0};e=this._isValidCell({column:h,value:f,rowData:a});var f=e.valid,h=e.warn,E=e.msg;if(f)k.data({rowData:a,dataIndx:y,data:"pq_valid"})&&(k.removeClass({rowData:a,rowIndx:b,dataIndx:y,cls:C+" "+D}),k.removeData({rowData:a,dataIndx:y,data:"pq_valid"}));else var m=l.extend({},h?x:m,e.validation),F=m.css,K=m.cls,H=m.icon,N=m.style;if(s||h){if(f)return{valid:!0};k.addClass({rowData:a,rowIndx:b,dataIndx:y,cls:h?C:D});k.data({rowData:a,
dataIndx:y,data:{pq_valid:{css:F,icon:H,style:N,msg:E,cls:K}}});return e}if(!f){if(null==b&&(a=k.getRowIndx({rowData:a,dataUF:!0}),b=a.rowIndx,null==b||a.uf))return e.uf=a.uf,e;if(d){var J;if(!c)k.goToPage({rowIndx:b}),b={rowIndx:b,dataIndx:y},b=k.normalize(b),J=k.getCell(b),k["cell"==n.selectionModel.type?"setSelection":"scrollCell"](b),k.focus(b);else if(l(B).hasClass("pq-editor-focus")&&(c=n.editModel.indices)){n=c.rowIndx;c=c.dataIndx;if(null!=b&&b!=n)throw"incorrect usage of isValid rowIndx: "+
b;if(y!=c)throw"incorrect usage of isValid dataIndx: "+y;k.editCell({rowIndx:n,dataIndx:y})}var G;if(J||(G=k.getEditCell())&&G.$cell){k=J||G.$cell;k.attr("title",E);J="tooltip";G="open";g.on&&g.tooltip&&(J=g.tooltip,G="show");try{k[J]("destroy")}catch(O){}k[J]({trigger:"manual",position:{my:"left center+5",at:"right center"},content:function(){return(""==H?"":"<span class='ui-icon "+H+" pq-tooltip-icon'></span>")+E},open:function(e,k){var a=k.tooltip;K&&a.addClass(K);if(N){var b=a.attr("style");a.attr("style",
b+";"+N)}F&&a.tooltip.css(F)}})[J](G)}}return e}if(c&&(G=k.getEditCell())&&G.$cell){k=G.$cell;k.removeAttr("title");try{k.tooltip("destroy")}catch(I){}}return{valid:!0}};d.isValid=function(e){return this.iIsValid.isValid(e)};f.isValid=function(e){e=e||{};var k=this.that,a=e.allowInvalid,b=e.focusInvalid,f=e.checkEditable,a=null==a?!1:a,c=e.dataIndx;if(null!=c){var h=k.columns[c],d=e.rowData||k.getRowData(e),n=e.hasOwnProperty("value"),k=n?e.value:d[c],k=this.isValidCell({rowData:d,checkEditable:f,
rowIndx:e.rowIndx,value:k,valueDef:n,column:h,allowInvalid:a,focusInvalid:b});return k.valid||k.warn?{valid:!0}:k}if(null!=e.rowIndx||null!=e.rowIndxPage||null!=e.rowData)for(var d=e.rowData||k.getRowData(e),g=k.colModel,n=[],l=0,m=g.length;l<m;l++){if(h=g[l],!h.hidden&&(c=h.dataIndx,k=d[c],k=this.isValidCell({rowData:d,value:k,column:h,rowIndx:e.rowIndx,checkEditable:f,allowInvalid:a,focusInvalid:b}),!k.valid&&!k.warn))if(a)n.push({rowData:d,dataIndx:c,column:h});else return k}else{e=e.data?e.data:
k.options.dataModel.data;n=[];if(!e)return null;l=0;for(m=e.length;l<m;l++){d=e[l];if(f&&(h=this.getRowIndx({rowData:d}).rowIndx,null==h||!1==k.isEditableRow({rowData:d,rowIndx:h})))continue;d=this.isValid({rowData:d,rowIndx:h,checkEditable:f,allowInvalid:a,focusInvalid:b});c=d.cells;if(!1===a){if(!d.valid)return d}else c&&c.length&&(n=n.concat(c))}}return a&&n.length?{cells:n,valid:!1}:{valid:!0}};d.isValidChange=function(e){e=e||{};var k=this.getChanges(),k=k.updateList.concat(k.addList);e.data=
k;return this.isValid(e)};d.isEditableRow=function(e){var k=this.options.editable;return null!=k?"function"==typeof k?k.call(this,this.normalize(e)):k:!0};d.isEditableCell=function(e){e=this.normalize(e);var k=e.column,a=k.editable;return e.checkVisible&&k.hidden?!1:null!=a?"function"==typeof a?a.call(this,e):a:!0};d._onContMouseDown=function(e){this.blurEditor({blurIfFocus:!0});if(!1===this._trigger("contMouseDown",e,null))return!1;var k=l(e.target);e=k.closest(".pq-grid-cell,.pq-grid-number-cell");
k=k.closest(".pq-grid-row");e.length||k.length||(e=this.$cont[0],e.setAttribute("tabindex",0),e.focus());return!0};d._onCellMouseDown=function(e){var k=l(e.currentTarget),a=this.getCellIndices({$td:k});if(null!=a.rowIndx)return a=this.iMerge.getRootCell(a.rowIndx,a.colIndx,"o"),a=this.normalize(a),a.$td=k,!1==this._trigger("cellMouseDown",e,a)?!1:!0};d._onRowMouseDown=function(e){var k=l(e.currentTarget),a=this.getRowIndx({$tr:k});a.$tr=k;return!1==this._trigger("rowMouseDown",e,a)?!1:!0};d._onCellMouseEnter=
function(e,k){var a=this.options,b=this.getCellIndices({$td:k});if(null!=b.rowIndx&&null!=b.colIndx){if(!1===this._trigger("cellMouseEnter",e,b))return!1;"cell"==a.hoverMode&&this.highlightCell(k);return!0}};d._onRowMouseEnter=function(e,k){var a=this.options,b=this.getRowIndx({$tr:k}),f=b.rowIndxPage;if(!1===this._trigger("rowMouseEnter",e,b))return!1;"row"==a.hoverMode&&this.highlightRow(f);return!0};d._onCellMouseLeave=function(e,k){"cell"==this.options.hoverMode&&this.unHighlightCell(k);return!0};
d._onRowMouseLeave=function(e,k){var a=this.getRowIndx({$tr:k}).rowIndxPage;"row"==this.options.hoverMode&&this.unHighlightRow(a);return!0};d.enableSelection=function(){this.element.removeClass("pq-disable-select").off("selectstart"+this.eventNamespace)};d.disableSelection=function(){this.element.addClass("pq-disable-select").on("selectstart"+this.eventNamespace,function(e){if(e.target){var k=l(e.target);if(k.is("input,textarea,select")||k.closest(".pq-native-select").length)return!0;e.preventDefault()}})};
d._onClickCell=function(e){var k=this.options.editModel,a=l(e.currentTarget),b=this.getCellIndices({$td:a}),b=this.iMerge.getRootCell(b.rowIndx,b.colIndx,"o"),b=this.normalize(b),f=b.rowIndx,c=b.colIndx;b.$td=a;b.evt=e;if(!1==this._trigger("cellClick",e,b))return!1;null==c||0>c||1==k.clicksToEdit&&this.isEditableRow({rowIndx:f})&&this.isEditableCell({colIndx:c,rowIndx:f})&&this.editCell(b)};d._onRightClickCell=function(e){var k=l(e.currentTarget),a=this.getCellIndices({$td:k}),b=a.rowIndxPage,f=b+
this.rowIndxOffset,a=a.colIndx,c=this.colModel;if(null!=a&&(c=c[a],!1==this._trigger("cellRightClick",e,{$td:k,rowIndxPage:b,rowIndx:f,colIndx:a,dataIndx:c.dataIndx,column:c,rowData:this.pdata[b]})))return!1};d.highlightCell=function(e){e.addClass("pq-grid-cell-hover ui-state-hover")};d.unHighlightCell=function(e){e.removeClass("pq-grid-cell-hover ui-state-hover")};d.highlightRow=function(e){isNaN(e)||(e=this.getRow({rowIndxPage:e}))&&e.addClass("pq-grid-row-hover ui-state-hover")};d.unHighlightRow=
function(e){isNaN(e)||(e=this.getRow({rowIndxPage:e}))&&e.removeClass("pq-grid-row-hover ui-state-hover")};d._getCreateEventData=function(){return{dataModel:this.options.dataModel,data:this.pdata,colModel:this.options.colModel}};d._findCellFromEvt=function(e){e=l(e.target).closest(".pq-grid-cell");if(null==e||0==e.length)return{rowIndxPage:null,colIndx:null,$td:null};var k=this.getCellIndices({$td:e});k.$td=e;return k};d._initPager=function(){var e=this,k=e.options,a=k.pageModel;a.type&&(k={bootstrap:k.bootstrap,
change:function(k,a){e.blurEditor({force:!0});var b=e.options.pageModel;void 0!=a.curPage&&(b.prevPage=b.curPage,b.curPage=a.curPage);void 0!=a.rPP&&(b.rPP=a.rPP);"remote"==b.type?e.remoteRequest({callback:function(){e._onDataAvailable({apply:!0,header:!1})}}):e.refreshView({header:!1,source:"pager"})},refresh:function(k){e.refreshDataAndView()}},k=l.extend(k,a),this.pagerW=pq.pager(a.appendTo?a.appendTo:this.$footer,k))};d.generateLoading=function(){this.$loading&&this.$loading.remove();this.$loading=
l("<div class='pq-loading'></div>").appendTo(this.element);l(["<div class='pq-loading-bg'></div><div class='pq-loading-mask ui-state-highlight'><div>",this.options.strLoading,"...</div></div>"].join("")).appendTo(this.$loading);this.$loading.find("div.pq-loading-bg").css("opacity",.2)};d._refreshLoadingString=function(){this.$loading.find("div.pq-loading-mask").children("div").html(this.options.strLoading)};d.showLoading=function(){null==this.showLoadingCounter&&(this.showLoadingCounter=0);this.showLoadingCounter++;
this.$loading.show()};d.hideLoading=function(){0<this.showLoadingCounter&&this.showLoadingCounter--;this.showLoadingCounter||this.$loading.hide()};d.refreshDataFromDataModel=function(e){e=e||{};var k=this.options,a=k.pageModel,b=k.dataModel.data,f,c=a.type;f=this._queueATriggers;for(var h in f){var d=f[h];delete f[h];this._trigger(h,d.evt,d.ui)}this._trigger("beforeRefreshData",null,{});this.rowIndxOffset=0;"local"==c?(a.totalRecords=b.length,a.totalPages=k=Math.ceil(b.length/a.rPP),a.curPage>k&&
(a.curPage=k),k&&!a.curPage&&(a.curPage=1),k=(a.curPage-1)*a.rPP,f=a.curPage*a.rPP,f>b.length&&(f=b.length),this.pdata=b.slice(k,f)):"remote"==c?(a.totalPages=k=Math.ceil(a.totalRecords/a.rPP),a.curPage>k&&(a.curPage=k),k&&!a.curPage&&(a.curPage=1),f=a.rPP,f>b.length&&(f=b.length),this.pdata=b.slice(0,f)):this.pdata=k.backwardCompat?b.slice(0):b;if("local"==c||"remote"==c)this.rowIndxOffset=a.rPP*(a.curPage-1);this._trigger("dataReady",null,{source:e.source})};d.getQueryStringCRUD=function(){return""};
d.remoteRequest=function(e){this.loading&&this.xhr.abort();e=e||{};var k=this,a="",b="",f=this.options,c=!1,h=this.colModel,d=f.dataModel,n=f.sortModel,g=f.filterModel,s=f.pageModel;if("function"==typeof d.getUrl)(h=d.getUrl.call(this,{colModel:h,dataModel:d,sortModel:n,groupModel:f.groupModel,pageModel:s,filterModel:g}))&&h.url&&(a=h.url),h&&h.data&&(b=h.data);else if("string"==typeof d.url){var a=d.url,b={},f={},m={};"remote"==n.type&&(e.initBySort||this.sort({initByRemote:!0}),(n=this.iSort.getQueryStringSort())&&
(b={pq_sort:n}));"remote"==s.type&&(m={pq_curpage:s.curPage,pq_rpp:s.rPP});"local"!=g.type&&(g=this.iFilterData.getQueryStringFilter())&&(c=!0,f={pq_filter:g});g=d.postData;s=d.postDataOnce;g&&"function"==typeof g&&(g=g.call(this,{colModel:h,dataModel:d}));b=l.extend({pq_datatype:d.dataType},f,m,b,g,s)}a&&(this.loading=!0,this.showLoading(),this.xhr=l.ajax({url:a,dataType:d.dataType,async:null==d.async?!0:d.async,cache:d.cache,contentType:d.contentType,type:d.method,data:b,beforeSend:function(e,a){if("function"==
typeof d.beforeSend)return d.beforeSend.call(k,e,a)},success:function(a,b,f){k.onRemoteSuccess(a,b,f,c,e)},error:function(e,a,b){k.hideLoading();k.loading=!1;if("function"==typeof d.error)d.error.call(k,e,a,b);else if("abort"!=b)throw"Error : "+b;}}))};d.onRemoteSuccess=function(e,a,b,f,c){var h=this.options,d=this.colModel,n=h.pageModel,h=h.dataModel;e="function"==typeof h.getData?h.getData.call(this,e,a,b):e;h.data=e.data;"remote"==n.type&&(null!=e.curPage&&(n.curPage=e.curPage),null!=e.totalRecords&&
(n.totalRecords=e.totalRecords));this.hideLoading();this.loading=!1;this._trigger("load",null,{dataModel:h,colModel:d});f&&(this._queueATriggers.filter={ui:{}});c.callback&&c.callback()};d._refreshTitle=function(){this.$title.html(this.options.title)};d._destroyDraggable=function(){var e=this.element,a=e.parent(".pq-wrapper");a.length&&a.data("draggable")&&(a.draggable("destroy"),this.$title.removeClass("pq-draggable pq-no-capture"),e.unwrap(".pq-wrapper"))};d._refreshDraggable=function(){var e=this.element,
a=this.$title;this.options.draggable?(a.addClass("pq-draggable pq-no-capture"),e.parent(".pq-wrapper").length||e.wrap("<div class='pq-wrapper' />"),e.parent(".pq-wrapper").draggable({handle:a})):this._destroyDraggable()};d._refreshResizable=function(){var e=this,a=this.element,b=this.options,f=-1<(b.width+"").indexOf("%"),c=-1<(b.height+"").indexOf("%"),h="auto"==b.width,d="flex"==b.width,n="flex"==b.height;if(!b.resizable||(n||c)&&(d||f||h))this._destroyResizable();else{var g="e,s,se";if(n||c)g=
"e";else if(d||f||h)g="s";f=!0;a.hasClass("ui-resizable")&&(c=a.resizable("option","handles"),g==c?f=!1:this._destroyResizable());f&&a.resizable({helper:"ui-state-default",handles:g,minWidth:b.minWidth,minHeight:b.minHeight?b.minHeight:100,delay:0,start:function(e,a){l(a.helper).css({opacity:.5,background:"#ccc",border:"1px solid steelblue"})},resize:function(e,a){},stop:function(a,k){var f=e.element,c=f[0],h=b.width,d=b.height,n=-1<(h+"").indexOf("%"),A=-1<(d+"").indexOf("%"),t=!1;c.style.width=
c.offsetWidth+3+"px";c.style.height=c.offsetHeight+3+"px";A||"flex"==d||(t=!0,b.height=c.offsetHeight);n||"auto"==h||"flex"==h||(t=!0,b.width=c.offsetWidth);e.refresh();f.css("position","relative");t&&l(window).trigger("resize")}})}};d._refreshAfterResize=function(){var e=this.options,a=e.width,b=e.height,e=-1!=(a+"").indexOf("%")?!0:!1,a="auto"===a,b=-1!=(b+"").indexOf("%")?!0:!1;(e||a||b)&&this.refresh()};d.refresh=function(e){this.iRefresh.refresh(e)};d.refreshView=function(e){null!=this.options.editModel.indices&&
this.blurEditor({force:!0});this.refreshDataFromDataModel(e);this.refresh(e)};d._refreshPager=function(){var e=this.options,a=e.pageModel,b=a.rPP,f=a.totalRecords;a.type?(a=e.pageModel,this.pagerW||this._initPager(),this.pagerW.option(a),f>b?this.$bottom.css("display",""):e.showBottom||this.$bottom.css("display","none")):(this.pagerW&&(this.pagerW.destroy(),this.pagerW=null),e.showBottom?this.$bottom.css("display",""):this.$bottom.css("display","none"))};d.getInstance=function(){return{grid:this}};
d.refreshDataAndView=function(e){if("remote"==this.options.dataModel.location){var a=this;this.remoteRequest({callback:function(){a._onDataAvailable(e)}})}else this._onDataAvailable(e)};d.getColIndx=function(e){var a=e.dataIndx;e=e.column;var b;if(e)b=!0;else if(void 0===a)throw"dataIndx / column NA";var f=this.colModel,c=f.length;if(b)for(a=0;a<c;a++){if(f[a]==e)return a}else if(a=this.colIndxs[a],null!=a)return a;return-1};d.getColumn=function(e){if(null==e.dataIndx)throw"dataIndx N/A";return this.columns[e.dataIndx]};
d._generateCellRowOutline=function(){var e=this.options,a=e.editModel;if(this.$div_focus){if(e.debug)throw"this.$div_focus already present assert failed";}else e=this.element,a.inline&&(e=this.getCell(a.indices),e.css("padding",0).empty()),this.$div_focus=l("<div class='pq-editor-outer'><div class='pq-editor-inner'></div></div>").appendTo(e),a=l.extend({all:!0},a.indices),a=this.getCell(a),a.css("height",a[0].offsetHeight),a.empty(),this.refreshEditorPos()};d._removeEditOutline=function(e){if(this.$div_focus){e=
this.$div_focus.find(".pq-editor-focus");e.hasClass("hasDatepicker")&&e.datepicker("hide").datepicker("destroy");if(e[0]==document.activeElement){var a=this._blurEditMode;this._blurEditMode=!0;e.blur();this._blurEditMode=a}this.$div_focus.remove();delete this.$div_focus;e=this.options.editModel;a=l.extend({},e.indices);e.indices=null;a.rowData=void 0;this.refreshCell(a)}};d.refreshEditorPos=function(){var e=this.options.editModel,a=e.cellBorderWidth,b=this.$div_focus,f=this.getCell(e.indices);if(!f||
!f.length)return!1;var e=f[0].offsetWidth,c=f[0].offsetHeight,h=this.element.offset(),f=f.offset();b.css({height:c,width:e-1,borderWidth:a,left:f.left-h.left-1,top:f.top-h.top-1})};d.setEditorPosTimer=function(){var e=this,a=this.options;this._refreshEditorPosTimer&&(window.clearInterval(this._refreshEditorPosTimer),this._refreshEditorPosTimer=null);this._refreshEditorPosTimer=window.setInterval(function(){a.editModel.indices&&e.refreshEditorPos()},200)};d.get$Tbl=function(e,a){var b=this.$tbl,f=
[];if(b&&b.length){var c=this.pqpanes,h=this.options,d=h.freezeRows,h=h.freezeCols;c.h&&c.v?null==a?e>=d?f.push(b[2],b[3]):f.push(b[0],b[1]):f=a>=h&&e>=d?b[3]:a<h&&e>=d?b[2]:a>=h&&e<d?b[1]:b[0]:f=c.v?null==a?b:a>=h?b[1]:b[0]:c.h?e>=d?b[1]:b[0]:b[0];if(f)return l(f)}};d.scrollCell=function(e){this.scrollRow(e);this.scrollColumn(e)};d.scrollY=function(e){this.vscroll.option("cur_pos",e);this.vscroll.scroll()};d.scrollRow=function(e){var a=this.options;e=this.normalize(e);var b=e.rowIndxPage,f=e.rowData;
if(!this.pdata||b>=this.pdata.length||!f||f.pq_hidden)return!1;a.virtualY?this._scrollRowVirtual(e):this.iMouseSelection.scrollRowNonVirtual(e)};d._scrollRowVirtual=function(e){var a=this.options,b=e.rowIndxPage,f=this.iHierarchy?!0:!1,c=e.rowIndx;e=this.vscroll;var h=this.scrollCurPos,b=null==b?c-this.rowIndxOffset:b,c=parseInt(a.freezeRows);if(!(b<c)&&(a=this._calcCurPosFromRowIndxPage(b),null!=a)){a<h&&(e.option("cur_pos",a),e.scroll());var d=this.get$Tbl(b);if(!d||!d.length)return null;var n=
d.children("tbody").children("tr[pq-row-indx="+b+"]"),g=b=n.last();1<n.length&&(g=n.first());var l=b[0],n=parseInt(d.css("marginTop"));if(void 0==l)e.option("cur_pos",a),e.scroll();else{var l=l.offsetTop+l.offsetHeight,s=this.iRefresh.getEContHt(),m=this._getSBHeight(),g=g.prev("tr");if(!g.hasClass("pq-row-hidden")&&!g.hasClass("pq-last-frozen-row")&&l>s-n){g=l-(s-m-n);n=d.children().children("tr");l=d=0;c?(c=n.filter("tr.pq-last-frozen-row").last().next(),0==c.length&&(c=n.filter("tr.pq-row-hidden").next())):
c=n.filter("tr.pq-row-hidden").next();do{if(!c.length)break;d+=c[0].offsetHeight;if(c[0]==b[0])break;else if(f&&!1!=c.hasClass("pq-detail-child")||l++,d>=g)break;c=c.next()}while(1);f=h+l;f>a&&(f=a);h=e.option("num_eles");h<f+1&&(h=f+1);e.option({num_eles:h,cur_pos:f});e.scroll()}}}};d.blurEditor=function(e){if(this.$div_focus){var a=this.$div_focus.find(".pq-editor-focus");if(e&&e.blurIfFocus)document.activeElement==a[0]&&a.blur();else return a.triggerHandler("blur",e)}};d._scrollColumnVirtual=function(e){var a=
e.colIndx,b=this.hscroll,a=null==a?this.colIndxs[e.dataIndx]:a;e=this.options.freezeCols;var f=this._calcRightEdgeCol(a).width,c=this.iRefresh.getEContWd();if(f>c){for(var f=this.calcWidthCols(-1,a+1)-c,c=this.colModel,h=c.length,d=0,n=0,g=e;g<h;g++){var l=c[g];l.hidden||(d+=l.outerWidth);if(g==a){n=g-e-this._calcNumHiddenUnFrozens(g);break}else if(d>=f){n=g-e-this._calcNumHiddenUnFrozens(g)+1;break}}b.option("cur_pos",n);b.scroll();return!0}return a>=e&&a<this.initH?(a=a-e-this._calcNumHiddenUnFrozens(a),
b.option("cur_pos",a),b.scroll(),!0):!1};d.scrollColumn=function(e){var a=this.options;return"flex"!==a.width||a.maxWidth?a.virtualX?this._scrollColumnVirtual(e):this.iMouseSelection.scrollColumnNonVirtual(e):!1};d.selection=function(e){if(e){var a=e.method,b,f=e.type;"row"==f?b=this.iRows[a](e):"cell"==f&&(b=this.iCells[a](e));if("add"==a||"remove"==a||"removeAll"==a)this.iSelection.dirty=!0,this.iSelection._trigger();return b}e=this.iSelection;e.isDirty()&&e.refresh();return e};d.goToPage=function(e){var a=
this.options.pageModel;if("local"==a.type||"remote"==a.type){var b=e.rowIndx,f=a.rPP;e=null==e.page?Math.ceil((b+1)/f):e.page;e!=a.curPage&&(a.curPage=e,"local"==a.type?this.refreshView():this.refreshDataAndView())}};d.setSelection=function(e){if(null==e)return this.iSelection.removeAll(),!0;var a=this.pdata;if(!a||!a.length)return!1;e=this.normalize(e);var a=e.rowIndx,b=e.rowIndxPage,f=e.colIndx;e.rowData&&null==a&&(b=this.getRowIndx(e),e.rowIndx=a=b.rowIndx,e.rowIndxPage=b.rowIndxPage);if(null==
a||0>a||0>f||f>=this.colModel.length)return!1;this.goToPage(e);b=a-this.rowIndxOffset;this.scrollRow({rowIndxPage:b});null==f?this.range({r1:a}).select():(this.scrollColumn({colIndx:f}),this.range({r1:a,c1:f}).select());!1!==e.focus&&this.focus({rowIndxPage:b,colIndx:null==f?this.getFirstVisibleCI():f})};d.getColModel=function(){return this.colModel};d.saveEditCell=function(e){var a=this.options,b=a.editModel;if(!b.indices)return null;var f=l.extend({},b.indices);e=e?e.evt:null;var c=f.rowIndxPage,
b=c+this.rowIndxOffset,h=this.colModel[f.colIndx],f=h.dataIndx,d=this.pdata[c],n=a.dataModel,g;if(null==d)return null;if(null!=c){a=this.getEditCellData();if(l.isPlainObject(a)){g={};for(var v in a)g[v]=d[v]}else g=this.readCell(d,h);"<br>"==a&&(a="");null==g&&""===a&&(a=null);v={rowIndx:b,rowIndxPage:c,dataIndx:f,column:h,newVal:a,value:a,oldVal:g,rowData:d,dataModel:n};if(!1===this._trigger("cellBeforeSave",e,v))return!1;c={};h=!1;l.isPlainObject(a)?(c=a,h=!0):c[f]=a;if(!1===this.updateRow({row:c,
rowIndx:b,refresh:h,silent:!0,source:"edit",checkEditable:!1}))return!1;this._trigger("cellSave",e,v);return!0}};d._addInvalid=function(e){};d._digestData=function(e){if(!1===this._trigger("beforeValidate",null,e))return!1;var a=this.options,b=a.editModel,f=a.dataModel,c=f.data,h=a.colModel,d=a.pageModel,n=a.historyModel,g=e.validate,g=null==g?b.validate:g,l="remote"==d.type,s=e.allowInvalid,s=null==s?b.allowInvalid:s,m=a.trackModel,b=e.track,b=null==b?null==a.track?m.on:a.track:b,z=e.history,z=null==
z?n.on:z,x=this.iHistory,n=this.iUCData,B=e.checkEditable,B=null==B?!0:B,D=e.checkEditableAdd,D=null==D?B:D,m=this.saveCell,C=this.columns,E=this.colIndxs,F=e.source,K=this.rowIndxOffset,H=this.getValueFromDataType,N=e.rowList,J=N.length;c||(c=a.dataModel.data=[]);for(var G=[],O=0;O<J;O++){var I=N[O],M=I.newRow,P=I.rowData,L=I.type,Q=I.checkEditable,R=I.rowIndx,V=I.oldRow;null==Q&&("update"==L?Q=B:"add"==L&&(Q=D));if("update"==L){if(!V)throw"oldRow required while update";if(Q&&!0!==a.editable&&!1===
this.isEditableRow({rowIndx:R,rowData:P}))continue}else if("delete"==L){G.push(I);continue}if("add"==L)for(var U=0,W=h.length;U<W;U++){var T=h[U],S=T.dataIndx;M[S]=M[S]}for(S in M)if(T=C[S],U=E[S],T)if(Q&&null!=T.editable&&!1===this.isEditableCell({rowIndx:R,colIndx:U,dataIndx:S}))delete M[S],V&&delete V[S];else{var X=T.dataType,U=H(M[S],X),W=V?V[S]:void 0,W=void 0!==W?H(W,X):void 0;M[S]=U;if(g&&T.validations)if("edit"==F&&!1===s){if(T=this.isValid({focusInvalid:!0,dataIndx:S,rowIndx:R,value:U}),
!1==T.valid&&!T.warn)return!1}else T=this.iIsValid.isValidCell({column:T,rowData:"add"==L?M:P,allowInvalid:s,value:U}),!1===T.valid&&(!1!==s||T.warn||delete M[S]);"update"==L&&U===W&&(delete M[S],V&&delete V[S])}if(M)if("update"==L)for(S in M){G.push(I);break}else G.push(I)}N=e.rowList=G;J=N.length;if(!J)return"edit"==F?null:!1;z&&(x.increment(),x.push({rowList:N}));for(O=0;O<J;O++)if(I=N[O],L=I.type,M=I.newRow,R=I.rowIndx,a=I.rowIndxPage,P=I.rowData,"update"==L)for(S in b&&n.update({rowData:P,row:M,
refresh:!1}),M)T=C[S],U=M[S],m(P,T,U);else if("add"==L)b&&n.add({rowData:M}),null==R&&null==a?c.push(M):(a=R-K,a=l?a:R,c.splice(a,0,M)),l&&d.totalRecords++;else if("delete"==L){a=this.getRowIndx({rowData:P,dataUF:!0});h=a.uf;R=a.rowIndx;if(b)n["delete"]({rowIndx:R,rowData:P});a=R-K;a=l?a:R;h?f.dataUF.splice(R,1):(a=c.splice(a,1))&&a.length&&l&&d.totalRecords--}this._trigger("change",null,e);return!0};d.refreshColumn=function(e){e=this.normalize(e);var a=this.initV,b=this.finalV,f=this.options.freezeRows,
c=e.colIndx,h=e.dataIndx,d=e.column;e.skip=!0;for(var n=0;n<=b;n++)n<a&&n>=f&&(n=a),e.rowIndxPage=n,this.refreshCell(e);this._trigger("refreshColumn",null,{column:d,colIndx:c,dataIndx:h});this.iRefresh.softRefresh()};d.refreshCell=function(e){e=this.normalize(e);if(this.pdata){var a=e.skip,b=e.rowIndx,f=e.rowIndxPage,c=e.colIndx,h=this.iMerge;if(e.rowData){var d=this.getCell({all:!0,rowIndxPage:f,colIndx:c});if(d&&0<d.length){var n=e;h.ismergedCell(b,c)&&(n=h.getRootCell(b,c,"a"));var b=this.iGenerateView.renderCell(n),
g;b&&(d.replaceWith(b),(g=this._focusElement)&&g.rowIndxPage==f&&this.focus(),a||(this._trigger("refreshCell",null,e),this.iRefresh.softRefresh()))}}}};d.refreshRow=function(e){e=this.normalize(e);if(this.pdata){var a=e.rowIndx,b=e.rowIndxPage,f=this.options,c=f.freezeRows,h=e.rowData;if(!h||h.pq_hidden||b>this.finalV||b<this.initV&&b>=c)return null;var d=this.getRow({all:!0,rowIndxPage:b}),n,g=[];this.iGenerateView.refreshRow(b,g);g=g.join("");if(d&&d.length)d.replaceWith(g);else if(f.virtualY)if(b==
this.finalV)this.$tbl.append(g);else if(b==this.initV)for(f=this.$tbl,d=0;d<f.length;d++)l(f[d]).children("tbody").children(c?".pq-last-frozen-row":"tr:first").after(g);else throw"refreshRow > rip not found";else return!1;(n=this._focusElement)&&n.rowIndxPage==b&&this.focus();this._trigger("refreshRow",null,{rowData:h,rowIndx:a,rowIndxPage:b});!1!==e.refresh&&this.iRefresh.softRefresh();return!0}};d.quitEditMode=function(e){if(!this._quitEditMode){var a=!1,b=!1,f=!1,c=this.options.editModel,h=c.indices,
d=void 0;this._quitEditMode=!0;e&&(a=e.old,b=e.silent,f=e.fireOnly,d=e.evt);h&&(b||a||this._trigger("editorEnd",d,h),f||(this._removeEditOutline(e),c.indices=null));this._quitEditMode=null}};d.getViewPortRowsIndx=function(){return{beginIndx:this.initV,endIndx:this.finalV}};d.getViewPortIndx=function(){return{initV:this.initV,finalV:this.finalV,initH:this.initH,finalH:this.finalH}};d.getRowIndxOffset=function(){return this.rowIndxOffset};d.getEditCell=function(){var e=this.options.editModel;if(e.indices){var e=
this.getCell(e.indices),a=this.$div_focus.children(".pq-editor-inner"),b=a.find(".pq-editor-focus");return{$td:e,$cell:a,$editor:b}}return{}};d.editCell=function(e){e=this.normalize(e);var a=this.iMerge,b=e.rowIndx,f=e.colIndx;if(a.ismergedCell(b,f)&&(a=a.getRootCell(b,f,"o"),a.rowIndx!=e.rowIndx||a.colIndx!=e.colIndx))return!1;this.scrollRow(e);this.scrollColumn(e);if((a=this.getCell(e))&&a.length)return this._editCell(e)};d.getFirstEditableColIndx=function(e){if(null==e.rowIndx)throw"rowIndx NA";
if(!this.isEditableRow(e))return-1;for(var a=this.colModel,b=0;b<a.length;b++)if(e.colIndx=b,this.isEditableCell(e)&&!a[b].hidden)return b;return-1};d.editFirstCellInRow=function(e){var a=this.rowIndxOffset,b=e.rowIndx;e=e.rowIndxPage;b=null==b?e+a:b;e=null==e?b-a:e;a=this.getFirstEditableColIndx({rowIndx:b});-1!=a&&this.editCell({rowIndxPage:e,colIndx:a})};d._editCell=function(e){var a=this.normalize(e),b=this;e=a.evt;var f=a.rowIndxPage,h=a.colIndx,d=b.pdata;if(!d||f>=d.length)return!1;var n=this.options,
g=n.editModel,d=d[f],q=a.rowIndx,v=this.colModel[h],s=v.dataIndx,m=b.readCell(d,v),z={rowIndx:q,rowIndxPage:f,cellData:m,rowData:d,dataIndx:s,colIndx:h,column:v},x=v.editor,x="function"==typeof x?x.call(this,z):x;void 0===x&&"function"==typeof n.geditor&&(x=n.geditor.call(this,z));if(!1!==x){x&&x.getData&&(g._getData=x.getData);var B=n.editor,D=x?l.extend({},B,x):B,n=!1;if(g.indices){x=g.indices;if(x.rowIndxPage==f&&x.colIndx==h){this.refreshEditorPos();var C=this.$div_focus.find(".pq-editor-focus");
window.setTimeout(function(){C.focus()},0);return!1}if(!1===this.blurEditor({evt:e}))return!1;this.quitEditMode({evt:e})}g.indices={rowIndxPage:f,rowIndx:q,colIndx:h,column:v,dataIndx:s};this._generateCellRowOutline();x=this.$div_focus.children(".pq-editor-inner");"right"==v.align?x.addClass("pq-align-right"):"center"==v.align?x.addClass("pq-align-center"):x.addClass("pq-align-left");z.$cell=x;var E,F=D.type,a=null==a.select?D.select:a.select,K=D.init,H=D.valueIndx,N=D.dataMap,J=D.mapIndices,J=J?
J:{},G=D.cls||"",G="function"===typeof G?G.call(this,z):G;E="pq-editor-focus "+G;var G=E+" pq-cell-editor ",O=D.attr||"",O="function"===typeof O?O.call(this,z):O,I=D.style||"",I=(I="function"===typeof I?I.call(this,z):I)?"style='"+I+"'":"";z.cls=E;z.attr=O;"function"==typeof F&&(E=F.call(this,z))&&(F=E);B._type=F;"checkbox"==F?(D=D.subtype,x.html("<input "+(m?"checked='checked'":"")+" class='"+G+"' "+O+" "+I+" type=checkbox name='"+s+"' />"),B=x.children("input"),"triple"==D&&(B.pqval({val:m}),x.click(function(e){l(this).children("input").pqval({incr:!0})}))):
"textarea"==F||"select"==F||"textbox"==F?("textarea"==F?E="<textarea class='"+G+"' "+O+" "+I+" name='"+s+"' ></textarea>":"select"==F?(B=D.options||[],"function"===typeof B&&(B=B.call(this,z)),G=[O," class='",G,"' ",I," name='",s,"'"].join(""),E=c.select({options:B,attr:G,prepend:D.prepend,labelIndx:D.labelIndx,valueIndx:H,groupIndx:D.groupIndx,dataMap:N})):E="<input class='"+G+"' "+O+" "+I+" type=text name='"+s+"' />",l(E).appendTo(x).val("select"==F&&null!=H&&(J[H]||this.columns[H])?J[H]?d[J[H]]:
d[H]:m)):F&&"contenteditable"!=F||(x.html("<div contenteditable='true' tabindx='0' "+I+" "+O+" class='"+G+"'></div>"),x.children().html(m),n=!0);"function"==typeof K&&K.call(this,z);var b=this,C=x.children(".pq-editor-focus"),M=g.filterKeys;(m=v.editModel)&&void 0!==m.filterKeys&&(M=m.filterKeys);var P={$cell:x,$editor:C,dataIndx:s,column:v,colIndx:h,rowIndx:q,rowIndxPage:f,rowData:d};g.indices=P;C.data({FK:M}).on("click",function(e){l(this).focus()}).on("keydown",function(e){b.iKeyNav._keyDownInEdit(e)}).on("keypress",
function(e){return b.iKeyNav._keyPressInEdit(e,{FK:M})}).on("keyup",function(e){return b.iKeyNav._keyUpInEdit(e,{FK:M})}).on("blur",function(e,a){var k=b.options.editModel,f=k.onBlur,c="save"==f,h="validate"==f,d=k.cancelBlurCls,n=a?a.force:!1;if(!b._quitEditMode&&!b._blurEditMode&&k.indices){k=l(e.target);if(!n){if(!1===b._trigger("editorBlur",e,P)||!f||d&&k.hasClass(d))return;if(k.hasClass("hasDatepicker")){if(k.datepicker("widget").is(":visible"))return!1}else if(k.hasClass("ui-autocomplete-input")){if(k.autocomplete("widget").is(":visible"))return}else if(k.hasClass("ui-multiselect")){if(l(".ui-multiselect-menu").is(":visible")||
l(document.activeElement).closest(".ui-multiselect-menu").length)return}else if(k.hasClass("pq-select-button")&&(l(".pq-select-menu").is(":visible")||l(document.activeElement).closest(".pq-select-menu").length))return}b._blurEditMode=!0;if(!b.saveEditCell({evt:e,silent:n||c||!h})&&!n&&h)return b._deleteBlurEditMode(),!1;b.quitEditMode({evt:e});b._deleteBlurEditMode()}}).on("focus",function(e){b._trigger("editorFocus",e,P)});b._trigger("editorBegin",e,P);C.focus();window.setTimeout(function(){!1===
l(document.activeElement).hasClass("pq-editor-focus")&&(b.element?b.element.find(".pq-editor-focus"):l()).focus()},0);if(a)if(n)try{var L=C[0],Q=document.createRange();Q.selectNodeContents(L);var R=window.getSelection();R.removeAllRanges();R.addRange(Q)}catch(V){}else C.select()}};d._deleteBlurEditMode=function(e){var a=this;e=e?e:{};a._blurEditMode&&(e.timer?window.setTimeout(function(){delete a._blurEditMode},0):delete a._blurEditMode)};d.getRow=function(e){var a=this.normalize(e);e=a.rowIndxPage;
var a=a.all?this.$tbl:this.get$Tbl(e),b=l();if(a&&a.length){var f=a.children("tbody");null!=e&&(b=f.children("tr[pq-row-indx="+e+"]"),b.length>a.length&&(b=b.filter(".pq-detail-master")))}return b};d.getCell=function(e){var a=e.all,b=this.options,f=this.normalize(e);e=f.rowIndxPage;var c=f.rowIndx,h=f.colIndx,d=this.iMerge;if(d.ismergedCell(c,h)){b=d.getRootCell(c,h,"a");c=d.getRootCell(c,h,"o");if(!(e===c.rowIndxPage&&h===c.colIndx||e===b.rowIndxPage&&h===b.colIndx))return l();e=b.rowIndxPage;h=
c.colIndx}else if(e>=b.freezeRows&&(e<this.initV||e>this.finalV)||h>=b.freezeCols&&(h<this.initH||h>this.finalH)||!f.rowData||!f.column||f.rowData.pq_hidden||f.column.hidden)return l();return(a=a?this.$tbl:this.get$Tbl(e,h))&&a.length?a.children().children("tr[pq-row-indx="+e+"]").children("[pq-col-indx="+h+"]"):l()};d.getCellHeader=function(e){var a=e.colIndx;e=e.dataIndx;a=null==a?this.colIndxs[e]:a;e=this.$tbl_header;var b=this.options.freezeCols;return e?(1<e.length&&(e=a>=b?l(e[1]):l(e[0])),
a=e.find("[pq-col-indx="+a+"].pq-grid-col-leaf")):l()};d.getEditorIndices=function(){var e=this.options.editModel.indices;return e?l.extend({},e):null};d.getEditCellData=function(){var e=this.options,a=e.editModel,b=a.indices;if(!b)return null;var f=b.colIndx,c=b.rowIndxPage,h=b.rowIndx,d=this.colModel[f],n=d.editor,g=e.editor,e=n?l.extend({},g,n):g,v=e.valueIndx,s=e.labelIndx,n=(n=e.mapIndices)?n:{},m=d.dataIndx,z=this.$div_focus.children(".pq-editor-inner"),x,B=a._getData||e.getData;a._getData=
void 0;if("function"==typeof B)x=B.call(this,{$cell:z,rowData:b.rowData,dataIndx:m,rowIndx:h,rowIndxPage:c,column:d,colIndx:f});else if(a=g._type,"checkbox"==a)x=z.children(),x="triple"==e.subtype?x.pqval():x.is(":checked")?!0:!1;else if("contenteditable"==a)x=z.children().html();else if((b=z.find('*[name="'+m+'"]'))&&b.length)if("select"==a&&null!=v)if(n[v]||this.columns[v]){if(x={},x[n[v]?n[v]:v]=b.val(),x[n[s]?n[s]:s]=b.find("option:selected").text(),e=e.dataMap)if(a=b.find("option:selected").data("map"))for(b=
0;b<e.length;b++)f=e[b],x[n[f]?n[f]:f]=a[f]}else x=b.val();else x=b.val();else(b=z.find(".pq-editor-focus"))&&b.length&&(x=b.val());return x};d.getCellIndices=function(e){e=e.$td;if(null==e||0==e.length||e.closest(".pq-grid")[0]!=this.element[0])return{};var a=e.parent("tr").attr("pq-row-indx"),b;null!=a&&(a=parseInt(a),b=a+this.rowIndxOffset);e=e.attr("pq-col-indx");null!=e&&(e=parseInt(e));return this.iMerge.getRootCell(b,e,"o")};d.getRowsByClass=function(e){var a=this.options,b="remote"==a.pageModel.type,
f=this.rowIndxOffset,a=a.dataModel.data,c=[];if(null==a)return c;for(var h=0,d=a.length;h<d;h++){var n=a[h];if(n.pq_rowcls&&(e.rowData=n,this.hasClass(e))){var n={rowData:n},g=b?h+f:h,l=g-f;n.rowIndx=g;n.rowIndxPage=l;c.push(n)}}return c};d.getCellsByClass=function(e){var a=this.options,b="remote"==a.pageModel.type,f=this.rowIndxOffset,a=a.dataModel.data,c=[];if(null==a)return c;for(var h=0,d=a.length;h<d;h++){var n=a[h],g=b?h+f:h,l=n.pq_cellcls;if(l)for(var s in l)l={rowData:n,rowIndx:g,dataIndx:s,
cls:e.cls},this.hasClass(l)&&(l=this.normalize(l),c.push(l))}return c};d.data=function(a){var b=a.dataIndx,f=a.colIndx,b=null!=f?this.colModel[f].dataIndx:b,f=a.data,c=null==f||"string"==typeof f?!0:!1;a=a.rowData||this.getRowData(a);if(!a)return{data:null};if(null==b){b=a.pq_rowdata;if(c){var h;null!=b&&(h=null==f?b:b[f]);return{data:h}}f=l.extend(!0,a.pq_rowdata,f);a.pq_rowdata=f}else{var d=a.pq_celldata;if(c)return null!=d&&(b=d[b],h=null==f||null==b?b:b[f]),{data:h};d||(a.pq_celldata={});f=l.extend(!0,
a.pq_celldata[b],f);a.pq_celldata[b]=f}};d.attr=function(a){var b=a.rowIndx,f=a.dataIndx,c=a.colIndx,f=null!=c?this.colModel[c].dataIndx:f,c=a.attr,h=null==c||"string"==typeof c?!0:!1,d=this.rowIndxOffset,g=a.refresh;a=a.rowData||this.getRowData(a);if(!a)return{attr:null};h||!1===g||null!=b||(b=this.getRowIndx({rowData:a}).rowIndx);if(null==f){f=a.pq_rowattr;if(h){var p;null!=f&&(p=null==c?f:f[c]);return{attr:p}}c=l.extend(!0,a.pq_rowattr,c);a.pq_rowattr=c;!1!==g&&null!=b&&(b=this.getRow({rowIndxPage:b-
d}))&&(f=n(c),b.attr(f))}else{var q=a.pq_cellattr;if(h)return null!=q&&(b=q[f],p=null==c||null==b?b:b[c]),{attr:p};q||(a.pq_cellattr={});c=l.extend(!0,a.pq_cellattr[f],c);a.pq_cellattr[f]=c;!1!==g&&null!=b&&(b=this.getCell({rowIndxPage:b-d,dataIndx:f}))&&(f=n(c),b.attr(f))}};var n=function(a){var b={},f;for(f in a){var c=a[f];if(c)if("title"==f)c=c.replace(/\"/g,"&quot;"),b[f]=c;else if("style"==f&&"object"==typeof c){var h=[],d,n;for(n in c)(d=c[n])&&h.push(n+":"+d);(c=h.join(";")+(h.length?";":
""))&&(b[f]=c)}else"object"==typeof c&&(c=JSON.stringify(c)),b[f]=c}return b};d.removeData=function(a){var b=a.dataIndx,f=a.colIndx,b=null!=f?this.colModel[f].dataIndx:b,f=a.data,f=null==f?[]:f,f="string"==typeof f?f.split(" "):f,c=f.length,h=a.rowData||this.getRowData(a);if(h)if(null==b){if(b=h.pq_rowdata){if(c)for(a=0;a<c;a++){var d=f[a];delete b[d]}c&&!l.isEmptyObject(b)||delete h.pq_rowdata}}else if((h=h.pq_celldata)&&h[b]){var n=h[b];if(c)for(a=0;a<c;a++)d=f[a],delete n[d];c&&!l.isEmptyObject(n)||
delete h[b]}};d.removeAttr=function(a){var b=a.rowIndx,f=a.dataIndx,c=a.colIndx,f=null!=c?this.colModel[c].dataIndx:f,h=a.attr,h=null==h?[]:h,h="string"==typeof h?h.split(" "):h,d=h.length,c=b-this.rowIndxOffset,n=a.refresh,g=a.rowData||this.getRowData(a);if(g)if(!1!==n&&null==b&&(b=this.getRowIndx({rowData:g}).rowIndx),null==f){if(f=g.pq_rowattr){if(d)for(a=0;a<d;a++){var q=h[a];delete f[q]}else for(q in f)h.push(q);d&&!l.isEmptyObject(f)||delete g.pq_rowattr}!1!==n&&null!=b&&h.length&&(h=h.join(" "),
(b=this.getRow({rowIndxPage:c}))&&b.removeAttr(h))}else{if((g=g.pq_cellattr)&&g[f]){var v=g[f];if(d)for(a=0;a<d;a++)q=h[a],delete v[q];else for(q in v)h.push(q);d&&!l.isEmptyObject(v)||delete g[f]}!1!==n&&null!=b&&h.length&&(h=h.join(" "),(b=this.getCell({rowIndxPage:c,dataIndx:f}))&&b.removeAttr(h))}};d.normalize=function(a){var b={},f;for(f in a)b[f]=a[f];var c=b.rowIndx,h=b.rowIndxPage;a=b.dataIndx;f=b.colIndx;if(null!=h||null!=c){var d=this.rowIndxOffset,c=null==c?parseInt(h,10)+d:c,h=null==h?
parseInt(c,10)-d:h;b.rowIndx=c;b.rowIndxPage=h;b.rowData=b.rowData||this.getRowData(b)}if(null!=f||null!=a)c=this.colModel,a=null==a?c[f]?c[f].dataIndx:void 0:a,f=null==f?this.colIndxs[a]:f,b.column=c[f],b.colIndx=f,b.dataIndx=a;return b};d.addClass=function(a){var b=this.normalize(a),f=b.rowIndxPage,c=b.dataIndx,h=pq.arrayUnique;a=b.cls;var d=b.refresh,n=b.rowData;if(n)if(!1!==d&&null==f&&(f=this.getRowIndx({rowData:n}).rowIndxPage),null==c){var c=n.pq_rowcls,g;g=h((c?c+" "+a:a).split(/\s+/)).join(" ");
n.pq_rowcls=g;!1!==d&&null!=f&&(f=this.getRow({rowIndxPage:f}))&&f.addClass(a)}else{b=[];"function"!=typeof c.push?b.push(c):b=c;var l=n.pq_cellcls;l||(l=n.pq_cellcls={});for(var n=0,v=b.length;n<v;n++)c=b[n],g=(g=l[c])?g+" "+a:a,g=h(g.split(/\s+/)).join(" "),l[c]=g,!1!==d&&null!=f&&(c=this.getCell({rowIndxPage:f,dataIndx:c}))&&c.addClass(a)}};d.removeClass=function(a){var b=this.normalize(a),f=b.rowIndx,c=b.rowData,h=b.dataIndx;a=b.cls;b=b.refresh;if(c){var d=c.pq_cellcls,n=c.pq_rowcls;!1!==b&&null==
f&&(f=this.getRowIndx({rowData:c}).rowIndx);if(null==h)n&&(c.pq_rowcls=this._removeClass(n,a),null!=f&&!1!==b&&(f=this.getRow({rowIndx:f}))&&f.removeClass(a));else if(d){n=[];"function"!=typeof h.push?n.push(h):n=h;for(var g=0,l=n.length;g<l;g++){var h=n[g],v=d[h];v&&(c.pq_cellcls[h]=this._removeClass(v,a),null!=f&&!1!==b&&(h=this.getCell({rowIndx:f,dataIndx:h}))&&h.removeClass(a))}}}};d.hasClass=function(a){var b=a.dataIndx,f=a.cls;a=this.getRowData(a);f=new RegExp("\\b"+f+"\\b");return a?null==
b?(b=a.pq_rowcls)&&f.test(b)?!0:!1:(a=a.pq_cellcls)&&a[b]&&f.test(a[b])?!0:!1:null};d._removeClass=function(a,b){if(a&&b){for(var f=a.split(/\s+/),c=b.split(/\s+/),h=[],d=0,n=f.length;d<n;d++){for(var g=f[d],l=!1,v=0,s=c.length;v<s;v++)if(g===c[v]){l=!0;break}l||h.push(g)}return 1<h.length?h.join(" "):1===h.length?h[0]:null}};d.getRowIndx=function(a){var b=a.$tr,f=a.rowData,c=this.rowIndxOffset;if(f){var h=this.options.dataModel,b=this.get_p_data(),d=!1;a=a.dataUF?h.dataUF:null;h=!1;if(b)for(var n=
0,g=b.length;n<g;n++)if(b[n]==f){h=!0;break}if(!h&&a)for(d=!0,n=0,g=a.length;n<g;n++)if(a[n]==f){h=!0;break}return h?{rowIndxPage:d?void 0:n-c,uf:d,rowIndx:n,rowData:f}:{}}if(null==b||0==b.length)return{};f=b.attr("pq-row-indx");if(null==f)return{};f=parseInt(f);return{rowIndxPage:f,rowIndx:f+c}};d.search=function(a){var b=this.options,f=a.row;a=a.first;for(var c=[],h=this.rowIndxOffset,d="remote"==b.pageModel.type,b=b.dataModel.data,n=0,g=b.length;n<g;n++){var l=b[n],v=!0,s;for(s in f)f[s]!==l[s]&&
(v=!1);if(v&&(l=this.normalize({rowIndx:d?n+h:n}),c.push(l),a))break}return c};var h=function(a){this.options=a.options;this.that=a},f=h.prototype;f._incrRowIndx=function(a,b){var f=this.that,c=a;b=1;for(var f=f.pdata,h=0,d=a+1,n=f.length;d<n&&(f[d].pq_hidden||(h++,c=d,h!=b));d++);return c};f._decrRowIndx=function(a,b){var f=a,c=this.that.pdata;b=1;for(var h=0,d=a-1;0<=d&&(c[d].pq_hidden||(h++,f=d,h!=b));d--);return f};f._decrRowIndx2=function(a,b){var f=this.that,c=a+f.rowIndxOffset,h=f.iMerge,f=
f.pdata;if(h.ismergedCell(c,b)){var d=h.getRootCell(c,b,"a"),c=h.getData(c,b,"proxy_cell");b=d.colIndx;b=c?c.colIndx:b}for(c=a-1;0<=c;c--)if(!f[c].pq_hidden){a=c;break}return{rowIndxPage:a,colIndx:b}};f._incrRowIndx2=function(a,b){var f=this.that,c=a+f.rowIndxOffset,h=f.iMerge,d,f=f.pdata;if(d=h.ismergedCell(c,b)){var n=h.getRootCell(c,b,"a"),c=h.getData(c,b,"proxy_cell");b=n.colIndx;a=d.rowspan?a+d.rowspan-1:0;b=c?c.colIndx:b}c=a+1;for(h=f.length;c<h;c++)if(!f[c].pq_hidden){a=c;break}return{rowIndxPage:a,
colIndx:b}};d.addColumn=function(a){for(var b=a.colList||[{colIndx:a.colIndx,column:a.column}],f=!1!==a.history,c=this.options.colModel,h=0;h<b.length;h++){var d=b[h].colIndx,n=b[h].column;void 0==n.dataIndx&&(n.dataIndx=Math.random());null==d&&(d=b.colIndx=c.length);c.splice(d,0,n)}this.iColModel.init();f&&(this.iHistory.increment(),b.type="add",this.iHistory.push({colList:b}));this._trigger("addColumn",null,{colList:b});!1!==a.refresh&&this.refreshView()};d.deleteColumn=function(a){for(var b=a.colList||
[{colIndx:a.colIndx}],f=!1!==a.history,c=this.options.colModel,h=b.length-1;0<=h;h--){var d=b[h],n=c.splice(d.colIndx,1)[0];d.column=n}this.iColModel.init();f&&(this.iHistory.increment(),b.type="delete",this.iHistory.push({colList:b}));this._trigger("deleteColumn",null,{colList:b});!1!==a.refresh&&this.refreshView()};f._incrIndx=function(a,b,f){var c=this.that,h=c.iMerge,d,n,g,l,v=c.pdata,s=c.rowIndxOffset,m=c[f?"getLastVisibleRIP":"getFirstVisibleRIP"](),z=c.colModel,x=z.length;if(null==b){if(a==
m)return null;a=this[f?"_incrRowIndx":"_decrRowIndx"](a);return{rowIndxPage:a}}do{n=a+s;if(c=h.ismergedCell(n,b))!l&&(d=h.getData(n,b,"proxy_cell"))&&(g=d.rowIndx-s,v[g].pq_hidden||(a=g)),v[a].pq_hidden&&(a=h.getRootCell(n,b).rowIndxPage),!l&&f&&(b+=c&&c.colspan?c.colspan-1:0);b=f?b+1:b-1;if(f&&b>=x||!f&&0>b){if(a==m)return null;a=this[f?"_incrRowIndx":"_decrRowIndx"](a);b=f?0:x-1}l=z[b]}while(l&&l.hidden);return{rowIndxPage:a,colIndx:b}};f._incrEditIndx=function(a,b,f){var c=this.that,h=c.colModel,
d=h.length,n=c.iMerge,g,l=c.rowIndxOffset,v=c[f?"getLastVisibleRIP":"getFirstVisibleRIP"]();do{var s=a+l;if(g=n.ismergedCell(s,b)){if(s=n.getData(s,b,"proxy_edit_cell"))s=s.rowIndx,a=s-l;b=f?b+g.colspan:b-1}else b=f?b+1:b-1;if(f&&b>=d||!f&&0>b){if(a==v)return null;do if(a=this[f?"_incrRowIndx":"_decrRowIndx"](a),b=c.isEditableRow({rowIndxPage:a}),a==v&&!1==b)return null;while(!1==b);b=f?0:d-1}s=a+l;if(g=n.ismergedCell(s,b))a=n.getRootCell(s,b,"o"),n.setData(a.rowIndx,a.colIndx,{proxy_edit_cell:{rowIndx:s,
colIndx:b}}),s=a.rowIndx,b=a.colIndx;g=h[b];var m=c.isEditableCell({rowIndx:s,colIndx:b,checkVisible:!0}),z=g.editor,z="function"==typeof z?z.call(c,c.normalize({rowIndx:s,colIndx:b})):z;a=s-l}while(g&&(g.hidden||!1==m||!1===z));return{rowIndxPage:a,colIndx:b}};f.getMergeCell=function(a,b){var f=this.that,c=f.options,h=f.iMerge,d,n;h.ismergedCell(a,b)&&(n=h.getRootCell(a,b,"o"),h.setData(n.rowIndx,n.colIndx,{proxy_cell:{rowIndx:a,colIndx:b}}),c.virtualY&&(d=h.getRootCell(a,b,"a")));d||(a=this.getVisibleRowIndx(a),
b=this.getVisibleColIndx(b),d=f.normalize({rowIndx:a,colIndx:b}));return d};f.getVisibleRowIndx=function(a){for(var b=this.that,f=b.pdata.length,c=a-b.rowIndxOffset,h=b.getRowData({rowIndx:a});h.pq_hidden&&c<f-1;)c++,a++,h=b.getRowData({rowIndx:a});return a};f.getVisibleColIndx=function(a){for(var b=this.that.colModel,f=b.length,c=b[a];c.hidden&&a<f-1;)a++,c=b[a];return a};d._onKeyPressDown=function(a){if(0<l(a.target).closest(".pq-grid-header").length)return!1==this._trigger("headerKeyDown",a,null)?
!1:!0;if(!1===this.iKeyNav._bodyKeyPressDown(a)||!1==this._trigger("keyDown",a,null))return!1};f._saveAndMove=function(a,b){if(null==a)return b.preventDefault(),!1;var f=this.that,c=a.rowIndxPage,h=a.colIndx;f._blurEditMode=!0;if(!1===f.saveEditCell({evt:b})||!f.pdata)return f.pdata||f.quitEditMode(b),f._deleteBlurEditMode({timer:!0,msg:"_saveAndMove saveEditCell"}),b.preventDefault(),!1;f.quitEditMode(b);if(a.incr)var d=this[a.edit?"_incrEditIndx":"_incrIndx"](c,h,!b.shiftKey),c=d?d.rowIndxPage:
c,h=d?d.colIndx:h;f.scrollRow({rowIndxPage:c});f.scrollColumn({colIndx:h});this.select({rowIndx:c+f.rowIndxOffset,colIndx:h,evt:b});a.edit&&f._editCell({rowIndxPage:c,colIndx:h});f._deleteBlurEditMode({timer:!0,msg:"_saveAndMove"});b.preventDefault();return!1};f._keyPressInEdit=function(a,b){var f=this.that,c=f.options.editModel.indices;b=b?b:{};var h=b.FK,d="Backspace Left Right Up Down Del Home End".split(" "),n=c.column.dataType;return a.key&&-1!==l.inArray(a.key,d)?!0:!1===f._trigger("editorKeyPress",
a,l.extend({},c))||h&&("float"==n||"integer"==n)&&(f="float"==n?"0123456789.-":"0123456789-",c=(c=a.charCode)?c:a.keyCode,(c=String.fromCharCode(c))&&-1==f.indexOf(c))?!1:!0};f.getValText=function(a){a=a[0].nodeName.toLowerCase();var b="text";-1!=l.inArray(a,["input","textarea","select"])&&(b="val");return b};f._keyUpInEdit=function(a,b){var f=this.that,c=f.options;b=b?b:{};var h=b.FK,c=c.editModel,d=c.indices;f._trigger("editorKeyUp",a,l.extend({},d));f=d.column.dataType;if(h&&("float"==f||"integer"==
f)){var h=l(a.target),d="integer"==f?c.reInt:c.reFloat,c=this.getValText(h),n=h.data("oldVal"),g=h[c]();if(!1==d.test(g))if(d.test(n))h[c](n);else if(f="float"==f?parseFloat(n):parseInt(n),isNaN(f))h[c](0);else h[c](f)}};f._keyDownInEdit=function(a){var b=this.that,f=b.options,c=f.editModel.indices;if(c){var h=l(a.target),d=l.ui.keyCode,n=f.editModel,g=l.extend({},c),c=g.rowIndxPage,f=g.colIndx,q=g.column.editModel,n=q?l.extend({},n,q):n,q=this.getValText(h);h.data("oldVal",h[q]());if(!1==b._trigger("editorKeyDown",
a,g))return!1;if(a.keyCode==d.TAB||a.keyCode==n.saveKey)return b=a.keyCode==d.TAB?n.onTab:n.onSave,g={rowIndxPage:c,colIndx:f,incr:b?!0:!1,edit:"nextEdit"==b},this._saveAndMove(g,a);if(a.keyCode==d.ESCAPE)return b.quitEditMode({evt:a}),b.focus({rowIndxPage:c,colIndx:f}),a.preventDefault(),!1;if(a.keyCode==d.PAGE_UP||a.keyCode==d.PAGE_DOWN)return a.preventDefault(),!1;if(n.keyUpDown&&!a.altKey){if(a.keyCode==d.DOWN)return g=this._incrRowIndx2(c,f),this._saveAndMove(g,a);if(a.keyCode==d.UP)return g=
this._decrRowIndx2(c,f),this._saveAndMove(g,a)}}};f.select=function(a){var b=this.that,f=this,c=a.rowIndx,h=a.colIndx,d=a.evt;a=this.getMergeCell(c,h);var c=a.rowIndx,h=a.colIndx,n=a.rowIndxPage;a=b.options;var g=b.iSelection,q=a.selectionModel,v=q.type,s="row"==v,m="cell"==v;(a.realFocus?function(a){clearTimeout(f.timeoutID);f.timeoutID=setTimeout(function(){a()},0)}:function(a){a()})(function(){b.scrollCell({rowIndx:c,colIndx:h});var a=g.address();if(d.shiftKey&&d.keyCode!==l.ui.keyCode.TAB&&q.type&&
"single"!=q.mode&&a.length){var e=a[a.length-1],f=e.firstR,w=e.firstC,v=e.type,E=!1;"column"==v?(e.c1=w,e.c2=h,e.r1=e.r2=e.type=void 0):"row"==v?(e.r1=f,e.r2=c,e.c1=e.c2=e.type=void 0):(a={r1:f,r2:c,c1:w,c2:h,firstR:f,firstC:w},E=!0);b.range(a,E).select()}else s?b.range({r1:c,firstR:c},!1).select():m&&b.range({r1:c,c1:h,firstR:c,firstC:h}).select();b.focus({rowIndxPage:n,colIndx:h})})};f._bodyKeyPressDown=function(a){var b=this.that,f=b.rowIndxOffset,c,h,d;d=this.options;var n=b.iMerge,g=b._focusElement,
q=d.selectionModel,v=d.editModel,s=a.ctrlKey||a.metaKey,m=l.ui.keyCode,z=a.keyCode;if(v.indices)b.$div_focus.find(".pq-cell-focus").focus();else{if(g){if(d=document.activeElement,"pq-grid-cont"!=d.className&&"TD"!=d.nodeName.toUpperCase()&&"pq-grid-excel"!=d.id)return}else{g=l(a.target);if(!g.hasClass("pq-grid-cell"))return;g=b.getCellIndices({$td:g})}var x=b.normalize(g);h=x.rowIndxPage;c=x.rowIndx;d=x.colIndx;var B=b.pdata,D=x,g=!0;if(null!=c&&null!=d&&null!=x.rowData){n.ismergedCell(c,d)&&(x=D=
n.getRootCell(c,d,"o"),h=x.rowIndxPage,c=x.rowIndx,d=x.colIndx,z==m.PAGE_UP||z==m.PAGE_DOWN||z==m.SPACE||z==m.HOME||z==m.END)&&(n=n.getData(c,d,"proxy_cell"))&&(n=n.rowIndx-f,B[n].pq_hidden||(h=n,c=h+f));if(!1==b._trigger("cellKeyDown",a,D))return!1;if(z==m.LEFT||z==m.RIGHT||z==m.UP||z==m.DOWN||q.onTab&&z==m.TAB)b=null,z==m.LEFT||z==m.TAB&&a.shiftKey?b=this._incrIndx(h,d,!1):z==m.RIGHT||z==m.TAB&&!a.shiftKey?b=this._incrIndx(h,d,!0):z==m.UP?b=this._decrRowIndx2(h,d):z==m.DOWN&&(b=this._incrRowIndx2(h,
d)),b&&(c=b.rowIndxPage+f,this.select({rowIndx:c,colIndx:b.colIndx,evt:a}));else if(z==m.PAGE_DOWN||z==m.SPACE||z==m.PAGE_UP){if(b=this[z==m.PAGE_UP?"pageUp":"pageDown"](h))h=b.rowIndxPage,null!=h&&this.select({rowIndx:h+f,colIndx:d,evt:a})}else z==m.HOME?(s?c=b.getFirstVisibleRIP()+f:d=b.getFirstVisibleCI(),this.select({rowIndx:c,colIndx:d,evt:a})):z==m.END?(s?c=b.getLastVisibleRIP()+f:d=b.getLastVisibleCI(),this.select({rowIndx:c,colIndx:d,evt:a})):z==m.ENTER?(h=D.rowIndxPage,d=D.colIndx,(q=b.getCell({rowIndxPage:h,
colIndx:d}))&&0<q.length&&(c=h+f,f=b.isEditableRow({rowIndx:c}),m=b.isEditableCell({rowIndx:c,colIndx:d}),f&&m?b.editCell({rowIndxPage:h,colIndx:d}):(b=q.find("button"),b.length&&l(b[0]).click()))):s&&"65"==z?(b=b.iSelection,"row"==q.type&&"single"!=q.mode?b.selectAll({type:"row",all:q.all}):"cell"==q.type&&"single"!=q.mode&&b.selectAll({type:"cell",all:q.all})):v.pressToEdit&&(32<=z&&127>=z||189==z)&&!s?46==z?b.clear():(h=D.rowIndxPage,d=D.colIndx,(q=b.getCell({rowIndxPage:h,colIndx:d}))&&0<q.length&&
(c=h+f,f=b.isEditableRow({rowIndx:c}),m=b.isEditableCell({rowIndx:c,colIndx:d}),f&&m&&b.editCell({rowIndxPage:h,colIndx:d,select:!0})),g=!1):g=!1;g&&a.preventDefault()}}};f.incrPageSize=function(){for(var a=this.that,b=a.$tbl,f=b.children("tbody").children(".pq-grid-row"),b=parseInt(b.css("marginTop")),b=a.iRefresh.getEContHt()-b,c=f.length-1;0<=c;c--){var h=f[c];if(h.offsetTop<b)break}return{rowIndxPage:a.getRowIndx({$tr:l(h)}).rowIndxPage}};f.pageNonVirtual=function(a,b){var f=this.that,c=f.$cont[0].offsetHeight-
f._getSBHeight(),h=f.getRow({rowIndxPage:a}),d=0,n=0,g=l(h[0])[b]("tr.pq-grid-row"),q=g.length;if(0<q){do{h=g[n];d+=h.offsetHeight;if(d>=c)break;n++}while(n<q);n=0<n?n-1:n;do if(h=l(g[n]),a=f.getRowIndx({$tr:h}).rowIndxPage,null!=a)break;else n--;while(0<=n)}return a};f.pageDown=function(a){var b=this.that,f=b.options,c=b.vscroll,h=c.option("cur_pos"),d=c.option("num_eles"),n=c.option("ratio");if(f.virtualY){if(h<d-1){a=this.incrPageSize().rowIndxPage;var g=b._calcCurPosFromRowIndxPage(a);if(null==
g)return;c.option("cur_pos",g);c.scroll()}}else null!=a?a=this.pageNonVirtual(a,"nextAll"):1>n&&(f=b.iRefresh.getEContHt(),b=b.iMouseSelection,b.updateTableY(-1*f),b.syncScrollBarVert());return{rowIndxPage:a,curPos:g}};f.pageUp=function(a){var b=this.that,f=b.vscroll;if(b.options.virtualY){if(0<f.option("cur_pos")){a=this.decrPageSize().rowIndxPage;var c=b._calcCurPosFromRowIndxPage(a);if(null==c)return;f.option("cur_pos",c);f.scroll()}}else f=f.option("ratio"),null!=a?a=this.pageNonVirtual(a,"prevAll"):
0<f&&(f=b.iRefresh.getEContHt(),b=b.iMouseSelection,b.updateTableY(f),b.syncScrollBarVert());return{rowIndxPage:a,curPos:c}};f.decrPageSize=function(){var a=this.that,b=a.$tbl.children("tbody").children(".pq-grid-row"),f=a.options.freezeRows,c=a.pdata,h,d=0;if(b.length){var n;f?(n=b.filter("tr.pq-last-frozen-row"),n.length&&(n=n.next())):2<=b.length&&(n=l(b[1]));if(n&&n.length)for(h=d=a.getRowIndx({$tr:n}).rowIndxPage,b=0,a=a.pageSize-3;0<=d&&(c[d].pq_hidden||(b++,h=d,!(b>=a)));d--);}return{rowIndxPage:h}};
d._calcNumHiddenFrozens=function(){for(var a=0,b=this.options.freezeCols,f=0;f<b;f++)this.colModel[f].hidden&&a++;return a};d._calcNumHiddenUnFrozens=function(a){var b=0;a=null!=a?a:this.colModel.length;for(var f=this.options.freezeCols;f<a;f++)this.colModel[f].hidden&&b++;return b};d._getSBHeight=function(){return this.iRefresh.getSBHeight()};d._getSBWidth=function(){return this.iRefresh.getSBWidth()};d.getFirstVisibleRIP=function(a){var b=this.pdata;a=a?this.initV:0;for(var f=b.length;a<f;a++)if(!b[a].pq_hidden)return a};
d.getLastVisibleRIP=function(){for(var a=this.pdata,b=a.length-1;0<=b;b--)if(!a[b].pq_hidden)return b;return null};d.getFirstVisibleCI=function(a){var b=this.colModel,f=b.length;for(a=a?this.initH:0;a<f;a++)if(!b[a].hidden)return a;return null};d.getLastVisibleCI=function(){for(var a=this.colModel,b=a.length-1;0<=b;b--)if(!a[b].hidden)return b;return null};d.getTotalVisibleColumns=function(){for(var a=this.colModel,b=a.length,f=0,c=0;c<b;c++)a[c].hidden||f++;return f};d._calcCurPosFromRowIndxPage=
function(a){var b=this.pdata,f=this.options.freezeRows;if(a<f)return 0;for(var c=0,h=f,d=b.length;f<d;f++){var n=b[f];if(h==a)break;h++;n.pq_hidden||c++}return c>=d?null:c};d._calcCurPosFromColIndx=function(a){var b=this.colModel,f=this.options.freezeCols;if(a<f)return 0;for(var c=0,h=f,d=b.length;f<d;f++){var n=b[f];if(h==a)break;h++;n.hidden||c++}return c>=d?null:c};d.calcWidthCols=function(a,b,f){var c=0,h=this.options.numberCell,d=this.colModel;-1==a&&(h.show&&(c=f?c+1*h.width:c+h.outerWidth),
a=0);if(f)for(;a<b;a++){if((f=d[a])&&!f.hidden){if(!f._width)throw"assert failed";c+=f._width+0}}else for(;a<b;a++)(f=d[a])&&!f.hidden&&(c+=f.outerWidth);return c};d.calcHeightFrozenRows=function(){var a=this.$tbl,b=0;a&&a.length&&(a=l(a[0]).find("tr.pq-last-frozen-row"))&&a.length&&(b=a[0],b=b.offsetTop+b.offsetHeight);return b};d._calcRightEdgeCol=function(a){var b=0,f=0,c=this.colModel,h=this.initH,d=this.options,n=d.freezeCols,d=d.numberCell;d.show&&(b+=d.outerWidth,f++);for(d=0;d<=a;d++){d<h&&
d>=n&&(d=h);var g=c[d];g.hidden||(b+=g.outerWidth,f++)}return{width:b,cols:f}};d._createHeader=function(){this.iHeader.createHeader();this.options.showHeader&&this._trigger("createHeader")};d.createTable=function(a){a.other=!0;var b=this.iGenerateView;b.generateView(a);b.scrollView()}})(jQuery);
(function(l){function m(a){this.that=a}function g(a,b,c){for(var h=0;b<c;b++)!0!==a[b].hidden&&h++;return h}function d(a,b,c){for(var h,e;c;){h=a[c][b];e=a[c-1][b];if(h!=e)break;c--}return c}var c=l.paramquery,b=c._pqGrid.prototype;b.getHeadCell=function(a){var b=a.attr("pq-col-indx");a=a.attr("pq-row-indx");var c,h,e,k;null!=b&&null!=a&&(b*=1,a*=1,h=this.headerCells[a][b])&&(k=h.colModel,e=h.leftPos);k&&k.length&&(c=!0);return{col:h,ci:b,o_ci:e,ri:a,isParent:c}};b.flex=function(a){this.iResizeColumns.flex(a)};
c.cHeader=m;b=m.prototype;b.createHeader=function(){var a=this.that,b=this,c=a.options,h=c.bootstrap,e=(h.on?h.thead:"")+" pq-grid-header-table ",k=c.ui,d=h.on?"":k.header,g=c.hwrap,h=a.pqpanes,t=parseInt(c.freezeCols),r=c.numberCell,k=a.colModel,u=c.sortModel,p=a.depth,q=c.virtualX,m=a.iGenerateView.colDef,s=a.initH,y=a.finalH,z=a.headerCells,x=a.$header_o;x.empty();if(null!=y)if(!1===c.showHeader)x.css("display","none");else{x.css("display","");c=["<table class='"+(g?e+"pq-wrap ":e+"pq-no-wrap ")+
"' >"];if(1<=p){c.push("<tr class='pq-row-hidden'>");r.show&&c.push("<td style='width:"+r.width+"px;' ></td>");for(var g=0,B=m.length;g<B;g++){var D=m[g],e=D.colIndx;c.push("<td style='width:"+D.column.outerWidth+"px;' pq-col-indx="+e+"></td>")}c.push("</tr>")}for(m=0;m<p;m++){c.push("<tr class='pq-grid-title-row'>");0==m&&r.show&&c.push(["<th pq-col-indx='-1' class='pq-grid-number-col' rowspan='",p,"'><div class='pq-td-div'>",r.title?r.title:"&nbsp;","</div></th>"].join(""));for(e=0;e<=y;e++){if(e<
s&&e>=t&&q&&(e=s,e>y))throw"initH>finalH";b.createHeaderCell(m,e,z,c,"pq-grid-col ",t,s,p,u)}c.push("</tr>")}a.ovCreateHeader(c,"pq-grid-col ");c.push("</table>");t=c.join("");x[0].innerHTML=h.vH?["<span class='pq-grid-header pq-grid-header-left ",d,"'><div class='pq-grid-header-inner'>",t,"</div></span><span class='pq-grid-header ",d,"'><div class='pq-grid-header-inner'>",t,"</div></span>"].join(""):["<span class='pq-grid-header ",d,"'><div class='pq-grid-header-inner'>",t,"</div></span>"].join("");
d=a.$header=x.children(".pq-grid-header");x=d.children(".pq-grid-header-inner");a.$tbl_header=x.children("table");a.$header_left=l(d[0]);a.$header_left_inner=l(x[0]);h.vH&&(a.$header_right=l(d[1]),a.$header_right_inner=l(x[1]));d.click(function(a){return b._onHeaderClick(a)});b._refreshResizeColumn(s,y,k);a._trigger("refreshHeader",null,null)}};b._onHeaderClick=function(a){var b=this.that,c;c=b.iDragColumns;if(!c||"stop"==c.status){c=l(a.target);if(c.is("input,label"))return!0;c=c.closest(".pq-grid-col");
if(c.length&&(c=b.getHeadCell(c),(b=c.col)&&!c.isParent))return this._onHeaderCellClick(b,c.ci,a)}};b.createHeaderCell=function(a,b,d,h,e,k,w,A,l){var r=this.that,u=r.options.sheet,p=d[a][b],q=r.colModel,m=p.colSpan;if(!(p.hidden||0===m||0<a&&p==d[a-1][b])){if(0<b&&p==d[a][b-1]){if(b>w)return;a:{d=d[a];for(var s=0;s<d.length;s++)if(d[s]==p){d=s;break a}d=void 0}if(d<k)return;m-=g(q,d,b)}else k&&b<k&&b+m>k&&(m-=g(q,k,w),q=g(q,b,k),m=Math.max(m,q));q=p.halign||p.align;d=p.cls;e=[e];var s=p.title,y=
p.type,s="function"==typeof s?s.call(r,{column:p,colIndx:b,dataIndx:p.dataIndx}):s,s=u?c.toLetter(b):s,s=null!=s?s:"checkbox"==y&&p.cb.header?"<input type='checkbox'/>":p.dataIndx;p.pqtitle=s;q&&e.push("pq-align-"+q);b==k-1&&1==A&&e.push("pq-last-frozen-col");b<=k-1?e.push("pq-left-col"):b>=w&&e.push("pq-right-col");d&&e.push(d);null!=p.colModel&&0!=p.colModel.length||e.push("pq-grid-col-leaf");k=l.space?"pq-space":"";h.push(["<th  ","pq-col-indx="+b," ","pq-row-indx="+a,"  class='",e.join(" "),"' rowspan=",
p.rowSpan," colspan=",m,"><div class='pq-td-div'>",s,"<span class='pq-col-sort-icon ",k,"'></span>",l.number?"<span class='pq-col-sort-count "+k+"'></span>":"","</div></th>"].join(""))}};b._onHeaderCellClick=function(a,b,c){var h=this.that,e=h.options,d=e.sortModel,g=a.dataIndx;!1!==h._trigger("headerCellClick",c,{column:a,colIndx:b,dataIndx:g})&&(e.selectionModel.column&&-1==c.target.className.indexOf("pq-td-div")?(e={c1:b,firstC:b},a=h.iSelection.address(),c.shiftKey&&((c=a.length)&&"column"==a[c-
1].type&&(c=a[c-1],c.c1=c.firstC,c.c2=b,c.r1=c.r2=c.type=void 0),e=a),h.range(e,!1).select(),h.focus({rowIndxPage:h.getFirstVisibleRIP(!0),colIndx:b})):d.on&&!1!=a.sortable&&(d.multiKey&&d.single&&(d.single=!c[d.multiKey]),h.sort({sorter:[{dataIndx:g}],addon:!0,evt:c})))};b._refreshResizeColumn=function(a,b,c){a=this.that;c=a.options;b=c.filterModel.ficon?!0:!1;var h=c.numberCell;c=parseInt(c.freezeCols);var e=[],d=[],g=a.pqpanes.vH,l=0,t=0;h.show&&(l=h.outerWidth,h.resizable&&e.push("<div pq-col-indx='-1' style='left:",
l-5,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>"));for(var h=a.iGenerateView.colDef,r=0,u=h.length;r<u;r++){var t=h[r],p=t.colIndx,t=t.column,q=t.ficon,m=q||null==q&&b,q=e,l=l+t.outerWidth;if(!1!==t.resizable||m)g&&p>=c&&(q=d),t=l-5,q.push("<div pq-col-indx='",p,"' style='left:",t,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>")}d.length&&a.$header_right_inner.append(d.join(""));a.$header_left_inner.append(e.join(""))};b.refreshHeaderSortIcons=function(){var a=this.that,b=a.options,
c=b.bootstrap,b=b.ui,h=a.$header;if(h){var e=a.iSort.getSorter(),d=e.length,g=!1;a.options.sortModel.number&&1<d&&(g=!0);for(var l=0;l<d;l++){var t=e[l],r=a.getColIndx({dataIndx:t.dataIndx}),u=t.dir,t=c.on?c.header_active:b.header_active+" pq-col-sort-"+("up"==u?"asc":"desc"),u=c.on?" glyphicon glyphicon-arrow-"+u:"ui-icon ui-icon-triangle-1-"+("up"==u?"n":"s"),r=h.find(".pq-grid-col-leaf[pq-col-indx="+r+"]");r.addClass(t);r.find(".pq-col-sort-icon").addClass(u);g&&r.find(".pq-col-sort-count").html(l+
1)}}};b=function(a){this.that=a;var b=this;a.$header_o.on({mousedown:function(a){if(!a.pq_composed){var e=l(a.target);b.setDraggables(a);a.pq_composed=!0;a=l.Event("mousedown",a);e.trigger(a)}},dblclick:function(a){b.doubleClick(a)}},".pq-grid-col-resize-handle");var c=a.options.flex;if(c.on&&c.one)a.one("ready",function(){b.flex()})};c.cResizeColumns=b;b=b.prototype=new c.cClass;b.doubleClick=function(a){var b=this.that.options,c=b.flex;a=l(a.target);a=parseInt(a.attr("pq-col-indx"));isNaN(a)||c.on&&
this.flex(c.all&&!b.scrollModel.autoFit?{}:{colIndx:[a]})};b._initFlexTable=function(a,b){if(a.length){var c=a.css({tableLayout:"auto",width:""}).addClass("pq-no-wrap").removeClass("pq-wrap").children("tbody").children(".pq-row-hidden"),h,e=c.children("td").css("width","");if(b){var d=0,g=[],A,t=[];c.next().children("td").each(function(a,b){A=1*b.getAttribute("colspan");if(1<A&&(d+=A-1,g[d]=b.offsetWidth,h=e[a],!h||!h.offsetWidth))for(var f=d-(A-1);f<d;f++)t[f]=!0;d++})}}return[e||l(),t||[],g]};b.flex=
function(a){a=a||{};var b=this.that,c=b.element,h=b.options.numberCell,e=a.colIndx,d,g=a.dataIndx;a=null==a.refresh?!0:a.refresh;var A=!1,t=b.$tbl,r=b.$tbl_header,u=t&&t.length?l(t[0]).clone():l(),p=b.tables&&b.tables.length?b.tables[0].$tbl:null,p=p?l(p[0]).clone():l(),q=r&&r.length?l(r[0]).clone():l();u.find(".pq-merge-cell").each(function(a,b){b.innerHTML=l(b).find(".pq-merge-inner")[0].innerHTML;b.style.whiteSpace="noWrap"});if(null!=g)for(e=[],r=0,t=g.length;r<t;r++){var m=b.colIndxs[g[r]];null!=
m&&e.push(m)}null!=e&&(e.sort(function(a,b){return a-b}),d=e.length);q.find("tr.pq-grid-header-search-row").remove();g=l("<div class='pq-grid'>").append(q).append(p).append(u);g.addClass(c.attr("class"));c.parent().append(g);for(var r=this._initFlexTable(u,!0),c=r[0],u=r[1],m=r[2],s=0,p=this._initFlexTable(p)[0],q=this._initFlexTable(q)[0],h=h.show?0:-1,y=b.iGenerateView.colDef,r=0,t=y.length;r<t;r++){var z=y[r],x=z.colIndx,z=z.column;h++;if(e)if(e.length)if(e[0]===x)e.splice(0,1);else continue;else break;
var B=c[h],D=q[h],C=p[h],x=u[h],B=B?B.offsetWidth:0,C=C?C.offsetWidth:0,D=D?D.offsetWidth:0;x?B=0:s&&(B=m[h]-s,s=0);D=Math.max(B,C,D)-0+1;x&&(s+=D);z._width!==D&&(A=!0,z.width=D,1===d&&(z._resized=!0))}g.remove();A&&a&&b.refresh({source:"flex",colModel:!0})};b.setDraggables=function(a){var b=this,c,h,e;l(a.target).draggable({axis:"x",helper:function(a,c){var e=l(a.target),h=parseInt(e.attr("pq-col-indx"));b._setDragLimits(h);b._getDragHelper(a,c);return e},start:function(a,h){c=h.position.left;e=
parseInt(b.$cl[0].style.left)},drag:function(a,d){h=d.position.left;b.$cl[0].style.left=e+(h-c)+"px"},stop:function(a,e){return b.resizeStop(a,e,c)}})};b._getDragHelper=function(a){var b=this.that,c=parseInt(b.options.freezeCols);a=l(a.target);var h=b.$grid_center;a=parseInt(a.attr("pq-col-indx"));var e=h.outerHeight();this.$cl=l("<div class='pq-grid-drag-bar'></div>").appendTo(h);this.$clleft=l("<div class='pq-grid-drag-bar'></div>").appendTo(h);this.$cl.height(e);this.$clleft.height(e);h=l("[pq-col-indx="+
a+"]",b.$header)[0];e=h.offsetLeft;b.pqpanes.vH?a>=c&&(e-=b.$header[1].scrollLeft):(e+=b.$header[0].offsetLeft,e-=b.$header[0].scrollLeft);this.$clleft.css({left:e});e+=h.offsetWidth;this.$cl.css({left:e})};b._setDragLimits=function(a){if(!(0>a)){var b=this.that,c=b.colModel[a],h=b.$header_left;a>=b.options.freezeCols&&b.pqpanes.vH&&(h=b.$header_right);b=h.find("th[pq-col-indx='"+a+"']").offset().left+c._minWidth;c=b+c._maxWidth-c._minWidth;h.find("div.pq-grid-col-resize-handle[pq-col-indx="+a+"]").draggable("option",
"containment",[b,0,c,0])}};b.resizeStop=function(a,b,c){var h=this.that,e=h.colModel,d=h.options.numberCell;this.$clleft.remove();this.$cl.remove();c=b.position.left-c;b=l(b.helper);b=parseInt(b.attr("pq-col-indx"));if(-1==b){var e=null,g=parseInt(d.width);d.width=g+c}else e=e[b],g=parseInt(e.width),e.width=g+c,e._resized=!0;h.refresh();h._trigger("columnResize",a,{colIndx:b,column:e,dataIndx:e?e.dataIndx:null,oldWidth:g,newWidth:e?e.width:d.width})};b=function(a){this.that=a;this.$drag_helper=null;
var b=a.options.dragColumns,c=b.topIcon,h=b.bottomIcon;this.status="stop";this.$arrowTop=l("<div class='pq-arrow-down ui-icon "+c+"'></div>").appendTo(a.element);this.$arrowBottom=l("<div class='pq-arrow-up ui-icon "+h+"' ></div>").appendTo(a.element);this.hideArrows();if(b&&b.enabled)a.$header_o.on("mousedown",".pq-grid-col",this.onColMouseDown(this,a))};c.cDragColumns=b;b=b.prototype;b.onColMouseDown=function(a,b){return function(c){var h,e,d;h=l(this);c.pq_composed||l(c.target).is("input,select,textarea")||
(h=b.getHeadCell(h),d=(e=h.col)?e.parent:null,!e||e.nodrag||e._nodrag||d&&1==d.colSpan||!a.setDraggable(c,e,h)||(c.pq_composed=!0,h=l.Event("mousedown",c),l(c.target).trigger(h)))}};b.showFeedback=function(a,b){var c=this.that,h=a[0],e=c.$grid_center[0].offsetTop,d=h.offsetLeft-h.offsetParent.offsetParent.offsetParent.scrollLeft+(b?0:h.offsetWidth)-8,c=e+c.$header[0].offsetHeight;this.$arrowTop.css({left:d,top:e+h.offsetTop-16,display:""});this.$arrowBottom.css({left:d,top:c,display:""})};b.showArrows=
function(){this.$arrowTop.show();this.$arrowBottom.show()};b.hideArrows=function(){this.$arrowTop.hide();this.$arrowBottom.hide()};b.updateDragHelper=function(a){var b=this.that.options.dragColumns,c=b.acceptIcon,b=b.rejectIcon,h=this.$drag_helper;h&&(a?(h.children("span.pq-drag-icon").addClass(c).removeClass(b),h.removeClass("ui-state-error")):(h.children("span.pq-drag-icon").removeClass(c).addClass(b),h.addClass("ui-state-error")))};b.setDraggable=function(a,b,c){a=l(a.currentTarget);var h=this,
e=h.that;if(!a.hasClass("ui-draggable"))return a.draggable({distance:10,cursorAt:{top:-18,left:-10},zIndex:"1000",appendTo:e.element,revert:"invalid",helper:h.dragHelper(h,e,b),start:h.onStart(h,e,b,c),drag:h.onDrag(h,e),stop:function(){h.status="stop";e.$header.find(".pq-grid-col-resize-handle").show();h.hideArrows()}}),!0};b.onStart=function(a,b,c,h){return function(e){if(!1===b._trigger("columnDrag",e.originalEvent,{column:c}))return!1;a.setDroppables(h)}};b.onDrag=function(a,b){return function(c,
h){a.status="drag";var e=l(".pq-drop-hover",b.$header);if(0<e.length){a.showArrows();a.updateDragHelper(!0);var d=e.width();c.clientX-e.offset().left+l(document).scrollLeft()<d/2?(a.leftDrop=!0,a.showFeedback(e,!0)):(a.leftDrop=!1,a.showFeedback(e,!1))}else a.hideArrows(),l(".pq-drop-hover",b.$top).length?a.updateDragHelper(!0):a.updateDragHelper()}};b.dragHelper=function(a,b,c){var h=b.options.dragColumns.rejectIcon;return function(){a.status="helper";b.$header.find(".pq-grid-col-resize-handle").hide();
var e=l("<div class='pq-col-drag-helper ui-widget-content ui-corner-all panel panel-default' ><span class='pq-drag-icon ui-icon "+h+" glyphicon glyphicon-remove'></span>"+c.pqtitle+"</div>");a.$drag_helper=e;return e[0]}};b._columnIndexOf=function(a,b){for(var c=0,h=a.length;c<h;c++)if(a[c]==b)return c;return-1};b.setDroppables=function(a){var b=this.that,c=a.col,h=a.ri;a=a.o_ci;var e=a+c.o_colspan,d,g,A,t,r;g=b.$header_left;var u,p={hoverClass:"pq-drop-hover ui-state-highlight",accept:".pq-grid-col",
tolerance:"pointer",drop:this.onDrop()},q=g.find(".pq-left-col");g=b.pqpanes.v||b.pqpanes.vH?b.$header_right.find(".pq-right-col"):g.find(".pq-right-col");q=q.add(g);for(u=q.length;u--;)t=l(q[u]),r=t.hasClass("ui-droppable"),d=b.getHeadCell(t),A=d.col,g=d.ri,d=d.ci,A==c||A.nodrop||A._nodrop||h<g&&d>=a&&d<e?r&&t.droppable("destroy"):r||t.droppable(p)};b.onDrop=function(){var a=this,b=this.that;return function(c,h){if(!a.dropPending){var e=1*h.draggable.attr("pq-col-indx"),d=1*h.draggable.attr("pq-row-indx"),
g=l(this),A=1*g.attr("pq-col-indx"),g=1*g.attr("pq-row-indx"),t=a.moveColumn(e,A,a.leftDrop,d,g);a.dropPending=!0;window.setTimeout(function(){b.iColModel.init();!1!==b._trigger("columnOrder",null,{dataIndx:t.dataIndx,column:t,oldcolIndx:e,colIndx:b.getColIndx({column:t})})&&b.refresh();a.dropPending=!1},0)}}};b.moveColumn=function(a,b,c,h,e){var k=this.that,g=k.options.colModel,l=k.headerCells,k=k.depth-1;h=null==h?d(l,a,k):h;e=null==e?d(l,b,k):e;var k=l[e][b],t=h?l[h-1][a].colModel:g;b=e?l[e-1][b].colModel:
g;a=this._columnIndexOf(t,l[h][a]);c=c?1:0;a=t.splice(a,1)[0];c=this._columnIndexOf(b,k)+1-c;b.splice(c,0,a);return a}})(jQuery);
(function(l){function m(d,c){this.that=d;var b=this,a=d.options;this.type="detail";this.refreshComplete=!0;this.detachView=!1;d.on("cellClick",function(a,c){return b.toggle(a,c)}).on("cellKeyDown",function(a,c){if(a.keyCode==l.ui.keyCode.ENTER)return b.toggle(a,c)}).on("refresh",function(a,c){return b.aftertable()}).on("beforeTableView",function(a,c){return b.beforeTableView(a,c)}).on("tableWidthChange",function(a,c){return b.tableWidthChange(a,c)});c._render=function(b){var c=a.detailModel,h=b.cellData;
b=b.rowData;if(!b.pq_gsummary&&!b.pq_gtitle)return c=h&&h.show?c.expandIcon:c.collapseIcon,"<div class='ui-icon "+c+"'></div>"}}l.paramquery.cHierarchy=m;var g=m.prototype=new l.paramquery.cClass;g.tableWidthChange=function(){if(this.refreshComplete){this.refreshComplete=!1;for(var d=this.that.$tbl.children("tbody").children("tr.pq-detail-child").children("td.pq-detail-child"),c=0,b=d.length;c<b;c++)for(var a=l(d[c]).find(".pq-grid"),f=0,n=a.length;f<n;f++){var h=l(a[f]);h.is(":visible")&&h.pqGrid("onWindowResize")}this.refreshComplete=
!0}};g.aftertable=function(d){var c=this.that,b=c.options.detailModel.init,a=c.pdata;if(this.refreshComplete){this.refreshComplete=!1;d=d?d:c.$tbl.children("tbody").children("tr.pq-detail-child");for(var f=0,n=d.length;f<n;f++){var h=l(d[f]),e=h.attr("pq-row-indx"),k=a[e],e=!1,g=k.pq_detail.child;g||"function"!=typeof b||(e=!0,g=b.call(c.element[0],{rowData:k}),k.pq_detail.child=g,k.pq_detail.height=25);h=h.children("td.pq-detail-child");h.append(g);h=h.find(".pq-grid");g=0;for(k=h.length;g<k;g++){var A=
l(h[g]);e?A.hasClass("pq-pending-refresh")&&A.is(":visible")&&(A.removeClass("pq-pending-refresh"),A.pqGrid("refresh")):A.is(":visible")&&A.pqGrid("onWindowResize")}}this.refreshComplete=!0;this.detachView=!1}};g.beforeTableView=function(d,c){this.detachView||(this.detachInitView(),this.detachView=!0)};g.detachInitView=function(d){var c=this.that.$tbl;if(c&&c.length)for(d=d?d:c.children("tbody").children("tr.pq-detail-child"),c=0;c<d.length;c++)l(d[c]).children("td.pq-detail-child").children().detach()};
g.toggle=function(d,c){var b=this.that,a=c.column,f=c.rowData,n=c.rowIndx,h=this.type;f.pq_gtitle||f.pq_gsummary||!a||a.type!==h||(a={rowIndx:n,focus:!0},null==f.pq_detail?b.rowExpand(a):!1===f.pq_detail.show?b.rowExpand(a):this.rowCollapse(a))};g.rowExpand=function(d){this.normalize(d);var c=this.that,b=d.rowData,a=d.rowIndx,f=d.rowIndxPage,n=c.options.detailModel;if(null!=b){if(!1===c._trigger("beforeRowExpand",null,d))return!1;null==b.pq_detail?b.pq_detail={show:!0}:!1===b.pq_detail.show&&(b.pq_detail.show=
!0);n.cache||this.rowInvalidate(d);c.refreshRow({rowIndx:a});n=[];c.iGenerateView._generateDetailRow(b,f,n);b=c.getRow({rowIndxPage:f});b.after(n.join(""));this.aftertable(b.next());d.focus&&c.getCell({rowIndx:a,dataIndx:"pq_detail"}).attr("tabindex","0").focus();d.scrollRow&&this.scrollRow({rowIndx:a})}};g.rowInvalidate=function(d){d=this.that.getRowData(d);var c=d.pq_detail;if(c=c?c.child:null)c.remove(),d.pq_detail.child=null,d.pq_detail.height=0};g.normalize=function(d){var c=this.that,b=d.rowIndx,
a=d.rowIndxPage,f=c.rowIndxOffset;d.rowIndx=null==b?a+f:b;d.rowIndxPage=null==a?b-f:a;d.rowData=c.getRowData(d)};g.rowCollapse=function(d){this.normalize(d);var c=this.that,b=c.options,a=d.rowData,f=d.rowIndx,n=d.rowIndxPage,h=b.detailModel;null!=a&&null!=a.pq_detail&&!0===a.pq_detail.show&&(h.cache||this.rowInvalidate(d),a.pq_detail.show=!1,b.virtualY?c.refresh():(b=c.getRow({rowIndxPage:n}).next("tr.pq-detail-child"),b.length&&(this.detachInitView(b),b.remove(),c.refreshRow({rowIndx:f})),d.focus&&
c.getCell({rowIndx:f,dataIndx:"pq_detail"}).attr("tabindex","0").focus()),d.scrollRow&&(f=d.rowIndx,this.scrollRow({rowIndx:f})))}})(jQuery);
(function(l){var m=function(g){var d=this;d.that=g;g.on("dataReadyDone",function(){d.calcVisibleV()}).on("CMInit",function(){d.calcVisibleH()}).on("refresh",function(){d.summaryTable()})};l.paramquery.cRefresh=m;m=m.prototype;m._computeOuterWidths=function(){for(var g=this.that,d=g.options.numberCell,g=g.colModel,c=g.length,b=0;b<c;b++){var a=g[b];a.outerWidth=a._width+0}d.show&&(d.outerWidth=d.width)};m.autoFit=function(){var g=this.that,d=g.colModel,c=d.length,g=g.calcWidthCols(-1,c,!0),b=this.contWd-
this.getSBWidth();if(g!==b){for(var g=g-b,a,b=[],f=0;f<c;f++){var n=d[f],h=n._percent,e=n._resized;n.hidden||h||e||(0>g?(h=n._maxWidth-n._width)&&b.push({availWd:-1*h,colIndx:f}):(h=n._width-n._minWidth)&&b.push({availWd:h,colIndx:f}));e&&(a=n,delete n._resized)}b.sort(function(a,b){return a.availWd>b.availWd?1:a.availWd<b.availWd?-1:0});f=0;for(c=b.length;f<c;f++){var n=b[f],h=n.availWd,n=n.colIndx,e=Math.round(g/(c-f)),n=d[n],k;k=n._width;Math.abs(h)>Math.abs(e)?(k-=e,g-=e):(k-=h,g-=h);n.width=
n._width=k}0!=g&&a&&(k=a._width-g,k>a._maxWidth?k=a._maxWidth:k<a._minWidth&&(k=a._minWidth),a.width=a._width=k)}};m.autoLastColumn=function(){var g=this.that,d=g.colModel,c=d.length,b=g.options.freezeCols,a=this.contWd-this.getSBWidth(),f=g.calcWidthCols(-1,b,!0),a=a-f,f=!1,g=g.getLastVisibleCI();if(null!=g&&(g=d[g],!g._percent)){for(var n=g._width,h,e=g._minWidth,k=g._maxWidth,c=c-1;c>=b;c--){var w=d[c];if(!w.hidden&&(w=w._width+0,a-=w,0>a)){f=!0;h=n+a>=e?n+a:n+w+a;break}}f||(h=n+a);h>k?h=k:h<e&&
(h=e);g.width=g._width=h}};m.numericVal=function(g,d){var c;c=-1<(g+"").indexOf("%")?parseInt(g)*d/100:parseInt(g);return Math.round(c)};m.refreshColumnWidths=function(g){g=g||{};var d=this.that,c=d.options,b=c.numberCell,a="flex"===c.width,f=d.colModel,n=c.scrollModel,h=n.lastColumn,n=n.autoFit,e=this.contWd,k=f.length,w=this.getSBWidth(),l=c._minColWidth,t=c._maxColWidth,r=0;b.show&&(b.width<b.minWidth&&(b.width=b.minWidth),r=b.outerWidth=b.width);b=a?null:e-w-r;l=Math.floor(this.numericVal(l,b));
t=Math.ceil(this.numericVal(t,b));e=0;if(!a&&5>b||isNaN(b)){if(c.debug)throw"availWidth N/A";}else{delete d.percentColumn;for(w=0;w<k;w++)if(r=f[w],!r.hidden){var u=r.width,p=-1<(u+"").indexOf("%")?!0:null,q=r.minWidth,m=r.maxWidth,q=q?this.numericVal(q,b):l,m=m?this.numericVal(m,b):t;m<q&&(m=q);if(void 0!=u){var s=0;!a&&p?(d.percentColumn=!0,r.resizable=!1,r._percent=!0,u=this.numericVal(u,b)-0,s=Math.floor(u),e+=u-s,1<=e&&(s+=1,e-=1)):u&&(s=parseInt(u));s<q?s=q:!a&&s>m&&(s=m);r._width=s}else r._width=
q;p||(r.width=r._width);r._minWidth=q;r._maxWidth=a?1E3:m}!1===a&&!1!==g.refreshWidth&&(n&&this.autoFit(),"auto"===h&&c.virtualX&&this.autoLastColumn());this._computeOuterWidths()}};m.estRowsInViewPort=function(){var g=Math.ceil(this.contHt/this.rowHt);return this.that.pageSize=g};m._refreshFrozenLine=function(){var g=this.that,d=g.options,c=d.numberCell,b=g.$cont_o,a=d.freezeBorders,f=d.freezeCols,d=d.freezeRows;this.$freezeLine&&this.$freezeLine.remove();this.$freezeLineH&&this.$freezeLineH.remove();
a&&(f&&(a=g.calcWidthCols(-1,f),isNaN(a)||0===a||0<a&&c.show&&a===c.width||(this.$freezeLine=l(["<div class='pqg-vert-frozen-line'  style = 'left:",a-1,"px;' ></div>"].join("")).appendTo(b))),d&&(g=g.$tbl))&&(g=g.children("tbody").children(".pq-last-frozen-row")[0])&&(this.$freezeLineH=l("<div class='pqg-horiz-frozen-line' style='top:"+(g.offsetTop+g.offsetHeight-1-1)+"px;' ></div>").appendTo(b))};m.setScrollVNumEles=function(g){var d=this.that;g=d.vscroll;var c=d.options;if(!c.maxHeight&&"flex"===
c.height)return g.option("num_eles",0),0;var c=d.iHierarchy?!0:!1,b=parseInt(g.option("num_eles")),b=parseInt(g.option("cur_pos")),a=this.getEContHt(),f=d.pdata?d.totalVisibleRows:0,n,h=0;d.$tbl&&0<d.$tbl.length&&(n=d.$tbl[d.$tbl.length-1],h=n.scrollHeight,n=l(n));if(0<h){n=n.children().children("tr");for(var e=0,d=0,b=1;b<n.length;b++)if(h=n[b],e+=h.offsetHeight,e>=a){c&&l(h).hasClass("pq-detail-child")&&(d=1<d?d-1:1);break}else c?!1===l(h).hasClass("pq-detail-child")&&d++:d++;b=f-d+1}else b+=1;
b>f&&(b=f);e>a&&c&&b++;g.option("num_eles",b);return b};m._setScrollVLength=function(g){g=this.that;var d=g.options;if("flex"!==d.height||d.maxHeight){var d=this.getSBHeight(),c=this.contHt-d+this.headerHt-2;g.vscroll.widget().css("bottom",d);g.vscroll.option("length",c)}};m.setHeaderHeight=function(){var g=this.that,d=g.$header,c,b,a;if(d&&d.length){if(1<d.length){if(c=d[0].scrollHeight,b=d[1].scrollHeight,a=Math.max(c,b),c!==b){var f=l(d[0]).find(".pq-grid-header-search-row"),n=l(d[1]).find(".pq-grid-header-search-row");
f.length&&(f.css("height",""),n.css("height",""),c=d[0].scrollHeight,b=d[1].scrollHeight,a=Math.max(c,b),c<a?f.height(n[0].scrollHeight):n.height(f[0].scrollHeight))}}else a=c=d[0].scrollHeight;g.$header_o.height(a-3);this.headerHt=a-1}else g.$header_o.height(0),this.headerHt=0};m.initContHeight=function(){var g=this.that,d=g.options;if("flex"!=d.height||d.maxHeight)this.contHt=this.height-(d.showHeader?this.rowHt:0)-(d.showTop?g.$top[0].offsetHeight:0)-(d.showBottom?g.$bottom[0].offsetHeight:0)};
m.initContWidth=function(){this.contWd=this.width};m.setContHeight=function(g){g=this.that;var d=g.$top,c=this.height-g.$header_o[0].offsetHeight,b;if(g.options.showTop){b=d[0].offsetHeight;var a=parseInt;d=d[0];window.getComputedStyle?d=getComputedStyle(d).marginTop:(d=d.currentStyle.marginTop,d="auto"==d?0:d);b+=a(d)}else b=0;c=c-b-g.$bottom[0].offsetHeight+1;c=0<=c?c:"";g.$cont.height(c);this.contHt=c};m.setContAndGridHeightForFlex=function(){var g=this.that,d=g.hscroll.widget();if(this.vscroll)d.css("position",
"");else{d.css("position","relative");var d=g.$cont,c=g.options.cls,b=d.children("."+c.cont_inner_b);d.height("");b.length||(b=d.children("."+c.cont_inner));b.height("");g.element.height("");g.$grid_center.height("")}};m.setContAndGridWidthForFlex=function(){var g=this.that,d=g.options.maxWidth,c=this.maxWidthPixel,b=g.calcWidthCols(-1,g.colModel.length),g=g.element,a=this.getSBWidth(),b=b+a;d&&b>=c&&(b=c);this.contWd=b;g.width(b+"px")};m.getTotalVisibleRows=function(g,d,c){var b=this.that,a=this.vrows,
f=this.estRowsInViewPort(),n=0,h=c?c.length:0,e=d,k=0,w=0,l=null,t=b.iHierarchy?!0:!1,b=b.options.detailModel.offset,r=0,u=this.rowHt,p=t?this.contHt:void 0;if(null==c||0==h)return{initV:null,finalV:null,tvRows:n,lastFrozenRow:null};for(var m=0,v=h>d?d:h;m<v;m++){var s=c[m],y=s.pq_hidden;y||(l=m,n++,t&&((s=s.pq_detail)&&s.show?(s=s.height||0,s>b&&(s=b),r+=s+u):r+=u))}if(h<d)return{initV:l,finalV:l,tvRows:n,lastFrozenRow:l};f-=n;e=k=a[g];w=0;m=e;for(v=h;m<v;m++){s=c[m];if(y=s.pq_hidden)k++;else if(w===
f)break;else k++,w++;if(t&&!y&&((s=s.pq_detail)&&s.show?(s=s.height||0,s>b&&(s=b),r+=s+u):r+=u,r>p))break}n+=a.length;e=e>=h?h-1:e;k=k>=h?h-1:k;return{initV:e,finalV:k<e?e:k,tvRows:n,lastFrozenRow:l}};m.setInitH=function(g,d){var c=this.that;c.initH=g;c.finalH=d};m.setInitV=function(g,d){var c=this.that,b;(null==g||null==d)&&(b=this.vrows)&&b.length&&(g=d=b[b.length-1]);c.initV=g;c.finalV=d};m.calcVisibleV=function(){var g=this.that,d=g.options.freezeRows,g=g.pdata||[],c,b=g.length,a=[],f=0;for(c=
0;c<d;c++)g[c].pq_hidden||(a[f++]=c);this.vfrows=a;f=0;a=[];for(c=d;c<b;c++)g[c].pq_hidden||(a[f++]=c);this.vrows=a};m.calcVisibleH=function(){for(var g=this.that,d=[],c=0,b=g.colModel,g=g.options.freezeCols,a=b.length;g<a;g++)b[g].hidden||(d[c++]=g);this.vcols=d};m.calcInitFinal=function(){var g=this.that,d=g.options,c=d.virtualY,b=d.freezeRows,a="flex"===d.height,f=g.pdata;if(null==f||0===f.length)b=this.getTotalVisibleRows(n,b,f),g.totalVisibleRows=b.tvRows,c=b.initV,d=b.finalV,g.lastFrozenRow=
b.lastFrozenRow;else if(c){var n=parseInt(g.vscroll.option("cur_pos"));if(isNaN(n)||0>n)throw"cur_pos NA";g.scrollCurPos=n;b=this.getTotalVisibleRows(n,b,f);g.totalVisibleRows=b.tvRows;c=b.initV;g.lastFrozenRow=b.lastFrozenRow;d=a&&!d.maxHeight?f.length-1:b.finalV}else b=this.getTotalVisibleRows(0,b,f),g.lastFrozenRow=b.lastFrozenRow,g.totalVisibleRows=b.tvRows,c=0,d=f.length-1;this.setInitV(c,d)};m.calcInitFinalH=function(){var g=this.that,d=g.options,c,b=g.colModel,a=b.length;if(d.virtualX){c=parseInt(g.hscroll.option("cur_pos"));
var f=parseInt(d.freezeCols),n="flex"===d.width,h=this.vcols;h||(this.calcVisibleH(),h=this.vcols);c>=h.length&&(c=h.length-1);c=h[c];c>a-1&&(c=a-1);0>c&&(c=0);if(n&&!d.maxWidth)d=a-1;else{g=g.calcWidthCols(-1,f);f=this.getEContWd();for(n=c;n<a;n++)if(h=b[n],!h.hidden){h=h.outerWidth;if(!h&&d.debug)throw"outerwidth N/A";g+=h;if(g>f)break}d=n;d>a-1&&(d=a-1)}}else c=0,d=a-1;this.setInitH(c,d)};m._calcOffset=function(g){return(g=/(-|\+)([0-9]+)/.exec(g))&&3===g.length?parseInt(g[1]+g[2]):0};m.setMax=
function(g){var d=this.that,c=d.element;(d=d.options[g])?(d==parseInt(d)&&(d+="px"),c.css(g,d)):c.css(g,"")};m.refreshGridWidthAndHeight=function(){var g=this.that,d=g.options,c,b,a=-1<(d.width+"").indexOf("%")?!0:!1,f=-1<(d.height+"").indexOf("%")?!0:!1,n=-1<(d.maxHeight+"").indexOf("%")?!0:!1,h="flex"==d.height,e=n&&h,k=-1<(d.maxWidth+"").indexOf("%")?!0:!1,w="flex"==d.width,A=k&&w,g=g.element;if(a||f||e||A){var t=g.parent();if(!t.length)return;var r;t[0]==document.body||"fixed"==g.css("position")?
(r=l(window).width(),t=window.innerHeight?window.innerHeight:l(window).height()):(r=t.width(),t=t.height());var u=this._calcOffset,p=a?u(d.width):0,u=f?u(d.height):0;A?c=parseInt(d.maxWidth)*r/100:a&&(c=parseInt(d.width)*r/100+p);e?b=parseInt(d.maxHeight)*t/100:f&&(b=parseInt(d.height)*t/100+u)}c||(w&&d.maxWidth?k||(c=d.maxWidth):a||(c=d.width));d.maxWidth&&(this.maxWidthPixel=c);b||(h&&d.maxHeight?n||(b=d.maxHeight):f||(b=d.height));parseFloat(c)==c?(c=c<d.minWidth?d.minWidth:c,g.css("width",c)):
"auto"===c&&g.width(c);parseFloat(b)==b&&(b=b<d.minHeight?d.minHeight:b,g.css("height",b));this.width=Math.round(g.width());this.height=Math.round(g.height())};m.decidePanes=function(){var g=this.that,d=g.pqpanes={v:!1,h:!1,vH:!1},c=g.options,g=c.virtualX,b=c.virtualY,a="flex"==c.height&&!c.maxHeight,f="flex"==c.width&&!c.maxWidth,n=c.numberCell,h=c.freezeRows,c=c.freezeCols;!h||a||!c&&!n.show||f?h&&!a?b||(d.h=!0):!c&&!n.show||f||g||(d.v=!0,d.vH=!0):(b||(d.h=!0),g||(d.v=!0,d.vH=!0))};m._storeColumnWidths=
function(g){for(var d=this.that,c=d.options,b=d.colModel,a=c.virtualX,c=c.freezeCols,f=d.initH,d=g?b.length-1:d.finalH,n=[],h=0;h<=d;h++)!g&&a&&h<f&&h>=c&&(h=f),n[h]={outerWidth:b[h].outerWidth};return n};m._isColumnWidthChanged=function(g){for(var d=this.that,c=d.colModel,d=d.iGenerateView.colDef,b=0,a=d.length;b<a;b++){var f=d[b].colIndx;if(c[f].outerWidth!==g[f].outerWidth)return!0}return!1};m.softRefresh=function(){var g=this.that,d=g.options;this.refreshScrollbars();g.iGenerateView.setPanes();
g._saveDims();g.iMouseSelection.syncScrollBarVert();"flex"==d.height&&this.setContAndGridHeightForFlex();"flex"==d.width&&this.setContAndGridWidthForFlex();this._refreshFrozenLine()};m.refreshScrollbars=function(g){g=g||{};var d=this.that,c=d.options,b=d.iGenerateView,a,f="flex"===c.height;a="flex"===c.width;if((f||this.contHt)&&(a||this.contWd)&&null!==d.totalVisibleRows){d=this.setScrollVNumEles(g);d=1<d?!0:!1;if((!f||c.maxHeight)&&d!==this.vscroll)if(this.vscroll=d,c.scrollModel.autoFit||c.virtualX||
a){if(c=this._storeColumnWidths(),this.refreshColumnWidths(),this._isColumnWidthChanged(c)||a)this.ignoreTResize=!0,this._refreshTableWidths(c,{table:!0,header:!0}),delete this.ignoreTResize,this.setHeaderHeight(),this.setContHeight(),b.setPanes(),d=this.setScrollVNumEles(!0),this.vscroll=1<d?!0:!1}else b.setPanes();d=this.setScrollHNumEles();a=1<d?!0:!1;this.hscroll!=a&&(this.hscroll=a,b.setPanes());this._setScrollHLength();this._setScrollVLength(g);this._setScrollHVLength()}};m._setScrollHVLength=
function(){var g=this.that;this.vscroll&&this.hscroll||g.$hvscroll.css("visibility","hidden")};m._setScrollHLength=function(){var g=this.that,d=g.hscroll.widget(),c=g.$hvscroll;if(g.options.scrollModel.horizontal){d.css("visibility","");c.css("visibility","");var c=this.contWd,b=this.getSBWidth();d.css("right",0===b?0:"");g.hscroll.option("length",c-b)}else d.css("visibility","hidden"),c.css("visibility","hidden")};m.estVscroll=function(){var g=this.that,d=!0;null==g.totalVisibleRows||null==this.contHt?
d=!1:g.totalVisibleRows*this.rowHt<this.contHt&&(d=!1);this.vscroll=d};m.getSBWidth=function(){null==this.vscroll&&this.estVscroll();return this.vscroll?17:0};m.estHscroll=function(){var g=this.that;if(null==this.contWd)throw"failed";var d=!1;1<this.calcColsOutsideCont(g.colModel)+1&&(d=!0);this.hscroll=d};m.getSBHeight=function(){null==this.hscroll&&this.estHscroll();return this.hscroll?17:0};m.getEContHt=function(){if(null==this.contHt)throw"contHt N/A";return this.contHt-this.getSBHeight()};m.getEContWd=
function(){if(null==this.contWd)throw"contWd N/A";return this.contWd-this.getSBWidth()};m.calcColsOutsideCont=function(g){var d=this.that.options,c=d.numberCell,d=d.freezeCols,b=this.contWd-this.getSBWidth(),a=0;c.show&&(a+=c.outerWidth);for(c=0;c<g.length;c++){var f=g[c];f.hidden||(a+=f.outerWidth)}var n=0,h=0,f=Math.round(a);f>b&&h++;for(c=d;c<g.length;c++)if(f=g[c],!f.hidden)if(n+=f.outerWidth,f=a-n,f>b)h++;else break;return h};m.setScrollHNumEles=function(){var g=this.that,d=g.options,c=g.colModel,
b=d.scrollModel,a=1*g.hscroll.option("cur_pos"),f=0;if("flex"!==d.width||d.maxWidth)f="fullScroll"===b.lastColumn?c.length-d.freezeCols-g._calcNumHiddenUnFrozens():this.calcColsOutsideCont(c)+1;a&&f<=a&&(f=a+1);g.hscroll.option("num_eles",f);return f};m.init=function(){var g=this.that,d=g.options;this.hscroll=this.vscroll=this.contHt=this.contWd=null;g.initH=g.initV=g.finalH=g.finalV=null;g.totalVisibleRows=g.lastFrozenRow=null;this.rowHt=d.rowHeight;this.headerHt=0;this.height=null};m.refresh=function(g){g=
g||{};var d=this.that,c=g.header,b=g.table,a=g.pager,f,n=d.iGenerateView;f=d.element;if(f[0].offsetWidth){g.toolbar&&d.refreshToolbar();d.iMouseSelection.resetMargins();this.init();f=d.options;this.decidePanes();f.collapsible._collapsed=!1;this.setMax("maxHeight");this.setMax("maxWidth");this.refreshGridWidthAndHeight();this.initContHeight();this.initContWidth();this.calcInitFinal();if(!1===c||!1===b)var h=this._storeColumnWidths(!0);this.refreshColumnWidths();this.calcInitFinalH();n.createColDefs();
!1!==c?d._createHeader():this._isColumnWidthChanged(h)&&this._refreshTableWidths(h,{header:!0});d._refreshHeaderSortIcons();!1!==a&&d._refreshPager();this.setHeaderHeight();this.setContHeight();!1!==b?n.generateView({source:g.source}):(this._refreshTableWidths(h,{table:!0}),n.setPanes());d._saveDims();n.scrollView();this.refreshScrollbars();"flex"==f.height&&this.setContAndGridHeightForFlex();"flex"==f.width&&this.setContAndGridWidthForFlex();this._refreshFrozenLine();d._createCollapse();f.dataModel.postDataOnce=
void 0}else f.addClass("pq-pending-refresh")};m.summaryTable=function(){var g=this.$summary,d=this.that,c=d.options.summaryData;c?(g||(g=this.$summary=l("<div class='pq-grid-summary'></div>").prependTo(d.$bottom)),g={data:c,$cont:g},d.createTable(g)):g&&g[0].innerHTML&&g.empty()};m.refreshVscroll=function(g){g=this.that;var d=g.iGenerateView,c=g.options;if(c.virtualY&&!c.scrollModel.smooth){var b=g.initV,a=g.finalV;this.calcInitFinal();var f=b-g.initV,n=a-g.finalV;c.fullrefreshOnScroll||c.detailModel.init||
g._mergeCells||1!=Math.abs(f)||1!=Math.abs(n)?b==g.initV&&a==g.finalV||d.generateView():-1==f?(d.removeTopRow(1),d.appendRow(g.finalV-a)):1==f&&(d.prependRow(),d.removeBottomRow(a-g.finalV));g._saveDims();d.scrollView();1>=this.setScrollVNumEles()&&this.refreshScrollbars()}};m._refreshTableWidths=function(g,d){var c=this.that,b=c.$tbl_header,a=d.header&&b,f=c.$tbl,n=d.table&&f,b=a?b.children().children(".pq-row-hidden"):null,h=a?c.$header.find(".pq-grid-col-resize-handle"):null,f=n&&f?f.children().children(".pq-row-hidden"):
null,e,k=!1,w=0;n&&c.tables.length&&(n=c.tables[0].$tbl.children().children(".pq-row-hidden"),f=f?f.add(n):n);for(var n=c.iGenerateView.colDef,l=0,t=n.length;l<t;l++){var r=n[l],u=r.colIndx,p=g[u].outerWidth,r=r.column.outerWidth;r!==p&&(a&&(e=b.find("td[pq-col-indx="+u+"]"),e.width(r)),f&&(e=f.find("td[pq-col-indx="+u+"]"),e.length&&(k=!0,e.width(r))));w+=r-p;a&&0!==w&&(u=h.filter("[pq-col-indx="+u+"]"),p=parseInt(u.css("left")),u.css("left",p+w))}k&&c._trigger("tableWidthChange");c._saveDims()}})(jQuery);
(function(l){function m(a,b,c){for(var f=0,d=a.length;f<d;f++){for(var n=a[f],g={},l=0,p=b.length;l<p;l++){var m=b[l];g[m]=n[m]}c.push(g)}}function g(a){var b=this;b.that=a;b.findformulas();a.on("columnChange",function(){b.findformulas()}).on("dataAvailable",function(){b._onDA()}).on(!0,"change",function(a,c){b._onchange(c)}).on("dataReady changeDone",function(){b.summaryData()})}var d=l.paramquery,c=d.cClass;l.widget("paramquery.pqGrid",d._pqGrid,{options:{flex:{on:!0,one:!1,all:!0},detailModel:{cache:!0,
offset:100,expandIcon:"ui-icon-triangle-1-se glyphicon glyphicon-minus",collapseIcon:"ui-icon-triangle-1-e glyphicon glyphicon-plus"},dragColumns:{enabled:!0,acceptIcon:"ui-icon-check glyphicon-ok",rejectIcon:"ui-icon-closethick glyphicon-remove",topIcon:"ui-icon-circle-arrow-s glyphicon glyphicon-circle-arrow-down",bottomIcon:"ui-icon-circle-arrow-n glyphicon glyphicon-circle-arrow-up"},track:null,mergeModel:{flex:!1},realFocus:!0,sortModel:{on:!0,type:"local",multiKey:"shiftKey",number:!0,single:!0,
cancel:!0,sorter:[],useCache:!0,ignoreCase:!1},filterModel:{on:!0,type:"local",mode:"AND",header:!1}},_create:function(){var a=this,c=a.options;a.listeners={};a._queueATriggers={};a.iHistory=new d.cHistory(a);a.iGroup=new d.cGroup(a);d.cMerge&&(a.iMerge=new d.cMerge(a));a.iFilterData=new d.cFilterData(a);a.iSelection=new b.Selection(a);a.iHeaderSearch=new f(a);a.iUCData=new d.cUCData(a);a.iMouseSelection=new d.cMouseSelection(a);a._super();new g(a);a.iDragColumns=new d.cDragColumns(a);a.refreshToolbar();
"remote"===c.dataModel.location&&a.refresh({table:!0});a.on("dataAvailable",function(){a.one("refreshDone",function(){a._trigger("ready");setTimeout(function(){a.element&&a._trigger("complete")},0)})});a.refreshDataAndView({header:!0})}});l.widget.extend=function(){var a=Array.prototype.shift,b=l.isPlainObject,c=l.isArray,f=l.widget.extend,d=a.apply(arguments),n;"boolean"==typeof d&&(n=d,d=a.apply(arguments));var g=arguments,u=0,p=g.length,m,v,s;for(null==n&&(n=1<p?!0:!1);u<p;u++)for(v in m=g[u],
m)s=m[v],void 0!==s&&(a=0<u?!1:!0,b(s)?(d[v]=d[v]||{},f(a,d[v],s)):c(s)?d[v]=n&&a?s.slice():s:d[v]=s);return d};var b=window.pq=window.pq||{};b.grid=function(a,b){var c=l(a).pqGrid(b);return c.data("paramqueryPqGrid")||c.data("paramquery-pqGrid")};d.pqGrid.regional={};var a=d.pqGrid.prototype;d.pqGrid.defaults=a.options;a.focus=function(a){a=a||{};var b=a.$td,c=a.rowIndxPage;a=a.colIndx;if(b){if(null==c||null==a)a=this.getCellIndices({$td:b}),c=a.rowIndxPage,a=a.colIndx}else{if(null==c||null==a){if((c=
document.activeElement)&&c!=document.body&&"pq-grid-excel"!=c.id&&"pq-grid-cont"!=c.className||!(b=this._focusElement))return;c=b.rowIndxPage,a=b.colIndx}var b=this.iMerge,f=c+this.rowIndxOffset;b.ismergedCell(f,a)&&(b=b.getRootCell(f,a,"o"),c=b.rowIndxPage,a=b.colIndx);b=this.getCell({rowIndxPage:c,colIndx:a})}if(this.options.realFocus){this._focusElement={$ele:b,rowIndxPage:c,colIndx:a};var d;b[0]&&(d=b[0])&&"TD"==d.nodeName.toUpperCase()?(d.setAttribute("tabindex",0),d.focus()):(c=this.options.dataModel.data)&&
c.length||this.$cont.focus()}else{if(d=this._focusElement)this.removeClass({rowIndxPage:d.rowIndxPage,colIndx:d.colIndx,cls:"pq-focus",refresh:!1}),this.element.find(".pq-focus").removeClass("pq-focus");b&&(this.addClass({rowIndxPage:c,colIndx:a,cls:"pq-focus"}),this._focusElement={$ele:b,rowIndxPage:c,colIndx:a});c=this.$cont;document.activeElement!=c[0]&&c[0].focus()}};a.onfocus=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.addClass({rowIndxPage:a.rowIndxPage,colIndx:a.colIndx,
cls:"pq-focus"})}};a.onblur=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.removeClass({rowIndxPage:a.rowIndxPage,colIndx:a.colIndx,cls:"pq-focus"})}};a.range=function(a,c){return new b.Range(this,a,"range",c)};a.rowExpand=function(a){this.iHierarchy.rowExpand(a)};a.rowInvalidate=function(a){this.iHierarchy.rowInvalidate(a)};a.rowCollapse=function(a){this.iHierarchy.rowCollapse(a)};a.saveState=function(a){a=a||{};var b=this.element,c=l.extend,f=this.options,d=c(!0,{},{sorter:f.sortModel.sorter}),
n=f.pageModel,n={rPP:n.rPP,curPage:n.curPage},g=this.colModel,m=[],p,q,v=0,s=g.length;q=f.groupModel;c=c(!0,{},{dataIndx:q.dataIndx,dir:q.dir,collapsed:q.collapsed,merge:q.merge,grandSummary:q.grandSummary});for(b=b[0].id;v<s;v++){p=g[v];q={width:p.width,dataIndx:p.dataIndx,hidden:p.hidden};if(p=p.filter)q.filter={value:p.value,value2:p.value2,on:p.on};m[v]=q}f={colModel:m,height:f.height,datestamp:Date.now(),width:f.width,groupModel:c,pageModel:n,sortModel:d,freezeRows:f.freezeRows,freezeCols:f.freezeCols};
!1!==a.stringify&&(f=JSON.stringify(f),!1!==a.save&&"undefined"!==typeof Storage&&localStorage.setItem("pq-grid"+(b?b:""),f));return f};a.loadState=function(a){a=a||{};var b;b=l.widget.extend;var c=l.extend,f=this.element[0].id;if(f=a.state||("undefined"===typeof Storage?void 0:localStorage.getItem("pq-grid"+(f||""))))"string"==typeof f&&(f=JSON.parse(f));else return!1;for(var d=f.colModel,n,g,m=[],p=[],q=[],v=[],s=[],y=this.options,z=1<this.depth,x=z?this.colModel:y.colModel,B=0,D=d.length;B<D;B++)n=
d[B],g=n.dataIndx,p[g]=!0,q[g]=B,m[g]=n.width,v[g]=n.filter,s[g]=n.hidden;z||x.sort(function(a,b){return q[a.dataIndx]-q[b.dataIndx]});B=0;for(D=x.length;B<D;B++)d=x[B],g=d.dataIndx,p[g]&&(d.width=m[g]||d.width,d.filter=c(d.filter,v[g]),d.hidden=s[g]);this.iColModel.init();b(y.sortModel,f.sortModel);b(y.pageModel,f.pageModel);this.groupOption(f.groupModel,!1);b={freezeRows:f.freezeRows,freezeCols:f.freezeCols};isNaN(1*y.height)||isNaN(1*f.height)||(b.height=f.height);isNaN(1*y.width)||isNaN(1*f.width)||
(b.width=f.width);this.option(b);!1!==a.refresh&&this.refreshDataAndView();return!0};var f=function(a){function b(c,f,e){a.filter({data:[{dataIndx:c,value:f,value2:e}]})}this.that=a;var c=this;this.dataHS={};a.on("headerKeyDown",function(a,b){var f=l(a.originalEvent.target);return f.hasClass("pq-grid-hd-search-field")?c.onKeyDown(a,b,f):!0});a.on("createHeader",function(a,b){return c._onCreateHeader()});this.changeListener={change:function(a,c){b(c.dataIndx,c.value,c.value2)}};this.keyupListener=
{keyup:function(a,c){b(c.dataIndx,c.value,c.value2)}};this.clickListener={click:function(a,c){b(c.dataIndx,c.value)}}},c=f.prototype=new c;c.get$Ele=function(a,b){var c=this.that,f=c.options.freezeCols,d=l(c.$tbl_header[0]),n=".pq-grid-hd-search-field[name='"+b+"']",c=l(c.$tbl_header[2==c.$tbl_header.length?1:0]);return a>=f?c.find(n):d.find(n)};c.onKeyDown=function(a,b,c){b=this.that;if(a.keyCode===l.ui.keyCode.TAB){var f=c.attr("name"),d=b.getColIndx({dataIndx:f}),n=b.colModel,g,m=a.shiftKey,p=
n[d];if("between"==p.filter.condition&&(b.scrollColumn({colIndx:d}),f=this.get$Ele(d,f),f[0]==c[0]?m||(g=f[1]):m&&(g=f[0]),g))return g.focus(),a.preventDefault(),!1;do{m?d--:d++;if(0>d||d>=n.length)break;p=n[d];c=p.filter;if(!p.hidden&&c){b.scrollColumn({colIndx:d});f=p.dataIndx;g=this.get$Ele(d,f);"between"==c.condition&&(g=m?l(g[1]):l(g[0]));if(g)return g.focus(),a.preventDefault(),!1;break}}while(1)}else return!0};c._bindFocus=function(){function a(f){f=l(f.target).closest(".pq-grid-hd-search-field").attr("name");
if(b.scrollColumn({dataIndx:f})){var h=b.getColIndx({dataIndx:f});c.get$Ele(h,f).focus()}}for(var b=this.that,c=this,f=b.$header.find(".pq-grid-header-search-row"),d=0;d<f.length;d++)l(f[d]).on("focusin",a)};c._onCreateHeader=function(){var a=this.that,b=a.options;if(b.filterModel.header){this._bindFocus();var c=a.colModel,b=b.freezeCols,f=a.$tbl_header,d=l(f[0]),n=l(f[1]),g="input,select";if(1<f.length){d.find(g).css("visibility","hidden");for(var m=0;m<b;m++){var p=c[m],g="*[name='"+p.dataIndx+
"']";d.find(g).css("visibility","visible");n.find(g).css("visibility","hidden")}}c=a.iGenerateView.colDef;m=0;for(g=c.length;m<g;m++){var q=c[m],v=q.colIndx,p=q.column,s=p.filter;if(s){var q=p.dataIndx,y=d;v>=b&&1<f.length&&(y=n);v=y.find("*[name='"+q+"']");if(0!=v.length){var y=s.type,z=s.value,x=s.value2;"checkbox"==y&&"triple"==s.subtype?v.pqval({val:z}):"select"==y&&null!=z&&v.val(z);(y=s.init)&&y.call(v,{dataIndx:q,column:p});if(p=s.listeners)for(s=0;s<p.length;s++){y=p[s];"string"==typeof y&&
(y=this[y+"Listener"]);for(var B in y)(function(b,c,f){b.bind(B,function(e){var d=a.getColumn({dataIndx:f}),k=d.filter;"checkbox"==k.type?z="triple"==k.subtype?b.pqval({incr:!0}):b.is(":checked")?!0:!1:"between"==k.condition?(z=l(b[0]).val(),x=l(b[1]).val()):z=b.val();return c.call(this,e,{column:d,dataIndx:f,value:z,value2:x})})})(v,y[B],q)}}}}}};var n=function(a,b){return["<div class='pq-from-div'>",a,"</div><span class='pq-from-to-center'>-</span><div class='pq-to-div'>",b,"</div>"].join("")};
c.createDOM=function(a,b){var c=this.that,f=c.options,g=f.bootstrap.on?" ":" ui-corner-all",f=f.numberCell;a.push("<tr class='pq-grid-header-search-row'>");f.show&&a.push("<td pq-col-indx='-1' class='pq-grid-number-col' rowspan='1'><div class='pq-td-div'>&nbsp;</div></td>");for(var f=c.iGenerateView.colDef,l=0,m=f.length;l<m;l++){var u=f[l].column,p=b,q=u.halign;q||(q=u.align);"right"==q?p+=" pq-align-right":"center"==q&&(p+=" pq-align-center");(q=u.cls)&&(p=p+" "+q);if(q=u.filter){var v=u.dataIndx,
s=q.type,y=q.value,z=q.condition,x=q.cls,x="pq-grid-hd-search-field "+(x?x:""),B=q.style,B=B?B:"",D=q.attr,D=D?D:"",C="";if("between"==z)var E=q.value2,E=null!=E?E:"";"textbox"===s?(y=y?y:"",x=x+" pq-search-txt"+g,C="between"==z?n(this._input(v,y,x+" pq-from",B,D),this._input(v,E,x+" pq-to",B,D)):this._input(v,y,x,B,D)):"textarea"===s?(y=y?y:"",x=x+" pq-search-txt"+g,C="between"==z?n(this._textarea(v,y,x+" pq-from",B,D),this._textarea(v,E,x+" pq-to",B,D)):this._textarea(v,y,x,B,D)):"select"===s?q.cache?
C=q.cache:(s=q.options,"function"===typeof s&&(s=s.call(c,{column:u,value:y,dataIndx:v,cls:x,style:B,attr:D})),x+=g,u=["name='",v,"' class='",x,"' style='",B,"' ",D].join(""),C=d.select({options:s,attr:u,prepend:q.prepend,valueIndx:q.valueIndx,labelIndx:q.labelIndx,groupIndx:q.groupIndx}),q.cache=C):"checkbox"==s?C=["<input ",null==y||!1==y?"":"checked=checked"," name='",v,"' type=checkbox class='"+x+"' style='"+B+"' "+D+"/>"].join(""):"string"==typeof s?C=s:"function"==typeof s&&(C=s.call(c,{width:u.outerWidth,
value:y,value2:E,column:u,dataIndx:v,cls:x,attr:D,style:B}));a.push(["<td class='",p,"'><div class='pq-td-div' >",C,"</div></td>"].join(""))}else a.push(["<td class='",p,"'><div class='pq-td-div' >&nbsp;</div></td>"].join(""))}a.push("</tr>")};c._input=function(a,b,c,f,d){return['<input value="',b,"\" name='",a,"' type=text style='"+f+"' class='"+c+"' "+d+" />"].join("")};c._textarea=function(a,b,c,f,d){return["<textarea name='",a,"' style='"+f+"' class='"+c+"' "+d+" >",b,"</textarea>"].join("")};
a.refreshToolbar=function(){var a=this.options,c=a.toolbar,f;this._toolbar&&(f=this._toolbar,f.destroy());if(c){var d=c.cls,n=c.style,g=c.attr,c=c.items,d=l("<div class='"+(d?d:"")+"' style='"+(n?n:"")+"' "+(g?g:"")+" ></div>");f?f.widget().replaceWith(d):this.$top.append(d);f=b.toolbar(d,{items:c,gridInstance:this,bootstrap:a.bootstrap});a.showToolbar||d.css("display","none");this._toolbar=f}};a.isLeftOrRight=function(a){return a>this.freezeCols?"right":"left"};a.ovCreateHeader=function(a,b){this.options.filterModel.header&&
this.iHeaderSearch.createDOM(a,b)};a.filter=function(a){var b=this,c=this.options,f=void 0===a.apply?!0:a.apply,d=void 0===a.sort?!0:a.sort,n=c.dataModel,c=c.filterModel;if(void 0!=a){var g="replace"==a.oper?!0:!1;a=a.data;for(var m=this.colModel,m=f?m:l.extend(!0,[],m),p=0,q=m.length,v=a.length,s=0;s<q;s++){for(var y=m[s],z=!1,x=0;x<v&&p!=v;x++){var B=a[x];if(B.dataIndx==y.dataIndx){z=!0;p++;var x=y.filter,D=B.condition,C=B.value;x?x.on=!0:x=y.filter={on:!0};D&&(x.condition=D);D=x.condition;x.value=
C;if("between"==D)x.value2=B.value2;else if("range"==D){B=[];if(C)if("string"==typeof C){var D=x.options,E=C.indexOf('"'),F=C.lastIndexOf('"'),C=C.substr(E,F+1),C=JSON.parse("["+C+"]");if(D)for(E=0,F=D.length;E<F;E++){var K=D[E];-1!=l.inArray(K,C)&&B.push(K)}else B=C.split(",s*")}else"function"==typeof C.push&&(B=C);x.value=B}break}}g&&!z&&y.filter&&(y.filter.on=!1)}}var H={header:!1,apply:f,sort:d,CM:m};if("remote"==n.location&&"local"!=c.type)this.remoteRequest({apply:f,CM:m,callback:function(){return b._onDataAvailable(H)}});
else return H.source="filter",H.trigger=!1,b._onDataAvailable(H)};a._initTypeColumns=function(){for(var a=this.colModel,b=0,c=a.length;b<c;b++){var f=a[b],n=f.type;"checkBoxSelection"===n||"checkbox"==n?(f.type="checkbox",new d.cCheckBoxColumn(this,f)):"detail"===n&&(f.dataIndx="pq_detail",this.iHierarchy=new d.cHierarchy(this,f))}};a.refreshHeader=function(){this._createHeader();this.iGenerateView.setPanes();this._refreshHeaderSortIcons()};a._refreshHeaderSortIcons=function(){this.iHeader.refreshHeaderSortIcons()};
a.getLargestRowCol=function(a){for(var b=0;b<a.length;b++);};a.bringCellToView=function(a){this._bringCellToView(a)};a._setUrl=function(a){this.options.dataModel.getUrl=function(){return{url:this.url+(null!=a?a:"")}}};a.pageData=function(){return this.pdata};a.getData=function(a){a=a||{};var b=a.dataIndx,c=b?b.length:0,f=a.data;a=this.options.dataModel;var d=a.data,n=a.dataUF;a=[];if(c)f?m(f,b,a):(d&&m(d,b,a),n&&m(n,b,a));else return d.concat(n?n:[]);f=[];for(d=0;d<c;d++){var n=b[d],g=this.getColumn({dataIndx:n});
f.push({dataIndx:n,dir:"up",dataType:g.dataType,sortType:g.sortType})}a=this.iSort._sortLocalData(f,a);b=[];c=void 0;f=0;for(d=a.length;f<d;f++)n=a[f],g=JSON.stringify(n),g!==c&&(b.push(n),c=g);return b};a.get_p_data=function(){var a=this.options,b="remote"==a.pageModel.type,c=a.dataModel.data,f=this.pdata,d=this.rowIndxOffset,a=a.groupModel,n=d&&b?Array(d):[];return a.on&&a.dataIndx.length?d?(b||(n=c.slice(0,d)),n.concat(f)):f:d&&b?n.concat(f):c};a._onDataAvailable=function(a){a=a||{};var b=this.options,
c=null==a.apply?!0:a.apply,f=a.source,d=a.sort,n=[],n=b.filterModel,g=b.dataModel,b=b.sortModel,l=g.location;!1!==c&&!1!==a.trigger&&this._trigger("dataAvailable",a.evt,{source:f});n=n&&n.on&&("local"==l&&"remote"!=n.type||"remote"==l&&"local"==n.type)?this.iFilterData.filterLocalData(a).data:g.data;"local"==b.type&&!1!==d&&(c?this.sort({refresh:!1}):n=this.iSort.sortLocalData(n));if(!1===c)return n;g.data=n;this.refreshView(a)};a.sort=function(a){a=a||{};var b=this,c=this.options,f=c.dataModel.data,
d=c.sortModel.type;if(f&&f.length||"local"!=d){var n=c.editModel,c=this.iSort,g=c.getSorter(),l,m=a.evt,q=null==a.single?c.readSingle():a.single;l=c.readCancel();a.sorter?a.addon?(a.single=q,a.cancel=l,l=c.refreshSorter(a)):l=a.sorter:l=c.readSorter();if(l.length||g.length)n.indices&&b.blurEditor({force:!0}),n={dataIndx:l.length?l[0].dataIndx:null,oldSorter:g,sorter:l,source:a.source,single:q},!1===b._trigger("beforeSort",m,n)?c.cancelSort():(c.resumeSort(),"local"==d&&c.saveOrder(),c.setSorter(l),
c.setSingle(q),c.writeSorter(l),c.writeSingle(q),"local"==d?(c.sortLocalData(f),this._queueATriggers.sort={evt:m,ui:n},!1!==a.refresh&&this.refreshView()):"remote"==d&&(this._queueATriggers.sort={evt:m,ui:n},a.initByRemote||this.remoteRequest({initBySort:!0,callback:function(){b._onDataAvailable()}})))}};a.reset=function(a){a=a||{};var b=a.sort,c,f=0,d;c=this.options;d=l.extend;var n,g=a.filter,m=a.group;if(b||g||m){b&&(n=!0===b?{sorter:[]}:b,d(c.sortModel,n));if(g)for(c=this.getColModel(),d=c.length;f<
d;f++)if(n=c[f].filter)n.value=null,n.value2=null,n.cache=null;m&&(f=!0===m?{dataIndx:[]}:m,this.groupOption(f,!1));!1!==a.refresh&&(g?(this.filter({oper:"replace",data:[]}),this.refreshHeader()):b?this.sort():this.refreshView())}};a._trigger=d._trigger;a.on=d.on;a.one=d.one;a.off=d.off;a.pager=function(){return this.pagerW};a.vscrollbar=function(){return this.vscroll};a.hscrollbar=function(){return this.hscroll};a.toolbar=function(){return this._toolbar.element};a=g.prototype;a.callRow=function(a,
b,c){if(a)for(;c--;){var f=b[c],d=f.column;a[d.dataIndx]=f.formula.call(this.that,{rowData:a,column:d})}};a._onDA=function(){var a=this.formulas.length;if(a)for(var b=this.that.options.dataModel.data,c=b.length,f=this.formulas;c--;)this.callRow(b[c],f,a)};a.summaryData=function(){var a=this.formulas,b=a.length,c,f;if(b)for(c=this.that.options.summaryData||[],f=c.length;f--;)this.callRow(c[f],a,b)};a._onchange=function(a){var b=this.formulas.length;if(b){a=a.rowList;for(var c=this.formulas,f=a.length;f--;)this.callRow(a[f].rowData,
c,b)}};a.findformulas=function(){for(var a=this.that.colModel,b,c,f=[],d=a.length;d--;)b=a[d],(c=b.formula)&&f.push({formula:c,column:b});this.formulas=f};a=d.cColModel=a=function(a){this.that=a;this.init()};a=a.prototype;a.extend=function(a,b){for(var c,f,d=l.extend,n=a.length;n--;){var g=a[n];for(c in b)void 0===g[c]&&(f=b[c],g[c]=f&&"object"==typeof f?d(!0,{},f):f)}};a.init=function(){var a=this.that,b=a.options,c=b.columnTemplate,f;f=b.colModel;f||(this._autoGenColumns(),f=b.colModel);b=this.nestedCols(f);
a.depth=b.depth;b=a.colModel=b.colModel;f=b.length;c&&this.extend(b,c);this.getHeadersCells();this.alignColumns(b,f);this.assignRowSpan();this._refreshDataIndices();a._trigger("CMInit")};a.alignColumns=function(a,b){for(var c=0;c<b;c++){var f=a[c];if(!f.align){var d=f.dataType;!d||"integer"!=d&&"float"!=d||(f.align="right")}}};a.nestedCols=function(a,b,c,f){var d=a.length,n=[];null==b&&(b=1);for(var g=b,l=0,m=0,q=0,v=0;v<d;v++){var s=a[v];s.parent=f?f:void 0;!0===c&&(s.hidden=c);var y=s.colModel;
y&&y.length?(y=this.nestedCols(y,b+1,s.hidden,s),n=n.concat(y.colModel),0<y.colSpan?(y.depth>g&&(g=y.depth),s.colSpan=y.colSpan,l+=y.colSpan):s.colSpan=0,q+=y.o_colspan,s.o_colspan=y.o_colspan,s.childCount=y.childCount,m+=y.childCount):(s.hidden?s.colSpan=0:(s.colSpan=1,l++),q++,s.o_colspan=1,s.childCount=0,m++,n.push(s))}return{depth:g,colModel:n,colSpan:l,width:0,childCount:m,o_colspan:q}};a.getHeadersCells=function(){for(var a=this.that,b=a.options.colModel,c=a.colModel.length,f=a.depth,d=[],n=
0;n<f;n++){d[n]=[];for(var g=0,l=0,m=0;m<c;m++){var q;if(0==n)q=b[g];else{var v=d[n-1][m];if((q=v.colModel)&&0!=q.length){for(var v=m-v.leftPos,s=0,y=0,z=0;z<q.length;z++)if(s+=0<q[z].childCount?q[z].childCount:1,v<s){y=z;break}q=q[y]}else q=v}v=q.childCount?q.childCount:1;m==l?(q.leftPos=m,d[n][m]=q,l+=v,b[g+1]&&g++):d[n][m]=d[n][m-1]}}return a.headerCells=d};a.getDataType=function(){var a=this.colModel;if(a&&a[0])return"string"==typeof a[0].dataIndx?"JSON":"ARRAY"};a.assignRowSpan=function(){for(var a=
this.that,b=a.colModel.length,c=a.headerCells,a=a.depth,f=0;f<b;f++)for(var d=0;d<a;d++){var n=c[d][f];if(!(0<f&&n==c[d][f-1]||0<d&&n==c[d-1][f])){for(var g=1,l=d+1;l<a;l++)n==c[l][f]&&g++;n.rowSpan=g}}return c};a._autoGenColumns=function(){var a=this.that.options,c=a.columnTemplate||{},f=c.dataType,d=c.title,n=c.width,c=a.dataModel.data,g=b.validation,m=[];c&&c.length&&l.each(c[0],function(a,b){var c="string";g.isInteger(b)?c=-1<b+-1?"float":"integer":g.isDate(b)?c="date":g.isFloat(b)&&(c="float");
m.push({dataType:f?f:c,dataIndx:a,title:d?d:a,width:n?n:100})});a.colModel=m};a._refreshDataIndices=function(){for(var a=this.that,b="JSON"==this.getDataType()?!0:!1,c={},f={},d={},n=a.colModel,g=n.length,l=0;l<g;l++){var m=n[l],q=m.dataIndx;null==q&&(q="detail"==m.type?"pq_detail":b?"dataIndx_"+l:l,"pq_detail"==q&&(m.dataType="object"),m.dataIndx=q);c[q]=m;f[q]=l;m.validations&&(d[q]=d)}a.columns=c;a.colIndxs=f;a.validations=d}})(jQuery);
(function(l){var m=l.paramquery,g=m._pqGrid.prototype;g.exportExcel=function(c){c=c||{};c.format="xlsx";return this.exportData(c)};g.exportCsv=function(c){c=c||{};c.format="csv";return this.exportData(c)};g.exportData=function(c){return(new d(this,c)).Export(c)};var d=m.cExport=function(c,b){this.that=c;this.templates={content_types:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Override PartName="/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/worksheet.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/></Types>',
workbook:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><sheets><sheet name="',b.sheetName?b.sheetName:"ParamQuery Pro",'" sheetId="1" r:id="rId1"/></sheets></workbook>'].join(""),worksheet:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><%=content%></worksheet>',
rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="workbook.xml"/></Relationships>',workbook_rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheet.xml"/></Relationships>'}},
g=d.prototype;g.getTitle=function(c,b){var a=c.title;a?"function"==typeof a&&(a=a.call(this.that,{colIndx:b,column:c,dataIndx:c.dataIndx,Export:!0})):a="";return a};g.getRenderVal=function(c,b,a){var f=c.column,d=f.exportRender;return(b&&!1!==d||d)&&(f.render||f._render||f.format)?a.renderCell(c):c.rowData[c.dataIndx]};g.getXlsMergeCells=function(c,b,a,f){c=c.concat(a.getMergeCells(b,this.curPage,f));b=[];a=m.toLetter;f=c.length;b.push('<mergeCells count="'+f+'">');for(var d=0;d<f;d++){var h=c[d],
h=a(h.c1)+(h.r1+1)+":"+a(h.c2)+(h.r2+1);b.push('<mergeCell ref="',h,'"/>')}b.push("</mergeCells>");return f?b.join(""):""};g.getXlsCols=function(c,b){var a=[],f,d,h,e,k=0,g=function(a,b,c,f,e){a.push('<col min="',b,'" max="',c,'" hidden="',f,'" customWidth="1" width="',Math.ceil(e/7),'"/>')};a.push("<cols>");for(var l=0;l<b;l++){var m=c[l],r=m.hidden?"1":"0",u=m._width;!1!==m.copy&&(k++,u||(u=parseInt(m.width))||(u=100),h===u&&e===r?d=k:(null!=h&&(g(a,f,d,e,h),f=null),d=k,null==f&&(f=k)),h=u,e=r)}g(a,
f,d,e,h);a.push("</cols>");return a.join("")};g.getXlsHeader=function(c,b,a){for(var f=[],d=0;d<b;d++){var h=c[d];f.push("<row>");for(var e=0,k=h.length;e<k;e++){var g=h[e];if(!1!==g.copy){var l=g.o_colspan,m=g.rowSpan,r=this.getTitle(g,e);0<d&&g==c[d-1][e]?r="":0<e&&g==c[d][e-1]?r="":(1<l||1<m)&&a.push({r1:d,c1:e,r2:d+m-1,c2:e+l-1});f.push('<c t="inlineStr"><is><t><![CDATA['+r+"]]\x3e</t></is></c>")}}f.push("</row>")}return f.join("")};g.getXlsBody=function(c,b,a,f,d,h,e,k,g){var l=[],m,r,u,p,q,
v,s={integer:"Number","float":"Number",bool:"bool"};for(m=0;m<f;m++){q=a[m];r=q.pq_hidden?'hidden="1"':"";v=d?m+h:m;u=v-h;q={rowIndx:v,rowIndxPage:u,rowData:q,Export:!0};l.push("<row "+r+">");for(r=0;r<b;r++)p=c[r],!1!==p.copy&&(u=void 0,e.ismergedCell(v,r)&&(e.isRootCell(v,r,"o")||(u=null)),void 0===u&&(q.colIndx=r,q.column=p,q.dataIndx=p.dataIndx,u=this.getRenderVal(q,k,g)),p=null==u?null:s[p.dataType],"string"==typeof u&&(p="String"),p=p||"String",u=null==u?"":u,"String"==p?l.push('<c t="inlineStr"><is><t><![CDATA['+
u+"]]\x3e</t></is></c>"):"Number"==p?l.push("<c><v>"+u+"</v></c>"):"bool"==p?(u=u?"1":"0",l.push('<c t="b"><v>'+u+"</v></c>")):l.push("<c><v>"+u+"</v></c>"));l.push("</row>")}return l.join("\n")};g.getXlsContent=function(c,b,a,f,d,h,e,k,g,l,m,r){var u='<sheetViews><sheetView tabSelected="1" workbookViewId="0"><pane ySplit="<%=a%>" topLeftCell="A<%=b%>" activePane="bottomLeft" state="frozen"/></sheetView></sheetViews>',p=this.getXlsCols(c,b),q=[],v=r?f:0,u=u.replace("<%=a%>",v),u=u.replace("<%=b%>",
v+1);a=r?this.getXlsHeader(a,f,q):"";c=this.getXlsBody(c,b,d,h,e,k,g,l,m);return[u,p,"<sheetData>",a,c,"</sheetData>",this.getXlsMergeCells(q,r?f:0,g,h)].join("")};g.getHtmlHeader=function(c,b){for(var a=[],f,d,h,e,k=0;k<b;k++){var g=c[k],l=null;a.push("<tr>");for(var m=0,r=g.length;m<r;m++)f=g[m],d=f.colSpan,!f.hidden&&d&&!1!==f.copy&&(h=f.rowSpan,0<k&&f==c[k-1][m]||l&&0<m&&f==l||(e=this.getTitle(f,m),l=f,f=(f=f.halign||f.align)?"align="+f:"",a.push("<th colspan=",d," rowspan=",h," ",f,">",e,"</th>")));
a.push("</tr>")}return a.join("")};g.getHtmlBody=function(c,b,a,f,d,h,e,k,g){var l=[],m,r,u,p,q,v,s;for(m=0;m<f;m++)if(r=a[m],!r.pq_hidden){s=d?m+h:m;v=s-h;v={rowIndx:s,rowIndxPage:v,rowData:r,Export:!0};l.push("<tr>");for(r=0;r<b;r++)if(u=c[r],!u.hidden&&!1!==u.copy){q="";if(e.ismergedCell(s,r)){if(q=e.isRootCell(s,r))p=e.getRootCell(s,r,"o"),p.Export=!0,p=this.getRenderVal(p,k,g);else continue;q="rowspan="+q.rowspan+" colspan="+q.colspan+" "}else v.colIndx=r,v.column=u,v.dataIndx=u.dataIndx,p=this.getRenderVal(v,
k,g);u=u.align;q+=u?"align="+u:"";p=null==p?"":p;l.push("<td ",q,">",p,"</td>")}l.push("</tr>")}return l.join("")};g.getHtmlContent=function(c,b,a,f,d,h,e,k,g,l,m,r,u){var p=c.cssRules||"",q=this.that.element.find(".pq-grid-table"),v=q.css("font-family"),q=q.css("font-size"),s=[];s.push("<!DOCTYPE html><html><head>",'<meta charset="utf-8" />',"<title>",c.title?c.title:"ParamQuery Pro","</title>","</head><body>","<style>","table{empty-cells:show;font-family:"+v+";font-size:"+q+";border-collapse:collapse;}",
"td,th{padding: 5px;border:1px solid #ccc;}",p,"</style>","<table>");s.push(u?this.getHtmlHeader(f,d,b):"");s.push(this.getHtmlBody(b,a,h,e,k,g,l,m,r));s.push("</table></body></html>");return s.join("")};g.getCsvHeader=function(c,b,a,f){for(var d=[],h=[],e,k,g=0;g<b;g++){for(var l=c[g],m=null,r=0,u=l.length;r<u;r++)e=a[r],e.hidden||!1===e.copy||(e=l[r],0<g&&e==c[g-1][r]?d.push(""):m&&0<r&&e==m?d.push(""):(k=(k=this.getTitle(e,r))?k.replace(/\"/g,'""'):"",m=e,d.push('"'+k+'"')));h.push(d.join(f));
d=[]}return h};g.getCSVContent=function(c,b,a,f,d,h,e,k,g,l,m,r,u){var p,q;c=c.separator||",";var v,s=[];u=u?this.getCsvHeader(f,d,b,c):[];for(f=0;f<e;f++)if(q=h[f],!q.pq_hidden){d=k?f+g:f;v=d-g;v={rowIndx:d,rowIndxPage:v,rowData:q,Export:!0};for(q=0;q<a;q++)p=b[q],p.hidden||!1===p.copy||(l.ismergedCell(d,q)?l.isRootCell(d,q)?(p=l.getRootCell(d,q,"o"),p.Export=!0,p=this.getRenderVal(p,m,r)):p="":(v.colIndx=q,v.column=p,v.dataIndx=p.dataIndx,p=this.getRenderVal(v,m,r)),p=(null==p?"":p)+"",p=p.replace(/\"/g,
'""'),s.push('"'+p+'"'));u.push(s.join(c));s=[]}return u.join("\n")};g.getJsonContent=function(c,b){function a(a,b){return 0===(a+"").indexOf("pq_")?void 0:b}return c.nostringify?b:JSON.stringify(b,c.nopqdata?a:null,c.nopretty?null:2)};g.postRequest=function(c){var b=c.format,a,f=c.url,d=c.filename||"pqGrid";c.zip&&"xlsx"!=b?(b=new JSZip,b.file(d+"."+c.format,c.data),c=b.generate({type:"base64",compression:"DEFLATE"}),a=!0,b="zip"):(a=c.decodeBase?!0:!1,c=c.data);f&&l.ajax({url:f,type:"POST",cache:!1,
data:{pq_ext:b,pq_data:c,pq_decode:a,pq_filename:d},success:function(a){f+=(0<f.indexOf("?")?"&":"?")+"pq_filename="+a;l(document.body).append("<iframe height='0' width='0' frameborder='0' src=\""+f+'"></iframe>')}});return c};g.Export=function(c){var b=this.that,a=b.options,f,d,h,e=this.templates,k=a.groupModel;d="remote"==a.pageModel.type;f=b.rowIndxOffset;var g=b.iGenerateView,l=b.iMerge,m=b.colModel,r=m.length,u=b.headerCells,p=u.length,k=(this.curPage=k.on&&k.dataIndx.length||d)?b.pdata:a.dataModel.data,
k=a.summaryData?k.concat(a.summaryData):k,q=k.length,a=c.url,v=c.render,s=!c.noheader,y=c.format;b._trigger("beforeExport",null,c);"xlsx"==y?(f=this.getXlsContent(m,r,u,p,k,q,d,f,l,v,g,s),d=new JSZip,d.file("[Content_Types].xml",e.content_types),d.file("workbook.xml",e.workbook),d.file("worksheet.xml",e.worksheet.replace("<%=content%>",f)),f=d.folder("_rels"),f.file(".rels",e.rels),f.file("workbook.xml.rels",e.workbook_rels),a?(c.data=d.generate({type:"base64",compression:"DEFLATE"}),c.decodeBase=
!0):h=d.generate({type:"blob",compression:"DEFLATE"})):c.data="json"==y?this.getJsonContent(c,k):"csv"==y?this.getCSVContent(c,m,r,u,p,k,q,d,f,l,v,g,s):this.getHtmlContent(c,m,r,u,p,k,q,d,f,l,v,g,s);h=h?h:this.postRequest(c);b._trigger("exportData",null,c);return h}})(jQuery);
(function(l){var m=l.paramquery,g={options:{items:[],gridInstance:null}};l.widget("paramquery.pqToolbar",g);g=m.pqToolbar.prototype;g.refresh=function(){this.element.empty();this._create()};g._create=function(){var d=this.options,c=d.gridInstance,b={button:"click",select:"change",checkbox:"change",textbox:"change"},a,f,n=d.bootstrap,h=n.on,e=c.colModel,d=d.items,k=this.element;k.addClass("pq-toolbar");for(var g=0,A=d.length;g<A;g++){var t=d[g],r=t.type,u=t.value,p=t.icon,q=t.options||{},v=t.label,
s=(f=t.listener)?[f]:t.listeners,s=s||[function(){}];f=(f=t.cls)?f:"";f=(f=h&&"button"==r?n.btn+" "+f:f)?"class='"+f+"'":"";var y=t.style,y=y?"style='"+y+"'":"",z=t.attr,x=z?z:"",z=v&&"button"!=r?[f,x]:[f,x,y],z=z.join(" "),B;t.options=q;"textbox"==r?B=l([v?"<label "+y+">"+v:"","<input type='text' "+z+">",v?"</label>":""].join("")):"textarea"==r?B=l([v?"<label "+y+">"+v:"","<textarea "+z+"></textarea>",v?"</label>":""].join("")):"checkbox"==r?B=l([v?"<label "+y+">":"","<input type='checkbox' ",u?
"checked='checked' ":"",z,">",v?v+"</label>":""].join("")):"separator"==r?B=l("<span class='pq-separator' "+[x,y].join(" ")+"></span>"):"button"==r?(B="",h&&(B=p?"<span class='glyphicon "+p+"'></span>":""),B=l("<button type='button' "+z+">"+B+v+"</button>"),l.extend(q,{label:v?v:!1,icons:{primary:h?"":p}}),B.button(q)):"select"==r?("function"===typeof q&&(q=q.call(c,{colModel:e})),q=q||[],B=m.select({options:q,attr:z,prepend:t.prepend,groupIndx:t.groupIndx,valueIndx:t.valueIndx,labelIndx:t.labelIndx}),
B=l([v?"<label "+y+">"+v:"",B,v?"</label>":""].join(""))):"string"==typeof r?B=l(r):"function"==typeof r&&(B=r.call(c,{colModel:e,cls:f}),B=l(B));B.appendTo(k);"checkbox"!==r&&void 0!==u&&(v?l(B[0].children[0]).val(u):B.val(u));u=0;for(v=s.length;u<v;u++)for(a in f=s[u],p={},"function"==typeof f?p[b[r]]=f:p=f,p)B.on(a,this._onEvent(c,p[a],t))}};g._onEvent=function(d,c,b){return function(a){b.value="checkbox"==b.type?l(a.target).prop("checked"):l(a.target).val();c.call(d,a)}};g._destroy=function(){this.element.empty().removeClass("pq-toolbar").enableSelection()};
g._disable=function(){null==this.$disable&&(this.$disable=l("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};g._enable=function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};g._setOption=function(d,c){"disabled"==d&&(!0==c?this._disable():this._enable())};pq.toolbar=function(d,c){var b=l(d).pqToolbar(c);return b.data("paramqueryPqToolbar")||b.data("paramquery-pqToolbar")}})(jQuery);
(function(l){var m=l.paramquery,g=m.pqGrid.prototype.options,d={on:!1,dirtyClass:"pq-cell-dirty"};g.trackModel=g.trackModel||d;g=(m.cUCData=function(c){this.that=c;this.udata=[];this.ddata=[];this.adata=[];this.options=c.options;var b=this;c.on("dataAvailable",function(a,c){"filter"!=c.source&&(b.udata=[],b.ddata=[],b.adata=[])})}).prototype=new m.cClass;g.add=function(c){var b=this.that,a=this.adata,f=this.ddata;c=c.rowData;for(var d=this.options.trackModel.dirtyClass,h=b.getRecId({rowData:c}),e=
0,k=a.length;e<k;e++){var g=a[e];if(null!=h&&g.recId==h)throw"primary key violation";if(g.rowData==c)throw"same data can't be added twice.";}e=0;for(k=f.length;e<k;e++)if(c==f[e].rowData){f.splice(e,1);return}var f=[],l;for(l in c)f.push(l);b.removeClass({rowData:c,dataIndx:f,cls:d});c={recId:h,rowData:c};a.push(c)};g.update=function(c){var b=this.that,a=this.options.trackModel.dirtyClass,f=c.rowData||b.getRowData(c),d=b.getRecId({rowData:f}),h=c.dataIndx,e=c.refresh,k=b.columns,g=b.getValueFromDataType;
c=c.row;var m=this.udata,t=m.slice(0),r=!1;if(null!=d){for(var u=0,p=m.length;u<p;u++){var q=m[u],v=q.oldRow;if(q.rowData==f){r=!0;for(h in c)m=k[h].dataType,p=c[h],p=g(p,m),q=v[h],q=g(q,m),v.hasOwnProperty(h)&&q===p?(m={rowData:f,dataIndx:h,refresh:e,cls:a},b.removeClass(m),delete v[h]):(m={rowData:f,dataIndx:h,refresh:e,cls:a},b.addClass(m),v.hasOwnProperty(h)||(v[h]=f[h]));l.isEmptyObject(v)&&t.splice(u,1);break}}if(!r){v={};for(h in c)v[h]=f[h],m={rowData:f,dataIndx:h,refresh:e,cls:a},b.addClass(m);
m={rowData:f,recId:d,oldRow:v};t.push(m)}this.udata=t}};g["delete"]=function(c){var b=this.that,a=c.rowIndx,f=c.rowIndxPage,d=b.rowIndxOffset,a=null==a?f+d:a,f="remote"==b.options.pageModel.type?null==f?a-d:f:a,d=this.adata,h=this.ddata;c=b.getRowData(c);for(var b=0,e=d.length;b<e;b++)if(d[b].rowData==c){d.splice(b,1);return}h.push({indx:f,rowData:c,rowIndx:a})};g.isDirty=function(c){var b=this.udata,a=this.adata,f=this.ddata,d=!1;if(c=this.that.getRowData(c))for(a=0;a<b.length;a++){if(c==b[a].rowData){d=
!0;break}}else if(b.length||a.length||f.length)d=!0;return d};g.getChangesValue=function(c){c=c||{};var b=this.that;c=c.all;for(var a=this.udata,f=this.adata,d=this.ddata,h=[],e=[],k=[],g=[],m=[],t=[],r=0,u=d.length;r<u;r++){var p=d[r],q=p.rowData,v={};m.push(q);for(var s in q)0!=s.indexOf("pq_")&&(v[s]=q[s]);t.push(v)}r=0;for(u=a.length;r<u;r++)if(p=a[r],d=p.oldRow,q=p.rowData,-1==l.inArray(q,m)&&-1==l.inArray(q,h)){v={};if(!1!==c)for(s in q)0!=s.indexOf("pq_")&&(v[s]=q[s]);else{for(s in d)v[s]=
q[s];v[b.options.dataModel.recIndx]=p.recId}h.push(q);e.push(v);k.push(d)}r=0;for(u=f.length;r<u;r++){p=f[r];q=p.rowData;v={};for(s in q)0!=s.indexOf("pq_")&&(v[s]=q[s]);g.push(v)}return{updateList:e,addList:g,deleteList:t,oldList:k}};g.getChanges=function(){for(var c=this.udata,b=this.adata,a=this.ddata,f=l.inArray,d=[],h=[],e=[],k=[],g=0,m=a.length;g<m;g++){var t=a[g],t=t.rowData;k.push(t)}g=0;for(m=c.length;g<m;g++)t=c[g],a=t.oldRow,t=t.rowData,-1==f(t,k)&&-1==f(t,d)&&(d.push(t),h.push(a));g=0;
for(m=b.length;g<m;g++)t=b[g],t=t.rowData,e.push(t);return{updateList:d,addList:e,deleteList:k,oldList:h}};g.getChangesRaw=function(){var c=this.adata,b=this.ddata,a={updateList:[],addList:[],deleteList:[]};a.updateList=this.udata;a.addList=c;a.deleteList=b;return a};g.commitAdd=function(c,b){for(var a=this.that,f=a.colModel,d=f.length,h=this.adata,e=l.inArray,k=h.length,g=a.getValueFromDataType,a=[],m=c.length,t=[],r=0;r<m;r++)for(var u=c[r],p=0;p<k;p++){var q=h[p].rowData,v=!0;if(-1==e(q,t)){for(var s=
0;s<d;s++){var y=f[s],z=y.dataType,x=y.dataIndx;if(!y.hidden&&x!=b&&(y=q[x],y=g(y,z),x=u[x],x=g(x,z),y!==x)){v=!1;break}}if(v){p={};v={};p[b]=u[b];v[b]=q[b];a.push({type:"update",rowData:q,oldRow:v,newRow:p});t.push(q);break}}}f=[];for(p=0;p<k;p++)q=h[p].rowData,-1==e(q,t)&&f.push(h[p]);this.adata=f;return a};g.commitUpdate=function(c,b){for(var a=this.that,f=this.options.trackModel.dirtyClass,d=this.udata,h=d.length,e=c.length,k=[],g=0;g<h;g++){var m=d[g],t=m.rowData,m=m.oldRow;if(-1==l.inArray(t,
k))for(var r=0;r<e;r++)if(t[b]==c[r][b]){k.push(t);for(var u in m)a.removeClass({rowData:t,dataIndx:u,cls:f})}}a=[];for(g=0;g<h;g++)t=d[g].rowData,-1==l.inArray(t,k)&&a.push(d[g]);this.udata=a;return[]};g.commitDelete=function(c,b){for(var a=this.ddata,f=a.length,d=this.udata,h,e,k;f--;){h=a[f].rowData;e=h[b];k=c.length;if(!k)break;for(;k--;)if(e==c[k][b]){c.splice(k,1);a.splice(f,1);for(e=d.length;e--;)d[e].rowData==h&&d.splice(e,1);break}}};g.commitUpdateAll=function(){for(var c=this.that,b=this.options.trackModel.dirtyClass,
a=this.udata,f=0,d=a.length;f<d;f++){var h=a[f],e=h.oldRow,h=h.rowData,k;for(k in e)c.removeClass({rowData:h,dataIndx:k,cls:b})}this.udata=[]};g.commitAddAll=function(){this.adata=[]};g.commitDeleteAll=function(){for(var c=this.ddata,b=this.udata,a=b.length,f,d=c.length,h=0;0<a&&h<d;h++){for(f=c[h].rowData;a--;)b[a].rowData==f&&b.splice(a,1);a=b.length}c.length=0};g.commit=function(c){var b=this.that,a=c?c.history:null,a=null==a?!1:a,f=[],f=[],d=[],h=b.options.dataModel.recIndx;if(null==c)this.commitAddAll(),
this.commitUpdateAll(),this.commitDeleteAll();else{var e=c.type;c=c.rows;"add"==e?c?f=this.commitAdd(c,h):this.commitAddAll():"update"==e?c?d=this.commitUpdate(c,h):this.commitUpdateAll():"delete"==e&&(c?this.commitDelete(c,h):this.commitDeleteAll())}f=f.concat(d);f.length&&(b._digestData({source:"commit",checkEditable:!1,track:!1,history:a,rowList:f}),b.refreshView())};g.rollbackAdd=function(c,b){for(var a=this.adata,f=[],d=0,h=a.length;d<h;d++)f.push({type:"delete",rowData:a[d].rowData});this.adata=
[];return f};g.rollbackDelete=function(c,b){for(var a=this.ddata,f=[],d=a.length-1;0<=d;d--){var h=a[d];f.push({type:"add",rowIndx:h.rowIndx,newRow:h.rowData})}this.ddata=[];return f};g.rollbackUpdate=function(c,b){for(var a=this.that,f=this.options.trackModel.dirtyClass,d=this.udata,h=[],e=0,k=d.length;e<k;e++){var g=d[e],l=g.rowData,m={},r=g.oldRow;if(null!=g.recId){var g=[],u;for(u in r)m[u]=l[u],g.push(u);a.removeClass({rowData:l,dataIndx:g,cls:f,refresh:!1});h.push({type:"update",rowData:l,newRow:r,
oldRow:m})}}this.udata=[];return h};g.rollback=function(c){var b=this.that,a=b.options.pageModel,f=c&&null!=c.refresh?c.refresh:!0;c=c&&null!=c.type?c.type:null;var d=[],d=[],h=[],e=[],k=b.options.dataModel.data;if(null==c||"update"==c)h=this.rollbackUpdate(a,k);if(null==c||"delete"==c)d=this.rollbackDelete(a,k);if(null==c||"add"==c)e=this.rollbackAdd(a,k);d=d.concat(e,h);b._digestData({history:!1,allowInvalid:!0,checkEditable:!1,source:"rollback",track:!1,rowList:d});f&&b.refreshView()};m=m.pqGrid.prototype;
m.getChanges=function(c){this.blurEditor({force:!0});if(c){var b=c.format;if(b){if("byVal"==b)return this.iUCData.getChangesValue(c);if("raw"==b)return this.iUCData.getChangesRaw()}}return this.iUCData.getChanges()};m.rollback=function(c){this.blurEditor({force:!0});this.iUCData.rollback(c)};m.isDirty=function(c){return this.iUCData.isDirty(c)};m.commit=function(c){this.iUCData.commit(c)};m.updateRow=function(c){for(var b=c.rowList||[{rowIndx:c.rowIndx,newRow:c.newRow||c.row,rowData:c.rowData,rowIndxPage:c.rowIndxPage}],
a=[],f=0,d=b.length;f<d;f++){var h=this.normalize(b[f]),e=h.newRow,k=h.rowData,g={};if(k){for(var l in e)g[l]=k[l];h.oldRow=g;h.type="update";a.push(h)}}if(!a.length||!1===this._digestData({source:c.source||"update",history:c.history,checkEditable:c.checkEditable,track:c.track,allowInvalid:c.allowInvalid,rowList:a}))return!1;!1!==c.refresh&&(1<a.length?this.refresh():this.refreshRow({rowIndx:a[0].rowIndx}))};m.getRecId=function(c){c.dataIndx=this.options.dataModel.recIndx;c=this.getCellData(c);return null==
c?null:c};m.getCellData=function(c){var b=c.rowData||this.getRowData(c);c=c.dataIndx;return b?b[c]:null};m.getRowData=function(c){if(!c)return null;var b=c.rowData;if(null!=b)return b;b=c.recId;if(null==b){var b=c.rowIndx,b=null!=b?b:c.rowIndxPage+this.rowIndxOffset,a=this.get_p_data()[b];return a}a=this.options.dataModel;c=a.recIndx;for(var f=a.data,d=0,h=f.length;d<h;d++)if(a=f[d],a[c]==b)return a;return null};m.deleteRow=function(c){for(var b=c.rowList||[{rowIndx:c.rowIndx,rowIndxPage:c.rowIndxPage}],
a=[],f=0,d=b.length;f<d;f++){var h=this.normalize(b[f]);h.oldRow=h.rowData;h.type="delete";a.push(h)}if(!a.length)return!1;this._digestData({source:c.source||"delete",history:c.history,track:c.track,rowList:a});!1!==c.refresh&&this.refreshView()};m.addRow=function(c){var b=c.rowList||[{rowIndx:c.rowIndx,rowIndxPage:c.rowIndxPage,newRow:c.newRow||c.rowData}],a=[],f=this.options.dataModel,d=f.data;null==d&&(f.data=[],d=f.data);for(var f=0,h=b.length;f<h;f++){var e=this.normalize(b[f]);e.type="add";
a.push(e)}if(!a.length||!1===this._digestData({source:c.source||"add",history:c.history,track:c.track,checkEditable:c.checkEditable,rowList:a}))return!1;!1!==c.refresh&&this.refreshView();c=a[0].rowIndx;return null==c?d.length-1:c}})(jQuery);
(function(l){var m=function(c){this.focusSelection=null};m.prototype.inViewRow=function(c){var b=this.that,a=b.finalV;return c<b.options.freezeRows?!0:c>=b.initV&&c<=a};var g=function(c){this.that=c;this.options=c=c.options;this.selection=[];this.hclass=" pq-state-select "+(c.bootstrap.on?"":"ui-state-highlight")};l.paramquery.cRows=g;var d=function(c){var b=c.options;this.that=c;this.selection=[];this.hclass="pq-state-select "+(b.bootstrap.on?"":"ui-state-highlight")};l.paramquery.cCells=d;d=d.prototype=
new m;m=g.prototype=new m;m.isSelected=function(c){return(c=c.rowData||this.that.getRowData(c))?!0===c.pq_rowselect:null};m.selectRange=function(c){var b=c.range,a=b.r1,b=b.r2;c=c.evt;var f=[];if(a>b)var d=a,a=b,b=d;for(;a<=b;a++)f.push({rowIndx:a});this.add({rows:f,evt:c})};d.removeAll=function(c){var b=this.that;c=b.get_p_data();var a=this.hclass;if(c&&c.length)for(b.$tbl&&b.$tbl.children().children().children().removeClass(a),b=0,a=c.length;b<a;b++){var f=c[b];f&&delete f.pq_cellselect}};m.removeAll=
function(c){c=c||{};var b=this.that,a=c.all,f=this.hclass,d=b.get_p_data();if(d&&d.length)for(c.refresh&&b.$tbl&&b.$tbl.children().children().removeClass(f),d=a?d:b.pdata,c=0,b=d.length;c<b;c++)(a=d[c])&&delete a.pq_rowselect};d.isSelected=function(c){var b=this.that,a=c.rowData||b.getRowData(c),f=c.dataIndx;c=c.colIndx;if(null==c&&null==f||null==a)return null;f=null==f?b.colModel[c].dataIndx:f;return!0==(a.pq_cellselect&&a.pq_cellselect[f])};m.getSelection=function(){for(var c=this.that,b=c.selection().address(),
a=[],f=0,d=b.length;f<d;f++){var h=b[f];if("row"==h.type)for(var e=h.r2,h=h.r1;h<=e;h++){var k=c.getRowData({rowIndx:h});a.push({rowIndx:h,rowData:k})}}return a};d.getSelection=function(){for(var c=this.that,b=c.selection(),a=c.colModel,b=b.address(),f=[],d=0,h=b.length;d<h;d++){var e=b[d],k=e.type;if("block"==k||"cell"==k||"column"==k)for(var k=e.r2,g=e.c1,l=e.c2,e=e.r1;e<=k;e++)for(var m=c.getRowData({rowIndx:e}),r=g;r<=l;r++)f.push({rowIndx:e,rowData:m,colIndx:r,dataIndx:a[r].dataIndx})}return f};
d.inViewCell=function(c,b){var a=this.that,f=a.options.freezeCols;return this.inViewRow(c)?b<f||b>=a.initH&&b<=a.finalH:!1};d._add=function(c){var b=this.that;c=b.normalize(c);var a=c.rowIndxPage,f=c.rowData,d,h=c.colIndx,e=c.dataIndx,k=this.isSelected({rowData:f,dataIndx:e});if(null==k)return!1;var g=b.iMerge.ismergedCell(c.rowIndx,h)||this.inViewCell(a,h);!1===k&&(g&&(b=b.getCell({rowIndxPage:a,colIndx:h}))&&b.addClass(this.hclass),d=(f.pq_cellselect=f.pq_cellselect||{})[e]=!0);if(d)return c};m._add=
function(c){var b=this.that,a=b.normalize(c),f=a.rowIndxPage;c=a.rowData;var d=this.isSelected({rowData:c});a.rowIndxPage=f;if(null==d)return!1;a=this.inViewRow(f);!1===d&&(!c.pq_hidden&&a&&(b=b.getRow({rowIndxPage:f}),b.length&&b.addClass(this.hclass)),c.pq_rowselect=!0)};d.add=function(c){this._add(c)};m.add=function(c){var b=c.rows;if(b&&"function"==typeof b.push){c=0;for(var a=b.length;c<a;c++){var f=b[c];f.trigger=!1;this._add(f)}}else this._add(c)};m._remove=function(c){var b=this.that,a=b.normalize(c);
c=a.rowIndx;var f=a.rowIndxPage,d=a.rowData,a=a.$tr;if(this.isSelected({rowData:d}))return this.inViewRow(f)&&(a=b.getRow({rowIndxPage:f}))&&(a.removeClass(this.hclass),a.removeAttr("tabindex")),d.pq_rowselect=!1,{rowIndx:c,rowData:d}};m.remove=function(c){var b=c.rows;if(b&&"function"==typeof b.push){c=0;for(var a=b.length;c<a;c++){var f=b[c];f.trigger=!1;this._remove(f)}}else this._remove(c)};d.selectBlock=function(c){var b=this.that,a=this.hclass,f=c.range,d=f.r1,h=f.c1,e=f.r2,f=f.c2,k=b.initH,
g=b.finalH,m=b.options.freezeCols,t=[],r=b.colModel,u=[];c=c.remove?!0:!1;for(var p=h;p<=f;p++)t[p]=r[p].dataIndx;for(;d<=e;d++)if(r=b.normalize({rowIndx:d}),p=r.rowData,r=r.rowIndxPage,p){var q=p.pq_cellselect=p.pq_cellselect||{};if(this.inViewRow(r))for(p=h;p<=f;p++){var v=t[p];if(c&&q[v]||!c&&!q[v]){if(p<m||p>=k&&p<=g){var s=b.getCell({rowIndxPage:r,colIndx:p});s.length&&u.push(s[0])}q[v]=c?void 0:!0}}else for(p=h;p<=f;p++)v=t[p],q[v]=c?void 0:!0}if(u.length)l(u)[c?"removeClass":"addClass"](a)}})(jQuery);
(function(l){var m=!0;l(function(){var d=l("<input type='checkbox' style='position:fixed;left:-50px;top:-50px;'/>").appendTo(document.body);d[0].indeterminate=!0;d.on("change",function(){m=!1});d.click();d.remove()});var g=(l.paramquery.cCheckBoxColumn=function(d,c){var b=this;this.that=d;this.options=d.options;this.column=c;c.cb=l.extend({},{all:!1,header:!1,select:!1,check:!0,uncheck:!1},c.cb);c._render=function(a){var b=a.rowData;if(!b.pq_gtitle&&!b.pq_gsummary)return"<input type='checkbox' "+
(c.cb.check===a.cellData?"checked":"")+" />"};this.dataIndx=c.dataIndx;var a=d.element,f=d.eventNamespace;d.on("dataAvailable",function(){d.one("dataReady",function(){return b._onDataReady()})}).on("dataReady",function(){b.setValCBox()});a.on("change"+f,function(a){var c=a.target;if("checkbox"==c.type&&l(c).closest(".pq-grid")[0]==this)return b.onCheckBoxChange(a)});d.on("cellKeyDown",function(a,c){return b.onCellKeyDown(a,c)});d.on("refreshHeader",function(a,c){return b.refreshHeader(a,c)})}).prototype=
new l.paramquery.cClass;g.hasHeaderChkBox=function(){return this.column.cb.header};g.setValCBox=function(){if(this.hasHeaderChkBox()){var d=this.that,c=this.options,b=this.dataIndx,a=this.column.cb,f=a.all,g=d.rowIndxOffset,g="remote"!=c.pageModel.type&&f?0:g,c=f?c.dataModel.data:d.pdata,f=null,h=0,e=0;if(c){for(var k=0,l=0,m=c.length;l<m;l++){var t=c[l],r=l+g;d.isEditableRow({rowIndx:r})&&d.isEditableCell({rowIndx:r,dataIndx:b})&&(k++,t[b]===a.check?h++:e++)}h==k&&k?f=!0:e==k&&(f=!1);this.$inp&&
this.$inp.pqval({val:f})}}};g.onHeaderChange=function(d){for(var c=l(d.target),b=this.that,a=this.column,f=a.dataIndx,g=b.options,h=a.cb,e=h.all,k=e?g.dataModel.data:b.pdata,m=b.rowIndxOffset,m="remote"!=g.pageModel.type&&e?0:m,g=[],a={column:a,dataIndx:f,source:"header"},c=c[0].checked,e=0,A=k.length;e<A;e++){var t=e+m,r=k[e],u={},p={};u[f]=c?h.check:h.uncheck;p[f]=r[f];g.push({rowIndx:t,rowData:r,newRow:u,oldRow:p,type:"update"})}f={rowList:g,source:"checkbox"};f.history=f.track=h.select?!1:null;
a.check=c;a.rows=g;if(!1===b._trigger("beforeCheck",d,a)||!1===b._digestData(f))return b.refreshHeader(),!1;b.refresh({header:!1});g=a.rows=f.rowList;b._trigger("check",d,a);h.select&&b.selection({type:"row",method:c?"add":"remove",rows:g})};g.refreshHeader=function(d,c){var b=this;if(this.hasHeaderChkBox()){var a=this.that;if(a.pdata&&(a=a.getCellHeader({dataIndx:this.dataIndx}))){var f=this.$inp=a.find("input");this.setValCBox();if(m)f.on("click",function(a){null==f.data("pq_value")&&(f[0].checked=
!0,f.data("pq_value",!0),b.onHeaderChange(a))});f.on("change",function(a){b.onHeaderChange(a)})}}};g._onDataReady=function(){var d=this.that,c=this.options,b=c.dataModel.data,c="remote"==c.pageModel.type?d.rowIndxOffset:0,a=this.column,f=a.cb,g=a.dataIndx;if(null!=g&&b){for(var h=[],e=0,k=b.length;e<k;e++){var l=b[e];l[g]===f.check&&h.push({rowIndx:e+c,rowData:l})}if(!1!==d._trigger("check",null,{rows:h,column:a,dataIndx:g,source:"dataAvailable"})&&f.select){for(e=0;e<k;e++)l=b[e],l[g]===f.check&&
(l.pq_rowselect=!0);d.selection().refresh()}}this.setValCBox()};g.rowSelect=function(d,c){var b=this.that,a=c.rows,f=c.rowData,g=this.dataIndx;if(a)for(var h=0,e=a.length;h<e;h++){var f=a[h],k=f.rowIndx,f=f.rowData;f[g]=!0;b.refreshCell({rowIndx:k,dataIndx:g})}else f&&(f[g]=!0,k=c.rowIndx,b.refreshCell({rowIndx:k,dataIndx:g}));this.setValCBox()};g.rowUnSelect=function(d,c){var b=this.that,a=c.rows,f=c.rowData,g=this.dataIndx;if(a)for(var h=0,e=a.length;h<e;h++){var f=a[h],k=f.rowIndx,f=f.rowData;
f[g]=!1;b.refreshCell({rowIndx:k,dataIndx:g})}else f&&(f[g]=!1,k=c.rowIndx,b.refreshCell({rowIndx:k,dataIndx:g}));this.setValCBox()};g.onCheckBoxChange=function(d){var c=this.that,b=this.column.cb,a=l(d.target),f=a.closest(".pq-grid-cell");if(f.length){var f=c.getCellIndices({$td:f}),f=c.normalize(f),g=f.rowData,h=f.rowIndx,e=f.dataIndx;if(e==this.dataIndx){var a=a[0].checked,k={},m={};k[e]=a?b.check:b.uncheck;m[e]=g[e];g=[{rowData:g,rowIndx:h,oldRow:m,newRow:k,type:"update"}];f.check=a;f.rows=g;
if(!1===c._trigger("beforeCheck",d,f))return c.refreshCell({rowIndx:h,dataIndx:e}),!1;g={source:"checkbox",rowList:g};g.history=g.track=b.select?!1:null;if(!1===c._digestData(g))return c.refreshCell({rowIndx:h,dataIndx:e}),!1;c.refreshRow({rowIndx:h});g=f.rows=g.rowList;c._trigger("check",d,f);b.select&&c.selection({type:"row",method:a?"add":"remove",rows:g});this.setValCBox()}}};g.onCellKeyDown=function(d,c){if(c.dataIndx==this.dataIndx&&(13==d.keyCode||32==d.keyCode))return l(d.originalEvent.target).find("input").click(),
!1}})(jQuery);
(function(){for(var l=0,m=["moz","webkit"],g=0;!window.requestAnimationFrame&&g<m.length;g++)window.requestAnimationFrame=window[m[g]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[m[g]+"CancelAnimationFrame"]||window[m[g]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(d){var c=(new Date).getTime(),c=Math.max(0,16-(c-l));return window.setTimeout(function(){l=(new Date).getTime();d()},c)});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(d){clearTimeout(d)})})();
(function(l){function m(d){this.that=d;var c=this;this.borderBottomExtra=this.borderBottom=this.borderLeftExtra=this.borderLeft=this.borderTopExtra=this.borderTop=this.borderRightExtra=this.borderRight=this.scrollLeft=this.scrollTop=0;this.maxBorder=5E3;this.rowht=d.options.rowHeight;this.colwd=60;d.on("contMouseDown",function(b,a){return c._onContMouseDown(b,a)}).on("mouseDrag",function(b,a){return c._onMouseDrag(b,a)}).on("mouseStop",function(b,a){return c._onMouseStop(b,a)}).on("mousePQUp",function(b,
a){return c._onMousePQUp(b,a)}).on("rowMouseDown",function(b,a){return c._onRowMouseDown(b,a)}).on("cellMouseDown",function(b,a){return c._onCellMouseDown(b,a)}).on("refresh",function(b,a){setTimeout(function(){d.element&&d.focus()},0)}).on("cellMouseEnter",function(b,a){return c._onCellMouseEnter(b,a)}).on("rowMouseEnter",function(b,a){return c._onRowMouseEnter(b,a)})}l.paramquery.cMouseSelection=m;var g=m.prototype=new l.paramquery.cClass;g.inViewPort=function(d){var c=this.that.iRefresh,b=c.getEContHt(),
c=c.getEContWd()+1;d=d[0];var a=this.scrollLeft;if(b>=d.offsetTop+d.offsetHeight+this.marginTop)if("TD"==d.nodeName.toUpperCase()){if(c>=d.offsetLeft+d.offsetWidth+a)return!0}else return!0};g._onCellMouseDown=function(d,c){var b=this.that,a=c.rowIndx,f=b.iSelection,g=c.colIndx,h=b.options.selectionModel,e=h.mode;if("cell"!=h.type)b.focus(c);else if(null!=g)return f=f.address()[0],d.shiftKey&&"single"!=e&&f?(e=f.firstR,f=f.firstC,b.range({r1:e,c1:f,r2:a,c2:g,firstR:e,firstC:f}).select()):(this.mousedown=
{r1:a,c1:g},b.range({r1:a,c1:g,firstR:a,firstC:g}).select()),b.focus(c),!0};g._onCellMouseEnter=function(d,c){var b=this.that,a=b.options.selectionModel,f=a.type,a=a.mode;if(this.mousedown&&"single"!=a){if("cell"==f){var f=this.mousedown,a=f.r1,g=f.c1,h=c.rowIndx,e=c.colIndx;if(a==h&&g==e||f.r2==h&&f.c2==e)return;this.mousedown.r2=h;this.mousedown.c2=e;b.scrollCell({rowIndx:h,colIndx:e});b.range({r1:a,c1:g,r2:h,c2:e,firstR:a,firstC:g}).select()}b.focus(c)}};g._onRowMouseEnter=function(d,c){var b=
this.that,a=b.options.selectionModel,f=a.mode;"row"==a.type&&this.mousedown&&"single"!=f&&(a=this.mousedown.r1,f=c.rowIndx,a==f?b.range({r1:a,firstR:a},!1).select():this.mousedown.r2!=f&&(this.mousedown.r2=f,b.scrollRow({rowIndx:f}),b.range({r1:a,r2:f,firstR:a},!1).select()))};g._onRowMouseDown=function(d,c){var b=this.that,a=c.rowIndx,f=b.iSelection,g;g=b.options.selectionModel;var h=l(d.originalEvent.target).hasClass("pq-grid-number-cell"),e=g.mode;if(("row"==g.type||g.row&&h)&&null!=a)return g=
b.iSelection.address(),d.shiftKey&&"single"!=e?((f=g.length)&&"row"==g[f-1].type&&(f=g[f-1],f.r1=f.firstR,f.r2=a,f.c1=f.c2=f.type=void 0),b.range(g).select()):(d.ctrlKey||d.metaKey)&&"single"!=e?(g=b.iRows.isSelected({rowIndx:a}),f[g?"removeRow":"add"]({r1:a,firstR:a})):(this.mousedown={r1:a,y1:d.pageY,x1:d.pageX},b.range({r1:a,firstR:a},!1).select()),h&&setTimeout(function(){b.focus({rowIndxPage:c.rowIndxPage,colIndx:b.getFirstVisibleCI(!0)})},0),!0};g._onContMouseDown=function(d,c){this.that.options.swipeModel.on&&
(this._stopSwipe(!0),this.swipedown={x:d.pageX,y:d.pageY});return!0};g._onMousePQUp=function(d,c){this.mousedown=null};g._stopSwipe=function(d){d&&(this.swipedownPrev=this.swipedown=null);window.clearInterval(this.intID);window.cancelAnimationFrame(this.intID);this.intID=null};g._onMouseStop=function(d,c){var b=this,a=this.that;if(this.swipedownPrev){var f=a.options.swipeModel,a=this.swipedownPrev,g=a.ts,h=(new Date).getTime()-g,e=d.pageX,k=d.pageY,l=e-a.x,m=k-a.y;if(Math.sqrt(l*l+m*m)/h>f.ratio){var t=
0,r=f.repeat;b._stopSwipe();var u=function(){t+=f.speed;r--;b._onMouseDrag({pageX:e+t*l/h,pageY:k+t*m/h});0<r?b.intID=window.requestAnimationFrame(u):b._stopSwipe(!0)};u()}else b.swipedown=null,b.swipedownPrev=null}};g._onMouseDrag=function(d,c){var b=this.that.options;if(this.swipedown){var a=this.swipedown,f=a.x,g=a.y,h=d.pageX,e=d.pageY;this.swipedownPrev={x:f,y:g,ts:(new Date).getTime()};var k=b.scrollModel.smooth;if(!b.virtualY||k)this.scrollVertSmooth(g,e),this.syncScrollBarVert();if(!b.virtualX||
k)this.scrollHorSmooth(f,h),this.syncScrollBarHor();a.x=h;a.y=e}return!0};g.updateTableY=function(d){if(0==d)return!1;var c=this.that,b=this.getTableForVertScroll(),c=c.iRefresh.getEContHt();if(!b||!b.length)return!1;var a=b.data("offsetHeight")-1,f=this.scrollTop-d;this.setScrollTop(0>f?0:0>d&&0<c-a+f?a-c:f,b,c);return!0};g.setScrollTop=function(d,c,b){0<=d&&(this.scrollTop=d=Math.round(d),c.parent("div").scrollTop(d))};g.getScrollLeft=function(d){return this.scrollLeft};g.getScrollTop=function(d){return this.scrollTop};
g.setScrollLeft=function(d,c,b,a){0<=d&&(this.scrollLeft=d=Math.round(d),b=b?b.parent():l(),b=b.add(c?c.parent("div"):l()),b.scrollLeft(d))};g.scrollVertSmooth=function(d,c){d!=c&&this.updateTableY(c-d)};g.scrollHorSmooth=function(d,c){if(d!=c){var b=this.that,a=b.options,f=c-d,g=this.getTableForHorScroll(),h=this.getTableHeaderForHorScroll(),b=b.iRefresh.getEContWd();if(g||h){var e=g?g:h,a=a.virtualX?this.getScrollWidth(e):e.data("scrollWidth"),f=this.scrollLeft-f;this.setScrollLeft(0>f?0:0>a-b-
f?a-b:f,g,h,b)}}};g.syncViewWithScrollBarVert=function(d){if(null!=d){var c=this.that,b=this.getTableForVertScroll();if(b&&b.length){c.options.editModel.indices&&c.blurEditor({force:!0});var a=b.data("offsetHeight"),c=c.iRefresh.getEContHt();if((d*=a-c)||0===d)0>d&&(d=0),this.setScrollTop(d,b,c)}}};g.syncViewWithScrollBarHor=function(d){if(null!=d){var c=this.that,b=this.getTableForHorScroll(),a=this.getTableHeaderForHorScroll();if(b||a){var f=c.options;f.editModel.indices&&c.blurEditor({force:!0});
var g=b?b:a,f=f.virtualX?this.getScrollWidth(g):g.data("scrollWidth"),c=c.iRefresh.getEContWd();d*=f-c;f&&c&&(0>d&&(d=0),this.setScrollLeft(d,b,a,c))}}};g.resetMargins=function(){this.scrollTop=this.scrollLeft=0};g.syncHeaderViewWithScrollBarHor=function(d){if(null!=d){var c=this.that,b=this.getTableHeaderForHorScroll();if(b){var a=c.options,f=a.freezeCols;a.editModel.indices&&c.blurEditor({force:!0});var a=b.data("scrollWidth"),g=c.iRefresh.getEContWd();d=c.calcWidthCols(f,d+f);a&&g&&(0>d&&(d=0),
b.css("marginLeft",-d))}}};g.syncScrollBarVert=function(){var d=this.that,c=this.getTableForVertScroll();if(c&&c.length){var c=c.data("offsetHeight"),b=d.iRefresh.getEContHt(),c=this.scrollTop/(c-b);0<=c&&1>=c&&d.vscroll.widget().hasClass("pq-sb-vert")&&d.vscroll.option("ratio",c)}};g.syncScrollBarHor=function(){var d=this.that,c=d.options,b=this.getTableForHorScroll(),a=this.getTableHeaderForHorScroll();if(b||a)b=b?b:a,c=c.virtualX?this.getScrollWidth(b):b.data("scrollWidth"),b=d.iRefresh.getEContWd(),
c=this.scrollLeft/(c-b),0<=c&&1>=c&&d.hscroll.widget().hasClass("pq-sb-horiz")&&d.hscroll.option("ratio",c)};g.getTableForVertScroll=function(){var d=this.that,c=d.pqpanes;if((d=d.$tbl)&&d.length)return c.h&&c.v?d=l([d[2],d[3]]):c.v?d=l([d[0],d[1]]):c.h&&(d=l(d[1])),d};g.getTableForHorScroll=function(){var d=this.that,c=d.pqpanes,b=[],a=d.$tbl;if(a&&a.length)return c.h&&c.v?b.push(a[1],a[3]):c.v?b.push(a[1]):c.h?b.push(a[0],a[1]):b.push(a[0]),d.tables.length&&(d=d.tables[0].$tbl,c.v?b.push(d[1]):
b.push(d[0])),l(b)};g.getTableHeaderForHorScroll=function(){var d=this.that,c=d.pqpanes;if((d=d.$tbl_header)&&d.length)return d=c.vH?l(d[1]):l(d[0]),d.parent()};g.scrollRowNonVirtual=function(d){var c=this.that,b=c.options,a=d.rowIndxPage,f=d.rowIndx;d=c.iRefresh.getEContHt();a=null==a?f-c.rowIndxOffset:a;b=parseInt(b.freezeRows);if(!(a<b)){var b=c.get$Tbl(a),g=c.getRow({rowIndxPage:a})[0];g&&(c=b[0].offsetTop+1,a=g.offsetHeight,f=this.getScrollTop(),g=g.offsetTop-1,0>c+g-f?(c=c+g+-1,this.setScrollTop(0>
c?0:c,b,d),this.syncScrollBarVert()):g+a-f>d&&(this.setScrollTop(a+g-d,b,d),this.syncScrollBarVert()))}};g.scrollColumnNonVirtual=function(d){var c=this.that,b=d.colIndx,b=null==b?c.getColIndx({dataIndx:d.dataIndx}):b,a=c.options.freezeCols;if(!(b<a)){d=c._calcRightEdgeCol(b).width;var b=c._calcRightEdgeCol(b-1).width,a=c._calcRightEdgeCol(a-1).width,f=this.getTableForHorScroll(),g=this.getTableHeaderForHorScroll(),c=c.iRefresh.getEContWd(),h=this.scrollLeft;d-h>c?(this.setScrollLeft(d-c,f,g,c),this.syncScrollBarHor()):
b-a<h&&(this.setScrollLeft(b-a,f,g,c),this.syncScrollBarHor())}}})(jQuery);
(function(l){var m=null,g=!1,d="",c=l.paramquery.pqGrid.prototype,b=c.options,a={on:!0,header:!0,zIndex:1E4},f={on:!0},n={on:!0,compare:"byVal",select:!0,validate:!0,allowInvalid:!0,type:"replace"};b.pasteModel=b.pasteModel||n;b.copyModel=b.copyModel||a;b.cutModel=b.cutModel||f;c._setGlobalStr=function(a){d=a};c.canPaste=function(){return d?!0:!1};c.copy=function(){m=new h(this);m.copy();m=null};c.paste=function(a){m=new h(this);m.paste(a);m=null};c.cut=function(){m=new h(this);m.copy({cut:!0,source:"cut"});
m=null};c.clear=function(){this.iSelection.clear()};var h=function(a,b){this.that=a},c=h.prototype;c.createClipBoard=function(){var a=l("#pq-grid-excel-div"),a=this.that.options.copyModel,b=l("#pq-grid-excel");0==b.length&&(a=l("<div id='pq-grid-excel-div'  style='position:fixed;top:20px;left:20px;height:1px;width:1px;overflow:hidden;z-index:"+a.zIndex+";'/>").appendTo(document.body),b=l("<textarea id='pq-grid-excel' autocomplete='off' spellcheck='false' style='overflow:hidden;height:10000px;width:10000px;opacity:0' />").appendTo(a),
b.css({opacity:0}));b.select()};c.destroyClipBoard=function(){this.clearClipBoard();var a=this.that,b=l(window).scrollTop(),c=l(window).scrollLeft();a.focus();var a=l(window).scrollTop(),f=l(window).scrollLeft();b==a&&c==f||window.scrollTo(c,b)};c.clearClipBoard=function(){l("#pq-grid-excel").val("")};c.copy=function(a){return this.that.iSelection.copy(a)};c.paste=function(a){a=a||{};var b=this.that,c=a.dest,f=a.clip,e=f?f.length?f.val():"":d,e=e.replace(/\n$/,""),f=e.split("\n"),h=f.length,g,n=b.colModel,
m=b.readCell,s=b.options.pasteModel,y="row",z=!1,x=n.length;if(s.on&&0!=e.length&&0!=h){e={rows:f};if(!1===b._trigger("beforePaste",null,e))return!1;var B=s.type,D,C,E,y=(c?b.range(c):b.selection())._areas;(E=y.length?y[0]:null)&&b.getRowData({rowIndx:E.r1})?(y="row"==E.type?"row":"cell",D=E.r1,C=E.r2,c=E.c1,E=E.c2):(y="cell",E=c=C=D=0);var F,K;"replace"==B?(F=D,K=C-D+1<h?"extend":"repeat"):"append"==B?(F=C+1,K="extend"):"prepend"==B&&(F=D,K="extend");var H,h="extend"==K?h:C-D+1,N;D=0;a=a.rowList||
[];for(var J=C=0;J<h;J++){var G=f[D],O=J+F,I="replace"==B?b.getRowData({rowIndx:O}):null,M=I?{}:null,P={};void 0===G&&"repeat"===K&&(D=0,G=f[D]);D++;var L=G.split("\t");if(!g)if("cell"==y){g=L.length;H=E-c+1<L.length?"extend":"repeat";g="extend"==H?g:E-c+1;if(isNaN(g))throw"lenH NaN. assert failed.";g+c>x&&(g=x-c)}else g=x,c=0;var Q=0,R=0,G=0;N=g;for(var V=L.length,R=0;R<N;R++){Q>=V&&(Q=0);var U=n[R+c],W=L[Q],T=U.dataIndx;!1===U.copy?(G++,"extend"==H&&N+c<x&&N++):(Q++,P[T]=W,M&&(M[T]=m(I,U)))}!1==
l.isEmptyObject(P)&&(L="update",null==I&&(z=!0,L="add"),a.push({newRow:P,rowIndx:O,rowData:I,oldRow:M,type:L}),C++)}b._digestData({rowList:a,source:"paste",allowInvalid:s.allowInvalid,validate:s.validate});b[z?"refreshView":"refresh"]();s.select&&("cell"==y?b.range({r1:F,c1:c,r2:F+C-1,c2:"extend"==H?c+g-1+G:E}).select():b.range({r1:F,r2:F+C-1}).select());b._trigger("paste",null,e)}};l(document).unbind(".pqExcel").bind("keydown.pqExcel",function(a){if(a.ctrlKey||a.metaKey){var b=l(a.target);if(b.hasClass("pq-grid-row")||
b.hasClass("pq-grid-cell")||b.is("#pq-grid-excel")||b.hasClass("pq-grid-cont")){var c=b.closest(".pq-grid");if(m||b.length&&c.length){if(!m){try{var f=c.pqGrid("getInstance").grid;if(f.option("selectionModel.native"))return!0}catch(d){return!0}m=new h(f,b);m.createClipBoard()}"67"==a.keyCode||"99"==a.keyCode?m.copy({clip:l("#pq-grid-excel")}):"88"==a.keyCode?m.copy({cut:!0,clip:l("#pq-grid-excel")}):"86"==a.keyCode||"118"==a.keyCode?(g=!0,m.clearClipBoard(),window.setTimeout(function(){m&&(m.paste({clip:l("#pq-grid-excel")}),
m.destroyClipBoard(),m=null);g=!1},0)):(b=l("#pq-grid-excel"),b.length&&document.activeElement==b[0]&&m.that._onKeyPressDown(a))}}}else if(b=a.keyCode,c=l.ui.keyCode,b==c.UP||b==c.DOWN||b==c.LEFT||b==c.RIGHT||b==c.PAGE_UP||b==c.PAGE_DOWN){if(e)return!1;b=l(a.target);if(b.hasClass("pq-grid-row")||b.hasClass("pq-grid-cell"))e=!0}}).bind("keyup.pqExcel",function(a){var b=a.keyCode;g||!m||a.ctrlKey||a.metaKey||-1==l.inArray(b,[17,91,93,224])||(m.destroyClipBoard(),m=null);e&&(a=l(a.target),a.hasClass("pq-grid-row")||
a.hasClass("pq-grid-cell")||(e=!1))});var e=!1})(jQuery);
(function(l){var m=l.paramquery.pqGrid.prototype.options,g={on:!0,checkEditable:!0,checkEditableAdd:!1,allowInvalid:!0};m.historyModel=m.historyModel||g;m=(l.paramquery.cHistory=function(d){var c=this;this.that=d;this.options=d.options;this.records=[];this.id=this.counter=0;d.on("keyDown",function(b,a){return c._onKeyDown(b,a)}).on("dataAvailable",function(b,a){"filter"!=a.source&&c.reset()})}).prototype=new l.paramquery.cClass;m._onKeyDown=function(d,c){var b=d.ctrlKey||d.metaKey;if(b&&"90"==d.keyCode)return this.undo(),
!1;if(b&&"89"==d.keyCode)return this.redo(),!1};m.resetUndo=function(){if(0==this.counter)return!1;this.counter=0;this.that._trigger("history",null,{type:"resetUndo",num_undo:0,num_redo:this.records.length-this.counter,canUndo:!1,canRedo:!0})};m.reset=function(){if(0==this.counter&&0==this.records.length)return!1;this.records=[];this.id=this.counter=0;this.that._trigger("history",null,{num_undo:0,num_redo:0,type:"reset",canUndo:!1,canRedo:!1})};m.increment=function(){var d=this.records,c=d.length;
this.id=c?d[c-1].id+1:0};m.push=function(d){var c=this.canRedo(),b=this.records,a=this.counter;b.length>a&&b.splice(a,b.length-a);b[a]=l.extend({id:this.id},d);this.counter++;d=this.that;var f,g;1==this.counter&&(f=!0);c&&this.counter==b.length&&(g=!1);d._trigger("history",null,{type:"add",canUndo:f,canRedo:g,num_undo:this.counter,num_redo:0})};m.canUndo=function(){return 0<this.counter?!0:!1};m.canRedo=function(){return this.counter<this.records.length?!0:!1};m.processCol=function(d,c){var b=this.that;
if(d.length){var a="add"==d.type;b[(c?a:!a)?"addColumn":"deleteColumn"]({colList:d,history:!1})}};m.undo=function(){var d=this.canRedo(),c=this.that,b=!1,a=this.options.historyModel,f=this.records;if(0<this.counter)this.counter--;else return!1;for(var g=f[this.counter],f=(f=g.rowList)?f:[],g=(g=g.colList)?g:[],h=[],e=0,k=f.length;e<k;e++){var l=f[e],m=l.newRow,t=l.rowData,r=l.type,u=l.oldRow,l=l.rowIndx;"update"==r?(l=c.getRowIndx({rowData:t}).rowIndx,h.push({type:r,rowIndx:l,rowData:t,oldRow:m,newRow:u})):
"add"==r?(b=!0,h.push({type:"delete",rowData:m})):"delete"==r&&(b=!0,h.push({type:"add",rowIndx:l,newRow:t}))}g.length?this.processCol(g):(c._digestData({history:!1,source:"undo",checkEditable:a.checkEditable,checkEditableAdd:a.checkEditableAdd,allowInvalid:a.allowInvalid,rowList:h}),c[b?"refreshView":"refresh"]({source:"undo"}));var p,q;!1===d&&(p=!0);0==this.counter&&(q=!1);c._trigger("history",null,{canUndo:q,canRedo:p,type:"undo",num_undo:this.counter,num_redo:this.records.length-this.counter});
return!0};m.redo=function(){var d=this.canUndo(),c=this.that,b=this.options.historyModel,a=this.counter,f=this.records;if(a==f.length)return!1;for(var g=!1,h=f[a],a=(a=h.rowList)?a:[],h=(h=h.colList)?h:[],e=[],k=0,l=a.length;k<l;k++){var m=a[k],t=m.newRow,r=m.rowData,u=m.type,p=m.oldRow,m=m.rowIndx;"update"==u?(m=c.getRowIndx({rowData:r}).rowIndx,e.push({type:u,rowIndx:m,rowData:r,oldRow:p,newRow:t})):"add"==u?(g=!0,e.push({type:"add",rowIndx:m,newRow:t})):"delete"==u&&(g=!0,e.push({type:"delete",
rowData:r}))}h.length?this.processCol(h,!0):(c._digestData({history:!1,source:"redo",checkEditable:b.checkEditable,checkEditableAdd:b.checkEditableAdd,allowInvalid:b.allowInvalid,rowList:e}),c[g?"refreshView":"refresh"]({source:"redo"}));this.counter<f.length&&this.counter++;var q,v;!1==d&&(q=!0);this.counter==this.records.length&&(v=!1);c._trigger("history",null,{canUndo:q,canRedo:v,type:"redo",num_undo:this.counter,num_redo:this.records.length-this.counter});return!0};l.paramquery.pqGrid.prototype.history=
function(d){return this.iHistory[d.method](d)}})(jQuery);
(function(l){var m=l.paramquery;m.filter=function(){var c={begin:{text:"Begins With",TR:!0,string:!0},between:{text:"Between",TR:!0,string:!0,date:!0,number:!0},notbegin:{text:"Does not begin with",TR:!0,string:!0},contain:{text:"Contains",TR:!0,string:!0},notcontain:{text:"Does not contain",TR:!0,string:!0},equal:{text:"Equal To",TR:!0,string:!0,bool:!0},notequal:{text:"Not Equal To",TR:!0,string:!0},empty:{text:"Empty",TR:!1,string:!0,bool:!0},notempty:{text:"Not Empty",TR:!1,string:!0,bool:!0},
end:{text:"Ends With",TR:!0,string:!0},notend:{text:"Does not end with",TR:!0,string:!0},less:{text:"Less Than",TR:!0,number:!0,date:!0},lte:{text:"Less than or equal",TR:!0,number:!0,date:!0},range:{TR:!0,string:!0,number:!0,date:!0},regexp:{TR:!0,string:!0,number:!0,date:!0},great:{text:"Great Than",TR:!0,number:!0,date:!0},gte:{text:"Greater than or equal",TR:!0,number:!0,date:!0}};return{conditions:c,getAllConditions:function(){var b=[],a;for(a in c)b.push(a);return b}(),getConditions:function(b){var a=
[],f;for(f in c)c[f][b]&&a.push(f);return a},getTRConditions:function(){var b=[],a;for(a in c)c[a].TR&&b.push(a);return b}(),getWTRConditions:function(){var b=[],a;for(a in c)c[a].TR||b.push(a);return b}()}}();m.filter.rules={};m.filter.rules.en={begin:"Begins With",between:"Between",notbegin:"Does not begin with",contain:"Contains",notcontain:"Does not contain",equal:"Equal To",notequal:"Not Equal To",empty:"Empty",notempty:"Not Empty",end:"Ends With",notend:"Does not end with",less:"Less Than",
lte:"Less than or equal",great:"Great Than",gte:"Greater than or equal"};var g=function(c){this.that=c;c.on("load",function(){var b=c.options.dataModel.dataUF;b&&(b.length=0)})};m.cFilterData=g;var d=g.prototype;g.conditions={equal:function(c,b){if(c==b)return!0},contain:function(c,b){if(-1!=c.indexOf(b))return!0},notcontain:function(c,b){if(-1==c.indexOf(b))return!0},empty:function(c){if(0==c.length)return!0},notempty:function(c){if(0<c.length)return!0},begin:function(c,b){if(0==(c+"").indexOf(b))return!0},
notbegin:function(c,b){if(0!=c.indexOf(b))return!0},end:function(c,b){var a=c.lastIndexOf(b);if(-1!=a&&a+b.length==c.length)return!0},notend:function(c,b){var a=c.lastIndexOf(b);if(-1==a||a+b.length!=c.length)return!0},regexp:function(c,b){if(b.test(c))return b.lastIndex=0,!0},notequal:function(c,b){if(c!=b)return!0},great:function(c,b){if(c>b)return!0},gte:function(c,b){if(c>=b)return!0},between:function(c,b,a){if(c>=b&&c<=a)return!0},range:function(c,b){if(-1!=l.inArray(c,b))return!0},less:function(c,
b){if(c<b)return!0},lte:function(c,b){if(c<=b)return!0}};g.convert=function(c,b){c=null==c?"":c;"string"==b?c=l.trim(c).toUpperCase():"date"==b?c=Date.parse(c):"integer"==b?c=parseInt(c):"float"==b?c=parseFloat(c):"bool"==b&&(c=String(c).toLowerCase());return c};d.isMatchCellSingle=function(c,b){var a=c.dataType,f=c.value,d=c.value2,h=c.cbFn,e=b[c.dataIndx],e="regexp"==c.condition?null==e?"":e:g.convert(e,a);return h(e,f,d)?!0:!1};d.isMatchRow=function(c,b,a){if(0==b.length)return!0;for(var f=0;f<
b.length;f++){var d=this.isMatchCell(b[f],c);if("OR"==a&&d)return!0;if("AND"==a&&!d)return!1}if("AND"==a)return!0;if("OR"==a)return!1};d.getQueryStringFilter=function(){var c=this.that,b=c.options,a=b.stringify,b=b.filterModel,f=b.mode,c=this.getFilterData({CM:c.colModel,location:"remote"}),d="";b&&b.on&&c&&(c.length?(b={mode:f,data:c},d=!1===a?b:JSON.stringify(b)):d="");return d};d.filterLocalData=function(c){c=c||{};var b=this.that,a=c.apply,a=null==a?!0:a;c=this.getFilterData({CM:a?b.colModel:
c.CM});var f=b.options,d=f.dataModel,h=b.iSort,e=d.data,g=[],l=[],m=d.dataUF,t=f.filterModel,r=t.multiple,f=t?t.mode:null;e||(e=d.data=[]);m||(m=d.dataUF=[]);!1===a&&(e=e.slice());if(m.length){for(var u=0,p=m.length;u<p;u++)e.push(m[u]);0==h.readSorter().length&&h.sortLocalData(e);m=d.dataUF=[]}else if(c.length)h.saveOrder();else return{data:e,dataUF:m};this.isMatchCell=r?this.isMatchCellMultiple:this.isMatchCellSingle;if(t.on&&f&&c&&c.length){if(e.length)for(u=0,p=e.length;u<p;u++)h=e[u],this.isMatchRow(h,
c,f)?g.push(h):l.push(h);e=g;m=l;a&&(d.data=e,d.dataUF=m)}a&&(b._queueATriggers.filter={ui:{type:"local",filter:c}});return{data:e,dataUF:m}};d.getFilterData=function(c){var b=c.CM;if(!b)throw"CM N/A";var a=b.length,f=c.location,d=m.filter.getAllConditions,h=m.filter.getTRConditions;c=[];for(var e=m.cFilterData,g=function(a,b,c){return"function"==typeof a?!0:"between"==a?null!=b&&""!==b||null!=c&&""!==c?!0:!1:-1!=l.inArray(a,d)?null!=b&&""!==b||-1==l.inArray(a,h)?!0:!1:!0},w=function(a,b){return"remote"==
f?(null==a?"":a).toString():e.convert(a,b)},A=0;A<a;A++){var t=b[A],r=t.filter;if(r&&r.on){var u=t.dataIndx,t=(t=t.dataType)&&"stringi"!=t&&"function"!=typeof t?t:"string",p=r.value,q=r.value2,v=r.condition;if(g(v,p,q)){if("between"==v)""===p||null==p?(v="lte",p=w(q,t)):""===q||null==q?(v="gte",p=w(p,t)):(p=w(p,t),q=w(q,t));else if("regexp"==v)if("remote"==f)p=p.toString();else{if("string"==typeof p)try{var s=r.modifiers,s=s?s:"gi",p=new RegExp(p,s)}catch(y){p=/.*/}}else if("range"==v)if(null==p)continue;
else if("string"==typeof p)p=w(p,t),p=p.split(/\s*,\s*/);else{if(p&&"function"==typeof p.push){if(0==p.length)continue;for(var p=p.slice(),r=0,z=p.length;r<z;r++)p[r]=w(p[r],t)}}else p=w(p,t);c.push({dataIndx:u,value:p,value2:q,condition:v,dataType:t,cbFn:"remote"==f?"":"function"==typeof v?v:e.conditions[v]})}}}return c}})(jQuery);
(function(l){l=(l.paramquery.cSort=function(g){this.that=g;this.sorters=[];this.tmpPrefix="pq_tmp_";this.cancel=!1}).prototype;l.cancelSort=function(){this.cancel=!0};l.resumeSort=function(){this.cancel=!1};l.readSorter=function(){var g=this.that,d=g.options,c=d.groupModel,b,g=g.columns,a=0,f,n,h=[];if(c.on)for(b=c.dataIndx,f=b.length,n=c.dir;a<f;a++)c=b[a],h.push({dataIndx:c,dir:n[a]?n[a]:"up"});b=d.sortModel;d=b.sorter;b=b.single;if(d&&(f=d.length)){for(;f--;)null==g[d[f].dataIndx]&&d.splice(f,
1);b&&d.length&&(d=[d[0]]);h=h.concat(d)}return h=pq.arrayUnique(h,"dataIndx")};l.setSingle=function(g){this.single=g};l.getSingle=function(){return this.single};l.readSingle=function(){return this.that.options.sortModel.single};l.writeSingle=function(g){this.that.options.sortModel.single=g};l.setCancel=function(g){this.cancel=g};l.getCancel=function(){return this.cancel};l.readCancel=function(){return this.that.options.sortModel.cancel};l.writeCancel=function(g){this.that.options.sortModel.cancel=
g};l.writeSorter=function(g){var d=this.that.options,c=d.sortModel,b=d.groupModel,d=b.dataIndx,a=b.dir;if(b.on){for(b=0;b<d.length;b++){var f=g[b];if(d[b]!=f.dataIndx)throw"gDataIndx!=sorter.dataIndx";a[b]=f.dir}g.splice(0,d.length)}c.sorter=g};l.refreshSorter=function(g){g=g||{};var d=g.sorter,c=d[0].dataIndx,b=d[0].dir,a=g.single,d=g.cancel,f=this.that.options.groupModel,n=f.dataIndx,h=f.on?n.length:0,e=-1;g=this.readSorter();if(null==a)throw"sort single N/A";if(f.on)for(f=0;f<h;f++)n[f]==c&&(e=
f);-1<e?g[e].dir="up"===g[e].dir?"down":"up":null!=c&&(a?g[h]&&g[h].dataIndx==c?(c=g[h].dir,c="up"===c?"down":d&&"down"===c?"":"up",""===c?g.length--:g[h].dir=c):g[h]={dataIndx:c,dir:b?b:"up"}:(h=this.inSorters(g,c),-1<h?(c=g[h].dir,"up"==c?g[h].dir="down":d&&"down"==c?g.splice(h,1):1==g.length?g[h].dir="up":g.splice(h,1)):g.push({dataIndx:c,dir:"up"})));return g};l.saveOrder=function(g){var d=this.that.options.dataModel;g=d.data;if(!(!g||!g.length||d.dataUF&&d.dataUF.length||this.getSorter().length&&
null!=g[0].pq_order))for(var d=0,c=g.length;d<c;d++)g[d].pq_order=d};l.getQueryStringSort=function(){if(this.cancel)return"";var g=this.sorters,d=this.that.options.stringify;return g.length?!1===d?g:JSON.stringify(g):""};l.getSorter=function(){return this.sorters};l.setSorter=function(g){this.sorters=g.slice(0)};l.inSorters=function(g,d){for(var c=-1,b=0;b<g.length;b++)if(g[b].dataIndx==d){c=b;break}return c};l.sortLocalData=function(g){for(var d=this.that,c=d.colModel,b=this.sorters,a=0;a<b.length;a++){var f=
b[a],n=d.getColIndx({dataIndx:f.dataIndx}),n=c[n],h=n.sortType;f.dataType=n.dataType;f.sortType=h}b.length||(b=[{dataIndx:"pq_order",dir:"up",dataType:"integer"}]);return this._sortLocalData(b,g)};l._sortLocalData=function(g,d){if(null==d)return[];if(0==d.length||!g||!g.length)return d;var c=this,b=c.tmpPrefix,a=c.that.options.sortModel,f=a.useCache,n=a.ignoreCase;(function(){for(var a=[],e=[],k=[],l=g.length,A=0;A<l;A++){var t=g[A],r=t.dataIndx,u="up"==t.dir?1:-1,p=t.sortType,t=(t=t.dataType)?t:
"string",t="string"==t&&n?"stringi":t,q=f&&"date"==t,v=q?b+r:r;e[A]=v;k[A]=u;a[A]=p?function(a,b){return function(c,f,d,e){return b(c,f,d,e,a)}}(p,m.sort_sortType):"integer"==t?m.sort_number:"float"==t?m.sort_number:"function"==typeof t?function(a,b){return function(c,f,d,e){return b(c,f,d,e,a)}}(t,m.sort_dataType):"date"==t?m["sort_date"+(q?"_fast":"")]:"bool"==t?m.sort_bool:"stringi"==t?m.sort_locale:m.sort_string;q&&c.useCache(d,t,r,v)}d=d.sort(function(b,c){for(var f=0,d=0;d<l&&(f=a[d](b,c,e[d],
k[d]),0==f);d++);return f});q&&setTimeout(c.removeCache(g,d),0)})();return d};l.useCache=function(g,d,c,b){d=m["get_"+d];for(var a=g.length;a--;){var f=g[a];f[b]=d(f[c])}};l.removeCache=function(g,d){var c=this.tmpPrefix;return function(){for(var b=g.length;b--;){var a=c+g[b].dataIndx,f=d.length;if(f&&d[0].hasOwnProperty(a))for(;f--;)delete d[f][a]}}};var m={get_date:function(g){var d;return g?isNaN(d=Date.parse(g))?0:d:0},sort_number:function(g,d,c,b){g=g[c];d=d[c];return((g?1*g:0)-(d?1*d:0))*b},
sort_date:function(g,d,c,b){g=g[c];d=d[c];g=g?Date.parse(g):0;d=d?Date.parse(d):0;return(g-d)*b},sort_date_fast:function(g,d,c,b){return(g[c]-d[c])*b},sort_dataType:function(g,d,c,b,a){return a(g[c],d[c])*b},sort_sortType:function(g,d,c,b,a){return a(g,d,c)*b},sort_string:function(g,d,c,b){g=g[c];d=d[c];c=0;g=g?g:"";d=d?d:"";g>d?c=1:g<d&&(c=-1);return c*b},sort_locale:function(g,d,c,b){g=g[c];d=d[c];return(g?g:"").localeCompare(d?d:"")*b},sort_bool:function(g,d,c,b){g=g[c];d=d[c];c=0;if(g&&!d||!1===
g&&null===d)c=1;else if(d&&!g||!1===d&&null===g)c=-1;return c*b}};pq.sortObj=m})(jQuery);
(function(l){function m(b){this.that=b;this.mc=null;var a=this,c=b.options;this.DM=c.dataModel;b.on("dataReady columnOrder groupShowHide",function(b,d){c.mergeCells&&"pager"!==d.source&&a.init()})}function g(b,a,c){var d=0,h=b.length;for(c=c>h?h:c;a<c;a++)!0!==b[a].hidden&&d++;return d}function d(b,a,c){var d=0,h=b.length;for(c=c>h?h:c;a<c;a++)!0!==b[a].pq_hidden&&d++;return d}l.paramquery.cMerge=m;var c=m.prototype=new l.paramquery.cClass;c.init=function(){for(var b=this.that,a=b.colModel,c=b.options.mergeCells||
[],n=b.get_p_data(),h=[],e=[],k=0,l=c.length;k<l;k++){var m=c[k],t=m.r1,r=t,u=n[t],p=m.c1,q=p,v=a[p],s=m.rc,y=m.cc;if(v&&u){if(v.hidden)a:{for(q=p;q<p+y;q++){v=a[q];if(!v){q=-1;break a}if(!v.hidden)break a}q=void 0}v=g(a,p,p+y);if(u.pq_hidden)a:{for(r=t;r<t+s;r++){u=n[r];if(!u){r=-1;break a}if(!u.pq_hidden)break a}r=void 0}u=d(n,t,t+s);if(!(1>u||1>v))for(h.push({r1:t,c1:p,rc:s,cc:y,e_rc:u,e_cc:v}),e[r]=e[r]||[],e[r][q]={show:!0,rowspan:u,colspan:v,o_rowspan:s,o_colspan:y,style:m.style,cls:m.cls,attr:m.attr,
r1:t,c1:p,v_r1:r,v_c1:q},m={show:!1,r1:t,c1:p,v_r1:r,v_c1:q},u=t;u<t+s;u++)for(e[u]=e[u]||[],v=p;v<p+y;v++)if(u!=r||v!=q)e[u][v]=m}}b._mergeCells=0<e.length;this.mc=e;this.mc2=h};c.isHidden=function(b,a){var c,d=this.mc;return d&&d[b]&&(c=d[b][a])&&!c.show?!0:!1};c.setData=function(b,a,c){var d,h=this.mc;h[b]&&(d=h[b][a])&&(d.data=c)};c.getData=function(b,a,c){var d,h=this.mc;if(h[b]&&(d=h[b][a]))return(b=d.data)?b[c]:null};c.removeData=function(b,a,c){var d,h=this.mc;h&&h[b]&&(d=h[b][a])&&(b=d.data)&&
(b[c]=null)};c.ismergedCell=function(b,a){var c=this.mc,d;return c&&c[b]&&(d=c[b][a])?(c=c[d.v_r1][d.v_c1],b==c.r1&&a==c.c1?{rowspan:c.o_rowspan,colspan:c.o_colspan}:!0):!1};c.isRootCell=function(b,a,c){var d=this.mc,h;if(d&&d[b]&&(h=d[b][a])){if("o"==c)return b==h.r1&&a==h.c1;var e=h.v_r1;h=h.v_c1;if("a"==c)return c=d[e][h],c.a_r1==b&&c.a_c1==a;if(e==b&&h==a)return c=d[e][h],{rowspan:c.rowspan,colspan:c.colspan}}};c.getRootCell=function(b,a,c){var d=this.that,h=this.mc,e;if(h&&h[b]&&(e=h[b][a])){"a"==
c?(b=e.v_r1,a=e.v_c1,c=h[b][a],c.a_r1&&(b=c.a_r1,a=c.a_c1)):"o"==c?(b=e.r1,a=e.c1):(b=e.v_r1,a=e.v_c1);c=d.colModel[a];var h=d.rowIndxOffset,g=b-h;0>g&&(g=0,b=h);return{rowIndxPage:g,colIndx:a,column:c,dataIndx:c.dataIndx,rowData:d.getRowData({rowIndx:b}),rowIndx:b,rowspan:e.rowspan,colspan:e.colspan}}return d.normalize({rowIndx:b,colIndx:a})};c.inflateRange=function(b,a,c,d){var h=this.that,e=!1,g=h.options,g=g.groupModel.on?h.rowIndxOffset+h.pdata.length-1:g.dataModel.data.length-1,h=h.colModel.length-
1,l=this.mc2;if(!l)return[b,a,c,d];var m=0,t=l.length;a:for(;m<t;m++){var r=l[m],u=r.r1,p=r.c1,q=u+r.rc-1,r=p+r.cc-1,q=q>g?g:q,r=r>h?h:r,v=u<=c&&q>c,s=p<a&&r>=a,y=p<=d&&r>d;if((u<b&&q>=b||v)&&r>=a&&p<=d||(s||y)&&q>=b&&u<=c){e=!0;b=u<b?u:b;a=p<a?p:a;c=q>c?q:c;d=r>d?r:d;break a}}return e?this.inflateRange(b,a,c,d):[b,a,c,d]};l.paramquery.pqGrid.prototype.calcVisibleRows=d;c.renderCell=function(b){var a=this.that,c=b.rowIndx,n=b.rowIndxPage,h=b.colIndx,e,k=this.mc,l;if(k[c]&&(l=k[c][h])){var m=l.v_r1,
t=l.v_c1;e=l.r1;var r=l.c1,u=a.options,p=a.colModel,q=a.rowIndxOffset,v=u.freezeCols,s=(u=u.freezeRows)?u+q:0,y=a.initH,z=a.initV;if(l.show||h==t&&n==z&&m>=s||h==t&&c==z&&m>=s||c==m&&h==y&&t>=v||c==z&&h==y&&t>=v&&m>=s){l=e-q;n=a.pdata;a=a.get_p_data();e={rowData:a[e],rowIndx:e,colIndx:r,column:p[r],rowIndxPage:l};k=k[m][t];l=k.colspan;var x=k.rowspan,B=g(p,h,v),r=d(n,c-q,u);v&&h<v&&l>B?(t=l-g(p,v,y),l=Math.max(t,B)):l-=g(p,t,h);u&&c>q&&c<s&&x>r?(m=x-d(n,u,z),x=Math.max(m,r)):x-=d(a,m,c);k.a_r1=c;
k.a_c1=h;e.rowspan=x;e.colspan=l;e.style=k.style;e.attr=k.attr;e.cls=k.cls}else return null}return e?e:b};c.getMergeCells=function(b,a,c){for(var d=this.that,h=d.options.mergeCells,e,g,d=d.rowIndxOffset,l=d+c,m=[],t=h?h.length:0,r=0;r<t;r++)if(c=h[r],e=c.r1,g=c.c1,!a||e>=d&&e<l)a&&(e-=d),e+=b,m.push({r1:e,c1:g,r2:e+c.rc-1,c2:g+c.cc-1});return m}})(jQuery);
(function(){var l=window.pq=window.pq||{};l.extend=function(a,b,c){var d=function(){};d.prototype=a.prototype;var d=b.prototype=new d,e=a.prototype,g;for(g in c){var l=e[g],m=c[g];d[g]=l?function(a,b){return function(){this._super=function(){return a.apply(this,arguments)};var c=b.apply(this,arguments);this._super=void 0;return c}}(l,m):m}d.constructor=b;d._base=a;d._bp=function(a){var b=arguments;Array.prototype.shift.call(b);return e[a].apply(this,b)}};var m=l.Range=function(a,b,c,d){if(null==a)throw"invalid param";
this.that=a;if(!1==this instanceof m)return new m(a,b,c,d);this._type=c?c:"range";this.init(b,d)},g=m.prototype;g._areas=[];g.init=function(a,b){b=!1!==b;if(a)if("function"==typeof a.push)for(var c=0,d=a.length;c<d;c++)this.init(a[c],b);else if(c=this._normal(a,b))d=this._areas,d.length?d.push(c):this._areas=[c]};g.address=function(){this.dirty&&this.refresh();return this._areas};g.areas=function(a){this.dirty&&this.refresh();var b=this.that,c=this._areas,c=null==a?c:c[a];return l.Range(b,c,"area")};
g.merge=function(a){a=a||{};var b=this.that,c=b.options.mergeCells,d,e,g=this._areas[0];g&&(d=g.r2-g.r1+1,e=g.c2-g.c1+1,1<d||1<e)&&(g.rc=d,g.cc=e,c.push(g),!1!==a.refresh&&b.refreshView())};g.unmerge=function(a){a=a||{};var b=this.that,c=b.options.mergeCells,d=this._areas[0];if(d){for(var e=0;e<c.length;e++){var g=c[e];if(g.r1==d.r1&&g.c1==d.c1){c.splice(e,1);break}}!1!==a.refresh&&b.refreshView()}};g.hide=function(a){a=a||{};for(var b=this.that,c=b.colModel,d=b.get_p_data(),e=this._areas,g=0,l=e.length;g<
l;g++){var m=e[g],t=m.type,r=m.r1,u=m.r2,p=m.c1,m=m.c2;if("column"==t)for(t=p;t<=m;t++)c[t].hidden=!0;else if("row"==t)for(t=r;t<=u;t++)d[t].pq_hidden=!0}!1!==a.refresh&&b.refreshView()};g.unhide=function(a){a=a||{};for(var b=this.that,c=b.colModel,d=b.get_p_data(),e=this._areas,g=0,l=e.length;g<l;g++){var m=e[g],t=m.type,r=m.r1,u=m.r2,p=m.c1,m=m.c2;if("column"==t)for(t=p;t<=m;t++)c[t].hidden=!1;else if("row"==t)for(t=r;t<=u;t++)d[t].pq_hidden=!1}!1!==a.refresh&&b.refreshView()};g.select=function(){var a=
this.that,b=a.iSelection,c=b._areas[0],d=this._areas,e=d[0];if(!e)return this;var g=e.r1,l=e.c1;if(b.dirty||1!=d.length||"block"!=d[0].type||!c||"cell"!=c.type&&"block"!=c.type||g!=c.r1||l!=c.c1)for(b.removeAll({trigger:!1}),g=0,l=d.length;g<l;g++)b.add(d[g],!1);else{var m=c.r1,t=c.c1,r=c.r2,c=c.c2,u=e.r2,e=e.c2,a=a.iCells;if(u==r&&e==c)return this;e>c?a.selectBlock({range:{r1:g,c1:c+1,r2:u,c2:e}}):e<c&&a.selectBlock({range:{r1:Math.max(g,m),c1:e+1,r2:Math.max(u,r),c2:c},remove:!0});u>r?a.selectBlock({range:{r1:r+
1,c1:l,r2:u,c2:e}}):u<r&&a.selectBlock({range:{r1:u+1,c1:Math.max(l,t),r2:r,c2:Math.max(e,c)},remove:!0});b._areas=d}b._trigger();return this};g.resize=function(a,b){var c=this._areas[0];return m(this.that,{r1:c.r1,c1:c.c1,rc:a,cc:b})};g.cut=function(a){a=a||{};a.cut=!0;return this.copy(a)};g.copy=function(a){a=a||{};this.dirty&&this.refresh();var b=this.that,c=a.dest,d=a.cut?!0:!1,e=null==a.copy?!0:a.copy,g=a.source||(d?"cut":"copy"),l=null==a.history?!0:a.history,m=null==a.allowInvalid?!0:a.allowInvalid,
t=[],r=[],u=b.get_p_data(),p=b.colModel,q=b.readCell,v=b.iMerge,s=this._areas;if(s.length){var y=this._areas[0],z=y.type,x=y.r1,B=y.c1,D="cell"==z?x:y.r2,y="cell"==z?B:y.c2,C=0;do{for(;x<=D;x++){for(var E=[],F=u[x],K={},H={},N=B;N<=y;N++){var J=p[N],G=J.dataIndx;if(!1!==J.copy){var O=F[G];e&&E.push(q(F,J,v,x,N));d&&(K[G]=void 0,H[G]=O)}}d&&t.push({rowIndx:x,rowData:F,oldRow:H,newRow:K,type:"update"});E=E.join("\t");r.push(E)}C++;y=s[C];if("row"==z&&y&&"row"==y.type)x=y.r1,B=y.c1,D=y.r2,y=y.c2;else break}while(1);
e&&(E=r.join("\n"),a.clip?(a=a.clip,a.val(E),a.select()):b._setGlobalStr(E));c?b.paste({dest:c,rowList:t,history:l,allowInvalid:m}):d&&!1!==b._digestData({rowList:t,source:g,history:l,allowInvalid:m})&&b.refresh({source:"cut"})}};g.clear=function(){return this.copy({copy:!1,cut:!0,source:"clear"})};g.add=function(a){this.init(a)};g._countArea=function(a){var b=a.r1,c=a.c1,d=a.r2,e=a.c2;return"cell"==a.type?1:(d-b+1)*(e-c+1)};g.count=function(){this.dirty&&this.refresh();for(var a="range"==this._type,
b=this._areas,c=0,d=b.length,e=0;e<d;e++)c+=a?this._countArea(b[e]):1;return c};g.rows=function(a){this.dirty&&this.refresh();var b=this.that,c=[],d=this._areas[0];if(d){var e=d.r1,g=d.c1,m=d.r2,A=d.c2,d=d.type,m=null==a?m:e+a;for(a=null==a?e:e+a;a<=m;a++)c.push({r1:a,c1:g,r2:a,c2:A,type:d})}return l.Range(b,c,"row")};g.columns=function(a){this.dirty&&this.refresh();var b=this.that,c=[],d=this._areas[0];if(d){var e=d.r1,g=d.c1,m=d.r2,A=d.c2,d=d.type,A=null==a?A:g+a;for(a=null==a?g:g+a;a<=A;a++)c.push({r1:e,
c1:a,r2:m,c2:a,type:d})}return l.Range(b,c,"column")};g.cell=function(a,b){this.dirty&&this.refresh();var c=this.that,d=[],e=this._areas[0];e&&(d=e.r1+a,e=e.c1+b,d=[d,e,d,e]);return l.Range(c,d,"cell")};g.item=function(a){this.dirty&&this.refresh();for(var b=0,c=!1,d=this._areas,e=0,g=d.length;e<g;e++){var l=d[e],m=this._countArea(l);if(b+m>a){c=!0;a-=b;break}else b+=m}if(c){if(l)var t=l.r1,r=l.c1,b=l.c2-r+1,t=t+Math.floor(a/b),r=r+a%b;return{r1:t,c1:r}}};g._normal=function(a,b){if(a.type)return a;
if("function"==a.push){for(var c=[],d=0,e=a.length;d<e;d++){var g=this._normal(a[d],b);g&&c.push(g)}return c}var c=this.that,l=c.get_p_data().length-1,m=c.colModel.length-1,d=a.r1,e=a.c1,d=d>l?l:d,e=e>m?m:e,t=a.rc,r=a.cc,g=a.r2,u=a.c2,g=t?d+t-1:g>l?l:g,u=r?e+r-1:u>m?m:u;if(0>m||0>l)return null;d>g&&(t=d,d=g,g=t);e>u&&(t=e,e=u,u=t);if(null!=d||null!=e)return null==d?(d=0,g=l,u=null==u?e:u,l="column"):null==e?(e=0,g=null==g?d:g,u=m,l="row"):null==g?(l="cell",g=d,u=e):l="block",b&&(c=c.iMerge.inflateRange(d,
e,g,u),d=c[0],e=c[1],g=c[2],u=c[3]),a.r1=d,a.c1=e,a.r2=g,a.c2=u,a.type=a.type||l,a};g.value=function(a){a=a||{};a=a.val;this.dirty&&this.refresh();var b=this.that,c=b.colModel,d=[],e=this._areas;if(void 0===a&&e.length){var g=e[0],l=g.r1,m=g.c1;return b.getCellData({rowIndx:l,colIndx:m})}for(var t=0;t<e.length;t++)for(var g=e[t],l=g.r1,m=g.c1,r=g.r2,g=g.c2;l<=r;l++){for(var u=b.normalize({rowIndx:l}),p=u.rowData,u=u.rowIndx,q={},v={},s=m;s<=g;s++){var y=c[s].dataIndx;v[y]=a;q[y]=p[y]}d.push({rowData:p,
rowIndx:u,type:"update",newRow:v,oldRow:q})}d.length&&(b._digestData({rowList:d,source:"range"}),b.refresh())};var d=l.Selection=function(a,b){if(null==a)throw"invalid param";if(!1==this instanceof d)return new d(a,b);this.that=a;var c=this;a.on("dataReady columnOrder addColumn deleteColumn",function(a,b){"pager"!=b.source&&c.renew()});this._base(a,b)},c={renew:function(){this.dirty=!0},isDirty:function(){return this.dirty}},b=function(a){a.shiftKey&&"pqGrid:mousePQUp"!=a.type||(this._trigger("selectEnd",
null,{selection:this.selection()}),this.off("mousePQUp",b),this.off("keyUp",b))};c._trigger=function(){var a=this.that;this.dirty&&this.refresh();a._trigger("selectChange",null,{selection:this});a.off("mousePQUp",b);a.off("keyUp",b);a.on("mousePQUp",b);a.on("keyUp",b)};c.removeAll=function(a){a=a||{};var b=this.that;b.iCells.removeAll({refresh:!0});b.iRows.removeAll({refresh:!0,all:!0});this._areas=[];!1!==a.trigger&&this._trigger()};g.indexOf=function(a){this.dirty&&this.refresh();a=this._normal(a);
var b=a.type,c=a.r1,d=a.c1,e=a.r2;a=a.c2;for(var g=this._areas,l=0,m=g.length;l<m;l++){var t=g[l],r=t;if(b==t.type&&c>=r.r1&&e<=r.r2&&d==r.c1&&a==r.c2)return l}return-1};c.add=function(a,b){var c=this.that,d=this._normal(a,!0),e=c.iCells,c=c.iRows,g=d.r1,l=d.c1,m=d.r2,t=d.type;0<=this.indexOf(d)||("row"==t?(e=this._areas,e.length&&(e=e[e.length-1],t=e.type,"row"==t&&g<=e.r2&&(this.dirty=!0)),m>g?c.selectRange({range:d}):c.add({rowIndx:g})):"column"==t||"block"==t?e.selectBlock({range:d}):"cell"==
t&&e.add({rowIndx:g,colIndx:l}),this._super(d),!1!==b&&this._trigger())};c._adjust=function(a){var b=this.that,c=b.get_p_data().length-1,b=b.colModel.length-1,d=a.r1,e=a.c1,g=a.r2,l=a.c2,g=g>c?c:g,l=l>b?b:l;if(0>b||0>c||d>g||e>l)return null;a.r1=d;a.r2=g;a.c1=e;a.c2=l;return a};g.removeRow=function(a,b){var c=a.r1,d=a.r2,e=this._areas,g=this._areas[b],l=g.r1,m=g.r2;c==l&&d==m?e.splice(b,1):c>l?(g.r2=c-1,d<m&&(c=this._normal({r1:d+1,r2:m}),e.splice(b+1,0,c))):d<m&&(c>l&&(c=this._normal({r1:d+1,r2:m}),
e.splice(b,0,c)),g.r1=d+1)};c.removeRow=function(a,b){var c=this.that,d=this._normal(a),e=this.indexOf(d);-1<e&&"row"==d.type&&d.r1==d.r2&&(c.iRows.remove({rowIndx:d.r1}),this._super(a,e),!1!==b&&this._trigger())};c.selectAll=function(a){a=a||{};var b=this.that,c=a.all,d=c?0:b.rowIndxOffset,e=b.colModel.length-1,g=d+(c?b.options.dataModel.data.length-1:b.pdata.length-1);"cell"==a.type?(a={r1:d,c1:0},a.r2=g,a.c2=e,b.range(a).select()):(a={r1:d},a.r2=g,c||this.removeRows({all:!1,trigger:!1}),b.iRows.selectRange({range:a}),
b=c?[]:this._areas,b.push({r1:d,c1:0,r2:g,c2:e,type:"row"}),this._areas=b,this._trigger());return this};c.removeRows=function(a){a=a||{};var b=a.all;this.that.iRows.removeAll({refresh:!0,all:a.all});b?this._areas=[]:this.refresh();!1!==a.trigger&&this._trigger()};c.refresh=function(){for(var a=this.that,b=[],c=a.colModel.length-1,a=a.get_p_data(),d=0,e=a.length;d<e;d++){var g=a[d],l;g&&(g.pq_cellselect=void 0,g.pq_rowselect?l?l.r2=d:l={r1:d,r2:d,c1:0,c2:c,type:"row"}:l&&(b.push(l),l=null))}l&&b.push(l);
this.dirty=!1;this._areas=b};l.extend(m,d,c)})();
(function(l){function m(b,a,c,d){b.push("<li data-option='",c,"' class='pq-menu-item'>","<label>","<input type='checkbox' ",a[c]?"checked":"","/>",d["strGroup_"+c],"</label></li>")}var g=l.paramquery;pq.aggregate={sum:function(b){for(var a=0,c=b.length,d;c--;)d=b[c],null!=d&&(a+=d-0);return a},avg:function(b,a){return this.sum(b,a,!0)/b.length},max:function(b,a){var c;c=a.dataType;"float"==c||"integer"==c?c=Math.max.apply(Math,b):"date"==c?(b.sort(function(a,b){a=Date.parse(a);b=Date.parse(b);isNaN(a)&&
(a=0);isNaN(b)&&(b=0);return b-a}),c=b[0]):(b.sort(),c=b[b.length-1]);return c},min:function(b,a){var c;c=a.dataType;var d,g;if("integer"==c||"float"==c)c=Math.min.apply(Math,b);else if("date"==c){g=b.length;for(c=[];g--;)(d=b[g])&&c.push({dateO:d,dateP:Date.parse(d)});c.sort(function(a,b){return a.dateP-b.dateP});c=c.length?c[0].dateO:void 0}else b.sort(),c=b[0];return c},count:function(b){return b.length}};var d=g.cGroup=function(b){this.that=b;b.options.groupModel.on&&this.init()},c=d.prototype;
c.init=function(){var b,a,c,d;this._init||(this.mc=[],this.tree=[],this.summaryData=[],d=this.that,b=d.options,a=b.groupModel,b=b.bootstrap,c=(b=b.on)?"glyphicon ":"ui-icon ",this.groupRemoveIcon="pq-group-remove "+c+(b?"glyphicon-remove":"ui-icon-close"),this.toggleIcon="pq-group-toggle "+c,d.on("cellClick",this.onCellClick(this)).on("cellKeyDown",this.onCellKeyDown(this,a)).on(!0,"cellMouseDown",this.onCellMouseDown()).on("change",this.onChange(this,a)).on("dataReady",this.onDataReady(this,d)).on("beforeSortDone",
this.onBeforeSort(this,d)).on("columnDragDone",this.onColumnDrag(this)).on("columnOrder",this.onColumnOrder(this)),this._init=!0)};c.onCellClick=function(b){return function(a,c){c.rowData.pq_gtitle&&l(a.originalEvent.target).hasClass("pq-group-icon")&&b.toggleRow(c.rowIndxPage,a)}};c.onChange=function(b,a){return function(){b.saveState(a.refreshOnChange)}};c.onCellMouseDown=function(){return function(b,a){a.rowData.pq_gtitle&&l(b.originalEvent.target).hasClass("pq-group-icon")&&b.stopImmediatePropagation()}};
c.onCellKeyDown=function(b,a){return function(c,d){if(d.rowData.pq_gtitle&&0<=l.inArray(d.dataIndx,a.dataIndx)&&c.keyCode==l.ui.keyCode.ENTER)return b.toggleRow(d.rowIndxPage,c),!1}};c.showRows=function(){for(var b=this.that.options.dataModel.data,a,c=0,d=b.length;c<d;c++)a=b[c],a.pq_hidden&&(a.pq_hidden=void 0)};c.removeGroup=function(b){for(var a=0,c=this.that.options.groupModel.dataIndx;a<c.length;a++)if(b==c[a]){c.splice(a,1);break}c.length||(this.showRows(),this.mc.length=0);this._triggerChange=
!0;this.refreshFull()};c.addGroup=function(b,a){var c=this.that.options.groupModel,c=c.dataIndx=c.dataIndx||[];null!=b&&-1==l.inArray(b,c)&&(null==a?c.push(b):c.splice(a,0,b),this._triggerChange=!0,this.refreshFull())};c._initHeadSortable=function(){this.$header.sortable({axis:"x",distance:3,tolerance:"pointer",cancel:".pq-group-menu",stop:this.onSortable(this,this.that.options)})};c.onColumnDrag=function(b){return function(a,c){var d=c.column.colModel;d&&d.length?b.acceptDrop=!1:b._initHeadDroppable()}};
c._initHeadDroppable=function(){var b=this,a=b.that,c=b.$header;c&&(c.droppable({accept:function(a){return b.acceptDrop},tolerance:"pointer",hoverClass:"pq-drop-hover",drop:b.onDrop(a,b)}),b.acceptDrop=!0)};c.onDrop=function(b,a){return function(c,d){var g=1*d.draggable.attr("pq-col-indx");a.addGroup(b.colModel[g].dataIndx);a.acceptDrop=!1}};c.onSortable=function(b,a){return function(){for(var c=[],d=a.groupModel,g=d.dataIndx,e=[],k=!1,m=l(this).find(".pq-group-item"),A=0;A<m.length;A++){var t=l(m[A]),
r=t.data("indx"),t=t.data("dir");g[A]!=r&&(k=!0);c.push(r);e.push(t)}k&&(d.dataIndx=c,d.dir=e,b._triggerChange=!0,b.refreshFull())}};c._initHeader=function(b,a){if(this.$header){var c=this.$header,d=c.find(".pq-group-item");c.data("uiSortable")||this._initHeadSortable();d.length||c.append("<span class='pq-group-placeholder'>"+b.strGroup_header+"</span>");a.headerMenu&&this._initHeaderMenu()}};c.createHeader=function(){for(var b=this.that,a=this.$header,c=b.options,g=c.bootstrap,h=b.columns,e=g.on,
k=c.groupModel,m=k.dataIndx,A=m.length;A--;)null==h[m[A]]&&m.splice(A,1);A=m.length;if(k.header&&k.on){a?a.empty():(a=this.$header=l("<div class='pq-group-header ui-helper-clearfix' ></div>").appendTo(b.$top),a.on("click",".pq-group-item",d.onGroupItemClick(this)));if(A){for(var b=[],t=0;t<A;t++){var r=m[t],u=h[r],p=e?g.groupModel.icon:k.icon;b.push("<div tabindex='0' class='pq-group-item' data-indx='",r,"' data-dir='",k.dir[t],"'>","<span class='",this.toggleIcon,k.collapsed[t]?p[1]:p[0],"' ></span>",
u.pqtitle||("string"==typeof u.title?u.title:r),"<span class='",this.groupRemoveIcon,"' ></span></div>")}a[0].innerHTML=b.join("")}this._initHeader(c,k)}else a&&(a.remove(),this.$header=null)};d.onGroupItemClick=function(b){return function(a){var c=l(a.target),d=l(this).data("indx");c.hasClass("pq-group-remove")?b.removeGroup(d):b.toggleLevel(d,a)}};c._initHeaderMenu=function(){for(var b=this.that,a=b.options,c=this.$header,d=["<ul class='pq-group-menu'><li>",b.BS_on?"<span class='glyphicon glyphicon-chevron-left'></span>":
"","<ul>"],g=a.groupModel,e=g.menuItems,k=0,w=e.length;k<w;k++)m(d,g,e[k],a);d.push("</ul></li></ul>");c=l(d.join("")).appendTo(c);c.menu({icons:{submenu:"ui-icon-carat-1-w"},position:{my:"right top",at:"left top"}});c.change(function(c){if("INPUT"==c.target.nodeName){c=l(c.target).closest("li").data("option");var d={};d[c]=!a.groupModel[c];b.groupOption(d)}})};c.setOption=function(){this._init&&(this.refreshColumns(),this.summaryData.length=0,this.tree.length=0,this._initmerge())};c.onDataReady=
function(b,a){return function(){b.tree.length=0;var c=a.options.groupModel;c.on&&(c.dataIndx.length?(b.refreshColumns(),b._groupData(),b._initcollapsed(),b._initmerge()):c.grandSummary&&(b.refreshColumns(),b._groupData()));b.createHeader()}};c.onColumnOrder=function(b){return function(){b._initmerge()}};c.pq_gc_=function(){return"pq_gc_"};c.onBeforeSort=function(b,a){return function(c){if(!c.isDefaultPrevented()){var d=a.options,g=d.groupModel;if(g.on){c=a.columns;for(var e=[],d=d.dataModel.data||
[],k=[],l,m,t=g.dataIndx,r=t.length;r--;){var u=t[r];l=c[u];var p=l.groupChange;if(p)for(p=pq.getFn(p),e.push(l),g=b.pq_gc_()+u,k.push(g),l.sortType=b.sortType(g),m=d.length;m--;)l=d[m],l[g]=p(l[u])}a.one("sort",function(){if(r=e.length)for(;r--;)e[r].sortType=void 0})}}}};c.sortType=function(b){return function(a,c,d){return a[b]!=c[b]?a[d]-c[d]:0}};c.toggleLevel=function(b,a){var c=this.that.options.groupModel,d=c.collapsed,c=l.inArray(b,c.dataIndx);this[(d[c]?"expand":"collapse")+(a.ctrlKey?"All":
"")](c)};c.collapseTo=function(b){this.expandTo(b,!0)};c.expandTo=function(b,a){var c=this.that,d=!0==a,g=b.split(","),e=g.length,k=this.tree,l,m,t;l=0;var r,u=c.pdata;if(!(e>k.length)){for(var p=0;p<e;p++){r=1*g[p]+l;l=k[p][r];if(!l){if(0==p)return;break}l=l.rip;if(!d||d&&p==e-1)m=u[l],m.pq_close!=d&&(t=m,m.pq_close=d);m=k[p+1];var q=void 0,v=r;if(m){do q=m[v].rip,v++;while(q<l);l=v-1}else l=void 0}t&&!1!==c._trigger("group",null,{indx:r,close:d})&&this.saveState(!0)}};c._editorSummary=function(b,
a){var c=b.summaryOptions,d=this;return function(b){var e=b.rowData;if(e.pq_gsummary||e.pq_gtitle){var e=pq.aggregate,g=b.column,m=g.summary,m=m?m.edit:null,A=g.dataType,g=[""];if(-1<l.inArray(b.dataIndx,a.dataIndx)||!a.summaryEdit&&!m||!1===m)return!1;"integer"==A||"float"==A?A="number":"date"!==A&&(A="string");m=c[A].split(",");b=l.inArray;for(var t in e)-1<b(t,m)&&g.push(t);return 1==g.length?!1:{type:"select",prepend:a.prepend,options:a.options||g,valueIndx:a.valueIndx,labelIndx:a.labelIndx,init:a.init||
d._editorInit,getData:a.getData||d._editorGetData}}}};c._editorInit=function(b){var a=b.column.summary;a||(a=b.column.summary={});a=a.type;b.$cell.find("select").val(a)};c._editorGetData=function(b){var a=b.column,c=a.dataType;b=b.$cell.find("select").val();a.summary.type=b;this.one("beforeValidate",function(b,d){d.allowInvalid=!0;d.track=!1;d.history=!1;a.dataType="string";this.one(!0,"change",function(b,d){a.dataType=c})});return b};c._renderTitle=function(b,a){var c=this.that,d=b.bootstrap,g=d.on,
d=g?d.groupModel.icon:a.icon,e=g?["glyphicon "+d[0],"glyphicon "+d[1]]:["ui-icon "+d[0],"ui-icon "+d[1]];return function(b){var d=b.rowData,g,h,l;if(d.pq_gtitle&&null!=b.cellData)return g=d.pq_close,h=d.pq_level,l=a.title,l=l[h]||a.titleDefault,l="function"===typeof l?l.call(c,b):l.replace("{0}",b.cellData).replace("{1}",d.pq_items),{text:(b.Export?"":"<span class='pq-group-icon "+e[g?1:0]+"'></span>")+l,cls:"pq-group-title-cell"}}};c._renderSummary=function(b){var a=this.that;return function(c){var d=
c.rowData,g,e;if(d.pq_gsummary||d.pq_gtitle){d=c.column;g=d.summary.type;e=b.summaryTitle[g];if("function"==typeof e)return e.call(a,c);g=c.formatVal;null==g&&(g=c.cellData,g=null==g?"":g);"number"!=typeof g||d.format||parseInt(g)===g||(g=g.toFixed(2));return e?e.replace("{0}",g):g}}};c.refreshColumns=function(){for(var b=this.that,a=b.options,c=a.groupModel,d=c.on,g=c.fixCols,e,k,l,m,t,r=c.dataIndx,u=r.length,p=a.colModel,q=p.length;q--;){m=p[q];if(l=m._render)l==m._renderGT?(delete m._renderGT,
delete m._render):l==m._renderGS&&(delete m._renderGS,delete m._render);m._nodrag&&(delete m._nodrag,delete m._nodrop);d&&(t=m.summary)&&t.type&&(k=k||this._renderSummary(a),m._render=m._renderGS=k)}a.geditor=d?this._editorSummary(a,c):void 0;if(d)for(q=u-1;0<=q;q--)m=b.getColumn({dataIndx:r[q]}),e=e||this._renderTitle(a,c),m._renderGT=m._render=e;if(g&&d)for(q=0;q<u;q++)a=b.getColIndx({dataIndx:r[q]}),m=p[a],m._nodrag=m._nodrop=!0,a!=q&&(b.iDragColumns.moveColumn(a,q,!0),b.iColModel.init())};c.refreshFull=
function(){var b=this.that;this.refreshColumns();this._triggerChange&&(b._trigger("groupChange"),this._triggerChange=!1);b.sort()};c.refreshView=function(){this.that.refreshView()};c.collapseAll=function(b){this.expandAll(b,!0)};c.expandAll=function(b,a){!1!==this.trigger({all:!0,close:!!a,level:b||0})&&this.that.refreshView()};c.collapse=function(b){this.expand(b,!0)};c.expand=function(b,a){!1!==this.trigger({close:!!a,level:b||0})&&this.that.refreshView()};c.showHideRows=function(b,a,c,d){for(var g=
[],e,k=this.that.pdata,l=b,m=k.length;l<m;l++)if(e=k[l],e.pq_gsummary)if(e.pq_level<a)break;else e.pq_hidden=c;else if(e.pq_gtitle)if((b=e.pq_close)&&g.push({indx:l,level:e.pq_level}),e.pq_level<=a)break;else e.pq_hidden=d&&!b?!0:c;else e.pq_hidden=c;return g};d.beforeTrigger=function(b,a){return function(c){return!1===a._trigger("beforeGroupExpand",b,c)}};c.trigger=function(b){var a=b.rd,c=b.level,g=b.all,h=b.close,e=this.that,k,l=e.options.groupModel;k=l.dataIndx;l=l.collapsed;b=d.beforeTrigger(b.evt,
e);var m={};if(a){c=a.pq_level;k=k[c];h=a[k];k=!a.pq_close;m={level:c,close:k,group:h};if(b(m))return!1;a.pq_close=k}else if(g){m={all:!0,close:h,level:c};if(b(m))return!1;for(a=c;a<k.length;a++)l[a]=h}else if(null!=c){k=!l[c];m={level:c,close:k};if(b(m))return!1;l[c]=k}return e._trigger("group",null,m)};c.toggleRow=function(b,a){!1!==this.trigger({evt:a,rd:this.that.pdata[b]})&&this.saveState(!0)};c.saveState=function(b){var a=this.that,c=a.options.groupModel;if(c.on&&c.dataIndx.length){for(var c=
a.pdata,d=c.length,g=Array(d),e=0;e<d;e++)g[e]=c[e];this.pdata=g;b&&a.refreshView()}};c._initmerge=function(){for(var b=this.that,a=b.options,c=a.groupModel.merge,d=this.tree,g=b.rowIndxOffset,e,k,l,m,t,r=b.colModel.length,u=[],p=b.pdata,q=0;q<d.length;q++){e=d[q];l=b.getColIndx({dataIndx:a.groupModel.dataIndx[q]});for(var v=0,s=e.length;v<s;v++){k=e[v];m=k.rip;if(null==m)break;c?(k=k.rip2,t=k-m,k=m+g,u.push({r1:k,rc:t,c1:l,cc:1})):(k=m+g,m=p[m],m.pq_close||u.push({r1:k,rc:1,c1:l,cc:r-l}))}}u.length?
(this.mc=a.mergeCells=u,b.iMerge.init()):this.mc.length&&(this.mc.length=0,b.iMerge.init())};c._initcollapsed=function(){var b=this.that,a=b.options.groupModel.merge,c=this.pdata,b=b.pdata,d,g,e,k;if(b){for(var l=0,m=b.length;l<m;l++)d=b[l],g=d.pq_gtitle,void 0!==g&&(g=d.pq_level,k=null,c&&(e=(e=c[l])?e.pq_close:null,null!=e&&(k=d.pq_close=e)),null==k&&(k=d.pq_close),k?this.showHideRows(l+1,g,!0):a&&(d.pq_hidden=!0));delete this.pdata}};c._groupChange=function(b){var a=l.trim,c=this.pq_gc_();return function(d,
g,e){if(e.groupChange)return d=d[c+g],null!=d?d:"";d=a(d[g]);return b?d.toUpperCase():d}};c._groupData=function(){var b=this.that,a=pq.aggregate,c=b.options,d=c.groupModel,g=d.merge,e=d.grandSummary,k=l.inArray,m=b.colModel,A=m.length,t=this._groupChange(d.ignoreCase),r=d.dataIndx,u=r.length,p=b.pdata,q=p.length,v=d.collapsed||[],s=[],y={},z=b.columns,x=[],B,d=d.showSummary||[],D=[];if(p&&0<q){for(var C=u-1;0<=C;C--)d[C]=null!=d[C]?d[C]:!1,v[C]=null!=v[C]?v[C]:!1,D[C]=(D[C+1]?D[C+1]:0)+d[C],x[C]=
z[r[C]];for(B=0;B<A;B++){var E=m[B],F=E.dataIndx,K=E.summary;K&&K.type&&-1==k(F,r)&&(s.push({column:E}),y[F]=Array(q-1))}B=s.length;k=[];m=[];A=[];z=[];for(C=0;C<u;C++)z[C]=null,A[C]="",m[C]=[];for(var H=0;H<=q;H++){for(var N=p[H],F=!1,J=null,C=0;C<u;C++){A[C]=H<q?t(N,r[C],x[C]):"";if(z[C]!=A[C]||H==q)F=!0,null==J&&(J=C);if(F){var E=m[C],G=E[E.length-1];G&&(G.rip2=k.length+D[C]);E.push({rowIndx:H,title:A[C]})}}if(F){if(0<H)for(C=u-1;C>=J;C--){for(var G={},E=m[C],O=E.length-2?E[E.length-2].rip:C,I=
E.length-2?E[E.length-2].rowIndx:0,M=E[E.length-1].rowIndx,P=0;P<B;P++){var E=s[P].column,K=E.summary,K=K.type,F=E.dataIndx,L="",L=y[F].slice(I,M),L=a[K](L,E);G[F]=L}if(d[C]){var E={pq_gsummary:!0,pq_level:C,pq_rowcls:"pq-summary-row"},Q;for(Q in G)E[Q]=G[Q];k.push(E)}E=k[O];for(Q in G)E[Q]=G[Q];g&&(E.pq_rowcls="pq-summary-row");E.pq_items=M-I}if(H==q)break;for(C=0;C<u;C++)z[C]=A[C];for(C=J;C<u;C++)E={pq_gtitle:!0,pq_level:C,pq_close:v[C]},E[r[C]]=A[C],F=k.push(E),E=m[C],E[E.length-1].rip=F-1}if(H==
q)break;N.pq_hidden&&(N.pq_hidden=void 0);k.push(N);for(C=0;C<B;C++)E=s[C].column,F=E.dataIndx,y[F][H]=N[F]}this.tree=m;b.pdata=k}else b.dataGM=null;if(e){G={pq_grandsummary:!0,pq_gsummary:!0};for(P=0;P<B;P++)E=s[P].column,K=E.summary,K=K.type,F=E.dataIndx,L=y[F],L=a[K](L,E),G[F]=L;this.summaryData=c.summaryData=[G]}else this.summaryData.length=0};g=g.pqGrid.prototype;g.group=function(b){var a=this.iGroup;if(null==b)return a;a.expandTo(b.indx)};g.groupOption=function(b,a){var c=b.dataIndx,c=c?c.length:
0,d=!1,g=this.iGroup,e=this.options.groupModel,k=e.dataIndx,m=b.on||null==b.on&&e.on;m&&g.init();m&&(c||k.length)&&(d=!0);e.on&&k.length&&(!1===b.on||0===c)&&g.showRows();l.extend(e,b);g.setOption();if(!1!==a)this[d?"sort":"refreshView"]()}})(jQuery);
(function(l){var m=l.paramquery;l(document).on("pqGrid:bootup",function(d,c){new g(c.instance)});var g=m.cScroll=function(d){var c=l(document);this.that=d;d.one("refresh",this.oneRefresh(d,this,c,".pqgrid-csroll"))};m.cScroll=g;m=g.prototype;m.oneRefresh=function(d,c,b,a){return function(){d.$cont.on("mousedown",function(d){l(d.target).closest(".pq-sb").length||(b.on("mousemove"+a,function(a){c.onMouseDrag(a)}),b.on("mouseup"+a,function(){b.off(a)}))})}};m.onMouseDrag=function(d){var c=this.that.$cont,
b=c[0].offsetHeight,a=c[0].offsetWidth,f=c.offset(),c=f.top,f=f.left,b=c+b,a=f+a,g=d.pageY;d=d.pageX;var h=g-b,e=d-a,k=c-g,l=f-d;d>f&&d<a&&(0<h||0<k)?0<h?this.scrollV(h,!0):0<k&&this.scrollV(k):g>c&&g<b&&(0<e?this.scrollH(e,!0):0<l&&this.scrollH(l))};m.scrollH=function(d,c){this[this.that.options.virtualX?"scrollVirtual":"scrollNV"](d,c,!0)};m.scrollV=function(d,c){this[this.that.options.virtualY?"scrollVirtual":"scrollNV"](d,c)};m.scrollVirtual=function(d,c,b){var a=this.that;b=b?a.hscrollbar():
a.vscrollbar();var f=b.options,a=f.cur_pos,f=f.num_eles;d=Math.ceil(d/10);c=Math.pow(5,d-1)*(c?1:-1);a+=c;0>a?a=0:a>=f&&(a=f-1);b.option("cur_pos",a).scroll()};m.scrollNV=function(d,c,b){var a=this.that,f=a.$tbl[0][b?"offsetWidth":"offsetHeight"];b=b?a.hscrollbar():a.vscrollbar();d=(b.options.ratio*f+(c?d:-d))/f;1<d?d=1:0>d&&(d=0);b.option("ratio",d).drag()}})(jQuery);
