/**
 * ParamQuery Pro v3.2.0
 * 
 * Copyright (c) 2012-2015 Paramvir Dhindsa (http://paramquery.com)
 * Released under Commercial license
 * http://paramquery.com/pro/license
 * 
 */
(function(m){var n=m.ui.autocomplete.prototype,k=n._renderMenu,a=n._renderItem;n._renderMenu=function(c,b){k.call(this,c,b);var a=this.options.selectItem;if(a&&a.on){var a=a.cls,a=void 0===a?"ui-state-highlight":a,d=this.element.val();d&&a&&m("a",c).filter(function(){return m(this).text()===d}).addClass(a)}};n._renderItem=function(c,b){var e=a.call(this,c,b),d=this.options.highlightText;if(d&&d.on){var f=this.element.val();if(f){var f=new RegExp("("+f+")","i"),h=b.label;if(f.test(h)){var p=d.style,
d=d.cls,h=h.replace(f,"<span style='"+(void 0===p?"font-weight:bold;":p)+"' class='"+(void 0===d?"":d)+"'>$1</span>");e.find("a").html(h)}}}return e};n=m.paramquery=m.paramquery||{};n._trigger=function(c,b,a){var d,f=this.listeners[c],h=this.options,p=h.allEvents,q=h.bubble,g=this.element,l=h[c];a=a||{};b=m.Event(b);b.type=this.widgetName+":"+c;b.target=g[0];if(c=b.originalEvent)for(d in c)d in b||(b[d]=c[d]);p&&"function"==typeof p&&p.call(this,b,a);if(f&&f.length){d=b;p=a;f=f.slice();c=[];for(var D=
0,s=f.length;D<s;D++){var t=f[D],r=t.cb,w=t.one;if(w){if(t._oncerun)continue;t._oncerun=!0}!1===r.call(this,d,p)&&(d.preventDefault(),d.stopPropagation());w&&c.push(D);if(d.isImmediatePropagationStopped())break}if(c.length)for(D=c.length-1;0<=D;D--)f.splice(c[D],1);if(b.isImmediatePropagationStopped())return!b.isDefaultPrevented()}if(h.trigger&&(g[q?"trigger":"triggerHandler"](b,a),b.isImmediatePropagationStopped()))return!b.isDefaultPrevented();l&&!1===l.call(this,b,a)&&(b.preventDefault(),b.stopPropagation());
return!b.isDefaultPrevented()};n.on=function(c,b,a){c=c.split(" ");for(var d=0;d<c.length;d++){var f=c[d];if(f){var h=b,p=a,q=this.listeners[f];q||(q=this.listeners[f]=[]);q.push({cb:h,one:p})}}return this};n.one=function(c,b){return this.on(c,b,!0)};n.off=function(c,b){for(var a=c.split(" "),d=0;d<a.length;d++){var f=a[d];if(f){var h=f;if(f=b){if(h=this.listeners[h]){for(var p=[],q=0,g=h.length;q<g;q++)f==h[q].cb&&p.push(q);if(p.length)for(q=p.length-1;0<=q;q--)h.splice(p[q],1)}}else delete this.listeners[h]}}return this};
m.widget("paramquery.pqTooltip",m.ui.tooltip,{options:{items:"td.pq-has-tooltip,td[title]",position:{my:"center top",at:"center bottom"},content:function(){var c=m(this),b=c.closest(".pq-grid").pqGrid("getInstance").grid,a=b.getCellIndices({$td:c});return(b=b.data({rowIndx:a.rowIndx,dataIndx:a.dataIndx,data:"pq_valid"}).data)?(c=b.icon,b=b.msg,(""==c?"":"<span class='ui-icon "+c+" pq-tooltip-icon'></span>")+(null!=b?b:"")):c.attr("title")}},_create:function(){this._super();var c=this.element,b=this.eventNamespace;
c.on("pqtooltipopen"+b,function(b,c){var a=m(b.target),h=m(b.originalEvent.target);h.on("remove",function(g){a.pqTooltip("close",g,!0)});c.tooltip.css("zIndex",h.zIndex()+5);if(a.is(".pq-grid")){var p=a.pqGrid("getCellIndices",{$td:h}),q=p.dataIndx,g;(g=a.pqGrid("getRowData",{rowIndx:p.rowIndx}))&&(g=g.pq_celldata)&&(g=g[q])&&(g=g.pq_valid)&&(q=g,p=q.style,c.tooltip.addClass(q.cls),q=c.tooltip.attr("style"),c.tooltip.attr("style",q+";"+p));a.find("div.pq-sb-horiz,div.pq-sb-vert").on("pqscrollbardrag",
function(g,D){g.currentTarget=h[0];a.pqTooltip("close",g,!0)})}});c.on("pqtooltipclose"+b,function(b,c){var a=m(b.target);m(b.originalEvent.target).off("remove");a.is(".pq-grid")&&a.find("div.pq-sb-horiz,div.pq-sb-vert").off("pqscrollbardrag")})}})})(jQuery);
(function(m){var n=m.paramquery=m.paramquery||{};n.uniqueArray=function(c){for(var b=[],a=m.inArray,d=0,f=c.length;d<f;d++){var h=c[d];-1==a(h,b)&&b.push(h)}return b};n.select=function(c){var b=c.options,a=c.groupIndx,d=c.labelIndx,f=c.valueIndx,h=null!=d&&null!=f,p=null!=a,q=c.prepend,g=c.dataMap,l,D,s;c=["<select ",c.attr," >"];if(q)for(var t in q)c.push('<option value="',t,'">',q[t],"</option>");if(b&&b.length){for(var q=0,r=b.length;q<r;q++){var w=b[q];if(h){var y=w[f],m=w.pq_disabled?'disabled="disabled" ':
"",k=w.pq_selected?'selected="selected" ':"";if(null!=y){if(g){l={};for(s=0;s<g.length;s++){var x=g[s];l[x]=w[x]}l="data-map='"+JSON.stringify(l)+"'"}else l="";s=l;p&&(x=w.pq_disabled_group?'disabled="disabled" ':"",l=w[a],D!=l&&(null!=D&&c.push("</optgroup>"),c.push('<optgroup label="',l,'" ',x," >"),D=l));d==f?c.push("<option ",k,m,s,">",y,"</option>"):c.push("<option ",k,m,s,' value="',y,'">',w[d],"</option>")}}else if("object"==typeof w)for(t in w)c.push('<option value="',t,'">',w[t],"</option>");
else c.push("<option>",w,"</option>")}p&&c.push("</optgroup>")}c.push("</select>");return c.join("")};m.fn.pqval=function(c){if(c){if(c.incr)return c=this.data("pq_value"),this.prop("indeterminate",!1),c?(c=!1,this.prop("checked",!1)):!1===c?(c=null,this.prop("indeterminate",!0),this.prop("checked",!1)):(c=!0,this.prop("checked",!0)),this.data("pq_value",c),c;c=c.val;this.data("pq_value",c);this.prop("indeterminate",!1);null==c?(this.prop("indeterminate",!0),this.prop("checked",!1)):c?this.prop("checked",
!0):this.prop("checked",!1);return this}return this.data("pq_value")};n.xmlToArray=function(c,b){var a=b.itemParent,d=b.itemNames,f=[];m(c).find(a).each(function(b,c){var a=m(c),g=[];m(d).each(function(l,D){g.push(a.find(D).text().replace(/\r|\n|\t/g,""))});f.push(g)});return f};n.xmlToJson=function(c,b){var a=b.itemParent,d=b.itemNames,f=[];m(c).find(a).each(function(b,c){for(var a=m(c),g={},l=0,D=d.length;l<D;l++){var s=d[l];g[s]=a.find(s).text().replace(/\r|\n|\t/g,"")}f.push(g)});return f};n.tableToArray=
function(c){var b=[],a=[];c=m(c).children("tbody").children("tr");var d=c.length?m(c[0]):m(),f=1<c.length?m(c[1]):m();d.children("th,td").each(function(c,a){var d=m(a),g=d.html(),d=d.width(),l="left";if(f.length)var D=f.find("td:eq("+c+")").attr("align"),l=D?D:l;b.push({title:g,width:d,dataType:"string",align:l,dataIndx:c})});c.each(function(b,c){if(0!=b){var d=[];m(c).children("td").each(function(g,l){d.push(m.trim(m(l).html()))});a.push(d)}});return{data:a,colModel:b}};n.formatCurrency=function(c){if(isNaN(c))return c;
c=Math.round(100*c)/100;c+="";-1==c.indexOf(".")?c+=".00":c.indexOf(".")+2==c.length&&(c+="0");var b=c.length,a=c.substring(0,b-3);c=c.substring(b-3,b);for(var a=a.match(/\d/g).reverse(),b=[],d=0;d<a.length;d++)0<d&&0==d%3&&b.push(","),b.push(a[d]);b=b.reverse();a=b.join("");return a+c};n.validation={is:function(c,b){if("string"==c||!c)return!0;c=c.substring(0,1).toUpperCase()+c.substring(1,c.length);return this["is"+c](b)},isFloat:function(c){var b=parseFloat(c);return isNaN(b)||b!=c?!1:!0},isInteger:function(c){var b=
parseInt(c);return isNaN(b)||b!=c?!1:!0},isDate:function(c){c=Date.parse(c);return isNaN(c)?!1:!0}};var k=[],a=n.toLetter=function(c){var b=k[c];if(!b){c++;var e=c%26,b=c/26|0,e=e?String.fromCharCode(64+e):(--b,"Z"),b=b?a(b-1)+e:e;c--;k[c]=b}return b};n.generateData=function(c,b){for(var e=[],d=0;d<b;d++)e[d]=a(d);for(var f=[],d=0;d<c;d++)for(var h=f[d]=[],p=0;p<b;p++)h[p]=e[p]+(d+1);return f}})(jQuery);
(function(m){function n(b,c,a){return b?m("<span tabindex='0' rel='tooltip' data-placement='top' title='"+c+"' class='panel panel-default "+a+"'></span>"):m("<span class='pq-ui-button ui-widget-header' tabindex='0' rel='tooltip' title='"+c+"'><span class='ui-icon ui-icon-"+a+"'></span></span>")}function k(b,c){b.bind("click keydown",function(b){if("keydown"!=b.type||b.keyCode==m.ui.keyCode.ENTER)return c.call(this,b)})}function a(b,c,a){c[a?"addClass":"removeClass"]("disabled").css("pointer-events",
a?"none":"").attr("tabindex",a?"":"0")}var c={options:{bootstrap:{on:!1,pager:"panel panel-default",nextIcon:"glyphicon glyphicon-forward",prevIcon:"glyphicon glyphicon-backward",firstIcon:"glyphicon glyphicon-step-backward",lastIcon:"glyphicon glyphicon-step-forward",refreshIcon:"glyphicon glyphicon-refresh"},curPage:0,totalPages:0,totalRecords:0,msg:"",rPPOptions:[10,20,30,40,50,100],rPP:20},_regional:{strDisplay:"Displaying {0} to {1} of {2} items.",strFirstPage:"First Page",strLastPage:"Last Page",
strNextPage:"Next Page",strPage:"Page {0} of {1}",strPrevPage:"Previous Page",strRefresh:"Refresh",strRpp:"Records per page:{0}"}};m.extend(c.options,c._regional);c._create=function(){var b=this,c=this.options,a=c.bootstrap,h=a.on;this.listeners={};this.element.addClass("pq-pager "+(h?a.pager:""));this.first=n(h,c.strFirstPage,h?a.firstIcon:"seek-first").appendTo(this.element);k(this.first,function(c){1<b.options.curPage&&b._onChange(c,1)});this.prev=n(h,c.strPrevPage,h?a.prevIcon:"seek-prev").appendTo(this.element);
k(this.prev,function(c){1<b.options.curPage&&b._onChange(c,b.options.curPage-1)});m("<span class='pq-separator'></span>").appendTo(this.element);this.pageHolder=m("<span class='pq-page-placeholder'></span>").appendTo(this.element);m("<span class='pq-separator'></span>").appendTo(this.element);this.next=n(h,c.strNextPage,h?a.nextIcon:"seek-next").appendTo(this.element);k(this.next,function(c){b.options.curPage<b.options.totalPages&&b._onChange(c,b.options.curPage+1)});this.last=n(h,c.strLastPage,h?
a.lastIcon:"seek-end").appendTo(this.element);k(this.last,function(c){b.options.curPage!==b.options.totalPages&&b._onChange(c,b.options.totalPages)});m("<span class='pq-separator'></span>").appendTo(this.element);this.rPPHolder=m("<span class='pq-page-placeholder'></span>").appendTo(this.element);this.$refresh=n(h,c.strRefresh,h?a.refreshIcon:"refresh").appendTo(this.element);k(this.$refresh,function(c){if(!1===b._trigger("beforeRefresh",c))return!1;b._trigger("refresh",c)});m("<span class='pq-separator'></span>").appendTo(this.element);
this.$msg=m("<span class='pq-pager-msg'></span>").appendTo(this.element);this._refresh()};c._destroy=function(){this.element.empty().removeClass("pq-pager").enableSelection()};c._setOption=function(b,c){if("curPage"==b||"totalPages"==b)c=parseInt(c);this._super(b,c)};c._setOptions=function(){this._super.apply(this,arguments);this._refresh()};m.widget("paramquery.pqPager",c);window.pqPager=function(b,c){return m(b).pqPager(c).data("paramqueryPqPager")};var b=m.paramquery;b.pqPager.regional={};b.pqPager.regional.en=
c._regional;c=m.paramquery.pqPager.prototype;c._refreshPage=function(){var b=this;this.pageHolder.empty();for(var c=this.options,a=c.bootstrap,h=c.strPage.split(" "),p=[],q=0,g=h.length;q<g;q++){var l=h[q];"{0}"==l?p.push("<input type='text' tabindex='0' class='",a.on?"":"ui-corner-all","' />"):"{1}"==l?p.push("<span class='total'></span>"):p.push("<span>",l,"</span>")}a=p.join("");a=m(a).appendTo(this.pageHolder);this.page=a.filter("input").bind("change",function(g){var l=m(this),a=l.val();if(isNaN(a)||
1>a)return l.val(c.curPage),!1;a=parseInt(a);if(a>c.totalPages||!1===b._onChange(g,a))return l.val(c.curPage),!1});this.$total=a.filter("span.total")};c._onChange=function(b,c){if(!1===this._trigger("beforeChange",b,{curPage:c})||!1===this._trigger("change",b,{curPage:c}))return!1;this.option({curPage:c})};c._refresh=function(){this._refreshPage();var b=this,c=this.options,f=c.bootstrap;this.rPPHolder.empty();if(c.strRpp){var h=c.rPPOptions,p=c.strRpp;if(-1!=p.indexOf("{0}")){for(var f=["<select class='",
f.on?"":"ui-corner-all","'>"],q=0,g=h.length;q<g;q++){var l=h[q];f.push('<option value="',l,'">',l,"</option>")}f.push("</select>");h=f.join("");p=p.replace("{0}","</span>"+h);p="<span>"+p+"<span class='pq-separator'></span>"}else p="<span>"+p+"</span><span class='pq-separator'></span>";this.$rPP=m(p).appendTo(this.rPPHolder).filter("select").val(c.rPP).change(function(g){var l=m(this),c=l.val();if(!1===b._trigger("beforeChange",g,{rPP:c}))return l.val(b.options.rPP),!1;!1!==b._trigger("change",g,
{rPP:c})&&(b.options.rPP=c)})}p=c.bootstrap.on;h=c.curPage>=c.totalPages;a(p,this.next,h);a(p,this.last,h);h=1>=c.curPage;a(p,this.first,h);a(p,this.prev,h);this.page.val(c.curPage);this.$total.text(c.totalPages);0<this.options.totalRecords?(p=c.rPP,h=c.curPage,f=c.totalRecords,q=h*p,q>f&&(q=f),c=c.strDisplay,c=c.replace("{0}",(h-1)*p+1),c=c.replace("{1}",q),c=c.replace("{2}",f),this.$msg.html(c)):this.$msg.html("")};c.getInstance=function(){return{pager:this}};c._trigger=m.paramquery._trigger;c.on=
b.on;c.one=b.one;c.off=b.off})(jQuery);
(function(m){function n(c,b){return c?"<div class='"+b+"'></div>":"<div class='ui-icon ui-icon-"+b+"'></div>"}var k={options:{length:200,num_eles:3,trigger:!1,cur_pos:0,ratio:0,timeout:350,pace:"optimum",direction:"vertical",bootstrap:{on:!1,slider:"btn btn-default",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",left:"glyphicon glyphicon-chevron-left",right:"glyphicon glyphicon-chevron-right"},theme:!1},_destroy:function(){m(document).off("."+this.eventNamespace);this.element.removeClass("pq-sb pq-sb-vert pq-sb-vert-t pq-sb-vert-wt").enableSelection().removeClass("pq-sb-horiz pq-sb-horiz-t pq-sb-horiz-wt").unbind("click.pq-scrollbar").empty();
this.element.removeData()},_create:function(){this.listeners={};this._createLayout()},_setOption:function(c,b){"disabled"==c?(this._super(c,b),!0==b?this.$slider.draggable("disable"):this.$slider.draggable("enable")):"theme"==c?(this._super(c,b),this._createLayout()):"ratio"==c?0<=b&&1>=b&&this._super(c,b):this._super(c,b)},_setOptions:function(){this._super.apply(this,arguments);this.refresh()}};m.widget("paramquery.pqScrollBar",k);window.pqScrollBar=function(c,b){return m(c).pqScrollBar(b).data("paramqueryPqScrollBar")};
k=m.paramquery.pqScrollBar.prototype;k._createLayout=function(){var c=this,b=this.options,a=b.bootstrap,d=a.on,f=b.direction,h=this.eventNamespace,p=b.theme,q=this.element.empty();"vertical"==f?(q.removeClass("pq-sb-vert-t pq-sb-vert-wt").addClass("pq-sb pq-sb-vert"),p?(q.addClass("pq-sb-vert-t"),q[0].innerHTML=["<div class='top-btn pq-sb-btn ",d?"":"ui-state-default ui-corner-top","'>",n(d,d?a.up:"triangle-1-n"),"</div><div class='pq-sb-slider ",d?a.slider:"ui-corner-all ui-state-default","'></div><div class='bottom-btn pq-sb-btn ",
d?"":"ui-state-default ui-corner-bottom","'>",n(d,d?a.down:"triangle-1-s"),"</div>"].join("")):(q.addClass("pq-sb-vert-wt"),q[0].innerHTML="<div class='top-btn pq-sb-btn'></div><div class='pq-sb-slider'><div class='vert-slider-top'></div><div class='vert-slider-bg'></div><div class='vert-slider-center'></div><div class='vert-slider-bg'></div><div class='vert-slider-bottom'></div></div><div class='bottom-btn pq-sb-btn'></div>")):(q.removeClass("pq-sb-horiz-t pq-sb-horiz-wt").addClass("pq-sb pq-sb-horiz"),
p?(q.addClass("pq-sb-horiz-t"),q[0].innerHTML=["<div class='left-btn pq-sb-btn ",d?"":"ui-state-default ui-corner-left","'>",n(d,d?a.left:"triangle-1-w"),"</div><div class='pq-sb-slider pq-sb-slider-h ",d?a.slider:"ui-state-default ui-corner-all","'></div><div class='right-btn pq-sb-btn ",d?"":"ui-state-default ui-corner-right","'>",n(d,d?a.right:"triangle-1-e"),"</div>"].join("")):(q.addClass("pq-sb-horiz-wt"),q.width(this.width),q[0].innerHTML="<div class='left-btn pq-sb-btn'></div><div class='pq-sb-slider pq-sb-slider-h'><span class='horiz-slider-left'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-center'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-right'></span></div><div class='right-btn pq-sb-btn'></div>"));
q.disableSelection().unbind(".pq-scrollbar").on("mousedown.pq-scrollbar",function(g){if(!b.disabled&&!c.$slider.is(":hidden"))if(m(document).off("."+h).on("mouseup."+h,function(g){c._mouseup(g)}),"vertical"==f){var l=g.pageY,D=c.element.offset().top,a=D+b.length,t=c.$slider,d=t.offset().top,e=t.height(),t=d+e;l<d&&l>D+17?c._setTimerPageLeft(l,e,g,0):l>t&&l<a-17&&c._setTimerPageRight(l,e,g,0)}else l=g.pageX,D=c.element.offset().left,a=D+b.length,d=c.$slider.offset().left,t=d+c.$slider.width(),l<d&&
l>D+17?(c.$slider.css("left",l-c.element.offset().left),c._updateCurPosAndTrigger(g)):l>t&&l<a-17&&(c.$slider.css("left",l-c.element.offset().left-c.$slider.width()),c._updateCurPosAndTrigger(g))});a=this.$slider=m("div.pq-sb-slider",this.element);a.attr("tabindex","0");this._bindSliderEvents(a);this.$top_btn=m("div.top-btn,div.left-btn",this.element).click(function(g){if(!c.options.disabled)return c.decr_cur_pos(g),!1}).mousedown(function(g){if(!c.options.disabled)return c.mousedownTimeout=setTimeout(function(){c.mousedownInterval=
setInterval(function(){c.decr_cur_pos(g)},0)},c.options.timeout),!1}).bind("mouseup mouseout",function(g){c._mouseup(g)});this.$bottom_btn=m("div.bottom-btn,div.right-btn",this.element).click(function(g){if(!c.options.disabled)return c.incr_cur_pos(g),!1}).mousedown(function(g){if(!c.options.disabled)return c.mousedownTimeout=setTimeout(function(){c.mousedownInterval=setInterval(function(){c.incr_cur_pos(g)},0)},c.options.timeout),!1}).bind("mouseup mouseout",function(g){c._mouseup(g)});this.refresh()};
var a=0;k._setTimerPageLeft=function(c,b,e,d){var f=this,h=f.options;this.mousedownTimeout=window.setTimeout(function(){if(c>=f.$slider.offset().top)f._mouseup();else{f._pageLeft(e);var d=a?0:h.timeout;a++;f._setTimerPageLeft(c,b,e,d)}},d)};k._setTimerPageRight=function(c,b,e,d){var f=this;this.mousedownTimeout=window.setTimeout(function(){if(c<=f.$slider.offset().top+b)f._mouseup();else{f._pageRight(e);var d=a?0:f.options.timeout;a++;f._setTimerPageRight(c,b,e,d)}},d)};k._bindSliderEvents=function(c){var b=
this,a="x";"vertical"==this.options.direction&&(a="y");c.draggable({axis:a,helper:function(c,a){b._setDragLimits();return this},start:function(c){b.topWhileDrag=null;b.dragging=!0},drag:function(c){b.dragging=!0;var a=b.options.pace;"optimum"==a?b._setNormalPace(c):"fast"==a&&b._updateCurPosAndTrigger(c)},stop:function(c){"fast"!=b.options.pace&&b._updateCurPosAndTrigger(c);b.dragging=!1;b.refresh()}}).on("keydown.pq-scrollbar",function(c){var a=c.keyCode,e=b.options,p=e.cur_pos,q=e.ratio,g=e.num_eles,
l=m.ui.keyCode;null==b.keydownTimeout&&(b.keydownTimeout=window.setTimeout(function(){a==l.DOWN||a==l.RIGHT?b.incr_cur_pos(c):a==l.UP||a==l.LEFT?b.decr_cur_pos(c):a==l.HOME?e.steps?0<p&&(e.cur_pos=0,b.updateSliderPos(),b.scroll(c)):0<q&&(e.ratio=0,b.updateSliderPos(),b.drag(c)):a==l.END?e.steps?p<g&&(e.cur_pos=g,b.updateSliderPos(),b.scroll(c)):1>q&&(e.ratio=1,b.updateSliderPos(),b.drag(c)):"vertical"==e.direction&&(a==l.PAGE_DOWN?b._pageRight(c):a==l.PAGE_UP&&b._pageLeft(c));b.keydownTimeout=null},
0));if(a==l.DOWN||a==l.RIGHT||a==l.UP||a==l.LEFT||a==l.PAGE_DOWN||a==l.PAGE_UP||a==l.HOME||a==l.END)return c.preventDefault(),!1})};k.decr_cur_pos=function(c){var b=this.options;if(b.steps)0<b.cur_pos&&(b.cur_pos--,this.updateSliderPos(),this.scroll(c));else if(0<b.ratio){var a=b.ratio-1/(b.num_eles-1);0>a&&(a=0);b.ratio=a;this.updateSliderPos();this.drag(c)}};k.incr_cur_pos=function(c){var b=this.options;if(b.steps)b.cur_pos<b.num_eles-1&&b.cur_pos++,this.updateSliderPos(),this.scroll(c);else{if(1>
b.ratio){var a=b.ratio+1/(b.num_eles-1);1<a&&(a=1);b.ratio=a}this.updateSliderPos();this.drag(c)}};k._mouseup=function(c){this.options.disabled||(a=0,window.clearTimeout(this.mousedownTimeout),this.mousedownTimeout=null,window.clearInterval(this.mousedownInterval),this.mousedownInterval=null)};k._setDragLimits=function(){var c=this.options;if("vertical"==c.direction){var b=this.element.offset().top+17,c=b+c.length-34-this.slider_length;this.$slider.draggable("option","containment",[0,b,0,c])}else b=
this.element.offset().left+17,c=b+c.length-34-this.slider_length,this.$slider.draggable("option","containment",[b,0,c,0])};k._validateCurPos=function(){var c=this.options;c.cur_pos>=c.num_eles&&(c.cur_pos=c.num_eles-1);0>c.cur_pos&&(c.cur_pos=0)};k._updateSliderPosRatio=function(){var c=this.options,b=c.direction,a=c.ratio,d=this.$slider[0],c=c.length-34-this.slider_length;if(null==a)throw"updateSliderPosRatio ratio N/A";a=a*c+17;"vertical"==b?d.style.top=a+"px":d.style.left=a+"px"};k._updateSliderPosCurPos=
function(){var c=this.options,b=this.$slider[0],a=this.scroll_space*c.cur_pos/(c.num_eles-1);"vertical"==c.direction?b.style.top=17+a+"px":b.style.left=17+a+"px"};k.updateSliderPos=function(){var c=this.options;if(void 0===c.steps)throw"updateSliderPos. steps N/A";c.steps?this._updateSliderPosCurPos():this._updateSliderPosRatio()};k.scroll=function(c){var b=this.options;this._trigger("scroll",c,{cur_pos:b.cur_pos,num_eles:b.num_eles})};k.drag=function(c){this._trigger("drag",c,{ratio:this.options.ratio})};
k._pageRight=function(c){this._trigger("pageRight",c,null)};k._pageLeft=function(c){this._trigger("pageLeft",c,null)};k._setSliderBgLength=function(){var c=this.options,b=c.theme,a=this.$slider,d=c.length,d=Math.round(((d-34)*d/(40*c.num_eles+d)-14)/2);1>d&&(d=1);var f=14+2*d;this.scroll_space=c.length-34-f;if(f!==this.slider_length)if(this.slider_length=f,c="vertical"===c.direction?{dim:"height",cls:".vert-slider-bg"}:{dim:"width",cls:".horiz-slider-bg"},b)a[c.dim](f-2);else m(c.cls,this.element)[c.dim](d),
a[c.dim](f)};k._updateCurPosAndTrigger=function(c,b){var a=this.options,d=a.direction,f=this.$slider;null==b&&(b=parseInt(f[0].style["vertical"===d?"top":"left"]));d=(b-17)/(a.length-34-this.slider_length);if(a.steps){if(d*=a.num_eles-1,d=Math.round(d),a.cur_pos!=d){if(this.dragging){if(null!=this.topWhileDrag&&(this.topWhileDrag<b&&a.cur_pos>d||this.topWhileDrag>b&&a.cur_pos<d))return;this.topWhileDrag=b}this.options.cur_pos=d;this.scroll(c)}}else a.ratio=d,this.drag(c)};k._setNormalPace=function(c){this.timer&&
(window.clearInterval(this.timer),this.timer=null);var b=this,a=this.options.direction;b.timer=window.setInterval(function(){var d=parseInt(b.$slider[0].style["vertical"===a?"top":"left"]);b.prev_top===d&&(b._updateCurPosAndTrigger(c,d),window.clearInterval(b.timer),b.timer=null);b.prev_top=d},20)};k.refresh=function(){var c=this.options,b=this.$slider[0],a=this.element;1>=c.num_eles?a[0].style.display="none":(a[0].style.display="",this._validateCurPos(),this.dragging||(a["vertical"===c.direction?
"height":"width"](c.length),this._setSliderBgLength(),b.style.display=4>this.scroll_space||1>=c.num_eles?"none":""),this.updateSliderPos())};k._trigger=m.paramquery._trigger})(jQuery);
(function(m){m.paramquery=m.paramquery||{};m.paramquery.onResize=function(n,k){var a=m(n);"static"===a.css("position")&&a.css("position","relative");var c=m('<iframe type="text/html" src="about:blank" class="pq-resize-iframe" style="display:block;width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;overflow: hidden; pointer-events: none;" />').appendTo(a);c[0].data="about:blank";c.css("opacity","0");for(var b=0;b<a.length;b++)m(c[b].contentWindow).on("resize",function(b){k()})}})(jQuery);
(function(m){function n(g){return"<span class='panel panel-default glyphicon glyphicon-"+g+"' ></span>"}function k(g){return"<span class='ui-widget-header pq-ui-button'><span class='ui-icon ui-icon-"+g+"'></span></span>"}var a=function(){};a.prototype.belongs=function(g){if(g.target==this.that.element[0])return!0};var c=m.paramquery;c.cClass=a;var b=function(g){this.that=g;var l=this;if(null!=(this.options=g.options).postRenderInterval)g.on("refresh",function(){l.prColDef.length&&l.postRenderAll()}).on("refreshRow",
function(g,b){l.prColDef.length&&l.postRenderRow(b)}).on("refreshCell",function(g,b){b.column.postRender&&l.postRenderRow(b)}).on("refreshColumn",function(g,b){b.column.postRender&&l.setTimerPostRender(0,b.colIndx,b.column)})};c.cGenerateView=b;a=b.prototype=new a;a.generateView=function(g){g=g||{};var l=this.that,b=l.options,a=b.scrollModel.smooth,t="flex"===b.width,d="flex"===b.height,e=b.cls,f=e.cont_inner,e=e.cont_inner_b,p,h,q=l.initH,m=l.finalH,k=b.groupModel,n=l.pqpanes;if(g.$cont)p=this._generateTables(null,
null,g),p=p.replace("%style%",""),k=g.$cont,k.empty(),k[0].innerHTML=n.v?["<div class='",f,"'>",p,"</div><div class='",f,"'>",p,"</div>"].join(""):["<div class='",f,"'>",p,"</div>"].join(""),b=k.children("div").children("table"),l.tables[0]={$tbl:b,$cont:k};else{p=l.initV;h=l.finalV;var E=k?l.dataGM:l.pdata,k=l.$cont;null!=b.editModel.indices&&l.blurEditor({force:!0});q={pageData:E,initV:p,finalV:h,initH:q,finalH:m,source:g.source};l._trigger("beforeTableView",null,q);p=this._generateTables(p,h,g);
k.empty();0===l.totalVisibleRows?k.append("<div class='"+f+" pq-grid-norows' >"+b.strNoRows+"</div>"):(g=d||t?"style='position:relative;'":"",t="",b.virtualY&&a&&(t="style='"+l.iMouseSelection.getBorderStyle(!0)+"'"),p=p.replace("%style%",t),k[0].innerHTML=n.h&&n.v?["<div class='",f,"'>",p,"</div><div class='",f,"'>",p,"</div><div class='",f," ",e,"'>",p,"</div><div class='",f," ",e,"'>",p,"</div>"].join(""):n.v?["<div class='",f,"' ",g," >",p,"</div><div class='",f,"' >",p,"</div>"].join(""):n.h?
["<div class='",f,"' style='position:static;' >",p,"</div><div class='",f," ",e,"' style='position:static;' >",p,"</div>"].join(""):["<div class='",f,"' ",g," >",p,"</div>"].join(""));l.$tbl=k.children("div").children("table");if(b.scrollModel.flexContent&&l.$tbl[0])c.onResize(l.$tbl[0],function(){var g=l.iRefresh;g.ignoreTResize||g.softRefresh()});this.setPaneEvents();l._trigger("refresh",null,q)}this.setPanes()};a.postRenderRow=function(g){var l=this.that,b=this.prColDef,a=l.iMerge,c=g.rowIndx,
d;null!=g.colIndx&&(b=[{colIndx:g.colIndx,column:g.column}]);for(var e=0,f=b.length;e<f;e++)g=b[e],d=g.column.postRender,g=g.colIndx,a.ismergedCell(c,g)?a.isRootCell(c,g,!0)&&(g=a.getRootCell(c,g),d.call(l,g)):(g=l.normalize({rowIndx:c,colIndx:g}),d.call(l,g))};a.setTimerPostRender=function(g,l,b){var a=this.that,c=this,d=a.pdata,e=function(g){return-1==a.options.postRenderInterval?g():setTimeout(g,0)};d&&d.length&&(c.postRenderTimeoutID=e(function(){var e=a.initV,f=a.options.freezeRows;g<e&&g>=f&&
(g=e);d[g].pq_hidden||c.postRenderRow({column:b,colIndx:l,rowIndx:g+a.rowIndxOffset});g++;g<=a.finalV&&c.setTimerPostRender(g)}))};a.postRenderAll=function(){var g=this.that,l=this,b=g.pdata,a=g.options.postRenderInterval,g=function(g){return-1==a?g():setTimeout(g,a)};b&&b.length&&(clearTimeout(l.postRenderTimeoutID),l.postRenderTimeoutID=g(function(){l.setTimerPostRender(0)}))};a.scrollView=function(){var g=this.that,l=this.options,b=l.virtualY;l.virtualX||"flex"===l.width||g.hscroll.drag();b||g.vscroll.drag()};
a.setPaneEvents=function(){var g=this.that,l=g.pqpanes,b=g.$cont.children("div"),a=g.iMouseSelection;if((g=g.$tbl)&&g.length)if(l.h&&l.v){var l=m(b[0]),g=m(b[1]),c=m(b[2]),b=m(b[3]);l.on("scroll",function(g){this.scrollLeft=this.scrollTop=0});g.on("scroll",function(g){this.scrollTop=0;this.scrollLeft=a.getScrollLeft(!0)});c.on("scroll",function(g){this.scrollTop=a.getScrollTop(!0);this.scrollLeft=0});b.on("scroll",function(g){this.scrollTop=a.getScrollTop(!0);this.scrollLeft=a.getScrollLeft(!0)})}else if(l.v)l=
m(b[0]),b=m(b[1]),l.on("scroll",function(g){this.scrollTop=a.getScrollTop(!0);this.scrollLeft=0}),b.on("scroll",function(g){this.scrollTop=a.getScrollTop(!0);this.scrollLeft=a.getScrollLeft(!0)});else if(l.h)l=m(b[0]),b=m(b[1]),l.on("scroll",function(g){this.scrollTop=0;this.scrollLeft=a.getScrollLeft(!0)}),b.on("scroll",function(g){this.scrollTop=a.getScrollTop(!0);this.scrollLeft=a.getScrollLeft(!0)});else b.on("scroll",function(g){this.scrollTop=a.getScrollTop(!0);this.scrollLeft=a.getScrollLeft(!0)})};
a.setPanes=function(){var g=this.that,l=g.pqpanes,b=g.$cont.children("div"),a=g.iRefresh,c=g.$tbl,d=g.options,e=parseInt(d.freezeCols),e=g.calcWidthCols(-1,e)+1,f="flex"===d.width?"":a.getEContWd();if(g.tables.length){var p=g.tables[0].$tbl,h=g.tables[0].$cont,q=p.parent("div");l.v?(m(q[0]).css({width:e}),m(q[1]).css({left:e,width:f-e}),m(p[1]).css({left:-1*e})):m(q[0]).css({width:f});h.height(p[0].scrollHeight-1);a.setContHeight()}if(c&&c.length)if(a="flex"!==d.height||d.maxHeight?a.getEContHt():
"",l.h&&l.v){var p=m(b[0]),h=m(b[1]),q=m(c[1]),k=m(b[2]),n=m(c[2]),b=m(b[3]),A=m(c[3]),c=g.calcHeightFrozenRows();p.css({width:e,height:c});h.css({left:e,width:f-e,height:c});q.css({left:-1*e});k.css({width:e,top:c,height:a-c});n.css({marginTop:-(c+1)});b.css({left:e,width:f-e,top:c,height:a-c});A.css({marginTop:-(c+1),left:-1*e})}else l.v?(p=m(b[0]),b=m(b[1]),c=m(c[1]),p.css({width:e,height:a}),b.css({left:e,width:f-e,height:a}),c.css({left:-1*e})):l.h?(p=m(b[0]),b=m(b[1]),h=m(c[1]),c=g.calcHeightFrozenRows(),
p.css({height:c,width:f}),b.css({width:f,top:c,height:a-c}),h.css({marginTop:-(c+1)})):b.css({width:f,height:a});d.showHeader&&(l.vH?(g.$header_left.css({width:e}),g.$header_right.css({left:e,width:f-e}),g.$header_right_inner.css({left:-e})):g.$header_left.css({width:f}))};a.createColDefs=function(){for(var g=this.that,l=g.colModel,b=g.initH,a=g.finalH,g=g.options.freezeCols,c=[],d=[],e=0;e<=a;e++){if(e<b&&e>=g&&(e=b,e>a))throw"initH>finalH";var f=l[e];f.hidden||(c.push({column:f,colIndx:e}),f.postRender&&
"function"==typeof f.postRender&&d.push({column:f,colIndx:e}))}this.colDef=c;this.prColDef=d};a._generateTables=function(g,l,b){b=b||{};var a=this.that,c=a.options,e=c.bootstrap,d=c.numberCell,f=c.columnBorders,p=c.rowBorders,h=c.wrap,q=c.groupModel,c=parseInt(c.freezeRows),m=!1,k=0,n=b.other;l=n?b.data.length-1:l;var E=q?!0:!1;b=n?b.data:E?a.dataGM:a.pdata;var C=a.rowIndxOffset;if(n||null!=g&&null!=l){m=(e.on?e.tbody:"")+" pq-grid-table ";f&&(m+="pq-td-border-right ");p&&(m+="pq-td-border-bottom ");
f=["<table %style% class='"+(h?m+"pq-wrap ":m+"pq-no-wrap ")+"' >"];f.push("<tr class='pq-row-hidden'>");d.show&&(h=d.width,f.push("<td style='width:"+h+"px;' ></td>"));m=this.colDef;k=0;for(d=m.length;k<d;k++)h=m[k],p=h.colIndx,h=h.column.outerWidth,f.push("<td style='width:",h,"px;' pq-col-indx='",p,"'></td>");f.push("</tr>");for(k=0;k<=l;k++)k<g&&k>=c&&(k=g),d=b[k],p=E?d.rowIndx-C:k,d&&d.pq_hidden||(m=a.lastFrozenRow===p,q&&null!=d.groupTitle?this._generateTitleRow(q,d,f,m):q&&d.groupSummary?this._generateSummaryRow(q,
d,f,m):(h=d.pq_detail&&d.pq_detail.show,this._generateRow(d,p,f,n,m,h),h&&this._generateDetailRow(d,p,f,n,m)));a.scrollMode=!1;f.push("</table>");return f.join("")}};a.appendRow=function(g){var l=this.that,b=l.pdata,a=l.colModel,c=l.finalV;c+g>b.length&&(g=b.length-c);if(g){if(1<g)throw"noRows > 1";l._trigger("beforeTableView",null,{pageData:b,initV:c,finalV:c,initH:l.initH,finalH:l.finalH,colModel:a});l.refreshRow({rowIndx:c,refresh:!1})}return g};a.prependRow=function(g){var l=this.that,b=l.options.freezeRows,
a=l.calcVisibleRows(l.pdata,0,b),c=l.pdata,d=l.initV,e=l.colModel;if(l._mergeCells){if(a)for(a=0;a<b;a++)l.refreshRow({rowIndxPage:a,refresh:!1});l.refreshRow({rowIndxPage:d+1,refresh:!1})}l._trigger("beforeTableView",null,{pageData:c,initV:d,finalV:d,initH:l.initH,finalH:l.finalH,colModel:e});l.refreshRow({rowIndxPage:d,refresh:!1});return g};a.removeTopRow=function(g){for(var l=this.that,b=l.options.freezeRows,a=l.calcVisibleRows(l.pdata,0,b),c=l.$tbl,d=m([]),e=0;e<c.length;e++)var f=m(c[e]).children("tbody").children("tr:gt(0)").slice(a,
g+a),d=d.add(f);d.remove();if(l._mergeCells){if(a)for(e=0;e<b;e++)l.refreshRow({rowIndxPage:e,refresh:!1});l.refreshRow({rowIndxPage:l.initV,refresh:!1})}};a.removeBottomRow=function(g){var l=this.that.$tbl;if(g)for(var b=0;b<l.length;b++)m(l[b]).children("tbody").children("tr:gt(0)").slice(-g).remove()};a._renderCell=function(g,l){var b=this.options,a=g.rowData,c=g.column,d=c.type,e=this.that.readCell(a,c);if(a){void 0!=l?e=l:"checkbox"==d?e="<input type='checkbox' "+(c.cb.check===e?"checked":"")+
" />":"detail"==d&&(b=b.detailModel,e="<div class='ui-icon "+(e&&e.show?b.expandIcon:b.collapseIcon)+"'></div>");if(""===e||void 0==e)e="&nbsp;";return e}};a.renderCell=function(g){var l=this.that,b="",a="",c=this.options;if(l._mergeCells){g=l.iMerge.renderCell(g);if(null==g)return"";b=g.rowspan?" rowspan='"+g.rowspan+"' colspan='"+g.colspan+"' ":"";a=g.style?a+g.style:a}var d=g.rowData,e=g.rowIndxPage,f=g.column,h=g.colIndx,q=f.dataIndx,m=c.freezeCols,k=c.columnBorders,c="pq-grid-cell ",b=b+(" pq-col-indx='"+
h+"' ");"right"==f.align?c+=" pq-align-right":"center"==f.align&&(c+=" pq-align-center");h==m-1&&k&&(c+=" pq-last-frozen-col");(h=f.cls)&&(c=c+" "+h);(h=l.iSelection.dirty?null:d.pq_cellselect)&&h[q]&&(c+=l.iCells.hclass);var n;f.render&&(g.dataIndx=q,g.cellData=d[q],(n=f.render.call(l,g))&&"string"!=typeof n&&(f=n.attr,h=n.cls,m=n.style,b=f?b+f:b,c=h?c+h:c,a=m?a+m:a,n=n.text));(f=d.pq_cellcls)&&(f=f[q])&&(c+=" "+f);if(d=d.pq_cellattr)if(q=d[q]){var l=p(q,l.initV==e),A;for(A in l)b+=" "+A+'="'+l[A]+
'"'}return["<td class='",c,"' ",b,a?" style='"+a+"' ":""," >",this._renderCell(g,n),"</td>"].join("")};a.refreshRow=function(g,l){var b=this.that,c=b.pdata[g];this._generateRow(c,g,l,null,b.lastFrozenRow===g,c.pq_detail&&c.pq_detail.show)};a._generateRow=function(g,l,b,c,a,d){var e="pq-grid-row ";a&&(e+=" pq-last-frozen-row");d&&(e+=" pq-detail-master");var f=this.that,h=this.options;a=h.bootstrap;var q=h.rowInit;d=h.numberCell;var m="",k="",n=f.rowIndxOffset;q&&(q=q.call(f,{rowData:g,rowIndxPage:l,
rowIndx:l+n}))&&(e+=q.cls?" "+q.cls:"",m+=q.attr?" "+q.attr:"",k+=q.style?q.style:"");h.stripeRows&&l/2==parseInt(l/2)&&(e+=" pq-grid-oddRow");g.pq_rowselect&&(e+=f.iRows.hclass);f=g.pq_rowcls;null!=f&&(e+=" "+f);if(f=g.pq_rowattr){var f=p(f),A;for(A in f)m+=" "+A+'="'+f[A]+'"'}b.push("<tr pq-row-indx='",l,"' class='",e,"' ",m," ",k?"style='"+k+"'":""," >");d.show&&b.push(["<td pq-col-indx='-1' class='pq-grid-number-cell ",a.on?"":"ui-state-default","'>",c?"&nbsp;":l+1,"</td>"].join(""));g={rowIndx:l+
n,rowIndxPage:l,rowData:g};l=this.colDef;c=0;for(e=l.length;c<e;c++)A=l[c],a=A.colIndx,g.column=A.column,g.colIndx=a,b.push(this.renderCell(g));b.push("</tr>");return b};a={widgetEventPrefix:"pqgrid",_create:function(){var g=this,l=this.options,a=l.dataModel,s=l.bootstrap,e=s.on,d=l.roundCorners&&!e,p=l.ui,h=l.sortModel;l.collapsible||(l.collapsible={on:!1,collapsed:!1});l.flexHeight&&(l.height="flex");l.flexWidth&&(l.width="flex");if(a.sortIndx){h.on=l.sortable;h.type=a.sorting;var k=[],v=a.sortIndx,
a=a.sortDir;if(m.isArray(v)){for(var n=0;n<v.length;n++){var B=a&&a[n]?a[n]:"up";k.push({dataIndx:v[n],dir:B})}h.single=!1}else k.push({dataIndx:v,dir:a?a:"up"}),h.single=!0;h.sorter=k}!1===l.virtualXHeader&&(l.virtualXHeader=null);this.setEditorPosTimer();this.iGenerateView=new b(this);this.iRefresh=new c.cRefresh(this);this.iKeyNav=new q(this);this.iIsValid=new f(this);this.tables=[];this.$tbl=null;this._calcThisColModel();this.iSort=new c.cSort(this);this.iHeader=new c.cHeader(this);this._initTypeColumns();
h=this.element;h.on("scroll"+this.eventNamespace,function(){this.scrollTop=this.scrollLeft=0});s=e?s.grid:p.grid;k=e?"":p.header_o;v=e?"":p.bottom;e=e?"":p.top;h.empty().addClass("pq-grid "+s+" "+(d?" ui-corner-all":"")).html(["<div class='pq-grid-top ",e," ",d?" ui-corner-top":"","'><div class='pq-grid-title",d?" ui-corner-top":"","'>&nbsp;</div></div><div class='pq-grid-center' ><div class='pq-header-outer ",k,"'></div><div class='pq-grid-cont-outer' ><div class='pq-grid-cont' tabindex='0'></div></div></div><div class='pq-grid-bottom ",
v," ",d?" ui-corner-bottom":"","'><div class='pq-grid-footer'>&nbsp;</div></div>"].join(""));this._trigger("render",null,{dataModel:this.options.dataModel,colModel:this.colModel});this.$top=m("div.pq-grid-top",h);l.showTop||this.$top.css("display","none");this.$title=m("div.pq-grid-title",h);l.showTitle||this.$title.css("display","none");this.$toolbar=m("div.pq-grid-toolbar",h);d=this.$grid_center=m("div.pq-grid-center",h).on("scroll",function(){this.scrollTop=0});this.$header_o=m("div.pq-header-outer",
this.$grid_center).on("scroll",function(){this.scrollLeft=this.scrollTop=0});this.$bottom=m("div.pq-grid-bottom",h);this.$footer=m("div.pq-grid-footer",h);this.$cont_o=m(".pq-grid-cont-outer",d);e=this.$cont=m("div.pq-grid-cont",d);m(window).bind("resize"+g.eventNamespace+" orientationchange"+g.eventNamespace,function(l,b){g.onWindowResize(l,b)});e.on("click",".pq-grid-cell,.pq-grid-number-cell",function(l){if(!0!==m.data(l.target,g.widgetName+".preventClickEvent")&&m(l.target).closest(".pq-grid")[0]==
g.element[0])return g._onClickCell(l)});e.on("click","tr.pq-grid-row",function(l){if(!0!==m.data(l.target,g.widgetName+".preventClickEvent")&&m(l.target).closest(".pq-grid")[0]==g.element[0])return g._onClickRow(l)});e.on("contextmenu","td.pq-grid-cell",function(l){if(m(l.target).closest(".pq-grid")[0]==g.element[0])return g._onRightClickCell(l)});e.on("contextmenu","tr.pq-grid-row",function(l){if(m(l.target).closest(".pq-grid")[0]==g.element[0])return g._onRightClickRow(l)});e.on("dblclick","td.pq-grid-cell",
function(l){if(m(l.target).closest(".pq-grid")[0]==g.element[0])return g._onDblClickCell(l)});e.on("dblclick","tr.pq-grid-row",function(l){if(m(l.target).closest(".pq-grid")[0]==g.element[0])return g._onDblClickRow(l)});e.on("blur",function(){g.onblur()});e.on("focus",function(){g.onfocus()});e.on("mousedown",function(l){var b=m(l.target);if(b.closest(".pq-grid")[0]==g.element[0]){var a;a=b.closest(".pq-grid-cell");if(a.length&&(l.currentTarget=a[0],a=g._onCellMouseDown(l),!1===a))return!1;b=b.closest(".pq-grid-row");
return b.length&&(l.currentTarget=b[0],a=g._onRowMouseDown(l),!1===a)?!1:g._onContMouseDown(l)}});e.on("mouseenter","td.pq-grid-cell",function(l){if(m(l.target).closest(".pq-grid")[0]==g.element[0])return g._onCellMouseEnter(l,m(this))});e.on("mouseenter","tr.pq-grid-row",function(l){if(m(l.target).closest(".pq-grid")[0]==g.element[0])return g._onRowMouseEnter(l,m(this))});e.on("mouseleave","td.pq-grid-cell",function(l){if(m(l.target).closest(".pq-grid")[0]==g.element[0])return g._onCellMouseLeave(l,
m(this))});e.on("mouseleave","tr.pq-grid-row",function(l){if(m(l.target).closest(".pq-grid")[0]==g.element[0])return g._onRowMouseLeave(l,m(this))});d.bind("mousewheel DOMMouseScroll",function(l){return g._onMouseWheel(l)});this.$hvscroll=m("<div class='pq-hvscroll-square ui-widget-content'></div>").appendTo(d);p=m("<div class='pq-vscroll'></div>").appendTo(d);this.prevVScroll=0;e=l.scrollModel;void 0===e.lastColumn&&l.virtualX&&(e.lastColumn="auto");this.vscroll=pqScrollBar(p,{pace:e.pace,theme:e.theme,
bootstrap:l.bootstrap,steps:l.virtualY&&!e.smooth,direction:"vertical",cur_pos:0,pageRight:function(){g.iKeyNav.pageDown()},pageLeft:function(){g.iKeyNav.pageUp()},drag:function(l,b){g.iMouseSelection.syncViewWithScrollBarVert(b.ratio)},scroll:function(l,b){g.iRefresh.refreshVscroll(b)}});p=m("<div class='pq-hscroll'></div>").appendTo(d);"flex"===l.height&&p.css("position","relative");this.hscroll=pqScrollBar(p,{direction:"horizontal",pace:e.pace,bootstrap:l.bootstrap,theme:e.theme,steps:l.virtualX&&
!e.smooth,cur_pos:0,drag:function(l,b){g.iMouseSelection.syncViewWithScrollBarHor(b.ratio)},scroll:function(){l.virtualX&&!l.scrollModel.smooth&&g.refresh()}});l.selectionModel["native"]||this.disableSelection();d.bind("keydown.pq-grid",function(l){m(l.target).closest(".pq-grid")[0]==g.element[0]&&g._onKeyPressDown(l)});this._refreshTitle();this.iRows=new c.cRows(this);this.iCells=new c.cCells(this);this.generateLoading();this._initPager();this._refreshResizable();this._refreshDraggable();this.iResizeColumns=
new c.cResizeColumns(this);this._mouseInit()},_mouseDown:function(g){var l=this;if(m(g.target).closest(".pq-editor-focus").length)this._blurEditMode=!0,window.setTimeout(function(){l._blurEditMode=!1},0);else return this._saveDims(),this._mousePQUpDelegate=function(g){return l._mousePQUp(g)},m(document).bind("mouseup"+this.eventNamespace,this._mousePQUpDelegate),this._super(g)},destroy:function(){this._trigger("destroy");this._super();window.clearInterval(this._refreshEditorPosTimer);this.autoResizeTimeout&&
clearTimeout(this.autoResizeTimeout);for(var g in this)delete this[g];m.fragments={}},_setOption:function(g,l){var b=this.options,a=b.dataModel;if("height"===g)"flex"===l?(a=this.vscroll,l&&a&&a.widget().hasClass("pq-sb-vert")&&(b.virtualY?a.option("cur_pos",0):a.option("ratio",0)),this.hscroll.widget().css("position","relative")):"flex"===b.height&&this.hscroll.widget().css("position",""),this._super(g,l);else if("width"===g&&"flex"==l)this._super(g,l),a=this.hscroll,l&&a&&a.widget().hasClass("pq-sb-horiz")&&
(b.virtualX?a.option("cur_pos",0):a.option("ratio",0));else if("title"==g)this._super(g,l),this._refreshTitle();else if("roundCorners"==g)this._super(g,l),l?(this.element.addClass("ui-corner-all"),this.$top.addClass("ui-corner-top"),this.$bottom.addClass("ui-corner-bottom")):(this.element.removeClass("ui-corner-all"),this.$top.removeClass("ui-corner-top"),this.$bottom.removeClass("ui-corner-bottom"));else if("virtualX"==g)this._super(g,l),this.hscroll.option("steps",l);else if("virtualY"==g)this._super(g,
l),this.vscroll.option("steps",l);else if("freezeCols"==g)l=parseInt(l),!isNaN(l)&&0<=l&&l<=this.colModel.length-2&&this._super(g,l);else if("freezeRows"==g)l=parseInt(l),!isNaN(l)&&0<=l&&this._super(g,l);else if("resizable"==g)this._super(g,l),this._refreshResizable();else if("draggable"==g)this._super(g,l),this._refreshDraggable();else if("scrollModel"==g)this._super(g,l);else if("dataModel"==g)l.data!==a.data&&a.dataUF&&a.dataUF.length&&(a.dataUF.length=0),this._super(g,l);else if("groupModel"==
g){if(null==l)for(var b=a.data,a=0,c=b.length;a<c;a++)b[a].pq_hidden=!1;this._super(g,l)}else"pageModel"==g?this._super(g,l):"selectionModel"===g?this._super(g,l):"colModel"===g||"columnTemplate"==g?(this._super(g,l),this._calcThisColModel()):"disabled"===g?(this._super(g,l),!0===l?this._disable():this._enable()):"numberCell"===g?(this._super(g,l),this.iRefresh.decidePanes()):"strLoading"===g?(this._super(g,l),this._refreshLoadingString()):"showTop"===g?(this._super(g,l),!0===l?this.$top.css("display",
""):this.$top.css("display","none")):"showTitle"===g?(this._super(g,l),!0===l?this.$title.css("display",""):this.$title.css("display","none")):"showToolbar"===g?(this._super(g,l),!0===l?this.$toolbar.css("display",""):this.$toolbar.css("display","none")):"toolbar"==g?(this._super(g,l),this.$toolbar.remove(),this._super(g,l),this._createToolbar()):"collapsible"===g?(this._super(g,l),this._createCollapse()):"showBottom"===g?(this._super(g,l),!0===l?this.$bottom.css("display",""):this.$bottom.css("display",
"none")):this._super(g,l)}};a.options={cancel:"input,textarea,button,select,option,.pq-no-capture,.ui-resizable-handle",trigger:!1,bootstrap:{on:!1,thead:"table table-striped table-condensed table-bordered",tbody:"table table-striped table-condensed table-bordered",grid:"panel panel-default",header_active:"active"},ui:{on:!0,grid:"ui-widget ui-widget-content",top:"ui-widget-header",bottom:"ui-widget-header",header_o:"ui-widget-header",header:"ui-state-default",header_active:"ui-state-active"},cls:{cont_inner:"pq-grid-cont-inner",
cont_inner_b:"pq-grid-cont-inner-b"},distance:3,collapsible:{on:!0,toggle:!0,collapsed:!1,_collapsed:!1,refreshAfterExpand:!0,css:{zIndex:1E3}},colModel:null,columnBorders:!0,dataModel:{cache:!1,dataType:"JSON",location:"local",sorting:"local",sortDir:"up",method:"GET"},direction:"",draggable:!1,editable:!0,editModel:{cellBorderWidth:0,pressToEdit:!0,clicksToEdit:2,filterKeys:!0,keyUpDown:!0,reInt:/^([\-]?[1-9][0-9]*|[\-]?[0-9]?)$/,reFloat:/^[\-]?[0-9]*\.?[0-9]*$/,onBlur:"validate",saveKey:m.ui.keyCode.ENTER,
onSave:"nextFocus",onTab:"nextFocus",allowInvalid:!1,invalidClass:"pq-cell-red-tr pq-has-tooltip",warnClass:"pq-cell-blue-tr pq-has-tooltip",validate:!0},editor:{select:!1,type:"textbox"},validation:{icon:"ui-icon-alert",cls:"ui-state-error",style:"padding:3px 10px;"},warning:{icon:"ui-icon-info",cls:"",style:"padding:3px 10px;"},freezeCols:0,freezeRows:0,freezeBorders:!0,calcDataIndxFromColIndx:!0,height:400,hoverMode:"null",_maxColWidth:"100%",_minColWidth:50,minWidth:100,numberCell:{width:30,title:"",
resizable:!0,minWidth:30,maxWidth:100,show:!0},pageModel:{curPage:1,totalPages:0,rPP:10,rPPOptions:[10,20,50,100]},resizable:!1,roundCorners:!0,rowBorders:!0,rowHeight:25,scrollModel:{pace:"fast",smooth:!1,horizontal:!0,lastColumn:"auto",autoFit:!1,theme:!1},selectionModel:{type:"cell",onTab:"nextFocus",row:!0,mode:"block"},swipeModel:{on:!0,speed:20,ratio:.15,repeat:20},showBottom:!0,showHeader:!0,showTitle:!0,showToolbar:!0,showTop:!0,sortable:!0,sql:!1,stripeRows:!0,title:"&nbsp;",treeModel:null,
virtualX:!1,virtualY:!1,width:"auto",wrap:!0,hwrap:!0};m.extend(a.options,{strAdd:"Add",strDelete:"Delete",strEdit:"Edit",strLoading:"Loading",strNextResult:"Next Result",strNoRows:"No rows to display.",strNothingFound:"Nothing found",strPrevResult:"Previous Result",strSearch:"Search",strSelectedmatches:"Selected {0} of {1} match(es)"});m.widget("paramquery._pqGrid",m.ui.mouse,a);a=c._pqGrid.prototype;a.readCell=function(g,l,b,a,c){var e=l.dataIndx;if(!b||!b.isHidden(a,c)){if(l.nested){e=e.split(".");
l=0;for(b=e.length;l<b&&(g=g[e[l]],g);l++);return g}return g[e]}};a.saveCell=function(g,l,b){var a=l.dataIndx;if(l.nested){l=a.split(".");for(var a=g,c=0,e=l.length;c<e;c++){var d=l[c];c==e-1?a[d]=b:a=g[d]=g[d]||{}}}else g[a]=b};a._destroyResizable=function(){this.element.data("resizable")&&this.element.resizable("destroy")};a._disable=function(){null==this.$disable&&(this.$disable=m("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};a._enable=function(){this.$disable&&
(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};a._destroy=function(){this.loading&&this.xhr.abort();this._destroyResizable();this._destroyDraggable();this._mouseDestroy();this.element.off(this.eventNamespace);m(window).unbind(this.eventNamespace);m(document).unbind(this.eventNamespace);this.element.empty().css("height","").css("width","").removeClass("pq-grid ui-widget ui-widget-content ui-corner-all").removeData()};a.collapse=function(g){var l=this,b=this.element,a=this.options.collapsible,
c=a.$collapse.children("span"),e=function(){b.css("overflow","hidden");c.addClass("ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-n");b.hasClass("ui-resizable")&&b.resizable("destroy");l.$toolbar.pqToolbar("disable");a.collapsed=!0;a._collapsed=!0;a.animating=!1;l._trigger("collapse")};g=g?g:{};if(a._collapsed)return!1;a.htCapture=b.height();!1===g.animate?(b.height(23),e()):(a.animating=!0,b.animate({height:"23px"},function(){e()}))};a.expand=function(g){var l=this,b=this.element,
a=this.options.collapsible,c=a.htCapture,e=a.$collapse.children("span"),d=function(){b.css("overflow","");a._collapsed=!1;a.collapsed=!1;l._refreshResizable();a.refreshAfterExpand&&l.refresh();e.addClass("ui-icon-circle-triangle-n").removeClass("ui-icon-circle-triangle-s");l.$toolbar.pqToolbar("enable");a.animating=!1;l._trigger("expand")};g=g?g:{};if(!1===a._collapsed)return!1;!1===g.animate?(b.height(c),d()):(a.animating=!0,b.animate({height:c},function(){d()}))};a._createCollapse=function(){var g=
this,l=this.$top,b=this.options,a=b.collapsible;a.$stripe||(l=m("<div class='pq-slider-icon pq-no-capture'  ></div>").appendTo(l),a.$stripe=l);a.on?a.$collapse||(a.$collapse=m(b.bootstrap.on?n("collapse-down"):k("circle-triangle-n")).appendTo(a.$stripe).click(function(l){a.collapsed?g.expand():g.collapse()})):a.$collapse&&(a.$collapse.remove(),delete a.$collapse);a.collapsed&&!a._collapsed?g.collapse({animate:!1}):!a.collapsed&&a._collapsed&&g.expand({animate:!1});a.toggle?a.$toggle||(a.$toggle=m(b.bootstrap.on?
n("fullscreen"):k("arrow-4-diag")).prependTo(a.$stripe).click(function(l){g.toggle()})):a.$toggle&&(a.$toggle.remove(),delete a.$toggle)};a.toggle=function(){var g=this.options,l=g.collapsible,b=this.element,a,c=this._maxim;a=c?"min":"max";var e=m(document.body);if(!1===this._trigger("beforeToggle",null,{state:a}))return!1;"min"==a?(g=c.eleObj,l=c.docObj,this.option({height:g.height,width:g.width,maxHeight:g.maxHeight}),b.css({position:g.position,left:g.left,top:g.top,margin:g.margin,zIndex:g.zIndex}),
e.css({height:"",width:"",overflow:l.overflow,position:l.position}),m("html").css({overflow:"visible"}),window.scrollTo(l.scrollLeft,l.scrollTop),this._maxim=null):(g={height:g.height,width:g.width,position:b.css("position"),left:b.css("left"),top:b.css("top"),margin:b.css("margin"),zIndex:b.css("zIndex"),maxHeight:g.maxHeight},this.option({height:"100%",width:"100%",maxHeight:null}),b.css(m.extend({position:"fixed",left:0,top:0,margin:0},l.css)),l={overflow:e.css("overflow"),scrollLeft:m(window).scrollLeft(),
scrollTop:m(window).scrollTop(),position:e.css("position")},m(document.body).css({height:0,width:0,overflow:"hidden",position:"static"}),m("html").css({overflow:"hidden"}),window.scrollTo(0,0),this._maxim={eleObj:g,docObj:l});this._trigger("toggle",null,{state:a});this._refreshResizable();this.refresh();m(window).trigger("resize",{$grid:b,state:a})};a._mouseCapture=function(g){var l=this.options;return l.virtualX&&l.virtualY&&!l.scrollModel.smooth||!g.target?!1:m(g.target).closest(".pq-grid")[0]==
this.element[0]?(g=l.swipeModel,!1==g.on||"touch"==g.on&&!m.support.touch?!1:!0):!1};a._saveDims=function(){var g=this.$tbl,l=this.$tbl_header;if(g)for(var b=0;b<g.length;b++){var a=g[b],c=m(a);c.data("offsetHeight",Math.round(a.offsetHeight)-1);c.data("scrollWidth",Math.round(a.scrollWidth))}if(l)for(b=0;b<l.length;b++)a=l[b],g=m(a).parent(),g.data("offsetHeight",Math.round(a.offsetHeight)),g.data("scrollWidth",Math.round(a.scrollWidth))};a._mousePQUp=function(g){m(document).unbind("mouseup"+this.eventNamespace,
this._mousePQUpDelegate);this._trigger("mousePQUp",g,null)};a._mouseStart=function(g){this.blurEditor({force:!0});return!0};a._mouseDrag=function(g){return!1==this._trigger("mouseDrag",g,null)?!1:!0};a._mouseStop=function(g){return!1==this._trigger("mouseStop",g,null)?!1:!0};var e,d;a.onWindowResize=function(g,l){var b=this.options,a=this.element,c=a.parent();if(l){var f=l.$grid;if(f&&(f==a||0==a.closest(f).length))return}if(c.length&&(c[0]==document.body||"fixed"==a.css("position")?(a=window.innerHeight?
window.innerHeight:m(window).height(),c=m(window).width()):(a=c.height(),c=c.width()),null==e||a!=e||c!=d)&&(e=a,d=c,!(m.support.touch&&b.editModel.indices&&m(document.activeElement).is(".pq-editor-focus")))){var p=this,b=b.autoSizeInterval,b=void 0===b?0:b;this.autoResizeTimeout&&(clearTimeout(this.autoResizeTimeout),delete this.autoResizeTimeout);this.autoResizeTimeout=window.setTimeout(function(){p._refreshAfterResize();delete p.autoResizeTimeout},b)}};a._onMouseWheel=function(g){this._saveDims();
var l=this.options,b=0,a=!1;g=g.originalEvent;var c=g.wheelDeltaX,e=g.wheelDeltaY,d=g.wheelDelta;if(c&&Math.abs(c)>Math.abs(e)){if("flex"==l.width)return!0;a=!0;b=c/120}else if(d){if(!this.iRefresh.vscroll)return!0;b=d/120}else if(g.detail){if(!this.iRefresh.vscroll)return!0;b=-1*g.detail/3}b*=3;g=a?this.hscroll:this.vscroll;e=parseInt(g.option("cur_pos"));c=parseInt(g.option("num_eles"));if(!l.scrollModel.smooth&&(a&&l.virtualX||!a&&l.virtualY)){b=0<b?Math[1>b?"ceil":"floor"](b):Math[-1>b?"ceil":
"floor"](b);l=e-b;0>l?l=0:l>c-1&&(l=c-1);if(l==e)return!0;g.option("cur_pos",e-b);g.scroll()}else{l=g.option("ratio");b=l-b/(c-1);1<b?b=1:0>b&&(b=0);if(l==b)return!0;g.option("ratio",b);g.drag()}return!1};a._onDblClickCell=function(g){var l=m(g.currentTarget),b=this.getCellIndices({$td:l}),a=b.rowIndxPage,c=a+this.rowIndxOffset,b=b.colIndx;if(null!=b){if(!1==this._trigger("cellDblClick",g,{$td:l,rowIndxPage:a,rowIndx:c,colIndx:b,column:this.colModel[b],rowData:this.pdata[a]}))return!1;1<this.options.editModel.clicksToEdit&&
this.isEditableRow({rowIndx:c})&&this.isEditableCell({colIndx:b,rowIndx:c})&&this.editCell({rowIndxPage:a,colIndx:b})}};a._onClickCont=function(g){};a._onClickRow=function(g){var l=m(g.currentTarget),b=parseInt(l.attr("pq-row-indx")),a=b+this.rowIndxOffset;if(!isNaN(b)&&!1==this._trigger("rowClick",g,{$tr:l,rowIndxPage:b,rowIndx:a,rowData:this.pdata[b]}))return!1};a._onRightClickRow=function(g){var l=m(g.currentTarget),b=parseInt(l.attr("pq-row-indx")),a=b+this.rowIndxOffset;if(!isNaN(b)&&!1==this._trigger("rowRightClick",
g,{$tr:l,rowIndxPage:b,rowIndx:a,rowData:this.pdata[b]}))return!1};a._onDblClickRow=function(g){var l=m(g.currentTarget),b=parseInt(l.attr("pq-row-indx")),a=this.getRowIndxOffset();if(!1==this._trigger("rowDblClick",g,{$tr:l,rowIndxPage:b,rowIndx:b+a,rowData:this.pdata[b]}))return!1};a.getValueFromDataType=function(g,l,b){if("date"==l)return l=Date.parse(g),isNaN(l)?"":b?l:g;if("object"==l)return g;if("integer"==l)l=parseInt(g);else if("float"==l)l=parseFloat(g);else return"bool"==l?(l=m.trim(g).toLowerCase(),
0==l.length?null:"true"==l||"yes"==l||"1"==l?!0:"false"==l||"no"==l||"0"==l?!1:Boolean(l)):m.trim(g);return isNaN(l)||null==l?null==g?g:null:l};var f=function(g){this.that=g},h=f.prototype;h._isValidCell=function(g){var l=this.that,b=g.column,a=b.validations;if(!a||!a.length)return{valid:!0};var c=g.value,e=b.dataType,d=function(g){return l.getValueFromDataType(g,e,!0)};g=g.rowData;if(!g)throw"rowData required.";for(var f=0;f<a.length;f++){var p=a[f],h=p.type,q=!1,m=p.msg,k=p.value;if(!1!==p.on&&
(null==c&&"function"!=typeof h?q=!1:"minLen"==h?(c=d(c),k=d(k),c.length>=k&&(q=!0)):"nonEmpty"==h?null!=c&&""!==c&&(q=!0):"maxLen"==h?(c=d(c),k=d(k),c.length<=k&&(q=!0)):"gt"==h?(c=d(c),k=d(k),c>k&&(q=!0)):"gte"==h?(c=d(c),k=d(k),c>=k&&(q=!0)):"lt"==h?(c=d(c),k=d(k),c<k&&(q=!0)):"lte"==h?(c=d(c),k=d(k),c<=k&&(q=!0)):"neq"==h?(c=d(c),k=d(k),c!==k&&(q=!0)):"regexp"==h?(new RegExp(k)).test(c)&&(q=!0):"function"==typeof h?(k={column:b,value:c,rowData:g,msg:m},!1==h.call(l,k)?(q=!1,k.msg!=m&&(m=k.msg)):
q=!0):q=!0,!q))return{valid:!1,msg:m,column:b,warn:p.warn,dataIndx:b.dataIndx,validation:p}}return{valid:!0}};h.isValidCell=function(g){var l=this.that,b=g.rowData,a=g.rowIndx,c=g.value,e=g.valueDef,d=g.column,f=g.focusInvalid,p=l.options,h=p.bootstrap,q=g.allowInvalid,k=d.dataIndx,n=p.validation,A=p.warning,E=p.editModel,C=E.invalidClass,H=E.warnClass,E=document.activeElement;if(g.checkEditable&&!1==l.isEditableCell({rowIndx:a,dataIndx:k}))return{valid:!0};g=this._isValidCell({column:d,value:c,rowData:b});
var c=g.valid,d=g.warn,I=g.msg;if(c)l.data({rowData:b,dataIndx:k,data:"pq_valid"})&&(l.removeClass({rowData:b,rowIndx:a,dataIndx:k,cls:H+" "+C}),l.removeData({rowData:b,dataIndx:k,data:"pq_valid"}));else var n=m.extend({},d?A:n,g.validation),F=n.css,L=n.cls,N=n.icon,P=n.style;if(q||d){if(c)return{valid:!0};l.addClass({rowData:b,rowIndx:a,dataIndx:k,cls:d?H:C});l.data({rowData:b,dataIndx:k,data:{pq_valid:{css:F,icon:N,style:P,msg:I,cls:L}}});return g}if(!c){if(null==a&&(b=l.getRowIndx({rowData:b,dataUF:!0}),
a=b.rowIndx,null==a||b.uf))return g.uf=b.uf,g;if(f){var K;if(!e)l.goToPage({rowIndx:a}),a={rowIndx:a,dataIndx:k},a=l.normalize(a),K=l.getCell(a),l["cell"==p.selectionModel.type?"setSelection":"scrollCell"](a),l.focus(a);else if(m(E).hasClass("pq-editor-focus")&&(e=p.editModel.indices)){p=e.rowIndx;e=e.dataIndx;if(null!=a&&a!=p)throw"incorrect usage of isValid rowIndx: "+a;if(k!=e)throw"incorrect usage of isValid dataIndx: "+k;l.editCell({rowIndx:p,dataIndx:k})}var G;if(K||(G=l.getEditCell())&&G.$cell){l=
K||G.$cell;l.attr("title",I);K="tooltip";G="open";h.on&&h.tooltip&&(K=h.tooltip,G="show");try{l[K]("destroy")}catch(J){}l[K]({trigger:"manual",position:{my:"left center+5",at:"right center"},content:function(){return(""==N?"":"<span class='ui-icon "+N+" pq-tooltip-icon'></span>")+I},open:function(g,l){var b=l.tooltip;L&&b.addClass(L);if(P){var a=b.attr("style");b.attr("style",a+";"+P)}F&&b.tooltip.css(F)}})[K](G)}}return g}if(e&&(G=l.getEditCell())&&G.$cell){l=G.$cell;l.removeAttr("title");try{l.tooltip("destroy")}catch(O){}}return{valid:!0}};
a.isValid=function(g){return this.iIsValid.isValid(g)};h.isValid=function(g){g=g||{};var l=this.that,b=g.allowInvalid,a=g.focusInvalid,c=g.checkEditable,b=null==b?!1:b,e=g.dataIndx;if(null!=e){var d=l.columns[e],f=g.rowData||l.getRowData(g),p=g.hasOwnProperty("value"),l=p?g.value:f[e],l=this.isValidCell({rowData:f,checkEditable:c,rowIndx:g.rowIndx,value:l,valueDef:p,column:d,allowInvalid:b,focusInvalid:a});return l.valid||l.warn?{valid:!0}:l}if(null!=g.rowIndx||null!=g.rowIndxPage||null!=g.rowData)for(var f=
g.rowData||l.getRowData(g),h=l.colModel,p=[],q=0,k=h.length;q<k;q++){if(d=h[q],!d.hidden&&(e=d.dataIndx,l=f[e],l=this.isValidCell({rowData:f,value:l,column:d,rowIndx:g.rowIndx,checkEditable:c,allowInvalid:b,focusInvalid:a}),!l.valid&&!l.warn))if(b)p.push({rowData:f,dataIndx:e,column:d});else return l}else{g=g.data?g.data:l.options.dataModel.data;p=[];if(!g)return null;q=0;for(k=g.length;q<k;q++){f=g[q];if(c&&(d=this.getRowIndx({rowData:f}).rowIndx,null==d||!1==l.isEditableRow({rowData:f,rowIndx:d})))continue;
f=this.isValid({rowData:f,rowIndx:d,checkEditable:c,allowInvalid:b,focusInvalid:a});e=f.cells;if(!1===b){if(!f.valid)return f}else e&&e.length&&(p=p.concat(e))}}return b&&p.length?{cells:p,valid:!1}:{valid:!0}};a.isValidChange=function(g){g=g||{};var l=this.getChanges(),l=l.updateList.concat(l.addList);g.data=l;return this.isValid(g)};a.isEditableRow=function(g){var l=this.options.editable;return null!=l?"function"==typeof l?l.call(this,this.normalize(g)):l:!0};a.isEditableCell=function(g){g=this.normalize(g);
var l=g.rowIndx,b=g.colIndx,a=this.iMerge;a.ismergedCell(l,b)&&(g=a.getRootCell(l,b));l=g.column;b=l.editable;return g.checkVisible&&l.hidden?!1:null!=b?"function"==typeof b?b.call(this,g):b:!0};a._onContMouseDown=function(g){this.blurEditor({blurIfFocus:!0});if(!1===this._trigger("contMouseDown",g,null))return!1;var l=m(g.target);g=l.closest(".pq-grid-cell,.pq-grid-number-cell");l=l.closest(".pq-grid-row");g.length||l.length||(g=this.$cont[0],g.setAttribute("tabindex",0),g.focus());return!0};a._onCellMouseDown=
function(g){var l=m(g.currentTarget),b=this.getCellIndices({$td:l});b.$td=l;return!1==this._trigger("cellMouseDown",g,b)?!1:!0};a._onRowMouseDown=function(g){var l=m(g.currentTarget),b=this.getRowIndx({$tr:l});b.$tr=l;return!1==this._trigger("rowMouseDown",g,b)?!1:!0};a._onCellMouseEnter=function(g,l){var b=this.options,a=this.getCellIndices({$td:l});if(null!=a.rowIndx&&null!=a.colIndx){if(!1===this._trigger("cellMouseEnter",g,a))return!1;"cell"==b.hoverMode&&this.highlightCell(l);return!0}};a._onRowMouseEnter=
function(g,l){var b=this.options,a=this.getRowIndx({$tr:l}),c=a.rowIndxPage;if(!1===this._trigger("rowMouseEnter",g,a))return!1;"row"==b.hoverMode&&this.highlightRow(c);return!0};a._onCellMouseLeave=function(g,l){"cell"==this.options.hoverMode&&this.unHighlightCell(l);return!0};a._onRowMouseLeave=function(g,l){var b=this.getRowIndx({$tr:l}).rowIndxPage;"row"==this.options.hoverMode&&this.unHighlightRow(b);return!0};a.enableSelection=function(){this.element.removeClass("pq-disable-select").off("selectstart"+
this.eventNamespace)};a.disableSelection=function(){this.element.addClass("pq-disable-select").on("selectstart"+this.eventNamespace,function(g){if(g.target){var l=m(g.target);if(l.is("input,textarea,select")||l.closest(".pq-native-select").length)return!0;g.preventDefault()}})};a._onClickCell=function(g){var l=this.colModel,b=this.options.editModel,a=m(g.currentTarget),c=this.getCellIndices({$td:a}),e=c.rowIndxPage,d=e+this.rowIndxOffset,f,p,h=c.colIndx;c.rowIndx=d;null!=h&&(0<=h&&(f=l[h],p=f.dataIndx,
c.dataIndx=p),c.evt=g);if(!1==this._trigger("cellClick",g,{$td:a,rowIndxPage:e,rowIndx:d,colIndx:h,dataIndx:p,column:f,rowData:this.pdata[e]}))return!1;null==h||0>h||1==b.clicksToEdit&&this.isEditableRow({rowIndx:d})&&this.isEditableCell({colIndx:h,rowIndx:d})&&this.editCell(c)};a._onRightClickCell=function(g){var l=m(g.currentTarget),b=this.getCellIndices({$td:l}),a=b.rowIndxPage,c=a+this.rowIndxOffset,b=b.colIndx,e=this.colModel;if(null!=b&&(e=e[b],!1==this._trigger("cellRightClick",g,{$td:l,rowIndxPage:a,
rowIndx:c,colIndx:b,dataIndx:e.dataIndx,column:e,rowData:this.pdata[a]})))return!1};a.highlightCell=function(g){g.addClass("pq-grid-cell-hover ui-state-hover")};a.unHighlightCell=function(g){g.removeClass("pq-grid-cell-hover ui-state-hover")};a.highlightRow=function(g){isNaN(g)||(g=this.getRow({rowIndxPage:g}))&&g.addClass("pq-grid-row-hover ui-state-hover")};a.unHighlightRow=function(g){isNaN(g)||(g=this.getRow({rowIndxPage:g}))&&g.removeClass("pq-grid-row-hover ui-state-hover")};a._getCreateEventData=
function(){return{dataModel:this.options.dataModel,data:this.pdata,colModel:this.options.colModel}};a._findCellFromEvt=function(g){g=m(g.target).closest(".pq-grid-cell");if(null==g||0==g.length)return{rowIndxPage:null,colIndx:null,$td:null};var l=this.getCellIndices({$td:g});l.$td=g;return l};a._initPager=function(){var g=this,l=g.options,b=l.pageModel,l={bootstrap:l.bootstrap,change:function(l,b){g.blurEditor({force:!0});var a=g.options.pageModel;void 0!=b.curPage&&(a.prevPage=a.curPage,a.curPage=
b.curPage);void 0!=b.rPP&&(a.rPP=b.rPP);"remote"==a.type?g.remoteRequest({callback:function(){g._onDataAvailable({apply:!0,header:!1})}}):g.refreshView({header:!1,source:"pager"})},refresh:function(l){g.refreshDataAndView()}};b.type&&(this.pagerW=pqPager(b.appendTo?b.appendTo:this.$footer,l))};a.generateLoading=function(){this.$loading&&this.$loading.remove();this.$loading=m("<div class='pq-loading'></div>").appendTo(this.element);m(["<div class='pq-loading-bg'></div><div class='pq-loading-mask ui-state-highlight'><div>",
this.options.strLoading,"...</div></div>"].join("")).appendTo(this.$loading);this.$loading.find("div.pq-loading-bg").css("opacity",.2)};a._refreshLoadingString=function(){this.$loading.find("div.pq-loading-mask").children("div").html(this.options.strLoading)};a.showLoading=function(){null==this.showLoadingCounter&&(this.showLoadingCounter=0);this.showLoadingCounter++;this.$loading.show()};a.hideLoading=function(){0<this.showLoadingCounter&&this.showLoadingCounter--;this.showLoadingCounter||this.$loading.hide()};
a.refreshDataFromDataModel=function(g){g=g||{};var l=this._queueATriggers,b;for(b in l){var a=l[b];this._trigger(b,a.evt,a.ui)}this._queueATriggers={};this._trigger("beforeRefreshData",null,{});var c=this.options,l=c.pageModel,a=c.dataModel.data,e=l.type,d=c.groupModel?!0:!1;this.rowIndxOffset=0;if(null==a||0==a.length)e&&(l.curPage=0,l.totalPages=0,l.totalRecords=0),this.pdata=a;if(e&&"local"==e){l.totalRecords=a.length;l.totalPages=Math.ceil(a.length/l.rPP);l.curPage>l.totalPages&&(l.curPage=l.totalPages);
1>l.curPage&&0<l.totalPages&&(l.curPage=1);var c=(l.curPage-1)*l.rPP,f=l.curPage*l.rPP;f>a.length&&(f=a.length);this.pdata=a.slice(c,f)}else"remote"==e?(c=Math.ceil(l.totalRecords/l.rPP),(l.totalPages=c)&&!l.curPage&&(l.curPage=1),f=l.rPP,f>a.length&&(f=a.length),this.pdata=a.slice(0,f)):this.pdata=c.backwardCompat?a.slice(0):a;if("local"==e||"remote"==e)this.rowIndxOffset=l.rPP*(l.curPage-1);l=this._queueBTriggers;for(b in l)a=l[b],this._trigger(b,a.evt,a.ui);this._queueBTriggers={};this._trigger("dataReady",
null,{source:g.source});d&&this.iGroupView.refreshDataFromDataModel()};a.getQueryStringCRUD=function(){return""};a.remoteRequest=function(g){this.loading&&this.xhr.abort();g=g||{};var l=this,b="",a="",c=this.options,e=!1,d=this.colModel,f=c.dataModel,p=c.sortModel,h=c.filterModel,q=c.pageModel;if("function"==typeof f.getUrl)(c=f.getUrl.call(this,{colModel:d,dataModel:f,sortModel:p,groupModel:c.groupModel,pageModel:q,filterModel:h}))&&c.url&&(b=c.url),c&&c.data&&(a=c.data);else if("string"==typeof f.url){var b=
f.url,a={},c={},k={};"remote"==p.type&&(g.initBySort||this.sort({initByRemote:!0}),(p=this.iSort.getQueryStringSort())&&(a={pq_sort:p}));"remote"==q.type&&(k={pq_curpage:q.curPage,pq_rpp:q.rPP});"local"!=h.type&&(p=this.iFilterData.getQueryStringFilter())&&(e=!0,c={pq_filter:p});var p=f.postData,n=f.postDataOnce;p&&"function"==typeof p&&(p=p.call(this,{colModel:d,dataModel:f}));a=m.extend({pq_datatype:f.dataType},c,k,a,p,n)}b&&(this.loading=!0,this.showLoading(),this.xhr=m.ajax({url:b,dataType:f.dataType,
async:null==f.async?!0:f.async,cache:f.cache,contentType:f.contentType,type:f.method,data:a,beforeSend:function(g,b){if("function"==typeof f.beforeSend)return f.beforeSend.call(l,g,b)},success:function(b,a,c){"function"==typeof f.getData&&(b=f.getData.call(l,b,a,c));f.data=b.data;q.type&&"remote"==q.type&&(b.curPage&&(q.curPage=b.curPage),b.totalRecords&&(q.totalRecords=b.totalRecords));l.hideLoading();l.loading=!1;l._queueBTriggers.load={ui:{dataModel:f,colModel:d}};g.callback&&g.callback();e&&(l._queueATriggers.filter=
{ui:{type:"remote",filterModel:h}})},error:function(g,b,a){l.hideLoading();l.loading=!1;if("function"==typeof f.error)f.error.call(l,g,b,a);else if("abort"!=a)throw"Error : "+a;}}))};a._refreshTitle=function(){this.$title.html(this.options.title)};a._destroyDraggable=function(){var g=this.element,l=g.parent(".pq-wrapper");l.length&&l.data("draggable")&&(l.draggable("destroy"),this.$title.removeClass("pq-draggable pq-no-capture"),g.unwrap(".pq-wrapper"))};a._refreshDraggable=function(){var g=this.element,
l=this.$title;this.options.draggable?(l.addClass("pq-draggable pq-no-capture"),g.parent(".pq-wrapper").length||g.wrap("<div class='pq-wrapper' />"),g.parent(".pq-wrapper").draggable({handle:l})):this._destroyDraggable()};a._refreshResizable=function(){var g=this,l=this.element,b=this.options,a=-1<(b.width+"").indexOf("%"),c=-1<(b.height+"").indexOf("%"),e="auto"==b.width,d="flex"==b.width,f="flex"==b.height;if(!b.resizable||(f||c)&&(d||a||e))this._destroyResizable();else{var p="e,s,se";if(f||c)p=
"e";else if(d||a||e)p="s";a=!0;l.hasClass("ui-resizable")&&(c=l.resizable("option","handles"),p==c?a=!1:this._destroyResizable());a&&l.resizable({helper:"ui-state-default",handles:p,minWidth:b.minWidth,minHeight:b.minHeight?b.minHeight:100,delay:0,start:function(g,l){m(l.helper).css({opacity:.5,background:"#ccc",border:"1px solid steelblue"})},resize:function(g,l){},stop:function(l,a){var c=g.element,e=b.width,d=b.height,f=-1<(e+"").indexOf("%"),p=-1<(d+"").indexOf("%"),s="auto"==e,e="flex"==e,h=
!1;p||"flex"==d||(h=!0,b.height=c.height());f||s||e||(h=!0,b.width=c.width());g.refresh();c.css("position","relative");h&&m(window).trigger("resize")}})}};a._refreshAfterResize=function(){var g=this.options,l=g.width,b=g.height,g=-1!=(l+"").indexOf("%")?!0:!1,l="auto"===l,b=-1!=(b+"").indexOf("%")?!0:!1;(g||l||b)&&this.refresh()};a.refresh=function(g){this.iRefresh.refresh(g)};a._refreshDataIndices=function(){for(var g="JSON"==this.getDataType()?!0:!1,l={},b={},a={},c=this.colModel,e=c.length,d=0;d<
e;d++){var f=c[d],p=f.dataIndx;null==p&&(p="detail"==f.type?"pq_detail":g?"dataIndx_"+d:d,"pq_detail"==p&&(f.dataType="object"),f.dataIndx=p);l[p]=f;b[p]=d;f.validations&&(a[p]=a)}this.columns=l;this.colIndxs=b;this.validations=a};a.refreshView=function(g){null!=this.options.editModel.indices&&this.blurEditor({force:!0});this.refreshDataFromDataModel(g);this.refresh(g)};a._refreshPager=function(){var g=this.options,l=g.pageModel,b=l.rPP,a=l.totalRecords;l.type?(l=g.pageModel,this.pagerW||this._initPager(),
this.pagerW.option(l),a>b?this.$bottom.css("display",""):g.showBottom||this.$bottom.css("display","none")):(this.pagerW&&(this.pagerW.destroy(),this.pagerW=null),g.showBottom?this.$bottom.css("display",""):this.$bottom.css("display","none"))};a.getInstance=function(){return{grid:this}};a.refreshDataAndView=function(g){if("remote"==this.options.dataModel.location){var l=this;this.remoteRequest({callback:function(){l._onDataAvailable(g)}})}else this._onDataAvailable(g)};a.getColIndx=function(g){var l=
g.dataIndx;g=g.column;var b;if(g)b=!0;else if(void 0===l)throw"dataIndx / column NA";var a=this.colModel,c=a.length;if(b)for(l=0;l<c;l++){if(a[l]==g)return l}else if(l=this.colIndxs[l],null!=l)return l;return-1};a.getColumn=function(g){if(null==g.dataIndx)throw"dataIndx N/A";return this.columns[g.dataIndx]};a._generateCellRowOutline=function(){var g=this.options,l=g.editModel;if(this.$div_focus){if(g.debug)throw"this.$div_focus already present assert failed";}else g=this.element,l.inline&&(g=this.getCell(l.indices),
g.css("padding",0).empty()),this.$div_focus=m("<div class='pq-editor-outer'><div class='pq-editor-inner'></div></div>").appendTo(g),this.$div_focus.css("zIndex",g.zIndex()+5),l=m.extend({all:!0},l.indices),l=this.getCell(l),l.css("height",l[0].offsetHeight),l.empty(),this.refreshEditorPos()};a._removeEditOutline=function(g){if(this.$div_focus){g=this.$div_focus.find(".pq-editor-focus");g.hasClass("hasDatepicker")&&g.datepicker("hide").datepicker("destroy");if(g[0]==document.activeElement){var l=this._blurEditMode;
this._blurEditMode=!0;g.blur();this._blurEditMode=l}this.$div_focus.remove();delete this.$div_focus;g=this.options.editModel;l=m.extend({},g.indices);g.indices=null;l.rowData=void 0;this.refreshCell(l)}};a.refreshEditorPos=function(){var g=this.options.editModel,l=g.cellBorderWidth,b=this.$div_focus,a=this.getCell(g.indices);if(!a||!a.length)return!1;var g=a[0].offsetWidth,c=a[0].offsetHeight,e=this.element.offset(),a=a.offset();b.css({height:c,width:g,borderWidth:l,left:a.left-e.left,top:a.top-e.top-
1})};a.setEditorPosTimer=function(){var g=this,l=this.options;this._refreshEditorPosTimer&&(window.clearInterval(this._refreshEditorPosTimer),this._refreshEditorPosTimer=null);this._refreshEditorPosTimer=window.setInterval(function(){l.editModel.indices&&g.refreshEditorPos()},200)};a.get$Tbl=function(g,l){var b=this.$tbl,a=[];if(b&&b.length){var c=this.pqpanes,e=this.options,d=e.freezeRows,e=e.freezeCols;c.h&&c.v?null==l?g>=d?a.push(b[2],b[3]):a.push(b[0],b[1]):a=l>=e&&g>=d?b[3]:l<e&&g>=d?b[2]:l>=
e&&g<d?b[1]:b[0]:a=c.v?null==l?b:l>=e?b[1]:b[0]:c.h?g>=d?b[1]:b[0]:b[0];if(a)return m(a)}};a.scrollCell=function(g){this.scrollRow(g);this.scrollColumn(g)};a.scrollY=function(g){this.vscroll.option("cur_pos",g);this.vscroll.scroll()};a.scrollRow=function(g){if(!this.pdata||g.rowIndxPage>=this.pdata.length)return!1;this.options.virtualY?this._scrollRowVirtual(g):this.iMouseSelection.scrollRowNonVirtual(g)};a._scrollRowVirtual=function(g){var l=this.options,b=g.rowIndxPage,a=this.iHierarchy?!0:!1,c=
g.rowIndx;g=this.vscroll;var e=this.scrollCurPos,b=null==b?c-this.rowIndxOffset:b,d=parseInt(l.freezeRows);if(!(b<d)&&(c=this._calcCurPosFromRowIndxPage(b),null!=c)){c<e&&(g.option("cur_pos",c),g.scroll());var f=this.get$Tbl(b);if(!f||!f.length)return null;var p=f.children("tbody").children("tr[pq-row-indx="+b+"]"),h=b=p.last();1<p.length&&(h=p.first());var q=b[0],p=parseInt(f.css("marginTop"));if(void 0==q)l.scrollModel.smooth?g.option("ratio",c/this.totalVisibleRows).vscroll.drag():(g.option("cur_pos",
c),g.scroll());else{var l=q.offsetTop+q.offsetHeight,q=this.$cont[0].offsetHeight,k=this._getSBHeight(),h=h.prev("tr");if(!h.hasClass("pq-row-hidden")&&!h.hasClass("pq-last-frozen-row")&&l>q-k-p){l-=q-k-p;p=f.children().children("tr");h=f=0;d?(d=p.filter("tr.pq-last-frozen-row").last().next(),0==d.length&&(d=p.filter("tr.pq-row-hidden").next())):d=p.filter("tr.pq-row-hidden").next();do{if(!d.length)break;f+=d[0].offsetHeight;if(d[0]==b[0])break;else if(a&&!1!=d.hasClass("pq-detail-child")||h++,f>=
l)break;d=d.next()}while(1);a=e+h;a>c&&(a=c);e=g.option("num_eles");e<a+1&&(e=a+1);g.option({num_eles:e,cur_pos:a});g.scroll()}}}};a.blurEditor=function(g){if(this.$div_focus){var l=this.$div_focus.find(".pq-editor-focus");if(g&&g.blurIfFocus)document.activeElement==l[0]&&l.blur();else return l.triggerHandler("blur",g)}};a._scrollColumnVirtual=function(g){var l=g.colIndx,b=this.hscroll,l=null==l?this.colIndxs[g.dataIndx]:l;g=this.options.freezeCols;var a=this._calcRightEdgeCol(l).width,c=this.iRefresh.getEContWd();
if(a>c){for(var a=this.calcWidthCols(-1,l+1)-c,c=this.colModel,e=c.length,d=0,f=0,p=g;p<e;p++){var h=c[p];h.hidden||(d+=h.outerWidth);if(p==l){f=p-g-this._calcNumHiddenUnFrozens(p);break}else if(d>=a){f=p-g-this._calcNumHiddenUnFrozens(p)+1;break}}b.option("cur_pos",f);b.scroll();return!0}return l>=g&&l<this.initH?(l=l-g-this._calcNumHiddenUnFrozens(l),b.option("cur_pos",l),b.scroll(),!0):!1};a.scrollColumn=function(g){var b=this.options;return"flex"===b.width?!1:b.virtualX?this._scrollColumnVirtual(g):
this.iMouseSelection.scrollColumnNonVirtual(g)};a.selection=function(g){if(g){var b=g.method,a,c=g.type;"row"==c?a=this.iRows[b](g):"cell"==c&&(a=this.iCells[b](g));if("add"==b||"remove"==b||"removeAll"==b)this.iSelection.dirty=!0,this.iSelection._trigger();return a}g=this.iSelection;g.isDirty()&&g.refresh();return g};a.goToPage=function(g){var b=this.options.pageModel;if("local"==b.type||"remote"==b.type){var a=g.rowIndx,c=b.rPP;g=null==g.page?Math.ceil((a+1)/c):g.page;g!=b.curPage&&(b.curPage=g,
"local"==b.type?this.refreshView():this.refreshDataAndView())}};a.setSelection=function(g){if(null==g)return this.iSelection.removeAll(),!0;var b=this.pdata;if(!b||!b.length)return!1;g=this.normalize(g);var b=g.rowIndx,a=g.rowIndxPage,c=g.colIndx;g.rowData&&null==b&&(a=this.getRowIndx(g),g.rowIndx=b=a.rowIndx,g.rowIndxPage=a.rowIndxPage);if(null==b||0>b||0>c||c>=this.colModel.length)return!1;this.goToPage(g);a=b-this.rowIndxOffset;this.scrollRow({rowIndxPage:a});null==c?this.range({r1:b}).select():
(this.scrollColumn({colIndx:c}),this.range({r1:b,c1:c}).select());!1!==g.focus&&this.focus({rowIndxPage:a,colIndx:null==c?this.getFirstVisibleCI():c})};a.getColModel=function(){return this.colModel};a.saveEditCell=function(g){var b=this.options,a=b.editModel;if(!a.indices)return null;var c=m.extend({},a.indices);g=g?g.evt:null;var e=c.rowIndxPage,a=e+this.rowIndxOffset,d=this.colModel[c.colIndx],c=d.dataIndx,f=this.pdata[e],p=b.dataModel,h;if(null==f)return null;if(null!=e){b=this.getEditCellData();
if(m.isPlainObject(b)){h={};for(var q in b)h[q]=f[q]}else h=this.readCell(f,d);"<br>"==b&&(b="");null==h&&""===b&&(b=null);q={rowIndx:a,rowIndxPage:e,dataIndx:c,column:d,newVal:b,value:b,oldVal:h,rowData:f,dataModel:p};if(!1===this._trigger("cellBeforeSave",g,q))return!1;e={};d=!1;m.isPlainObject(b)?(e=b,d=!0):e[c]=b;if(!1===this.updateRow({row:e,rowIndx:a,refresh:d,silent:!0,source:"edit",checkEditable:!1}))return!1;this._trigger("cellSave",g,q);return!0}};a._addInvalid=function(g){};a._digestData=
function(g){if(!1===this._trigger("beforeValidate",null,g))return!1;var b=this.options,a=b.editModel,c=b.dataModel,e=c.data,d=b.colModel,f=b.pageModel,p=b.historyModel,h=g.validate,h=null==h?a.validate:h,q=f.type,k=g.allowInvalid,k=null==k?a.allowInvalid:k,m=b.trackModel,a=g.track,a=null==a?null==b.track?m.on:b.track:a,n=g.history,n=null==n?p.on:n,A=g.checkEditable,A=null==A?!0:A,E=g.checkEditableAdd,E=null==E?A:E,p=this.saveCell,m=this.columns,C=this.colIndxs,H=g.source,I=this.rowIndxOffset,F=this.getValueFromDataType,
L=g.rowList,N=L.length;e||(e=b.dataModel.data=[]);for(var P=[],K=0;K<N;K++){var G=L[K],J=G.newRow,O=G.rowData,M=G.type,T=G.checkEditable,Q=G.rowIndx,V=G.oldRow;null==T&&("update"==M?T=A:"add"==M&&(T=E));if("update"==M){if(!V)throw"assert failed: oldRow required while update";if(T&&!0!==b.editable&&!1===this.isEditableRow({rowIndx:Q,rowData:O}))continue}else if("delete"==M){P.push(G);continue}if("add"==M)for(var R=0,W=d.length;R<W;R++){var U=d[R],S=U.dataIndx;J[S]=J[S]}for(S in J)if(U=m[S],R=C[S],
U)if(T&&null!=U.editable&&!1===this.isEditableCell({rowIndx:Q,colIndx:R,dataIndx:S}))delete J[S];else{var X=U.dataType,R=F(J[S],X),W=V?V[S]:void 0,W=void 0!==W?F(W,X):void 0;J[S]=R;if(h&&U.validations)if("edit"==H&&!1===k){if(U=this.isValid({focusInvalid:!0,dataIndx:S,rowIndx:Q,value:R}),!1==U.valid&&!U.warn)return!1}else U=this.iIsValid.isValidCell({column:U,rowData:"add"==M?J:O,allowInvalid:k,value:R}),!1===U.valid&&(!1!==k||U.warn||delete J[S]);"update"==M&&R===W&&(delete J[S],V&&delete V[S])}if(J)if("update"==
M)for(S in J){P.push(G);break}else P.push(G)}L=g.rowList=P;N=L.length;if(!N)return"edit"==H?null:!1;n&&(this.iHistory.increment(),this.iHistory.push({rowList:L}));for(K=0;K<N;K++)if(G=L[K],M=G.type,J=G.newRow,Q=G.rowIndx,b=G.rowIndxPage,O=G.rowData,"update"==M)for(S in a&&this.iUCData.update({rowData:O,row:J,refresh:!1}),J)U=m[S],R=J[S],p(O,U,R);else if("add"==M)a&&this.iUCData.add({rowData:J}),null==Q&&null==b?e.push(J):(b=Q-I,b="remote"==q?b:Q,e.splice(b,0,J)),"remote"==q&&f.totalRecords++;else if("delete"==
M){b=this.getRowIndx({rowData:O,dataUF:!0});d=b.uf;Q=b.rowIndx;if(a)this.iUCData["delete"]({rowIndx:Q,rowData:O});b=Q-I;b="remote"==q?b:Q;d?c.dataUF.splice(Q,1):(b=e.splice(b,1))&&b.length&&"remote"==q&&f.totalRecords--}this._trigger("change",null,g);return!0};a.refreshColumn=function(g){g=this.normalize(g);var b=this.initV,a=this.finalV,c=this.options.freezeRows,e=g.colIndx,d=g.dataIndx,f=g.column;g.skip=!0;for(var p=0;p<=a;p++)p<b&&p>=c&&(p=b),g.rowIndxPage=p,this.refreshCell(g);this._trigger("refreshColumn",
null,{column:f,colIndx:e,dataIndx:d});this.iRefresh.softRefresh()};a.refreshCell=function(g){g=this.normalize(g);if(this.pdata){var b=g.skip,a=g.rowIndx,c=g.rowIndxPage,e=g.colIndx,d=this.iMerge;if(g.rowData&&(!d.ismergedCell(a,e)||d.isRootCell(a,e,!0))&&(a=this.getCell({all:!0,rowIndxPage:c,colIndx:e}))&&0<a.length){var e=this.iGenerateView.renderCell(g),f;e&&(a.replaceWith(e),(f=this._focusElement)&&f.rowIndxPage==c&&this.focus(),b||(this._trigger("refreshCell",null,g),this.iRefresh.softRefresh()))}}};
a.refreshRow=function(g){g=this.normalize(g);if(this.pdata){var b=g.rowIndx,a=g.rowIndxPage,c=this.options,e=c.freezeRows,d=g.rowData;if(!d||d.pq_hidden||a>this.finalV||a<this.initV&&a>=e)return null;var f=this.getRow({all:!0,rowIndxPage:a}),p,h=[];this.iGenerateView.refreshRow(a,h);h=h.join("");if(f&&f.length)f.replaceWith(h);else if(c.virtualY)if(a==this.finalV)this.$tbl.append(h);else if(a==this.initV)for(c=this.$tbl,f=0;f<c.length;f++)m(c[f]).children("tbody").children(e?".pq-last-frozen-row":
"tr:first").after(h);else throw"refreshRow > rip not found";else return!1;(p=this._focusElement)&&p.rowIndxPage==a&&this.focus();this._trigger("refreshRow",null,{rowData:d,rowIndx:b,rowIndxPage:a});!1!==g.refresh&&this.iRefresh.softRefresh();return!0}};a.quitEditMode=function(g){if(!this._quitEditMode){var b=!1,a=!1,c=!1,e=this.options.editModel,d=e.indices,f=void 0;this._quitEditMode=!0;g&&(b=g.old,a=g.silent,c=g.fireOnly,f=g.evt);d&&(a||b||this._trigger("editorEnd",f,d),c||(this._removeEditOutline(g),
e.indices=null));this._quitEditMode=null}};a.getViewPortRowsIndx=function(){return{beginIndx:this.initV,endIndx:this.finalV}};a.getViewPortIndx=function(){return{initV:this.initV,finalV:this.finalV,initH:this.initH,finalH:this.finalH}};a.getRowIndxOffset=function(){return this.rowIndxOffset};a.getEditCell=function(){var g=this.options.editModel;if(g.indices){var g=this.getCell(g.indices),b=this.$div_focus.children(".pq-editor-inner"),a=b.find(".pq-editor-focus");return{$td:g,$cell:b,$editor:a}}return{}};
a.editCell=function(g){g=this.normalize(g);var b=this.iMerge,a=g.rowIndx,c=g.colIndx;b.ismergedCell(a,c)&&(g=b.getRootCell(a,c));this.scrollRow(g);this.scrollColumn(g);if((b=this.getCell(g))&&b.length)return this._editCell(g)};a.getFirstEditableColIndx=function(g){if(null==g.rowIndx)throw"rowIndx NA";if(!this.isEditableRow(g))return-1;for(var b=this.colModel,a=0;a<b.length;a++)if(g.colIndx=a,this.isEditableCell(g)&&!b[a].hidden)return a;return-1};a.editFirstCellInRow=function(g){var b=this.rowIndxOffset,
a=g.rowIndx;g=g.rowIndxPage;a=null==a?g+b:a;g=null==g?a-b:g;b=this.getFirstEditableColIndx({rowIndx:a});-1!=b&&this.editCell({rowIndxPage:g,colIndx:b})};a._editCell=function(g){var b=this.normalize(g),a=this;g=b.evt;var e=b.rowIndxPage,d=b.colIndx,f=a.pdata;if(!f||e>=f.length)return!1;var f=f[e],p=b.rowIndx,h=this.colModel[d],q=h.dataIndx,k=a.readCell(f,h),n={rowIndx:p,rowIndxPage:e,cellData:k,rowData:f,dataIndx:q,colIndx:d,column:h},B=h.editor,B="function"==typeof B?B.call(this,n):B;if(!1!==B){var z=
this.options,A=z.editModel,E=z.editor,C=B?m.extend({},E,B):E,B=!1;if(A.indices){z=A.indices;if(z.rowIndxPage==e&&z.colIndx==d){this.refreshEditorPos();var H=this.$div_focus.find(".pq-editor-focus");window.setTimeout(function(){H.focus()},0);return!1}if(!1===this.blurEditor({evt:g}))return!1;this.quitEditMode({evt:g})}A.indices={rowIndxPage:e,rowIndx:p,colIndx:d,column:h,dataIndx:q};this._generateCellRowOutline();z=this.$div_focus.children(".pq-editor-inner");"right"==h.align?z.addClass("pq-align-right"):
"center"==h.align?z.addClass("pq-align-center"):z.addClass("pq-align-left");n.$cell=z;var I,F=C.type,b=null==b.select?C.select:b.select,L=C.init,N=C.valueIndx,P=C.dataMap,K=C.mapIndices,K=K?K:{},G=C.cls||"",G="function"===typeof G?G.call(this,n):G;I="pq-editor-focus "+G;var G=I+" pq-cell-editor ",J=C.attr||"",J="function"===typeof J?J.call(this,n):J,O=C.style||"",O=(O="function"===typeof O?O.call(this,n):O)?"style='"+O+"'":"";n.cls=I;n.attr=J;"function"==typeof F&&(I=F.call(this,n))&&(F=I);E._type=
F;"checkbox"==F?(C=C.subtype,z.html("<input "+(k?"checked='checked'":"")+" class='"+G+"' "+J+" "+O+" type=checkbox name='"+q+"' />"),E=z.children("input"),"triple"==C&&(E.pqval({val:k}),z.click(function(g){m(this).children("input").pqval({incr:!0})}))):"textarea"==F||"select"==F||"textbox"==F?("textarea"==F?I="<textarea class='"+G+"' "+J+" "+O+" name='"+q+"' ></textarea>":"select"==F?(E=C.options||[],"function"===typeof E&&(E=E.call(this,n)),G=[J," class='",G,"' ",O," name='",q,"'"].join(""),I=c.select({options:E,
attr:G,prepend:C.prepend,labelIndx:C.labelIndx,valueIndx:N,groupIndx:C.groupIndx,dataMap:P})):I="<input class='"+G+"' "+J+" "+O+" type=text name='"+q+"' />",m(I).appendTo(z).val("select"==F&&null!=N&&(K[N]||this.columns[N])?K[N]?f[K[N]]:f[N]:k)):F&&"contenteditable"!=F||(z.html("<div contenteditable='true' tabindx='0' "+O+" "+J+" class='"+G+"'></div>"),z.children().html(k),B=!0);"function"==typeof L&&L.call(this,n);var a=this,H=z.children(".pq-editor-focus"),M=A.filterKeys;(k=h.editModel)&&void 0!==
k.filterKeys&&(M=k.filterKeys);var T={$cell:z,$editor:H,dataIndx:q,column:h,colIndx:d,rowIndx:p,rowIndxPage:e,rowData:f};A.indices=T;H.data({FK:M}).on("click",function(g){m(this).focus()}).on("keydown",function(g){a.iKeyNav._keyDownInEdit(g)}).on("keypress",function(g){return a.iKeyNav._keyPressInEdit(g,{FK:M})}).on("keyup",function(g){return a.iKeyNav._keyUpInEdit(g,{FK:M})}).on("blur",function(g,b){var l=a.options.editModel,c=l.onBlur,e="save"==c,d="validate"==c,f=l.cancelBlurCls,p=b?b.force:!1;
if(!a._quitEditMode&&!a._blurEditMode&&l.indices){l=m(g.target);if(!p){if(!1===a._trigger("editorBlur",g,T)||!c||f&&l.hasClass(f))return;if(l.hasClass("hasDatepicker")){if(l.datepicker("widget").is(":visible"))return!1}else if(l.hasClass("ui-autocomplete-input")){if(l.autocomplete("widget").is(":visible"))return}else if(l.hasClass("ui-multiselect")){if(m(".ui-multiselect-menu").is(":visible")||m(document.activeElement).closest(".ui-multiselect-menu").length)return}else if(l.hasClass("pq-select-button")&&
(m(".pq-select-menu").is(":visible")||m(document.activeElement).closest(".pq-select-menu").length))return}a._blurEditMode=!0;if(!a.saveEditCell({evt:g,silent:p||e||!d})&&!p&&d)return a._deleteBlurEditMode(),!1;a.quitEditMode({evt:g});a._deleteBlurEditMode()}}).on("focus",function(g){a._trigger("editorFocus",g,T)});a._trigger("editorBegin",g,T);H.focus();window.setTimeout(function(){!1===m(document.activeElement).hasClass("pq-editor-focus")&&(a.element?a.element.find(".pq-editor-focus"):m()).focus()},
0);if(b)if(B)try{var Q=H[0],V=document.createRange();V.selectNodeContents(Q);var R=window.getSelection();R.removeAllRanges();R.addRange(V)}catch(W){}else H.select()}};a._deleteBlurEditMode=function(g){var b=this;g=g?g:{};b._blurEditMode&&(g.timer?window.setTimeout(function(){delete b._blurEditMode},0):delete b._blurEditMode)};a.getRow=function(g){var b=this.normalize(g);g=b.rowIndxPage;var b=b.all?this.$tbl:this.get$Tbl(g),a=m();if(b&&b.length){var c=b.children("tbody");null!=g&&(a=c.children("tr[pq-row-indx="+
g+"]"),a.length>b.length&&(a=a.filter(".pq-detail-master")))}return a};a.getCell=function(g){var b=this.normalize(g);g=b.rowIndxPage;var a=g+this.rowIndxOffset,c=b.colIndx;if((b=b.all?this.$tbl:this.get$Tbl(g,c))&&b.length){var e=this.iMerge;e.ismergedCell(a,c)&&(g=e.getRootCell(a,c,!0),a=e.getRootCell(a,c),g=g.rowIndxPage,c=a.colIndx);g=b.children().children("tr[pq-row-indx="+g+"]").children("[pq-col-indx="+c+"]")}else g=m();return g};a.getCellHeader=function(g){var b=g.colIndx;g=g.dataIndx;b=null==
b?this.colIndxs[g]:b;g=this.$tbl_header;var a,c=this.options.freezeCols;void 0!=g&&(1<g.length&&(g=b>=c?m(g[1]):m(g[0])),a=g.find("[pq-col-indx="+b+"].pq-grid-col-leaf"));return 0==a.length||"hidden"==a[0].style.visibility?m():a};a.getEditorIndices=function(){var b=this.options.editModel.indices;return b?m.extend({},b):null};a.getEditCellData=function(){var b=this.options,a=b.editModel.indices;if(!a)return null;var c=a.colIndx,e=a.rowIndxPage,d=a.rowIndx,f=this.colModel[c],p=f.editor,h=b.editor,b=
p?m.extend({},h,p):h,q=b.valueIndx,k=b.labelIndx,p=(p=b.mapIndices)?p:{},n=f.dataIndx,B=this.$div_focus.children(".pq-editor-inner"),z;if("function"==typeof b.getData)z=b.getData.call(this,{$cell:B,rowData:a.rowData,dataIndx:n,rowIndx:d,rowIndxPage:e,column:f,colIndx:c});else if(a=h._type,"checkbox"==a)z=B.children(),z="triple"==b.subtype?z.pqval():z.is(":checked")?!0:!1;else if("contenteditable"==a)z=B.children().html();else if((c=B.find('*[name="'+n+'"]'))&&c.length)if("select"==a&&null!=q)if(p[q]||
this.columns[q]){if(z={},z[p[q]?p[q]:q]=c.val(),z[p[k]?p[k]:k]=c.find("option:selected").text(),b=b.dataMap)if(a=c.find("option:selected").data("map"))for(c=0;c<b.length;c++)e=b[c],z[p[e]?p[e]:e]=a[e]}else z=c.val();else z=c.val();else(c=B.find(".pq-editor-focus"))&&c.length&&(z=c.val());return z};a.getCellIndices=function(b){var a=b.$td;if(null==a||0==a.length||a.closest(".pq-grid")[0]!=this.element[0])return{rowIndxPage:null,colIndx:null};b=a.parent("tr").attr("pq-row-indx");var c;null!=b&&(b=parseInt(b),
c=b+this.rowIndxOffset);var a=a.attr("pq-col-indx"),e;null!=a&&(a=parseInt(a),0<=a&&(e=this.colModel[a].dataIndx));return{rowIndxPage:b,rowIndx:c,colIndx:a,dataIndx:e}};a.getRowsByClass=function(b){var a=this.options,c="remote"==a.pageModel.type,e=this.rowIndxOffset,a=a.dataModel.data,d=[];if(null==a)return d;for(var f=0,p=a.length;f<p;f++){var h=a[f];if(h.pq_rowcls&&(b.rowData=h,this.hasClass(b))){var h={rowData:h},q=c?f+e:f,k=q-e;h.rowIndx=q;h.rowIndxPage=k;d.push(h)}}return d};a.getCellsByClass=
function(b){var a=this.options,c="remote"==a.pageModel.type,e=this.rowIndxOffset,a=a.dataModel.data,d=[];if(null==a)return d;for(var f=0,p=a.length;f<p;f++){var h=a[f],q=c?f+e:f,k=h.pq_cellcls;if(k)for(var m in k)k={rowData:h,rowIndx:q,dataIndx:m,cls:b.cls},this.hasClass(k)&&(k=this.normalize(k),d.push(k))}return d};a.data=function(b){var a=b.dataIndx,c=b.colIndx,a=null!=c?this.colModel[c].dataIndx:a,c=b.data,e=null==c||"string"==typeof c?!0:!1;b=b.rowData||this.getRowData(b);if(!b)return{data:null};
if(null==a){a=b.pq_rowdata;if(e){var d;null!=a&&(d=null==c?a:a[c]);return{data:d}}c=m.extend(!0,b.pq_rowdata,c);b.pq_rowdata=c}else{var f=b.pq_celldata;if(e)return null!=f&&(a=f[a],d=null==c||null==a?a:a[c]),{data:d};f||(b.pq_celldata={});c=m.extend(!0,b.pq_celldata[a],c);b.pq_celldata[a]=c}};a.attr=function(b){var a=b.rowIndx,c=b.dataIndx,e=b.colIndx,c=null!=e?this.colModel[e].dataIndx:c,e=b.attr,d=null==e||"string"==typeof e?!0:!1,f=this.rowIndxOffset,h=b.refresh;b=b.rowData||this.getRowData(b);
if(!b)return{attr:null};d||!1===h||null!=a||(a=this.getRowIndx({rowData:b}).rowIndx);if(null==c){c=b.pq_rowattr;if(d){var q;null!=c&&(q=null==e?c:c[e]);return{attr:q}}e=m.extend(!0,b.pq_rowattr,e);b.pq_rowattr=e;!1!==h&&null!=a&&(a=this.getRow({rowIndxPage:a-f}))&&(c=p(e),a.attr(c))}else{var k=b.pq_cellattr;if(d)return null!=k&&(a=k[c],q=null==e||null==a?a:a[e]),{attr:q};k||(b.pq_cellattr={});e=m.extend(!0,b.pq_cellattr[c],e);b.pq_cellattr[c]=e;!1!==h&&null!=a&&(a=this.getCell({rowIndxPage:a-f,dataIndx:c}))&&
(c=p(e),a.attr(c))}};var p=function(b,a){var c={},e;for(e in b){var d=b[e];if(d)if("title"==e)d=d.replace(/\"/g,"&quot;"),c[e]=d;else if("style"==e&&"object"==typeof d){var f=[],p,h;for(h in d)p=d[h],a&&"display"==h&&"none"==p||p&&f.push(h+":"+p);(d=f.join(";")+(f.length?";":""))&&(c[e]=d)}else"object"==typeof d&&(d=JSON.stringify(d)),c[e]=d}return c};a.removeData=function(b){var a=b.dataIndx,c=b.colIndx,a=null!=c?this.colModel[c].dataIndx:a,c=b.data,c=null==c?[]:c,c="string"==typeof c?c.split(" "):
c,e=c.length,d=b.rowData||this.getRowData(b);if(d)if(null==a){if(a=d.pq_rowdata){if(e)for(b=0;b<e;b++){var f=c[b];delete a[f]}e&&!m.isEmptyObject(a)||delete d.pq_rowdata}}else if((d=d.pq_celldata)&&d[a]){var p=d[a];if(e)for(b=0;b<e;b++)f=c[b],delete p[f];e&&!m.isEmptyObject(p)||delete d[a]}};a.removeAttr=function(b){var a=b.rowIndx,c=b.dataIndx,e=b.colIndx,c=null!=e?this.colModel[e].dataIndx:c,d=b.attr,d=null==d?[]:d,d="string"==typeof d?d.split(" "):d,f=d.length,e=a-this.rowIndxOffset,p=b.refresh,
h=b.rowData||this.getRowData(b);if(h)if(!1!==p&&null==a&&(a=this.getRowIndx({rowData:h}).rowIndx),null==c){if(c=h.pq_rowattr){if(f)for(b=0;b<f;b++){var q=d[b];delete c[q]}else for(q in c)d.push(q);f&&!m.isEmptyObject(c)||delete h.pq_rowattr}!1!==p&&null!=a&&d.length&&(d=d.join(" "),(a=this.getRow({rowIndxPage:e}))&&a.removeAttr(d))}else{if((h=h.pq_cellattr)&&h[c]){var k=h[c];if(f)for(b=0;b<f;b++)q=d[b],delete k[q];else for(q in k)d.push(q);f&&!m.isEmptyObject(k)||delete h[c]}!1!==p&&null!=a&&d.length&&
(d=d.join(" "),(a=this.getCell({rowIndxPage:e,dataIndx:c}))&&a.removeAttr(d))}};a.normalize=function(b){var a={},c;for(c in b)a[c]=b[c];var e=a.rowIndx,d=a.rowIndxPage;b=a.dataIndx;c=a.colIndx;if(null!=d||null!=e){var f=this.rowIndxOffset,e=null==e?parseInt(d,10)+f:e,d=null==d?parseInt(e,10)-f:d;a.rowIndx=e;a.rowIndxPage=d;a.rowData=a.rowData||this.getRowData(a)}if(null!=c||null!=b)e=this.colModel,b=null==b?e[c].dataIndx:b,c=null==c?this.colIndxs[b]:c,a.column=e[c],a.colIndx=c,a.dataIndx=b;return a};
a.addClass=function(b){var a=this.normalize(b),e=a.rowIndxPage,d=a.dataIndx,f=c.uniqueArray;b=a.cls;var p=a.refresh,h=a.rowData;if(h)if(!1!==p&&null==e&&(e=this.getRowIndx({rowData:h}).rowIndxPage),null==d){var d=h.pq_rowcls,q;q=f((d?d+" "+b:b).split(/\s+/)).join(" ");h.pq_rowcls=q;!1!==p&&null!=e&&(e=this.getRow({rowIndxPage:e}))&&e.addClass(b)}else{a=[];"function"!=typeof d.push?a.push(d):a=d;var k=h.pq_cellcls;k||(k=h.pq_cellcls={});for(var h=0,m=a.length;h<m;h++)d=a[h],q=(q=k[d])?q+" "+b:b,q=
f(q.split(/\s+/)).join(" "),k[d]=q,!1!==p&&null!=e&&(d=this.getCell({rowIndxPage:e,dataIndx:d}))&&d.addClass(b)}};a.removeClass=function(b){var a=this.normalize(b),c=a.rowIndx,e=a.rowData,d=a.dataIndx;b=a.cls;a=a.refresh;if(e){var f=e.pq_cellcls,p=e.pq_rowcls;!1!==a&&null==c&&(c=this.getRowIndx({rowData:e}).rowIndx);if(null==d)p&&(e.pq_rowcls=this._removeClass(p,b),null!=c&&!1!==a&&(c=this.getRow({rowIndx:c}))&&c.removeClass(b));else if(f){p=[];"function"!=typeof d.push?p.push(d):p=d;for(var h=0,
q=p.length;h<q;h++){var d=p[h],k=f[d];k&&(e.pq_cellcls[d]=this._removeClass(k,b),null!=c&&!1!==a&&(d=this.getCell({rowIndx:c,dataIndx:d}))&&d.removeClass(b))}}}};a.hasClass=function(b){var a=b.dataIndx,c=b.cls;b=this.getRowData(b);c=new RegExp("\\b"+c+"\\b");return b?null==a?(a=b.pq_rowcls)&&c.test(a)?!0:!1:(b=b.pq_cellcls)&&b[a]&&c.test(b[a])?!0:!1:null};a._removeClass=function(b,a){if(b&&a){for(var c=b.split(/\s+/),e=a.split(/\s+/),d=[],f=0,p=c.length;f<p;f++){for(var h=c[f],q=!1,k=0,m=e.length;k<
m;k++)if(h===e[k]){q=!0;break}q||d.push(h)}return 1<d.length?d.join(" "):1===d.length?d[0]:null}};a.getRowIndx=function(b){var a=b.$tr,c=b.rowData,e=this.rowIndxOffset;if(c){var a=this.options,d=a.dataModel,a="remote"==a.pageModel.type,f=d.data,p=!1;b=b.dataUF?d.dataUF:null;d=!1;if(f)for(var h=0,q=f.length;h<q;h++)if(f[h]==c){d=!0;break}if(!d&&b)for(p=!0,h=0,q=b.length;h<q;h++)if(b[h]==c){d=!0;break}return d?{rowIndxPage:p?void 0:a?h:h-e,uf:p,rowIndx:a?h+e:h,rowData:c}:{}}if(null==a||0==a.length)return{};
c=a.attr("pq-row-indx");if(null==c)return{};c=parseInt(c);return{rowIndxPage:c,rowIndx:c+e}};a.search=function(b){var a=this.options,c=b.row;b=b.first;for(var e=[],d=this.rowIndxOffset,f="remote"==a.pageModel.type,a=a.dataModel.data,p=0,h=a.length;p<h;p++){var q=a[p],k=!0,m;for(m in c)c[m]!==q[m]&&(k=!1);if(k&&(q=this.normalize({rowIndx:f?p+d:p}),e.push(q),b))break}return e};var q=function(b){this.options=b.options;this.that=b},h=q.prototype;h._incrRowIndx=function(b,a){var c=this.that,e=b;a=null==
a?1:a;for(var c=c.pdata,d=0,f=b+1,p=c.length;f<p&&(c[f].pq_hidden||(d++,e=f,d!=a));f++);return e};h._decrRowIndx=function(b,a){var c=b,e=this.that.pdata;a=null==a?1:a;for(var d=0,f=b-1;0<=f&&(e[f].pq_hidden||(d++,c=f,d!=a));f--);return c};a.addColumn=function(b,a){var c=this.options,e=c.dataModel.data;c.colModel.push(b);this._calcThisColModel();for(c=0;c<e.length;c++)e[c].push("")};h._incrIndx=function(b,a,c){var e=this.that,d=e[c?"getLastVisibleRIP":"getFirstVisibleRIP"](),e=e.colModel,f=e.length;
if(null==a){if(b==d)return null;b=this[c?"_incrRowIndx":"_decrRowIndx"](b);return{rowIndxPage:b}}var p;do{a=c?a+1:a-1;if(c&&a>=f||!c&&0>a){if(b==d)return null;b=this[c?"_incrRowIndx":"_decrRowIndx"](b);a=c?0:f-1}p=e[a]}while(p&&p.hidden);return{rowIndxPage:b,colIndx:a}};h._incrEditIndx=function(b,a,c){var e=this.that,d=e.colModel,f=d.length,p=e.iMerge,h,q=e.rowIndxOffset,k=e[c?"getLastVisibleRIP":"getFirstVisibleRIP"]();do{var m=b+q;if(h=p.ismergedCell(m,a)){if(m=p.getData(m,a,"proxy_edit_cell"))m=
m.rowIndx,b=m-q;a=c?a+h.colspan:a-1}else a=c?a+1:a-1;if(c&&a>=f||!c&&0>a){if(b==k)return null;do if(b=this[c?"_incrRowIndx":"_decrRowIndx"](b),a=e.isEditableRow({rowIndxPage:b}),b==k&&!1==a)return null;while(!1==a);a=c?0:f-1}m=b+q;if(h=p.ismergedCell(m,a))b=p.getRootCell(m,a),p.setData(b.rowIndx,b.colIndx,{proxy_edit_cell:{rowIndx:m,colIndx:a}}),m=b.rowIndx,a=b.colIndx;h=d[a];var n=e.isEditableCell({rowIndx:m,colIndx:a,checkVisible:!0}),z=h.editor,z="function"==typeof z?z.call(e,e.normalize({rowIndx:m,
colIndx:a})):z;b=m-q}while(h&&(h.hidden||!1==n||!1===z));return{rowIndxPage:b,colIndx:a}};h.getMergeCell=function(b,a){var c=this.that,e=c.iMerge;e.isHidden(b,a)?(c=e.getRootCell(b,a),e.setData(c.rowIndx,c.colIndx,{proxy_cell:{rowIndx:b,colIndx:a}})):(e.removeData(b,a,"proxy_cell"),c=c.normalize({rowIndx:b,colIndx:a}));return c};h._incrEditRowIndx=function(b,a,c){var e=this.that,d=e.iMerge,f=e.rowIndxOffset,p=e[c?"getLastVisibleRIP":"getFirstVisibleRIP"]();if(b==p)return null;do{var h=b+f,q=d.ismergedCell(h,
a);if(q){if(b=d.getData(h,a,"proxy_edit_cell"))h=b.rowIndx,a=b.colIndx;h=c?h+q.rowspan-1:h;b=h-f}b=this[c?"_incrRowIndx":"_decrRowIndx"](b);h=b+f;if(q=d.ismergedCell(h,a))q=d.getRootCell(h,a),d.setData(q.rowIndx,q.colIndx,{proxy_edit_cell:{rowIndx:h,colIndx:a}}),b=q.rowIndxPage,a=q.colIndx;var h=b+f,q=e.isEditableRow({rowIndx:h}),h=e.isEditableCell({rowIndx:h,colIndx:a}),h=q&&h;if(b==p&&!h)return null}while(!h);return{rowIndxPage:b,colIndx:a}};a._onKeyPressDown=function(b){if(0<m(b.target).closest(".pq-grid-header").length)return!1==
this._trigger("headerKeyDown",b,null)?!1:!0;if(!1===this.iKeyNav._bodyKeyPressDown(b)||!1==this._trigger("keyDown",b,null))return!1};h._saveAndMove=function(b,a){if(null==b)return a.preventDefault(),!1;var c=this.that,e=b.rowIndxPage,d=b.colIndx;c._blurEditMode=!0;if(!1===c.saveEditCell({evt:a})||!c.pdata)return c.pdata||c.quitEditMode(a),c._deleteBlurEditMode({timer:!0,msg:"_saveAndMove saveEditCell"}),a.preventDefault(),!1;c.quitEditMode(a);if(b.incr)var f=this[b.edit?"_incrEditIndx":"_incrIndx"](e,
d,!a.shiftKey),e=f?f.rowIndxPage:e,d=f?f.colIndx:d;c.scrollRow({rowIndxPage:e});c.scrollColumn({colIndx:d});this.select({rowIndx:e+c.rowIndxOffset,colIndx:d,evt:a});b.edit&&c._editCell({rowIndxPage:e,colIndx:d});c._deleteBlurEditMode({timer:!0,msg:"_saveAndMove"});a.preventDefault();return!1};h._keyPressInEdit=function(b,a){var c=this.that,e=c.options.editModel.indices;a=a?a:{};var d=a.FK,f="Backspace Left Right Up Down Del Home End".split(" "),p=e.column.dataType;return b.key&&-1!==m.inArray(b.key,
f)?!0:!1===c._trigger("editorKeyPress",b,m.extend({},e))||d&&("float"==p||"integer"==p)&&(c="float"==p?"0123456789.-":"0123456789-",e=(e=b.charCode)?e:b.keyCode,(e=String.fromCharCode(e))&&-1==c.indexOf(e))?!1:!0};h.getValText=function(b){b=b[0].nodeName.toLowerCase();var a="text";-1!=m.inArray(b,["input","textarea","select"])&&(a="val");return a};h._keyUpInEdit=function(b,a){var c=this.that,e=c.options;a=a?a:{};var d=a.FK,e=e.editModel,f=e.indices;c._trigger("editorKeyUp",b,m.extend({},f));c=f.column.dataType;
if(d&&("float"==c||"integer"==c)){var d=m(b.target),f="integer"==c?e.reInt:e.reFloat,e=this.getValText(d),p=d.data("oldVal"),h=d[e]();if(!1==f.test(h))if(f.test(p))d[e](p);else if(c="float"==c?parseFloat(p):parseInt(p),isNaN(c))d[e](0);else d[e](c)}};h._keyDownInEdit=function(b){var a=this.that,c=a.options,e=c.editModel.indices;if(e){var d=m(b.target),f=m.ui.keyCode,p=c.editModel,h=m.extend({},e),e=h.rowIndxPage,c=h.colIndx,q=h.column.editModel,p=q?m.extend({},p,q):p,q=this.getValText(d);d.data("oldVal",
d[q]());if(!1==a._trigger("editorKeyDown",b,h))return!1;if(b.keyCode==f.TAB||b.keyCode==p.saveKey)return a=b.keyCode==f.TAB?p.onTab:p.onSave,h={rowIndxPage:e,colIndx:c,incr:a?!0:!1,edit:"nextEdit"==a},this._saveAndMove(h,b);if(b.keyCode==f.ESCAPE)return a.quitEditMode({evt:b}),a.focus({rowIndxPage:e,colIndx:c}),b.preventDefault(),!1;if(b.keyCode==f.PAGE_UP||b.keyCode==f.PAGE_DOWN)return b.preventDefault(),!1;if(p.keyUpDown){if(b.keyCode==f.DOWN)return h=this._incrEditRowIndx(e,c,!0),this._saveAndMove(h,
b);if(b.keyCode==f.UP)return h=this._incrEditRowIndx(e,c,!1),this._saveAndMove(h,b)}}};h.select=function(b){var a=this.that,c=this,e=b.rowIndx,d=b.colIndx,f=b.evt;b=this.getMergeCell(e,d);var e=b.rowIndx,d=b.colIndx,p=b.rowIndxPage;b=a.options;var h=a.iSelection,q=b.selectionModel,k=q.type,n="row"==k,B="cell"==k;(b.realFocus?function(b){clearTimeout(c.timeoutID);c.timeoutID=setTimeout(function(){b()},0)}:function(b){b()})(function(){a.scrollCell({rowIndx:e,colIndx:d});var b=h.address();if(f.shiftKey&&
f.keyCode!==m.ui.keyCode.TAB&&q.type&&"single"!=q.mode&&b.length){var c=b[b.length-1],g=c.firstR,k=c.firstC,D=c.type;"column"==D?(c.c1=k,c.c2=d,c.r1=c.r2=c.type=void 0):"row"==D?(c.r1=g,c.r2=e,c.c1=c.c2=c.type=void 0):b={r1:g,r2:e,c1:k,c2:d,firstR:g,firstC:k};a.range(b).select()}else n?a.range({r1:e,firstR:e}).select():B&&a.range({r1:e,c1:d,firstR:e,firstC:d}).select();a.focus({rowIndxPage:p,colIndx:d})})};h._bodyKeyPressDown=function(b){var a=this.that,c=a.rowIndxOffset,e,d,f;f=this.options;var p=
a.iMerge,h=a._focusElement,q=a.colModel,k=f.selectionModel,n=f.editModel,B=b.ctrlKey||b.metaKey,z=m.ui.keyCode,A=b.keyCode;if(n.indices)a.$div_focus.find(".pq-cell-focus").focus();else{if(h){if(f=document.activeElement,"pq-grid-cont"!=f.className&&"TD"!=f.nodeName.toUpperCase()&&"pq-grid-excel"!=f.id)return}else{h=m(b.target);if(!h.hasClass("pq-grid-cell"))return;h=a.getCellIndices({$td:h})}var E=a.normalize(h);d=E.rowIndxPage;e=E.rowIndx;f=E.colIndx;h=!0;if(!1==a._trigger("cellKeyDown",b,{rowData:E.rowData,
rowIndx:e,rowIndxPage:d,colIndx:f,dataIndx:E.dataIndx,column:q[f]}))return!1;if(A==z.LEFT||A==z.RIGHT||A==z.UP||A==z.DOWN||k.onTab&&A==z.TAB){var k=p.ismergedCell(e,f),C;k&&(C=p.getData(e,f,"proxy_cell"));if(A==z.LEFT||A==z.TAB&&b.shiftKey){if(e=C?C.rowIndx:e,a=this._incrIndx(e-c,f,!1))e=a.rowIndxPage+c,this.select({rowIndx:e,colIndx:a.colIndx,evt:b})}else if(A==z.RIGHT||A==z.TAB&&!b.shiftKey){if(e=C?C.rowIndx:e,f+=k&&k.colspan?k.colspan-1:0,a=this._incrIndx(e-c,f,!0))e=a.rowIndxPage+c,this.select({rowIndx:e,
colIndx:a.colIndx,evt:b})}else A==z.UP?(k&&(e=p.getRootCell(e,f).rowIndx,d=e-c),d=this._decrRowIndx(d),e=d+c,f=C?C.colIndx:f,null!=d&&this.select({rowIndx:e,colIndx:f,evt:b})):A==z.DOWN&&(d+=k&&k.rowspan&&d+k.rowspan<a.pdata.length?k.rowspan-1:0,f=C?C.colIndx:f,d=this._incrRowIndx(d),null!=d&&(e=d+c,this.select({rowIndx:e,colIndx:f,evt:b})))}else if(A==z.PAGE_DOWN||A==z.SPACE){if(a=this.pageDown(d))d=a.rowIndxPage,null!=d&&(e=d+c,this.select({rowIndx:e,colIndx:f,evt:b}))}else if(A==z.PAGE_UP){if(a=
this.pageUp(d))d=a.rowIndxPage,null!=d&&(e=d+c,this.select({rowIndx:e,colIndx:f,evt:b}))}else A==z.HOME?(B?e=a.getFirstVisibleRIP()+c:f=a.getFirstVisibleCI(),this.select({rowIndx:e,colIndx:f,evt:b})):A==z.END?(B?e=a.getLastVisibleRIP()+c:f=a.getLastVisibleCI(),this.select({rowIndx:e,colIndx:f,evt:b})):A==z.ENTER?(p=a.getCell({rowIndxPage:d,colIndx:f}))&&0<p.length&&(e=d+c,c=a.isEditableRow({rowIndx:e}),k=a.isEditableCell({rowIndx:e,colIndx:f}),c&&k?a.editCell({rowIndxPage:d,colIndx:f}):(c=p.find("button"),
c.length&&m(c[0]).click())):B&&"65"==A?(c=a.iSelection,"row"==k.type&&"single"!=k.mode?c.selectAll({type:"row",all:k.all}):"cell"==k.type&&"single"!=k.mode&&c.selectAll({type:"cell",all:k.all})):n.pressToEdit&&(32<=A&&127>=A||189==A)&&!B?46==A?a.clear():((p=a.getCell({rowIndxPage:d,colIndx:f}))&&0<p.length&&(e=d+c,c=a.isEditableRow({rowIndx:e}),k=a.isEditableCell({rowIndx:e,colIndx:f}),c&&k&&a.editCell({rowIndxPage:d,colIndx:f,select:!0})),h=!1):h=!1;h&&b.preventDefault()}};h.incrPageSize=function(){for(var b=
this.that,a=b.$tbl,c=a.children("tbody").children("tr.pq-grid-row").not(".pq-group-row,.pq-summary-row"),a=parseInt(a.css("marginTop")),a=b.iRefresh.getEContHt()-a,e=c.length-1;0<=e;e--){var d=c[e];if(d.offsetTop<a)break}return{rowIndxPage:b.getRowIndx({$tr:m(d)}).rowIndxPage}};h.pageNonVirtual=function(b,a){var c=this.that,e=c.$cont[0].offsetHeight-c._getSBHeight(),d=c.getRow({rowIndxPage:b}),f=0,p=0,h=m(d[0])[a]("tr.pq-grid-row"),q=h.length;if(0<q){do{d=h[p];f+=d.offsetHeight;if(f>=e)break;p++}while(p<
q);p=0<p?p-1:p;do if(d=m(h[p]),b=c.getRowIndx({$tr:d}).rowIndxPage,null!=b)break;else p--;while(0<=p)}return b};h.pageDown=function(b){var a=this.that,c=a.options,e=a.vscroll,d=e.option("cur_pos"),f=e.option("num_eles"),p=e.option("ratio");if(c.virtualY){if(d<f-1){b=this.incrPageSize().rowIndxPage;var h=a._calcCurPosFromRowIndxPage(b);if(null==h)return;e.option("cur_pos",h);e.scroll()}}else null!=b?b=this.pageNonVirtual(b,"nextAll"):1>p&&(c=a.iRefresh.getEContHt(),a=a.iMouseSelection,a.updateTableY(-1*
c),a.syncScrollBarVert());return{rowIndxPage:b,curPos:h}};h.pageUp=function(b){var a=this.that,c=a.options,e=a.vscroll,d=e.option("cur_pos"),f=e.option("ratio");if(c.virtualY){if(0<d){b=this.decrPageSize().rowIndxPage;var p=a._calcCurPosFromRowIndxPage(b);if(null==p)return;e.option("cur_pos",p);e.scroll()}}else null!=b?b=this.pageNonVirtual(b,"prevAll"):0<f&&(c=a.iRefresh.getEContHt(),a=a.iMouseSelection,a.updateTableY(c),a.syncScrollBarVert());return{rowIndxPage:b,curPos:p}};h.decrPageSize=function(){var b=
this.that,a=b.$tbl.children("tbody").children("tr.pq-grid-row").not(".pq-group-row,.pq-summary-row"),c=b.options.freezeRows,e=0;if(a.length){var d;c?(d=a.filter("tr.pq-last-frozen-row"),d.length&&(d=d.next())):2<=a.length&&(d=m(a[1]));d&&d.length&&(e=b.getRowIndx({$tr:d}).rowIndxPage,e=e-b.pageSize+3,0>e&&(e=0))}return{rowIndxPage:e}};a._calcNumHiddenFrozens=function(){for(var b=0,a=this.options.freezeCols,c=0;c<a;c++)this.colModel[c].hidden&&b++;return b};a._calcNumHiddenUnFrozens=function(b){var a=
0;b=null!=b?b:this.colModel.length;for(var c=this.options.freezeCols;c<b;c++)this.colModel[c].hidden&&a++;return a};a._getSBHeight=function(){return this.iRefresh.getSBHeight()};a._getSBWidth=function(){return this.iRefresh.getSBWidth()};a.getFirstVisibleRIP=function(b){var a=this.pdata;b=b?this.initV:0;for(var c=a.length;b<c;b++)if(!a[b].pq_hidden)return b};a.getLastVisibleRIP=function(){for(var b=this.pdata,a=b.length-1;0<=a;a--)if(!b[a].pq_hidden)return a;return null};a.getFirstVisibleCI=function(b){var a=
this.colModel,c=a.length;for(b=b?this.initH:0;b<c;b++)if(!a[b].hidden)return b;return null};a.getLastVisibleCI=function(){for(var b=this.colModel,a=b.length-1;0<=a;a--)if(!b[a].hidden)return a;return null};a.getTotalVisibleColumns=function(){for(var b=this.colModel,a=b.length,c=0,e=0;e<a;e++)b[e].hidden||c++;return c};a._calcCurPosFromRowIndxPage=function(b){var a=this.options,c=a.groupModel,e=c?this.dataGM:this.pdata,d=a.freezeRows;if(b<d)return 0;for(var a=0,f=d,p=e.length;d<p;d++){var h=e[d];if(!c||
!h.groupSummary&&!h.groupTitle){if(f==b)break;f++}h.pq_hidden||a++}return a>=p?null:a};a._calcCurPosFromColIndx=function(b){var a=this.colModel,c=this.options.freezeCols;if(b<c)return 0;for(var e=0,d=c,f=a.length;c<f;c++){var p=a[c];if(d==b)break;d++;p.hidden||e++}return e>=f?null:e};a.calcWidthCols=function(b,a,c){var e=0,d=this.options.numberCell,f=this.colModel;-1==b&&(d.show&&(e=c?e+(parseInt(d.width)+1):e+d.outerWidth),b=0);if(c)for(;b<a;b++){if((c=f[b])&&!c.hidden){if(!c._width)throw"assert failed";
e+=c._width+0}}else for(;b<a;b++)(c=f[b])&&!c.hidden&&(e+=c.outerWidth);return e};a.calcHeightFrozenRows=function(){var b=this.$tbl,a=0;b&&b.length&&(b=m(b[0]).find("tr.pq-last-frozen-row"))&&b.length&&(a=b[0],a=a.offsetTop+a.offsetHeight);return a};a._calcRightEdgeCol=function(b){var a=0,c=0,e=this.colModel,d=this.initH,f=this.options,p=f.freezeCols,f=f.numberCell;f.show&&(a+=f.outerWidth,c++);for(f=0;f<=b;f++){f<d&&f>=p&&(f=d);var h=e[f];h.hidden||(a+=h.outerWidth,c++)}return{width:a,cols:c}};a.nestedCols=
function(b,a,c){var e=b.length,d=[];null==a&&(a=1);for(var f=a,p=0,h=0,q=0;q<e;q++){var k=b[q];if(!0===c||!1===c)k.hidden=c;if(null!=k.colModel&&0<k.colModel.length){var m=this.nestedCols(k.colModel,a+1,k.hidden),d=d.concat(m.colModel);0<m.colSpan?(m.depth>f&&(f=m.depth),k.colSpan=m.colSpan,p+=m.colSpan):(k.colSpan=0,k.hidden=!0);k.childCount=m.childCount;h+=m.childCount}else k.hidden?k.colSpan=0:(k.colSpan=1,p++),k.childCount=0,h++,d.push(k)}return{depth:f,colModel:d,colSpan:p,width:0,childCount:h}};
a.getHeadersCells=function(){for(var b=this.options.colModel,a=this.colModel.length,c=this.depth,e=[],d=0;d<c;d++){e[d]=[];for(var f=0,p=0,h=0;h<a;h++){var q;if(0==d)q=b[f];else{var k=e[d-1][h];q=k.colModel;if(null==q||0==q.length)q=k;else{for(var k=h-k.leftPos,m=0,n=0,z=0;z<q.length;z++)if(m+=0<q[z].childCount?q[z].childCount:1,k<m){n=z;break}q=q[n]}}k=q.childCount?q.childCount:1;h==p?(q.leftPos=h,e[d][h]=q,p+=k,b[f+1]&&f++):e[d][h]=e[d][h-1]}}return this.headerCells=e};a.getDataType=function(){var b=
this.colModel;if(b&&b[0])return"string"==typeof b[0].dataIndx?"JSON":"ARRAY";throw"dataType unknown";};a.assignRowSpan=function(){for(var b=this.colModel.length,a=this.headerCells,c=this.depth,e=0;e<b;e++)for(var d=0;d<c;d++){var f=a[d][e];if(!(0<e&&f==a[d][e-1]||0<d&&f==a[d-1][e])){for(var p=1,h=d+1;h<c;h++)f==a[h][e]&&p++;f.rowSpan=p}}return a};a._autoGenColumns=function(){var b=this.options,a=b.columnTemplate||{},e=a.dataType,d=a.title,f=a.width,a=b.dataModel.data,p=c.validation,h=[];a&&a.length&&
m.each(a[0],function(b,a){var c="string";p.isInteger(a)?c=-1<a+-1?"float":"integer":p.isDate(a)?c="date":p.isFloat(a)&&(c="float");h.push({dataType:e?e:c,dataIndx:b,title:d?d:b,width:f?f:100})});b.colModel=h};a._calcThisColModel=function(){var b=this.options,a=b.columnTemplate,c=b.colModel;c||(this._autoGenColumns(),c=b.colModel);b=this.nestedCols(c);this.colModel=b.colModel;this.depth=b.depth;b=this.colModel;c=b.length;if(a)for(var e=0;e<c;e++){var d=b[e],f=m.extend({},a,d,!0);m.extend(d,f,!0)}this.getHeadersCells();
this.assignRowSpan();this._refreshDataIndices()};a._createHeader=function(){this.iHeader.createHeader();this.options.showHeader&&this._trigger("createHeader")};a.createTable=function(b){b.other=!0;var a=this.iGenerateView;a.generateView(b);a.scrollView()}})(jQuery);
(function(m){function n(b){this.that=b}function k(b,a,c){for(var f=0;a<c;a++)!0!==b[a].hidden&&f++;return f}function a(b){if(b.length)var a=b.css({tableLayout:"auto",width:""}).addClass("pq-no-wrap").removeClass("pq-wrap").children("tbody").children(".pq-row-hidden").children("td").css("width","");return a||m()}var c=m.paramquery._pqGrid.prototype;c.getHeaderColumnFromTD=function(b){var a=b.attr("pq-col-indx");b=b.attr("pq-row-indx");var c;null!=a&&null!=b&&(a=parseInt(a),b=parseInt(b),c=this.headerCells[b][a]);
var f=!0;if(!c||c.colModel&&c.colModel.length)f=!1;return{column:c,colIndx:a,rowIndx:b,leaf:f}};c.flex=function(b){this.iResizeColumns.flex(b)};m.paramquery.cHeader=n;c=n.prototype;c.createHeader=function(){var b=this.that,a=this,c=b.options,f=c.bootstrap,h=(f.on?f.thead:"")+" pq-grid-header-table ",p=c.ui,q=f.on?"":p.header,g=c.hwrap,f=b.pqpanes,l=parseInt(c.freezeCols),k=c.numberCell,p=b.colModel,s=c.sortModel,n=b.depth,r=b.iGenerateView.colDef,w=b.initH,y=b.finalH,u=b.headerCells,v=b.$header_o;
if(null==y)throw"finalH required for _createHeader";if(!1===c.showHeader)v.empty().css("display","none");else{v.css("display","");c=["<table class='"+(g?h+"pq-wrap ":h+"pq-no-wrap ")+"' cellpadding=0 cellspacing=0 >"];if(1<=n){c.push("<tr class='pq-row-hidden'>");k.show&&c.push("<td style='width:"+k.width+"px;' ></td>");h=0;for(g=r.length;h<g;h++){var x=r[h],B=x.colIndx;c.push("<td style='width:"+x.column.outerWidth+"px;' pq-col-indx="+B+"></td>")}c.push("</tr>")}for(var z=0;z<n;z++){c.push("<tr class='pq-grid-title-row'>");
0==z&&k.show&&c.push(["<th pq-col-indx='-1' class='pq-grid-number-col' rowspan='",n,"'><div class='pq-td-div'>",k.title?k.title:"&nbsp;","</div></th>"].join(""));h=0;for(g=r.length;h<g;h++)x=r[h],B=x.colIndx,a.createHeaderCell(z,B,u,c,"pq-grid-col ",l,w,n,s);c.push("</tr>")}b.ovCreateHeader(c,"pq-grid-col ");c.push("</table>");l=c.join("");v.empty();v[0].innerHTML=f.vH?["<span class='pq-grid-header pq-grid-header-left ",q,"'><div class='pq-grid-header-inner'>",l,"</div></span><span class='pq-grid-header ",
q,"'><div class='pq-grid-header-inner'>",l,"</div></span>"].join(""):["<span class='pq-grid-header ",q,"'><div class='pq-grid-header-inner'>",l,"</div></span>"].join("");q=b.$header=v.children(".pq-grid-header");v=q.children(".pq-grid-header-inner");b.$tbl_header=v.children("table");b.$header_left=m(q[0]);b.$header_left_inner=m(v[0]);f.vH&&(b.$header_right=m(q[1]),b.$header_right_inner=m(v[1]));q.click(function(b){return a._onHeaderClick(b)});a._refreshResizeColumn(w,y,p);b._trigger("refreshHeader",
null,null)}};c._onHeaderClick=function(b){var a=this.that;if(!a.iDragColumns||"stop"==a.iDragColumns.status){var c=m(b.target);if(c.is("input,label"))return!0;c=c.closest(".pq-grid-col");if(c.length&&(b.stopImmediatePropagation(),c=a.getHeaderColumnFromTD(c),a=c.colIndx,!1!=c.leaf))return this._onHeaderCellClick(a,b)}};c.createHeaderCell=function(b,a,c,f,h,p,q,g,l){var m=this.that,s=c[b][a],n=this.that.colModel,r=s.colSpan;if(!(s.hidden||0<b&&s==c[b-1][a])){if(0<a&&s==c[b][a-1]){if(a>q)return;a:{c=
c[b];for(var w=0;w<c.length;w++)if(c[w]==s){c=w;break a}c=void 0}if(c<p)return;r-=k(n,c,a)}else p&&a<p&&a+r>p&&(r-=k(n,p,q),n=k(n,a,p),r=Math.max(r,n));c=s.halign;var w=s.align,n=s.title,y=s.type,n="function"==typeof n?n.call(m,{column:s,colIndx:a}):n,n=null!=n?n:"checkbox"==y&&s.cb.header?"<input type='checkbox'/>":s.dataIndx;s.pqtitle=n;null!=c?h+=" pq-align-"+c:null!=w&&(h+=" pq-align-"+w);a==p-1&&1==g&&(h+=" pq-last-frozen-col");a<=p-1?h+=" pq-left-col":a>=q&&(h+=" pq-right-col");(p=s.cls)&&(h=
h+" "+p);if(null==s.colModel||0==s.colModel.length)h+=" pq-grid-col-leaf";p=l.space?"pq-space":"";f.push(["<th  ","pq-col-indx="+a," ","pq-row-indx="+b,"  class='",h,"' rowspan=",s.rowSpan," colspan=",r,"><div class='pq-td-div'>",n,"<span class='pq-col-sort-icon ",p,"'></span>",l.number?"<span class='pq-col-sort-count "+p+"'></span>":"","</div></th>"].join(""))}};c._onHeaderCellClick=function(b,a){var c=this.that,f=c.colModel[b],h=c.options,p=h.sortModel,q=f.dataIndx;!1!==c._trigger("headerCellClick",
a,{column:f,colIndx:b,dataIndx:q})&&(h.selectionModel.column?(h={c1:b,firstC:b},f=c.iSelection.address(),a.shiftKey&&((h=f.length)&&"column"==f[h-1].type&&(h=f[h-1],h.c1=h.firstC,h.c2=b,h.r1=h.r2=h.type=void 0),h=f),c.range(h).select(),c.focus({rowIndxPage:c.getFirstVisibleRIP(!0),colIndx:b})):p.on&&!1!=f.sortable&&(p.multiKey&&(p.single=!a[p.multiKey]),c.sort({sorter:[{dataIndx:q}],addon:!0,evt:a})))};c._refreshResizeColumn=function(b,a,c){b=this.that;c=b.options;a=c.filterModel.ficon?!0:!1;var f=
c.numberCell;c=parseInt(c.freezeCols);var h=[],p=[],q=b.pqpanes.vH,g=0,l=0;f.show&&(g=f.outerWidth,f.resizable&&h.push("<div pq-col-indx='-1' style='left:",g-5,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>"));for(var f=b.iGenerateView.colDef,k=0,m=f.length;k<m;k++){var l=f[k],n=l.colIndx,l=l.column,r=l.ficon,w=r||null==r&&a,r=h,g=g+l.outerWidth;if(!1!==l.resizable||w)q&&n>=c&&(r=p),l=g-5,r.push("<div pq-col-indx='",n,"' style='left:",l,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>")}p.length&&
b.$header_right_inner.append(p.join(""));b.$header_left_inner.append(h.join(""))};c.refreshHeaderSortIcons=function(){var b=this.that,a=b.options,c=a.bootstrap,a=a.ui,f=b.$header;if(f){var h=b.iSort.getSorter(),p=h.length,q=!1;b.options.sortModel.number&&1<p&&(q=!0);for(var g=0;g<p;g++){var l=h[g],k=b.getColIndx({dataIndx:l.dataIndx}),m=l.dir,l=c.on?c.header_active:a.header_active+" pq-col-sort-"+("up"==m?"asc":"desc"),m=c.on?" glyphicon glyphicon-arrow-"+m:"ui-icon ui-icon-triangle-1-"+("up"==m?
"n":"s"),k=f.find(".pq-grid-col-leaf[pq-col-indx="+k+"]");k.addClass(l);k.find(".pq-col-sort-icon").addClass(m);q&&k.find(".pq-col-sort-count").html(g+1)}}};c=function(b){this.that=b;var a=this;b.$header_o.on({mousedown:function(b){if(!b.pq_composed){var c=m(b.target);a.setDraggables(b);b.pq_composed=!0;b=m.Event("mousedown",b);c.trigger(b)}},dblclick:function(b){a.doubleClick(b)}},".pq-grid-col-resize-handle");var c=b.options.flex;if(c.on&&c.one)b.one("dataReady",function(){this.one("refresh",function(b){a.flex()})})};
m.paramquery.cResizeColumns=c;c=c.prototype=new m.paramquery.cClass;c.doubleClick=function(b){var a=this.that.options,c=a.flex;b=m(b.target);b=parseInt(b.attr("pq-col-indx"));isNaN(b)||c.on&&this.flex(c.all&&!a.scrollModel.autoFit?{}:{colIndx:[b]})};c.flex=function(b){b=b||{};var c=this.that,d=c.element,f=c.options.numberCell,h=b.colIndx,p,q=b.dataIndx;b=null==b.refresh?!0:b.refresh;var g=!1,l=c.$tbl,k=c.$tbl_header,n=l&&l.length?m(l[0]).clone():m(),t=c.tables&&c.tables.length?c.tables[0].$tbl:null,
t=t?m(t[0]).clone():m(),r=k&&k.length?m(k[0]).clone():m();if(null!=q)for(h=[],k=0,l=q.length;k<l;k++){var w=c.colIndxs[q[k]];null!=w&&h.push(w)}null!=h&&(h.sort(function(b,a){return b-a}),p=h.length);r.find("tr.pq-grid-header-search-row").remove();var q=a(n),w=a(t),y=a(r),n=m("<div class='pq-grid' style='width:1px;height:1px;position:absolute;left:0px;top:0px;'>").append(r).append(t).append(n);n.addClass(d.attr("class"));d.parent().append(n);d=f.show?0:-1;f=c.iGenerateView.colDef;k=0;for(l=f.length;k<
l;k++){t=f[k];r=t.colIndx;t=t.column;d++;if(h)if(h.length)if(h[0]===r)h.splice(0,1);else continue;else break;var r=q[d],u=y[d],v=w[d],r=Math.max(r?r.offsetWidth:0,v?v.offsetWidth:0,u?u.offsetWidth:0)-0+1;t._width!==r&&(g=!0,t.width=r,1===p&&(t._resized=!0))}n.remove();g&&b&&c.refresh({source:"flex"})};c.setDraggables=function(b){var a=this,c,f,h;m(b.target).draggable({axis:"x",helper:function(b,c){var g=m(b.target),d=parseInt(g.attr("pq-col-indx"));a._setDragLimits(d);a._getDragHelper(b,c);return g},
start:function(b,f){c=f.position.left;h=parseInt(a.$cl[0].style.left)},drag:function(b,q){f=q.position.left;a.$cl[0].style.left=h+(f-c)+"px"},stop:function(b,f){return a.resizeStop(b,f,c)}})};c._getDragHelper=function(b){var a=this.that,c=parseInt(a.options.freezeCols);b=m(b.target);var f=a.$grid_center;b=parseInt(b.attr("pq-col-indx"));var h=f.outerHeight();this.$cl=m("<div class='pq-grid-drag-bar'></div>").appendTo(f);this.$clleft=m("<div class='pq-grid-drag-bar'></div>").appendTo(f);this.$cl.height(h);
this.$clleft.height(h);f=m("[pq-col-indx="+b+"]",a.$header)[0];h=f.offsetLeft;a.pqpanes.vH?b>=c&&(h-=a.$header[1].scrollLeft):(h+=a.$header[0].offsetLeft,h-=a.$header[0].scrollLeft);this.$clleft.css({left:h});h+=f.offsetWidth;this.$cl.css({left:h})};c._setDragLimits=function(b){if(!(0>b)){var a=this.that,c=a.colModel[b],f=a.$header_left;b>=a.options.freezeCols&&a.pqpanes.vH&&(f=a.$header_right);a=f.find("th[pq-col-indx='"+b+"']").offset().left+c._minWidth;c=a+c._maxWidth-c._minWidth;f.find("div.pq-grid-col-resize-handle[pq-col-indx="+
b+"]").draggable("option","containment",[a,0,c,0])}};c.resizeStop=function(b,a,c){var f=this.that,h=f.colModel,p=f.options.numberCell;this.$clleft.remove();this.$cl.remove();c=a.position.left-c;a=m(a.helper);a=parseInt(a.attr("pq-col-indx"));if(-1==a){var h=null,q=parseInt(p.width);p.width=q+c}else h=h[a],q=parseInt(h.width),h.width=q+c,h._resized=!0;f.refresh();f._trigger("columnResize",b,{colIndx:a,column:h,dataIndx:h?h.dataIndx:null,oldWidth:q,newWidth:h?h.width:p.width})};c=function(b){this.that=
b;this.$drag_helper=null;var a=b.options.dragColumns,c=a.topIcon,f=a.bottomIcon,h=this;this.status="stop";this.$arrowTop=m("<div class='pq-arrow-down ui-icon "+c+"'></div>").appendTo(b.element);this.$arrowBottom=m("<div class='pq-arrow-up ui-icon "+f+"' ></div>").appendTo(b.element);this.hideArrows();if(a&&a.enabled)b.$header_o.on("mousedown",".pq-grid-col",function(b,a){if(!m(b.target).is("input,select,textarea")&&!b.pq_composed){h.setDraggables(b,a);b.pq_composed=!0;var c=m.Event("mousedown",b);
m(b.target).trigger(c)}})};m.paramquery.cDragColumns=c;c=c.prototype;c.showFeedback=function(b,a){var c=this.that,f=b[0],h=c.$grid_center[0].offsetTop,p=f.offsetLeft-f.offsetParent.offsetParent.offsetParent.scrollLeft+(a?0:f.offsetWidth)-8,c=h+c.$header[0].offsetHeight;this.$arrowTop.css({left:p,top:h+f.offsetTop-16,display:""});this.$arrowBottom.css({left:p,top:c,display:""})};c.showArrows=function(){this.$arrowTop.show();this.$arrowBottom.show()};c.hideArrows=function(){this.$arrowTop.hide();this.$arrowBottom.hide()};
c.updateDragHelper=function(b){var a=this.that.options.dragColumns,c=a.acceptIcon,a=a.rejectIcon,f=this.$drag_helper;f&&(b?(f.children("span.pq-drag-icon").addClass(c).removeClass(a),f.removeClass("ui-state-error")):(f.children("span.pq-drag-icon").removeClass(c).addClass(a),f.addClass("ui-state-error")))};c.setDraggables=function(b,a){var c=m(b.currentTarget),f=this.that,h=f.options.dragColumns.rejectIcon,p=this;c.hasClass("ui-draggable")||!1!==f.getHeaderColumnFromTD(c).leaf&&c.draggable({distance:10,
cursorAt:{top:-18,left:-10},zIndex:"1000",appendTo:f.element,revert:"invalid",helper:function(){var b=m(this);p.status="helper";p.setDroppables(b);f.$header.find(".pq-grid-col-resize-handle").hide();var a=b.attr("pq-col-indx"),c=b.attr("pq-row-indx");b.droppable("destroy");b=m("<div class='pq-col-drag-helper ui-widget-content ui-corner-all panel panel-default' ><span class='pq-drag-icon ui-icon "+h+" glyphicon glyphicon-remove'></span>"+f.headerCells[c][a].pqtitle+"</div>");p.$drag_helper=b;return b[0]},
drag:function(b,a){p.status="drag";var c=m(".pq-drop-hover",f.$header);if(0<c.length){p.showArrows();p.updateDragHelper(!0);var e=c.width();b.clientX-c.offset().left+m(document).scrollLeft()<e/2?(p.leftDrop=!0,p.showFeedback(c,!0)):(p.leftDrop=!1,p.showFeedback(c,!1))}else p.hideArrows(),f.$toolbar.hasClass("pq-drop-hover")?p.updateDragHelper(!0):p.updateDragHelper()},stop:function(b,a){p.status="stop";f.$header.find(".pq-grid-col-resize-handle").show();p.hideArrows()}})};c._columnIndexOf=function(b,
a){for(var c=0,f=b.length;c<f;c++)if(b[c]==a)return c;return-1};c.setDroppables=function(b){var a=this.that,c=this,f={hoverClass:"pq-drop-hover ui-state-highlight",tolerance:"pointer",drop:function(b,f){if(!c.dropPending){var g=parseInt(f.draggable.attr("pq-col-indx")),l=parseInt(f.draggable.attr("pq-row-indx")),h=m(this),k=parseInt(h.attr("pq-col-indx")),n=parseInt(h.attr("pq-row-indx")),r=a.options.colModel,w=a.headerCells,y=1<w.length,h=w[n][k],u=l?w[l-1][g].colModel:r,k=n?w[n-1][k].colModel:r,
l=c._columnIndexOf(u,w[l][g]),w=c.leftDrop?1:0,v=u.splice(l,1)[0],x=c._columnIndexOf(k,h)+1-w;k.splice(x,0,v);c.dropPending=!0;window.setTimeout(function(){a._calcThisColModel();!1!==a._trigger("columnOrder",null,{dataIndx:v.dataIndx,column:v,oldcolIndx:g,colIndx:y?a.getColIndx({column:v}):x})&&a.refresh();c.dropPending=!1},0)}}};b=a.$header_left.find(".pq-left-col");var h=a.pqpanes.v||a.pqpanes.vH?a.$header_right.find(".pq-right-col"):a.$header_left.find(".pq-right-col");b=b.add(h);b.each(function(b,
a){var c=m(a);c.hasClass("ui-droppable")||c.droppable(f)})}})(jQuery);
(function(m){function n(a){var c=this;this.that=a;this.type="detail";this.refreshComplete=!0;this.detachView=!1;a.on("cellClick",function(b,a){return c.toggle(b,a)}).on("cellKeyDown",function(b,a){if(b.keyCode==m.ui.keyCode.ENTER)return c.toggle(b,a)}).on("refresh",function(b,a){return c.aftertable()}).on("beforeTableView",function(b,a){return c.beforeTableView(b,a)}).on("tableWidthChange",function(b,a){return c.tableWidthChange(b,a)})}m.paramquery.cHierarchy=n;var k=n.prototype=new m.paramquery.cClass;
k.tableWidthChange=function(){if(this.refreshComplete){this.refreshComplete=!1;for(var a=this.that.$tbl.children("tbody").children("tr.pq-detail-child").children("td.pq-detail-child"),c=0,b=a.length;c<b;c++)for(var e=m(a[c]).find(".pq-grid"),d=0,f=e.length;d<f;d++){var h=m(e[d]);h.is(":visible")&&h.pqGrid("onWindowResize")}this.refreshComplete=!0}};k.aftertable=function(a){var c=this.that,b=c.options.detailModel.init,e=c.pdata;if(this.refreshComplete){this.refreshComplete=!1;a=a?a:c.$tbl.children("tbody").children("tr.pq-detail-child");
for(var d=0,f=a.length;d<f;d++){var h=m(a[d]),p=h.attr("pq-row-indx"),q=e[p],p=!1,g=q.pq_detail.child;g||"function"!=typeof b||(p=!0,g=b.call(c.element[0],{rowData:q}),q.pq_detail.child=g,q.pq_detail.height=25);h=h.children("td.pq-detail-child");h.append(g);h=h.find(".pq-grid");g=0;for(q=h.length;g<q;g++){var l=m(h[g]);p?l.hasClass("pq-pending-refresh")&&l.is(":visible")&&(l.removeClass("pq-pending-refresh"),l.pqGrid("refresh")):l.is(":visible")&&l.pqGrid("onWindowResize")}}this.refreshComplete=!0;
this.detachView=!1}};k.beforeTableView=function(a,c){this.detachView||(this.detachInitView(),this.detachView=!0)};k.detachInitView=function(a){var c=this.that.$tbl;if(c&&c.length)for(a=a?a:c.children("tbody").children("tr.pq-detail-child"),c=0;c<a.length;c++)m(a[c]).children("td.pq-detail-child").children().detach()};k.toggle=function(a,c){var b=this.that,e=c.column,d=c.rowData,f=c.rowIndx,h=this.type;e&&e.type===h&&(e={rowIndx:f,focus:!0},null==d.pq_detail?b.rowExpand(e):!1===d.pq_detail.show?b.rowExpand(e):
this.rowCollapse(e))};k.rowExpand=function(a){this.normalize(a);var c=this.that,b=a.rowData,e=a.rowIndx,d=a.rowIndxPage,f=c.options.detailModel;if(null!=b){if(!1===c._trigger("beforeRowExpand",null,a))return!1;null==b.pq_detail?b.pq_detail={show:!0}:!1===b.pq_detail.show&&(b.pq_detail.show=!0);f.cache||this.rowInvalidate(a);c.refreshRow({rowIndx:e});f=[];c.iGenerateView._generateDetailRow(b,d,f,null,!1);b=c.getRow({rowIndxPage:d});b.after(f.join(""));this.aftertable(b.next());a.focus&&c.getCell({rowIndx:e,
dataIndx:"pq_detail"}).attr("tabindex","0").focus();a.scrollRow&&this.scrollRow({rowIndx:e})}};k.rowInvalidate=function(a){a=this.that.getRowData(a);var c=a.pq_detail;if(c=c?c.child:null)c.remove(),a.pq_detail.child=null,a.pq_detail.height=0};k.normalize=function(a){var c=this.that,b=a.rowIndx,e=a.rowIndxPage,d=c.rowIndxOffset;a.rowIndx=null==b?e+d:b;a.rowIndxPage=null==e?b-d:e;a.rowData=c.getRowData(a)};k.rowCollapse=function(a){this.normalize(a);var c=this.that,b=c.options,e=a.rowData,d=a.rowIndx,
f=a.rowIndxPage,h=b.detailModel;null!=e&&null!=e.pq_detail&&!0===e.pq_detail.show&&(h.cache||this.rowInvalidate(a),e.pq_detail.show=!1,b.virtualY?c.refresh():(b=c.getRow({rowIndxPage:f}).next("tr.pq-detail-child"),b.length&&(this.detachInitView(b),b.remove(),c.refreshRow({rowIndx:d})),a.focus&&c.getCell({rowIndx:d,dataIndx:"pq_detail"}).attr("tabindex","0").focus()),a.scrollRow&&(d=a.rowIndx,this.scrollRow({rowIndx:d})))}})(jQuery);
(function(m){var n=function(k){this.that=k};m.paramquery.cRefresh=n;n=n.prototype;n._computeOuterWidths=function(){for(var k=this.that,a=k.options.numberCell,k=k.colModel,c=k.length,b=0;b<c;b++){var e=k[b];e.outerWidth=e._width+0}a.show&&(a.outerWidth=a.width)};n.autoFit=function(){var k=this.that,a=k.colModel,c=a.length,k=k.calcWidthCols(-1,c,!0),b=this.contWd-this.getSBWidth();if(k!==b){for(var k=k-b,e,b=[],d=0;d<c;d++){var f=a[d],h=f._percent,p=f._resized;f.hidden||h||p||(0>k?(h=f._maxWidth-f._width)&&
b.push({availWd:-1*h,colIndx:d}):(h=f._width-f._minWidth)&&b.push({availWd:h,colIndx:d}));p&&(e=f,delete f._resized)}b.sort(function(b,a){return b.availWd>a.availWd?1:b.availWd<a.availWd?-1:0});d=0;for(c=b.length;d<c;d++){var f=b[d],h=f.availWd,f=f.colIndx,p=Math.round(k/(c-d)),f=a[f],q;q=f._width;Math.abs(h)>Math.abs(p)?(q-=p,k-=p):(q-=h,k-=h);f.width=f._width=q}0!=k&&e&&(q=e._width-k,q>e._maxWidth?q=e._maxWidth:q<e._minWidth&&(q=e._minWidth),e.width=e._width=q)}};n.autoLastColumn=function(){var k=
this.that,a=k.colModel,c=a.length,b=k.options.freezeCols,e=this.contWd-this.getSBWidth(),d=k.calcWidthCols(-1,b,!0),e=e-d,d=!1,k=k.getLastVisibleCI();if(null!=k&&(k=a[k],!k._percent)){for(var f=k._width,h,p=k._minWidth,q=k._maxWidth,c=c-1;c>=b;c--){var g=a[c];if(!g.hidden&&(g=g._width+0,e-=g,0>e)){d=!0;h=f+e>=p?f+e:f+g+e;break}}d||(h=f+e);h>q?h=q:h<p&&(h=p);k.width=k._width=h}};n.numericVal=function(k,a){var c;c=-1<(k+"").indexOf("%")?parseInt(k)*a/100:parseInt(k);return Math.round(c)};n.refreshColumnWidths=
function(k){k=k||{};var a=this.that,c=a.options,b=c.numberCell,e="flex"===c.width,d=a.colModel,f=c.scrollModel,h=f.lastColumn,f=f.autoFit,p=this.contWd,q=d.length,g=this.getSBWidth(),l=c._minColWidth,m=c._maxColWidth,n=0;b.show&&(b.width<b.minWidth&&(b.width=b.minWidth),b.outerWidth=b.width+1,n=b.outerWidth);b=e?null:p-g-n;l=Math.floor(this.numericVal(l,b));m=Math.ceil(this.numericVal(m,b));p=0;if(!e&&5>b||isNaN(b)){if(c.debug)throw"availWidth N/A";}else{delete a.percentColumn;for(g=0;g<q;g++)if(n=
d[g],!n.hidden){var t=n.width,r=-1<(t+"").indexOf("%")?!0:null,w=n.minWidth,y=n.maxWidth,w=w?this.numericVal(w,b):l,y=y?this.numericVal(y,b):m;y<w&&(y=w);if(void 0!=t){var u=0;!e&&r?(a.percentColumn=!0,n.resizable=!1,n._percent=!0,t=this.numericVal(t,b)-0,u=Math.floor(t),p+=t-u,1<=p&&(u+=1,p-=1)):t&&(u=parseInt(t));u<w?u=w:!e&&u>y&&(u=y);n._width=u}else n._width=w;r||(n.width=n._width);n._minWidth=w;n._maxWidth=e?1E3:y}!1===e&&!1!==k.refreshWidth&&(f&&this.autoFit(),"auto"===h&&c.virtualX&&this.autoLastColumn());
this._computeOuterWidths()}};n.estRowsInViewPort=function(){var k=Math.ceil(this.contHt/this.rowHt);return this.that.pageSize=k};n._refreshFrozenLine=function(){var k=this.that,a=k.options,c=a.numberCell,b=k.$cont_o,e=a.freezeBorders,d=a.freezeCols,a=a.freezeRows;this.$freezeLine&&this.$freezeLine.remove();this.$freezeLineH&&this.$freezeLineH.remove();e&&(d&&(e=k.calcWidthCols(-1,d),isNaN(e)||0===e||0<e&&c.show&&e===c.width||(this.$freezeLine=m(["<div class='pqg-vert-frozen-line'  style = 'left:",
e,"px;' ></div>"].join("")).appendTo(b))),a&&(k=k.$tbl))&&(k=k.children("tbody").children(".pq-last-frozen-row")[0])&&(this.$freezeLineH=m("<div class='pqg-horiz-frozen-line' style='top:"+(k.offsetTop+k.offsetHeight-1)+"px;' ></div>").appendTo(b))};n.setScrollVNumEles=function(k){var a=this.that;k=a.vscroll;var c=a.options;if(!c.maxHeight&&"flex"===c.height)return k.option("num_eles",0),0;var b=a.iHierarchy?!0:!1,e=parseInt(k.option("num_eles")),d=parseInt(k.option("cur_pos")),e=this.getEContHt(),
c=(c.groupModel?a.dataGM:a.pdata)?a.totalVisibleRows:0,f,h=0;a.$tbl&&0<a.$tbl.length&&(f=a.$tbl[a.$tbl.length-1],h=f.scrollHeight,f=m(f));if(0<h){f=f.children().children("tr");d=a=0;for(h=1;h<f.length;h++){var p=f[h],a=a+p.offsetHeight;if(a>=e){b&&m(p).hasClass("pq-detail-child")&&(d=1<d?d-1:1);break}else b?!1===m(p).hasClass("pq-detail-child")&&d++:d++}e=c-d+1}else e=d+1;e>c&&(e=c);k.option("num_eles",e);return e};n._setScrollVLength=function(k){k=this.that;var a=k.options;if("flex"!==a.height||
a.maxHeight){var a=this.getSBHeight(),c=this.contHt-a+this.headerHt-2;k.vscroll.widget().css("bottom",a);k.vscroll.option("length",c)}};n.setHeaderHeight=function(){var k=this.that,a=k.$header,c,b,e;if(a&&a.length){if(1<a.length){if(c=a[0].offsetHeight,b=a[1].offsetHeight,e=Math.max(c,b),c!==b){var d=m(a[0]).find(".pq-grid-header-search-row"),f=m(a[1]).find(".pq-grid-header-search-row");d.css("height","");f.css("height","");c=a[0].offsetHeight;b=a[1].offsetHeight;e=Math.max(c,b);c<e?d.height(f[0].offsetHeight):
f.height(d[0].offsetHeight)}}else e=c=a[0].offsetHeight;k.$header_o.height(e-2);this.headerHt=e}else k.$header_o.height(0),this.headerHt=0};n.initContHeight=function(){var k=this.that,a=k.options;if("flex"!=a.height||a.maxHeight)this.contHt=this.height-(a.showHeader?this.rowHt:0)-(a.showTop?k.$top[0].offsetHeight:0)-(a.showBottom?k.$bottom[0].offsetHeight:0)};n.initContWidth=function(){var k=this.that.options;if("flex"!==k.width||k.maxWidth)this.contWd=this.width};n.setContHeight=function(k){k=this.that;
var a=this.height-k.$header_o[0].offsetHeight-(k.options.showTop?k.$top[0].offsetHeight:0)-k.$bottom[0].offsetHeight,a=0<=a?a:"";k.$cont.height(a);this.contHt=a};n.setContAndGridHeightForFlex=function(){var k=this.that,a=k.hscroll.widget();if(this.vscroll)a.css("position","");else{a.css("position","relative");var a=k.$cont,c=k.options.cls,b=a.children("."+c.cont_inner_b);a.height("");b.length||(b=a.children("."+c.cont_inner));b.height("");k.element.height("");k.$grid_center.height("")}};n.setContAndGridWidthFromTable=
function(){var k=this.that,a=k.calcWidthCols(-1,k.colModel.length),k=k.element,c=this.getSBWidth();this.contWd=a+c;k.width(this.contWd+"px")};n.getTotalVisibleRows=function(k,a,c){var b=this.that,e=this.estRowsInViewPort(),d=0,f=c?c.length:0,h=a,p=0,q=0,g=null,l=!1,m=!1,n=b.iHierarchy?!0:!1,b=b.options,t=b.detailModel.offset,r=0,w=this.rowHt,y=n?this.contHt:void 0;if(null==c||0==f)return{initV:null,finalV:null,tvRows:d,lastFrozenRow:null};for(var u=0,v=f>a?a:f;u<v;u++){var x=c[u],B=x.pq_hidden;B||
(g=u,d++,n&&((x=x.pq_detail)&&x.show?(x=x.height||0,x>t&&(x=t),r+=x+w):r+=w))}if(f<a)return{initV:g,finalV:g,tvRows:d,lastFrozenRow:g};if(1E4<f&&null==b.groupModel)return p=k+e,h=k+a,h=h>=f?f-1:h,p=p>=f?f-1:p,{initV:h,finalV:p<h?h:p,tvRows:f,lastFrozenRow:g};e-=d;u=a;for(v=f;u<v;u++)x=c[u],B=x.pq_hidden,l?m||(B?p++:q===e?m=!0:(p++,q++)):B?h++:q===k?(l=!0,p=h,q=0):(h++,q++),B||(d++,n&&l&&((x=x.pq_detail)&&x.show?(x=x.height||0,x>t&&(x=t),r+=x+w):r+=w,r>y&&(m=!0)));h=h>=f?f-1:h;p=p>=f?f-1:p;p=p<h?h:
p;return{initV:h,finalV:p,tvRows:d,lastFrozenRow:g}};n.calcInitFinal=function(){var k=this.that,a=k.options,c=a.virtualY,b=a.freezeRows,e="flex"===a.height,d=a.groupModel?k.dataGM:k.pdata;if(null==d||0===d.length)c=this.getTotalVisibleRows(f,b,d),k.totalVisibleRows=c.tvRows,k.initV=c.initV,k.finalV=c.finalV,k.lastFrozenRow=c.lastFrozenRow;else if(c){var f=parseInt(k.vscroll.option("cur_pos"));if(isNaN(f)||0>f)throw"cur_pos NA";k.scrollCurPos=f;c=this.getTotalVisibleRows(f,b,d);k.totalVisibleRows=
c.tvRows;k.initV=c.initV;k.lastFrozenRow=c.lastFrozenRow;k.finalV=e&&!a.maxHeight?d.length-1:c.finalV}else c=this.getTotalVisibleRows(0,b,d),k.lastFrozenRow=c.lastFrozenRow,k.totalVisibleRows=c.tvRows,k.initV=0,k.finalV=d.length-1};n.calcInitFinalH=function(){var k=this.that,a=k.options,c=a.virtualX,b=k.colModel,e=b.length;if(c){for(var d=parseInt(k.hscroll.option("cur_pos")),f=parseInt(a.freezeCols),h="flex"===a.width,p=f,q=0,g=f;g<e;g++)if(b[g].hidden)p++;else if(q===d)break;else p++,q++;p>e-1&&
(p=e-1);k.initH=p;if(h||!c)k.finalH=e-1;else{c=k.calcWidthCols(-1,f);d=this.getEContWd();for(g=p;g<e;g++)if(p=b[g],!p.hidden){p=p.outerWidth;if(!p&&a.debug)throw"outerwidth N/A";c+=p;if(c>d)break}a=g;a>e-1&&(a=e-1);k.finalH=a}}else k.initH=0,k.finalH=e-1};n._calcOffset=function(k){return(k=/(-|\+)([0-9]+)/.exec(k))&&3===k.length?parseInt(k[1]+k[2]):0};n.setMax=function(k){var a=this.that,c=a.element;(a=a.options[k])?(a==parseInt(a)&&(a+="px"),c.css(k,a)):c.css(k,"")};n.refreshGridWidthAndHeight=function(){var k=
this.that,a=k.options,c,b,e=-1<(a.width+"").indexOf("%")?!0:!1,d=-1<(a.height+"").indexOf("%")?!0:!1,f=-1<(a.maxHeight+"").indexOf("%")?!0:!1,h="flex"==a.height,p=f&&h,q=-1<(a.maxWidth+"").indexOf("%")?!0:!1,g="flex"==a.width,l=q&&g,k=k.element;if(e||d||p||l){var n=k.parent();if(!n.length)return;var s;n[0]==document.body||"fixed"==k.css("position")?(s=m(window).width(),n=window.innerHeight?window.innerHeight:m(window).height()):(s=n.width(),n=n.height());var t=this._calcOffset,r=e?t(a.width):0,t=
d?t(a.height):0;l?c=parseInt(a.maxWidth)*s/100:e&&(c=parseInt(a.width)*s/100+r);p?b=parseInt(a.maxHeight)*n/100:d&&(b=parseInt(a.height)*n/100+t)}c||(g&&a.maxWidth?q||(c=a.maxWidth):e||(c=a.width));b||(h&&a.maxHeight?f||(b=a.maxHeight):d||(b=a.height));parseFloat(c)==c?(c=c<a.minWidth?a.minWidth:c,k.css("width",c)):"auto"===c&&k.width(c);parseFloat(b)==b&&(b=b<a.minHeight?a.minHeight:b,k.css("height",b));this.width=Math.round(k.width());this.height=Math.round(k.height())};n.decidePanes=function(){var k=
this.that,a=k.pqpanes={v:!1,h:!1,vH:!1},c=k.options,k=c.virtualX,b=c.virtualY,e="flex"==c.height&&!c.maxHeight,d="flex"==c.width&&!c.maxWidth,f=c.numberCell,h=c.freezeRows,c=c.freezeCols;!h||e||!c&&!f.show||d?h&&!e?b||(a.h=!0):!c&&!f.show||d||k||(a.v=!0,a.vH=!0):(b||(a.h=!0),k||(a.v=!0,a.vH=!0))};n._storeColumnWidths=function(k){for(var a=this.that,c=a.options,b=a.colModel,e=c.virtualX,c=c.freezeCols,d=a.initH,a=k?b.length-1:a.finalH,f=[],h=0;h<=a;h++)!k&&e&&h<d&&h>=c&&(h=d),f[h]={outerWidth:b[h].outerWidth};
return f};n._isColumnWidthChanged=function(k){for(var a=this.that,c=a.colModel,a=a.iGenerateView.colDef,b=0,e=a.length;b<e;b++){var d=a[b].colIndx;if(c[d].outerWidth!==k[d].outerWidth)return!0}return!1};n.softRefresh=function(){var k=this.that,a=k.options;this.refreshScrollbars();k.iGenerateView.setPanes();k._saveDims();k.iMouseSelection.syncScrollBarVert();"flex"==a.height&&this.setContAndGridHeightForFlex();"flex"==a.width&&this.setContAndGridWidthFromTable();this._refreshFrozenLine()};n.refreshScrollbars=
function(k){k=k||{};var a=this.that,c=a.options,b="flex"===c.height,e="flex"===c.width;if((b||this.contHt)&&(e||this.contWd)&&null!==a.totalVisibleRows){var d=this.setScrollVNumEles(k),d=1<d?!0:!1;if((!b||c.maxHeight)&&d!==this.vscroll)if(this.vscroll=d,c.scrollModel.autoFit||c.virtualX||e){if(c=this._storeColumnWidths(),this.refreshColumnWidths(),this._isColumnWidthChanged(c)||e)this.ignoreTResize=!0,this._refreshTableWidths(c,{table:!0,header:!0}),delete this.ignoreTResize,this.setHeaderHeight(),
this.setContHeight(),a.iGenerateView.setPanes(),d=this.setScrollVNumEles(!0),this.vscroll=1<d?!0:!1}else a.iGenerateView.setPanes();d=this.setScrollHNumEles();this.hscroll=1<d?!0:!1;this._setScrollHLength();this._setScrollVLength(k);this._setScrollHVLength()}};n._setScrollHVLength=function(){var k=this.that;this.vscroll&&this.hscroll||k.$hvscroll.css("visibility","hidden")};n._setScrollHLength=function(){var k=this.that,a=k.hscroll.widget(),c=k.$hvscroll;if(k.options.scrollModel.horizontal){a.css("visibility",
"");c.css("visibility","");var c=this.contWd,b=this.getSBWidth();a.css("right",0===b?0:"");k.hscroll.option("length",c-b)}else a.css("visibility","hidden"),c.css("visibility","hidden")};n.estVscroll=function(){var k=this.that,a=!0;null==k.totalVisibleRows||null==this.contHt?a=!1:k.totalVisibleRows*this.rowHt<this.contHt&&(a=!1);this.vscroll=a};n.getSBWidth=function(){null==this.vscroll&&this.estVscroll();return this.vscroll?17:0};n.estHscroll=function(){var k=this.that;if(null==this.contWd)throw"failed";
var a=!1;1<this.calcColsOutsideCont(k.colModel)+1&&(a=!0);this.hscroll=a};n.getSBHeight=function(){if("flex"===this.that.options.width)return 0;null==this.hscroll&&this.estHscroll();return this.hscroll?17:0};n.getEContHt=function(){if(null==this.contHt)throw"contHt N/A";return this.contHt-this.getSBHeight()};n.getEContWd=function(){if(null==this.contWd)throw"contWd N/A";return this.contWd-this.getSBWidth()};n.calcColsOutsideCont=function(k){var a=this.that.options,c=a.numberCell,a=a.freezeCols,b=
this.contWd-this.getSBWidth(),e=0;c.show&&(e+=c.outerWidth);for(c=0;c<k.length;c++){var d=k[c];d.hidden||(e+=d.outerWidth)}var f=0,h=0,d=Math.round(e);d>b&&h++;for(c=a;c<k.length;c++)if(d=k[c],!d.hidden)if(f+=d.outerWidth,d=e-f,d>b)h++;else break;return h};n.setScrollHNumEles=function(){var k=this.that,a=k.options,c=k.colModel,b=a.scrollModel,e=0;if("flex"!==a.width||a.maxWidth)e="fullScroll"===b.lastColumn?c.length-a.freezeCols-k._calcNumHiddenUnFrozens():this.calcColsOutsideCont(c)+1;k.hscroll.option("num_eles",
e);return e};n.init=function(){var k=this.that,a=k.options;this.hscroll=this.vscroll=this.contHt=this.contWd=null;k.initH=k.initV=k.finalH=k.finalV=null;k.totalVisibleRows=k.lastFrozenRow=null;this.rowHt=a.rowHeight;this.headerHt=0;this.height=null};n.refresh=function(k){k=k||{};var a=this.that,c=k.header,b=k.table,e=k.pager,d=a.iGenerateView,f=a.element;if(f[0].offsetWidth){a.iMouseSelection.resetMargins();this.init();f=a.options;this.decidePanes();f.collapsible._collapsed=!1;this.setMax("maxHeight");
this.refreshGridWidthAndHeight();this.initContHeight();this.initContWidth();this.calcInitFinal();if(!1===c||!1===b)var h=this._storeColumnWidths(!0);this.refreshColumnWidths();this.calcInitFinalH();d.createColDefs();!1!==c?a._createHeader():this._isColumnWidthChanged(h)&&this._refreshTableWidths(h,{header:!0});a._refreshHeaderSortIcons();!1!==e&&a._refreshPager();this.setHeaderHeight();this.setContHeight();!1!==b?d.generateView({source:k.source}):(this._refreshTableWidths(h,{table:!0}),d.setPanes());
a._saveDims();d.scrollView();this.refreshScrollbars();"flex"==f.height&&this.setContAndGridHeightForFlex();"flex"==f.width&&this.setContAndGridWidthFromTable();this._refreshFrozenLine();a._createCollapse();f.dataModel.postDataOnce=void 0}else f.addClass("pq-pending-refresh")};n.refreshVscroll=function(k){k=this.that;var a=k.iGenerateView,c=k.options;if(c.virtualY&&!c.scrollModel.smooth){k.scrollMode=!0;var b=k.initV,e=k.finalV;this.calcInitFinal();var d=b-k.initV;c.fullrefreshOnScroll||c.detailModel.init||
c.groupModel||k._mergeCells||1!=Math.abs(d)?b==k.initV&&e==k.finalV||a.generateView():-1==d?(a.removeTopRow(1),a.appendRow(k.finalV-e)):1==d&&(a.prependRow(),a.removeBottomRow(e-k.finalV));k._saveDims();a.scrollView();1>=this.setScrollVNumEles()&&this.refreshScrollbars()}};n._refreshTableWidths=function(k,a){var c=this.that,b=c.$tbl_header,e=a.header&&b,d=c.$tbl,f=a.table&&d,b=e?b.children().children(".pq-row-hidden"):null,h=e?c.$header.find(".pq-grid-col-resize-handle"):null,d=f&&d?d.children().children(".pq-row-hidden"):
null,p,q=!1,g=0;f&&c.tables.length&&(f=c.tables[0].$tbl.children().children(".pq-row-hidden"),d=d?d.add(f):f);for(var f=c.iGenerateView.colDef,l=0,m=f.length;l<m;l++){var n=f[l],t=n.colIndx,r=k[t].outerWidth,n=n.column.outerWidth;n!==r&&(e&&(p=b.find("td[pq-col-indx="+t+"]"),p.width(n)),d&&(p=d.find("td[pq-col-indx="+t+"]"),p.length&&(q=!0,p.width(n))));g+=n-r;e&&0!==g&&(t=h.filter("[pq-col-indx="+t+"]"),r=parseInt(t.css("left")),t.css("left",r+g))}q&&c._trigger("tableWidthChange");c._saveDims()}})(jQuery);
(function(m){function n(b,a,c){for(var e=0,d=b.length;e<d;e++){for(var f=b[e],h={},k=0,m=a.length;k<m;k++){var n=a[k];h[n]=f[n]}c.push(h)}}var k=m.paramquery.cClass,a=m.paramquery;m.widget("paramquery.pqGrid",a._pqGrid,{options:{flex:{on:!0,one:!1,all:!0},detailModel:{cache:!0,offset:100,expandIcon:"ui-icon-triangle-1-se glyphicon glyphicon-minus",collapseIcon:"ui-icon-triangle-1-e glyphicon glyphicon-plus"},dragColumns:{enabled:!0,acceptIcon:"ui-icon-check glyphicon-ok",rejectIcon:"ui-icon-closethick glyphicon-remove",
topIcon:"ui-icon-circle-arrow-s glyphicon glyphicon-circle-arrow-down",bottomIcon:"ui-icon-circle-arrow-n glyphicon glyphicon-circle-arrow-up"},track:null,mergeModel:{on:!1},realFocus:!0,sortModel:{on:!0,type:"local",number:!0,single:!0,cancel:!0,sorter:[]},filterModel:{on:!0,type:"local",mode:"AND",header:!1}},_create:function(){m.extend(m.paramquery.cGenerateView.prototype,f);var b=m.paramquery,a=this.options;this.listeners={};this._queueATriggers={};this._queueBTriggers={};this.iHistory=new b.cHistory(this);
this.iGroupView=new h(this);b.cMerge&&(this.iMerge=new b.cMerge(this));this.iFilterData=new b.cFilterData(this);this.iSelection=new c.Selection(this);this.iHeaderSearch=new e(this);this.iUCData=new b.cUCData(this);this.iMouseSelection=new b.cMouseSelection(this);this._super();this.iGroupView.bindEvents();this.iDragColumns=new b.cDragColumns(this);this._createToolbar();"remote"===a.dataModel.location&&this.refresh({table:!0});this.refreshDataAndView({header:!0})}});var c=window.pq=window.pq||{};c.grid=
function(b,a){return m(b).pqGrid(a).data("paramqueryPqGrid")};a.pqGrid.regional={};var b=a.pqGrid.prototype;b.focus=function(b){b=b||{};var a=b.$td,c=b.rowIndxPage;b=b.colIndx;if(a){if(null==c||null==b)c=a.closest(".pq-grid-row").attr("pq-row-indx"),b=a.closest(".pq-grid-cell").attr("pq-col-indx"),c=null!=c?parseInt(c):null,b=null!=b?parseInt(b):null}else{if(null==c||null==b){if((c=document.activeElement)&&c!=document.body&&"pq-grid-excel"!=c.id&&"pq-grid-cont"!=c.className||!(a=this._focusElement))return;
c=a.rowIndxPage,b=a.colIndx}a=this.getCell({rowIndxPage:c,colIndx:b})}if(this.options.realFocus){this._focusElement={$ele:a,rowIndxPage:c,colIndx:b};var e;a[0]&&(e=a[0])&&"TD"==e.nodeName.toUpperCase()?(e.setAttribute("tabindex",0),e.focus()):(c=this.options.dataModel.data)&&c.length||this.$cont.focus()}else{if(e=this._focusElement)this.removeClass({rowIndxPage:e.rowIndxPage,colIndx:e.colIndx,cls:"pq-focus",refresh:!1}),this.element.find(".pq-focus").removeClass("pq-focus");a&&(this.addClass({rowIndxPage:c,
colIndx:b,cls:"pq-focus"}),this._focusElement={$ele:a,rowIndxPage:c,colIndx:b});c=this.$cont;document.activeElement!=c[0]&&c[0].focus()}};b.onfocus=function(){if(!this.options.realFocus){var b=this._focusElement;b&&this.addClass({rowIndxPage:b.rip,colIndx:b.ci,cls:"pq-focus"})}};b.onblur=function(){if(!this.options.realFocus){var b=this._focusElement;b&&this.removeClass({rowIndxPage:b.rip,colIndx:b.ci,cls:"pq-focus"})}};b.range=function(b){return new c.Range(this,b)};b.rowExpand=function(b){this.iHierarchy.rowExpand(b)};
b.rowInvalidate=function(b){this.iHierarchy.rowInvalidate(b)};b.rowCollapse=function(b){this.iHierarchy.rowCollapse(b)};b.saveState=function(b){b=b||{};var a=this.options,c=a.dataModel,e=this.element[0].id,a=JSON.stringify({colModel:a.colModel,height:a.height,width:a.width,groupModel:a.groupModel,pageModel:a.pageModel,sortModel:a.sortModel,freezeRows:a.freezeRows,freezeCols:a.freezeCols,filter:c.dataUF&&c.dataUF.length?!0:!1});!1!==b.save&&"undefined"!==typeof Storage&&localStorage.setItem("pq-grid"+
(e?e:""),a);return a};b.loadState=function(b){b=b||{};if("undefined"===typeof Storage)return!1;var a=this.element[0].id;if(a=b.state||localStorage.getItem("pq-grid"+(a?a:"")))"string"==typeof a&&(a=JSON.parse(a));else return!1;for(var c=this.columns,e=a.colModel,e=this.nestedCols(e).colModel,d=0,f=e.length;d<f;d++){var h=e[d],k=c[h.dataIndx];m.extend(!0,k,h);m.extend(!0,h,k)}this.option({colModel:e,height:a.height,width:a.width,freezeRows:a.freezeRows,freezeCols:a.freezeCols,sortModel:a.sortModel,
pageModel:a.pageModel,groupModel:a.groupModel});!1!==b.refresh&&this.refreshDataAndView();return!0};var e=function(b){function a(c,g,e){b.filter({data:[{dataIndx:c,value:g,value2:e}]})}this.that=b;var c=this;this.dataHS={};b.on("headerKeyDown",function(b,a){var e=m(b.originalEvent.target);return e.hasClass("pq-grid-hd-search-field")?c.onKeyDown(b,a,e):!0});b.on("createHeader",function(b,a){return c._onCreateHeader()});this.changeListener={change:function(b,c){a(c.dataIndx,c.value,c.value2)}};this.keyupListener=
{keyup:function(b,c){a(c.dataIndx,c.value,c.value2)}};this.clickListener={click:function(b,c){a(c.dataIndx,c.value)}}},k=e.prototype=new k;k.get$Ele=function(b,a){var c=this.that,e=c.options.freezeCols,d=m(c.$tbl_header[0]),f=".pq-grid-hd-search-field[name='"+a+"']",c=m(c.$tbl_header[2==c.$tbl_header.length?1:0]);return b>=e?c.find(f):d.find(f)};k.onKeyDown=function(b,a,c){a=this.that;if(b.keyCode===m.ui.keyCode.TAB){var e=c.attr("name"),d=a.getColIndx({dataIndx:e}),f=a.colModel,h,k=b.shiftKey,n=
f[d];if("between"==n.filter.condition&&(a.scrollColumn({colIndx:d}),e=this.get$Ele(d,e),e[0]==c[0]?k||(h=e[1]):k&&(h=e[0]),h))return h.focus(),b.preventDefault(),!1;do{k?d--:d++;if(0>d||d>=f.length)break;n=f[d];c=n.filter;if(!n.hidden&&c){a.scrollColumn({colIndx:d});e=n.dataIndx;h=this.get$Ele(d,e);"between"==c.condition&&(h=k?m(h[1]):m(h[0]));if(h)return h.focus(),b.preventDefault(),!1;break}}while(1)}else return!0};k._bindFocus=function(){function b(e){e=m(e.target).closest(".pq-grid-hd-search-field").attr("name");
if(a.scrollColumn({dataIndx:e})){var d=a.getColIndx({dataIndx:e});c.get$Ele(d,e).focus()}}for(var a=this.that,c=this,e=a.$header.find(".pq-grid-header-search-row"),d=0;d<e.length;d++)m(e[d]).on("focusin",b)};k._onCreateHeader=function(){var b=this.that,a=b.options;if(a.filterModel.header){this._bindFocus();var c=b.colModel,a=a.freezeCols,e=b.$tbl_header,d=m(e[0]),f=m(e[1]),h="input,select";if(1<e.length){d.find(h).css("visibility","hidden");for(var k=0;k<a;k++){var n=c[k],h="*[name='"+n.dataIndx+
"']";d.find(h).css("visibility","visible");f.find(h).css("visibility","hidden")}}c=b.iGenerateView.colDef;k=0;for(h=c.length;k<h;k++){var y=c[k],u=y.colIndx,n=y.column,v=n.filter;if(v){var y=n.dataIndx,x=d;u>=a&&1<e.length&&(x=f);u=x.find("*[name='"+y+"']");if(0!=u.length){var x=v.type,B=v.value,z=v.value2;"checkbox"==x&&"triple"==v.subtype?u.pqval({val:B}):"select"==x&&null!=B&&u.val(B);(x=v.init)&&x.call(u,{dataIndx:y,column:n});if(n=v.listeners)for(v=0;v<n.length;v++){x=n[v];"string"==typeof x&&
(x=this[x+"Listener"]);for(var A in x)(function(a,c,g){a.bind(A,function(e){var d=b.getColumn({dataIndx:g}),f=d.filter;"checkbox"==f.type?B="triple"==f.subtype?a.pqval({incr:!0}):a.is(":checked")?!0:!1:"between"==f.condition?(B=m(a[0]).val(),z=m(a[1]).val()):B=a.val();return c.call(this,e,{column:d,dataIndx:g,value:B,value2:z})})})(u,x[A],y)}}}}}};var d=function(b,a){return["<div class='pq-from-div'>",b,"</div><span class='pq-from-to-center'>-</span><div class='pq-to-div'>",a,"</div>"].join("")};
k.createDOM=function(b,a){var c=this.that,e=c.options,f=e.bootstrap.on?" ":" ui-corner-all",e=e.numberCell;b.push("<tr class='pq-grid-header-search-row'>");e.show&&b.push("<td pq-col-indx='-1' class='pq-grid-number-col' rowspan='1'><div class='pq-td-div'>&nbsp;</div></td>");for(var e=c.iGenerateView.colDef,h=0,k=e.length;h<k;h++){var n=e[h].column,w=a,y=n.halign;y||(y=n.align);"right"==y?w+=" pq-align-right":"center"==y&&(w+=" pq-align-center");(y=n.cls)&&(w=w+" "+y);if(y=n.filter){var u=n.dataIndx,
v=y.type,x=y.value,B=y.condition,z=y.cls,z="pq-grid-hd-search-field "+(z?z:""),A=y.style,A=A?A:"",E=y.attr,E=E?E:"",C="";if("between"==B)var H=y.value2,H=null!=H?H:"";"textbox"===v?(x=x?x:"",z=z+" pq-search-txt"+f,C="between"==B?d(this._input(u,x,z+" pq-from",A,E),this._input(u,H,z+" pq-to",A,E)):this._input(u,x,z,A,E)):"textarea"===v?(x=x?x:"",z=z+" pq-search-txt"+f,C="between"==B?d(this._textarea(u,x,z+" pq-from",A,E),this._textarea(u,H,z+" pq-to",A,E)):this._textarea(u,x,z,A,E)):"select"===v?y.cache?
C=y.cache:(v=y.options,"function"===typeof v&&(v=v.call(c,{column:n,value:x,dataIndx:u,cls:z,style:A,attr:E})),z+=f,n=["name='",u,"' class='",z,"' style='",A,"' ",E].join(""),C=m.paramquery.select({options:v,attr:n,prepend:y.prepend,valueIndx:y.valueIndx,labelIndx:y.labelIndx,groupIndx:y.groupIndx}),y.cache=C):"checkbox"==v?C=["<input ",null==x||!1==x?"":"checked=checked"," name='",u,"' type=checkbox class='"+z+"' style='"+A+"' "+E+"/>"].join(""):"string"==typeof v?C=v:"function"==typeof v&&(C=v.call(c,
{width:n.outerWidth,value:x,value2:H,column:n,dataIndx:u,cls:z,attr:E,style:A}));b.push(["<td class='",w,"'><div class='pq-td-div' >",C,"</div></td>"].join(""))}else b.push(["<td class='",w,"'><div class='pq-td-div' >&nbsp;</div></td>"].join(""))}b.push("</tr>")};k._input=function(b,a,c,e,d){return['<input value="',a,"\" name='",b,"' type=text style='"+e+"' class='"+c+"' "+d+" />"].join("")};k._textarea=function(b,a,c,e,d){return["<textarea name='",b,"' style='"+e+"' class='"+c+"' "+d+" >",a,"</textarea>"].join("")};
var f={_generateTitleRow:function(b,a,c,e){var d=this.that.options.numberCell,f=a.groupTitle,h=a.level,k=a.GMRowIndx,m=b.title,n=b.icon,n=(n=n?n[h]:null)&&n.length&&2==n.length&&"function"===typeof n.push?n:["ui-icon-minus glyphicon glyphicon-minus","ui-icon-plus glyphicon glyphicon-plus"];if(m&&null!=m[h]){m=m[h];if(!1===m)return;"function"==typeof m?f=m(a):(f=m.replace("{0}",f),f=f.replace("{1}",a.items))}else f=f+" - "+a.items+" item(s)";e="pq-group-row pq-grid-row"+(e?" pq-last-frozen-row":"");
(b=b.titleCls)&&(b=b[h])&&(e+=" "+b);c.push(["<tr class='",e,"' title=\"",a.groupTitle,"\" level='",h,"' GMRowIndx='",k,"'>"].join(""));d.show&&c.push("<td class='pq-grid-number-cell ui-state-default'>&nbsp;</td>");d=n[0];a.collapsed&&(d=n[1]);c.push("<td class='pq-grid-cell' colSpan='100' >","<div class='pq-td-div' style='margin-left:",16*h,"px;'>","<span class='ui-icon ",d,"'></span>",f,"</div></td>");c.push("</tr>")},_generateSummaryRow:function(b,a,c,e){var d=a.level,f=a.rowData,h="pq-summary-row pq-grid-row"+
(e?" pq-last-frozen-row":"");(b=b.summaryCls)&&(b=b[d])&&(h+=" "+b);b=this.that;var k=b.options;e=k.freezeCols;var m=k.numberCell,k=k.columnBorders;c.push("<tr class='"+h+"'>");m.show&&c.push("<td class='pq-grid-number-cell ui-state-default'>&nbsp;</td>");for(var h=this.colDef,m=0,n=h.length;m<n;m++){var u=h[m],v=u.colIndx,u=u.column,x=u.dataIndx,B="pq-grid-cell ";"right"==u.align?B+=" pq-align-right":"center"==u.align&&(B+=" pq-align-center");v==e-1&&k&&(B+=" pq-last-frozen-col");u.cls&&(B=B+" "+
u.cls);var v=f[x],z;v&&(z=u.summary.title)&&(z=z[d])&&("function"==typeof z?(a.dataIndx=x,a.cellData=v,v=z.call(b,a)):v=z.replace("{0}",v));v=null==v?"&nbsp;":v;v=["<td class='",B,"' style='' >",v,"</td>"].join("");c.push(v)}c.push("</tr>");return c},_generateDetailRow:function(b,a,c,e,d){var f="pq-grid-row pq-detail-child";d&&(f+=" pq-last-frozen-row");var h=this.that,k=h.options;d=k.numberCell;var m="pq-grid-cell ";if(!k.wrap||e)m+="pq-wrap-text ";k.stripeRows&&a/2==parseInt(a/2)&&(f+=" pq-grid-oddRow");
b.pq_rowselect&&(f+=h.iRows.hclass);b=b.pq_rowcls;null!=b&&(f+=" "+b);c.push("<tr pq-row-indx='"+a+"' class='"+f+"' >");d.show&&c.push("<td class='pq-grid-number-cell ui-state-default'>&nbsp;</td>");c.push("<td class='"+m+" pq-detail-child' colSpan='20'></td>");c.push("</tr>");return c}},h=function(b){this.that=b},k=h.prototype;k.refreshDataFromDataModel=function(){this._groupData();this.initcollapsed()};k.bindEvents=function(){var b=this;this.that.$cont.on("click","tr.pq-group-row",function(a){return b.onClickGroupRow(a)})};
k.showHideRows=function(b,a,c){for(var e=[],d=this.that.dataGM,f=d.length;b<f;b++){var h=d[b],k=h;if(k.groupSummary)if(h.level<a)break;else h.pq_hidden=c;else if(k.groupTitle)if(h.collapsed&&e.push({indx:b,level:h.level}),h.level<=a)break;else h.pq_hidden=c;else h.pq_hidden=c}return e};k.onClickGroupRow=function(b){var a=m(b.currentTarget);b=this.that;var c=parseInt(a.attr("level")),a=parseInt(a.attr("GMRowIndx")),e=!0,e=b.dataGM[a];e=e.collapsed?e.collapsed=!1:e.collapsed=!0;if(e)this.showHideRows(a+
1,c,!0);else for(a=this.showHideRows(a+1,c,!1),e=0;e<a.length;e++){var d=a[e].indx,c=a[e].level;this.showHideRows(d+1,c,!0)}b.refresh()};k.initcollapsed=function(){var b=this.that.dataGM;if(b)for(var a=0,c=b.length;a<c;a++){var e=b[a];if(void 0!==e.groupTitle){var d=e.level;e.collapsed&&this.showHideRows(a+1,d,!0)}}};k.max=function(b,a){var c;"integer"==a||"float"==a?(c=Math.max.apply(Math,b),"float"===a&&(c=c.toFixed(2))):(b="date"==a?b.sort(function(b,a){b=Date.parse(b);a=Date.parse(a);return b-
a}):b.sort(),c=b[b.length-1]);return c};k.min=function(b,a){var c;"integer"==a||"float"==a?(c=Math.min.apply(Math,b),"float"===a&&(c=c.toFixed(2))):(b="date"==a?b.sort(function(b,a){b=Date.parse(b);a=Date.parse(a);return b-a}):b.sort(),c=b[0]);return c};k.count=function(b){return b.length};k.sum=function(b,a){var c=0,e;e="float"===a?parseFloat:"integer"===a?parseInt:function(b){return b};for(var d=0,f=b.length;d<f;d++)c+=e(b[d]);"float"===a&&(c=c.toFixed(2));return c};k._groupData=function(){for(var b=
this.that,a=b.pdata,c=b.options,e=c.groupModel,d=c.pageModel,c=b.colModel,d=d.type?(d.curPage-1)*d.rPP:0,f=c.length,h=e.dataIndx,k=h.length,n=e.collapsed,y=[],u=0;u<k;u++){y[u]=!1;for(var v=0;v<f;v++){var x=c[v],B=x.summary;if(B&&(B=B.type)&&"function"==typeof B.push&&B[u]){y[u]=!0;break}}}if(e&&a&&0<a.length){for(var e=[],v=[],z=[],A=[],E=[],u=0;u<k;u++)A[u]=null,z[u]="",E[u]={};for(var C=0,H=a.length;C<=H;C++){for(var I=a[C],x=!1,F=null,u=0;u<k;u++)z[u]=C<H?m.trim(I[h[u]]):"",A[u]!=z[u]&&(x=!0),
x&&null==F&&(F=u);if(x){for(x=0;x<k;x++)A[x]=z[x];if(0<C){for(u=k-1;u>=F;u--)if(y[u]){for(var L=[],N=0;N<f;N++)if(x=c[N],B=(B=x.summary)?B.type?B.type[u]:null:null){var P=x.dataIndx,K="",K="function"==typeof B?B(E[u][P],x.dataType):this[B](E[u][P],x.dataType);L[P]=K}e.push({groupSummary:!0,level:u,prevRowData:a[C-1],rowData:L})}for(x=F;x<k;x++)e[v[x]].items=E[x][c[0].dataIndx].length}if(C==H)break;for(u=k-1;u>=F;u--)for(B=0;B<f;B++)x=c[B],E[u][x.dataIndx]=[];for(x=F;x<k;x++)e.push({groupTitle:z[x],
level:x,nextRowData:I,GMRowIndx:e.length,collapsed:n&&null!=n[x]?n[x]:!1}),v[x]=e.length-1}if(C==H)break;I.rowIndx=C+d;I.pq_hidden=!1;e.push(I);for(F=0;F<f;F++)for(x=c[F],P=x.dataIndx,u=0;u<k;u++)E[u][P].push(I[P])}b.dataGM=e}else b.dataGM=null};b._createToolbar=function(){var b=this.options,a=b.toolbar;if(a){var c=a.cls,e=a.style,d=a.attr,a=a.items,c=m("<div class='"+(c?c:"")+"' style='"+(e?e:"")+"' "+(d?d:"")+" ></div>").appendTo(m(".pq-grid-top",this.element));c.pqToolbar({items:a,gridInstance:this,
bootstrap:b.bootstrap});b.showToolbar||c.css("display","none");this.$toolbar=c}};b.isLeftOrRight=function(b){return b>this.freezeCols?"right":"left"};b.ovCreateHeader=function(b,a){this.options.filterModel.header&&this.iHeaderSearch.createDOM(b,a)};b.filter=function(b){var a=this,c=this.options,e=void 0===b.apply?!0:b.apply,d=void 0===b.sort?!0:b.sort,f=c.dataModel,c=c.filterModel;if(void 0!=b){var h="replace"==b.oper?!0:!1;b=b.data;for(var k=this.colModel,k=e?k:m.extend(!0,[],k),n=0,y=k.length,u=
b.length,v=0;v<y;v++){for(var x=k[v],B=!1,z=0;z<u&&n!=u;z++){var A=b[z];if(A.dataIndx==x.dataIndx){B=!0;n++;var z=x.filter,E=A.condition,C=A.value;z?z.on=!0:z=x.filter={on:!0};E&&(z.condition=E);E=z.condition;z.value=C;if("between"==E)z.value2=A.value2;else if("range"==E){A=[];if(C)if("string"==typeof C){var E=z.options,H=C.indexOf('"'),I=C.lastIndexOf('"'),C=C.substr(H,I+1),C=JSON.parse("["+C+"]");if(E)for(H=0,I=E.length;H<I;H++){var F=E[H];-1!=m.inArray(F,C)&&A.push(F)}else A=C.split(",s*")}else"function"==
typeof C.push&&(A=C);z.value=A}break}}h&&!B&&x.filter&&(x.filter.on=!1)}}var L={header:!1,apply:e,sort:d,CM:k};if("remote"==f.location&&"local"!=c.type)this.remoteRequest({apply:e,CM:k,callback:function(){return a._onDataAvailable(L)}});else return L.source="filter",a._onDataAvailable(L)};b._initTypeColumns=function(){for(var b=this.colModel,c=0,e=b.length;c<e;c++){var d=b[c],f=d.type;"checkBoxSelection"===f||"checkbox"==f?(d.type="checkbox",new a.cCheckBoxColumn(this,d)):"detail"===f&&(d.dataIndx=
"pq_detail",this.iHierarchy=new a.cHierarchy(this))}};b.refreshHeader=function(){this._createHeader();this.iGenerateView.setPanes();this._refreshHeaderSortIcons()};b._refreshHeaderSortIcons=function(){this.iHeader.refreshHeaderSortIcons()};b.getLargestRowCol=function(b){for(var a=0;a<b.length;a++);};b.bringCellToView=function(b){this._bringCellToView(b)};b._setUrl=function(b){this.options.dataModel.getUrl=function(){return{url:this.url+(null!=b?b:"")}}};b.pageData=function(){return this.pdata};b.getData=
function(b){b=b||{};var a=b.dataIndx,c=a?a.length:0,e=b.data;b=this.options.dataModel;var d=b.data,f=b.dataUF;b=[];if(c)e?n(e,a,b):(d&&n(d,a,b),f&&n(f,a,b));else return d.concat(f);e=[];for(d=0;d<c;d++){var f=a[d],h=this.getColumn({dataIndx:f});e.push({dataIndx:f,dir:"up",dataType:h.dataType,sortType:h.sortType})}b=this.iSort._sortLocalData(e,b);a=[];c=void 0;e=0;for(d=b.length;e<d;e++)f=b[e],h=JSON.stringify(f),h!==c&&(a.push(f),c=h);return a};b._onDataAvailable=function(b){b=b||{};var a=this.options,
c=null==b.apply?!0:b.apply,e=b.source,d=b.sort,f=[],f=a.filterModel,h=a.dataModel,a=a.sortModel,k=h.location;!1!==c&&this._trigger("dataAvailable",b.evt,{dataModel:h,source:e});f=f&&f.on&&("local"==k&&"remote"!=f.type||"remote"==k&&"local"==f.type)?this.iFilterData.filterLocalData(b).data:h.data;"local"==a.type&&!1!==d&&(c?this.sort({refresh:!1}):f=this.iSort.sortLocalData(f));if(!1===c)return f;h.data=f;this.refreshView(b)};b.sort=function(b){b=b||{};var a=this,c=this.options,e=c.dataModel.data,
d=c.sortModel.type;if(e&&e.length||"local"!=d){var f=c.editModel,c=this.iSort,h=c.getSorter(),k,m=b.evt,n=null==b.single?c.readSingle():b.single;k=c.readCancel();b.sorter?b.addon?(b.single=n,b.cancel=k,k=c.refreshSorter(b)):k=b.sorter:k=c.readSorter();if(k.length||h.length)f.indices&&a.blurEditor({force:!0}),f={dataIndx:k.length?k[0].dataIndx:null,oldSorter:h,sorter:k,source:b.source,single:n},!1===a._trigger("beforeSort",m,f)?c.cancelSort():(c.resumeSort(),"local"==d&&c.saveOrder(),c.setSorter(k),
c.setSingle(n),c.writeSorter(k),c.writeSingle(n),"local"==d?(c.sortLocalData(e),this._queueATriggers.sort={evt:m,ui:f},!1!==b.refresh&&this.refreshView()):"remote"==d&&(this._queueATriggers.sort={evt:m,ui:f},b.initByRemote||this.remoteRequest({initBySort:!0,callback:function(){a._onDataAvailable()}})))}};b._trigger=a._trigger;b.on=a.on;b.one=a.one;b.off=a.off;b.pager=function(){return this.pagerW};b.vscrollbar=function(){return this.vscroll};b.hscrollbar=function(){return this.hscroll};b.toolbar=
function(){return this.$toolbar}})(jQuery);
(function(m){var n=m.paramquery._pqGrid.prototype;m.paramquery=m.paramquery||{};m.paramquery.pqgrid=m.paramquery.pqgrid||{};n.exportExcel=function(a){a.format="xls";return k.call(this,a)};n.exportCsv=function(a){a.format="csv";return k.call(this,a)};n.exportXml=function(a){a.format="xml";return k.call(this,a)};n.exportHtml=function(a){a.format="html";return k.call(this,a)};var k=function(a){var c=this,b=void 0===a.urlPost?a.url:a.urlPost,e=a.url,d=a.render,f={source:a.source||"export"},h=null==a.sheetName?
"pqGrid":a.sheetName,k=a.format,q=function(){for(var b=c.colModel,a=b.length,e=c.options.dataModel.data,h=e.length,k=[],p=[],m=[],q=0;q<a;q++){var n=b[q];if(!1!==n.copy){var v=n.title.replace(/\"/g,'""');p.push('"'+v+'"')}}k.push(p.join(","));for(q=0;q<h;q++){p=e[q];d&&(f.rowIndx=q,f.rowData=p);for(v=0;v<a;v++)if(n=b[v],!1!==n.copy){var x=n.dataIndx,B=p[x];d&&n.render&&(f.colIndx=v,f.column=n,f.dataIndx=x,f.cellData=B,n=n.render.call(c,f),B="string"==typeof n?n:n.text);n=B+"";n=n.replace(/\"/g,'""');
m.push('"'+n+'"')}k.push(m.join(","));m=[]}return k.join("\n")};a="xls"==k?function(){for(var b=c.colModel,a=b.length,e=c.options.dataModel.data,k=e.length,p,m=[],q=[],n=0;n<a;n++){var u=b[n];!1!==u.copy&&(p=u._width,p||(p=parseInt(u.width))||(p=100),q.push('<Column ss:AutoFitWidth="1"  ss:Width="'+p+'" />'))}q.push("<Row>");for(n=0;n<a;n++)u=b[n],!1!==u.copy&&q.push('<Cell><Data ss:Type="String">'+u.title+"</Data></Cell>");q.push("</Row>");q=q.join("\n");for(n=0;n<k;n++){p=e[n];d&&(f.rowIndx=n,f.rowData=
p);m.push("<Row>");for(var v=0;v<a;v++)if(u=b[v],!1!==u.copy){var x=u.dataIndx,B=p[x];d&&u.render&&(f.colIndx=v,f.column=u,f.dataIndx=x,f.cellData=B,u=u.render.call(c,f),B="string"==typeof u?u:u.text);m.push('<Cell><Data ss:Type="String"><![CDATA['+B+"]]\x3e</Data></Cell>")}m.push("</Row>")}m=m.join("\n");return['<?xml version="1.0"?>\n<?mso-application progid="Excel.Sheet"?>\n<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"\n xmlns:o="urn:schemas-microsoft-com:office:office"\n xmlns:x="urn:schemas-microsoft-com:office:excel"\n xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"\n xmlns:html="http://www.w3.org/TR/REC-html40">\n<Worksheet ss:Name="',
h,'">\n<Table>',q,m,"</Table>\n</Worksheet>\n</Workbook>"].join("\n")}():"xml"==k?getXMLContent():"html"==k?getHTMLContent(a):q();m.ajax({url:b,type:"POST",cache:!1,data:{extension:"xls"==k?"xml":k,excel:a},success:function(b){b=e+((0<e.indexOf("?")?"&":"?")+"filename="+b);m(document.body).append("<iframe height='0' width='0' frameborder='0' src=\""+b+'"></iframe>')}})}})(jQuery);
(function(m){var n=m.paramquery.pqGrid.prototype.options,k={on:!1,dirtyClass:"pq-cell-dirty"};n.trackModel=n.trackModel||k;n=(m.paramquery.cUCData=function(a){this.that=a;this.udata=[];this.ddata=[];this.adata=[];this.options=a.options;var c=this;a.on("dataAvailable",function(b,a){"filter"!=a.source&&(c.udata=[],c.ddata=[],c.adata=[])})}).prototype=new m.paramquery.cClass;n.add=function(a){var c=this.that,b=this.adata,e=this.ddata;a=a.rowData;for(var d=this.options.trackModel.dirtyClass,f=c.getRecId({rowData:a}),
h=0,k=b.length;h<k;h++){var m=b[h];if(null!=f&&m.recId==f)throw"primary key violation";if(m.rowData==a)throw"same data can't be added twice.";}h=0;for(k=e.length;h<k;h++)if(a==e[h].rowData){e.splice(h,1);return}var e=[],g;for(g in a)e.push(g);c.removeClass({rowData:a,dataIndx:e,cls:d});a={recId:f,rowData:a};b.push(a)};n.update=function(a){var c=this.that,b=this.options.trackModel.dirtyClass,e=a.rowData||c.getRowData(a),d=c.getRecId({rowData:e}),f=a.dataIndx,h=a.refresh,k=c.columns,q=c.getValueFromDataType;
a=a.row;var g=this.udata,l=g.slice(0),n=!1;if(null!=d){for(var s=0,t=g.length;s<t;s++){var r=g[s],w=r.oldRow;if(r.rowData==e){n=!0;for(f in a)g=k[f].dataType,t=a[f],t=q(t,g),r=w[f],r=q(r,g),w.hasOwnProperty(f)&&r===t?(g={rowData:e,dataIndx:f,refresh:h,cls:b},c.removeClass(g),delete w[f]):(g={rowData:e,dataIndx:f,refresh:h,cls:b},c.addClass(g),w.hasOwnProperty(f)||(w[f]=e[f]));m.isEmptyObject(w)&&l.splice(s,1);break}}if(!n){w={};for(f in a)w[f]=e[f],g={rowData:e,dataIndx:f,refresh:h,cls:b},c.addClass(g);
g={rowData:e,recId:d,oldRow:w};l.push(g)}this.udata=l}};n["delete"]=function(a){var c=this.that,b=a.rowIndx,e=a.rowIndxPage,d=c.rowIndxOffset,b=null==b?e+d:b,e="remote"==c.options.pageModel.type?null==e?b-d:e:b,d=this.adata,f=this.ddata;a=c.getRowData(a);for(var c=0,h=d.length;c<h;c++)if(d[c].rowData==a){d.splice(c,1);return}f.push({indx:e,rowData:a,rowIndx:b})};n.isDirty=function(a){var c=this.udata,b=this.adata,e=this.ddata,d=!1;if(a=this.that.getRowData(a))for(b=0;b<c.length;b++){if(a==c[b].rowData){d=
!0;break}}else if(c.length||b.length||e.length)d=!0;return d};n.getChangesValue=function(a){a=a||{};var c=this.that;a=a.all;for(var b=this.udata,e=this.adata,d=this.ddata,f=[],h=[],k=[],q=[],g=[],l=[],n=0,s=d.length;n<s;n++){var t=d[n],r=t.rowData,w={};g.push(r);for(var y in r)0!=y.indexOf("pq_")&&(w[y]=r[y]);l.push(w)}n=0;for(s=b.length;n<s;n++)if(t=b[n],d=t.oldRow,r=t.rowData,-1==m.inArray(r,g)&&-1==m.inArray(r,f)){w={};if(!1!==a)for(y in r)0!=y.indexOf("pq_")&&(w[y]=r[y]);else{for(y in d)w[y]=
r[y];w[c.options.dataModel.recIndx]=t.recId}f.push(r);h.push(w);k.push(d)}n=0;for(s=e.length;n<s;n++){t=e[n];r=t.rowData;w={};for(y in r)0!=y.indexOf("pq_")&&(w[y]=r[y]);q.push(w)}return{updateList:h,addList:q,deleteList:l,oldList:k}};n.getChanges=function(){for(var a=this.udata,c=this.adata,b=this.ddata,e=[],d=[],f=[],h=[],k=0,q=b.length;k<q;k++){var g=b[k],g=g.rowData;h.push(g)}k=0;for(q=a.length;k<q;k++)g=a[k],b=g.oldRow,g=g.rowData,-1==m.inArray(g,h)&&-1==m.inArray(g,e)&&(e.push(g),d.push(b));
k=0;for(q=c.length;k<q;k++)g=c[k],g=g.rowData,f.push(g);return{updateList:e,addList:f,deleteList:h,oldList:d}};n.getChangesRaw=function(){var a=this.adata,c=this.ddata,b={updateList:[],addList:[],deleteList:[]};b.updateList=this.udata;b.addList=a;b.deleteList=c;return b};n.commitAdd=function(a,c){for(var b=this.that,e=b.colModel,d=e.length,f=this.adata,h=m.inArray,k=f.length,q=b.getValueFromDataType,b=[],g=a.length,l=[],n=0;n<g;n++)for(var s=a[n],t=0;t<k;t++){var r=f[t].rowData,w=!0;if(-1==h(r,l)){for(var y=
0;y<d;y++){var u=e[y],v=u.dataType,x=u.dataIndx;if(!u.hidden&&x!=c&&(u=r[x],u=q(u,v),x=s[x],x=q(x,v),u!==x)){w=!1;break}}if(w){t={};w={};t[c]=s[c];w[c]=r[c];b.push({type:"update",rowData:r,oldRow:w,newRow:t});l.push(r);break}}}e=[];for(t=0;t<k;t++)r=f[t].rowData,-1==h(r,l)&&e.push(f[t]);this.adata=e;return b};n.commitUpdate=function(a,c){for(var b=this.that,e=this.options.trackModel.dirtyClass,d=b.colModel,f=d.length,h=this.udata,k=h.length,q=a.length,g=[],l=0;l<k;l++){var n=h[l],s=n.rowData,n=n.oldRow;
if(-1==m.inArray(s,g))for(var t=0;t<q;t++)if(s[c]==a[t][c]){g.push(s);for(var r=0;r<f;r++)var w=d[r].dataIndx;for(w in n)b.removeClass({rowData:s,dataIndx:w,cls:e})}}b=[];for(l=0;l<k;l++)s=h[l].rowData,-1==m.inArray(s,g)&&b.push(h[l]);this.udata=b;return[]};n.commitDelete=function(a,c){for(var b=this.ddata,e=b.length,d=a.length,f=[],h=0;h<e;h++)for(var k=b[h].rowData,q=0;q<d;q++)k[c]==a[q][c]&&f.push(k);d=[];for(h=0;h<e;h++)k=b[h].rowData,-1==m.inArray(k,f)&&d.push(b[h]);this.ddata=d};n.commitUpdateAll=
function(){for(var a=this.that,c=this.options.trackModel.dirtyClass,b=this.udata,e=0,d=b.length;e<d;e++){var f=b[e],h=f.oldRow,f=f.rowData,k;for(k in h)a.removeClass({rowData:f,dataIndx:k,cls:c})}this.udata=[]};n.commitAddAll=function(){this.adata=[]};n.commitDeleteAll=function(){this.ddata=[]};n.commit=function(a){var c=this.that,b=a?a.history:null,b=null==b?!1:b,e=[],e=[],d=[],f=c.options.dataModel.recIndx;if(null==a)this.commitAddAll(),this.commitUpdateAll(),this.commitDeleteAll();else{var h=a.type;
a=a.rows;"add"==h?a?e=this.commitAdd(a,f):this.commitAddAll():"update"==h?a?d=this.commitUpdate(a,f):this.commitUpdateAll():"delete"==h&&(a?this.commitDelete(a,f):this.commitDeleteAll())}e=e.concat(d);e.length&&(c._digestData({source:"commit",checkEditable:!1,track:!1,history:b,rowList:e}),c.refreshView())};n.rollbackAdd=function(a,c){for(var b=this.adata,e=[],d=0,f=b.length;d<f;d++)e.push({type:"delete",rowData:b[d].rowData});this.adata=[];return e};n.rollbackDelete=function(a,c){for(var b=this.ddata,
e=[],d=b.length-1;0<=d;d--){var f=b[d];e.push({type:"add",rowIndx:f.rowIndx,newRow:f.rowData})}this.ddata=[];return e};n.rollbackUpdate=function(a,c){for(var b=this.that,e=this.options.trackModel.dirtyClass,d=this.udata,f=[],h=0,k=d.length;h<k;h++){var m=d[h],g=m.rowData,l={},n=m.oldRow;if(null!=m.recId){var m=[],s;for(s in n)l[s]=g[s],m.push(s);b.removeClass({rowData:g,dataIndx:m,cls:e,refresh:!1});f.push({type:"update",rowData:g,newRow:n,oldRow:l})}}this.udata=[];return f};n.rollback=function(a){var c=
this.that,b=c.options.pageModel,e=a&&null!=a.refresh?a.refresh:!0;a=a&&null!=a.type?a.type:null;var d=[],d=[],f=[],h=[],k=c.options.dataModel.data;if(null==a||"update"==a)f=this.rollbackUpdate(b,k);if(null==a||"delete"==a)d=this.rollbackDelete(b,k);if(null==a||"add"==a)h=this.rollbackAdd(b,k);d=d.concat(h,f);c._digestData({history:!1,allowInvalid:!0,checkEditable:!1,source:"rollback",track:!1,rowList:d});e&&c.refreshView()};n=m.paramquery.pqGrid.prototype;n.getChanges=function(a){this.blurEditor({force:!0});
if(a){var c=a.format;if(c){if("byVal"==c)return this.iUCData.getChangesValue(a);if("raw"==c)return this.iUCData.getChangesRaw()}}return this.iUCData.getChanges()};n.rollback=function(a){this.blurEditor({force:!0});this.iUCData.rollback(a)};n.isDirty=function(a){return this.iUCData.isDirty(a)};n.commit=function(a){this.iUCData.commit(a)};n._getRowIndx=function(){var a=this.selection({type:"row",method:"getSelection"});if(a&&0<a.length){var a=a[0].rowIndx,c=this.options.pageModel,b=a-this.rowIndxOffset,
e=c.rPP;if(c.type){if(0<=b&&b<e)return a}else return a}else return null};n.updateRow=function(a){for(var c=a.rowList||[{rowIndx:a.rowIndx,newRow:a.newRow||a.row,rowData:a.rowData,rowIndxPage:a.rowIndxPage}],b=[],e=0,d=c.length;e<d;e++){var f=this.normalize(c[e]),h=f.newRow,k=f.rowData,m={};if(k){for(var g in h)m[g]=k[g];f.oldRow=m;f.type="update";b.push(f)}}if(!b.length||!1===this._digestData({source:a.source||"update",history:a.history,checkEditable:a.checkEditable,track:a.track,allowInvalid:a.allowInvalid,
rowList:b}))return!1;!1!==a.refresh&&(1<b.length?this.refresh():this.refreshRow({rowIndx:b[0].rowIndx}))};n.getRecId=function(a){a.dataIndx=this.options.dataModel.recIndx;a=this.getCellData(a);return null==a?null:a};n.getCellData=function(a){var c=a.rowData||this.getRowData(a);a=a.dataIndx;return c?c[a]:null};n.getRowData=function(a){if(!a)return null;var c=a.rowData;if(null!=c)return c;var b=this.options,c=b.dataModel,b=b.pageModel.type,e=c.recIndx,d=a.recId,c=c.data;if(null!=d)for(a=0,b=c.length;a<
b;a++){var f=c[a];if(f[e]==d)return f}else return e=a.rowIndx,a=a.rowIndxPage,d=this.rowIndxOffset,e=null!=e?e:a+d,a="remote"==b?null!=a?a:e-d:e,f=c?c[a]:null;return null};n.deleteRow=function(a){for(var c=a.rowList||[{rowIndx:a.rowIndx,rowIndxPage:a.rowIndxPage}],b=[],e=0,d=c.length;e<d;e++){var f=this.normalize(c[e]);f.oldRow=f.rowData;f.type="delete";b.push(f)}if(!b.length)return!1;this._digestData({source:a.source||"delete",history:a.history,track:a.track,rowList:b});!1!==a.refresh&&this.refreshView()};
n.addRow=function(a){var c=a.rowList||[{rowIndx:a.rowIndx,rowIndxPage:a.rowIndxPage,newRow:a.newRow||a.rowData}],b=[],e=this.options.dataModel,d=e.data;null==d&&(e.data=[],d=e.data);for(var e=0,f=c.length;e<f;e++){var h=this.normalize(c[e]);h.type="add";b.push(h)}if(!b.length||!1===this._digestData({source:a.source||"add",history:a.history,track:a.track,checkEditable:a.checkEditable,rowList:b}))return!1;!1!==a.refresh&&this.refreshView();a=b[0].rowIndx;return null==a?d.length-1:a}})(jQuery);
(function(m){m.widget("paramquery.pqToolbar",{options:{items:[],gridInstance:null},_create:function(){var n=this.options,k=n.bootstrap,a=n.gridInstance,c=a.colModel,n=n.items,b=this.element;b.closest(".pq-grid");b.addClass("pq-toolbar");for(var e=0,d=n.length;e<d;e++){var f=n[e],h=f.type,p=f.icon,q=f.options,g=f.label,l=f.listener,D=l?[l]:f.listeners,l=f.cls,l="ui-corner-all "+(l?l:""),s=f.style,s=s?'style="'+s+'"':"",t=f.attr,t=t?t:"",r;"textbox"==h?r=m("<input type='text' class='"+l+"' "+t+" "+
s+">").appendTo(b):"checkbox"==h?r=m("<input type='checkbox' class='"+l+"' "+t+" "+s+">").appendTo(b):"separator"==h?m("<span class='pq-separator '"+l+"' "+t+" "+s+"></span>").appendTo(b):"button"==h?(h=k.on,r="",h&&(r=p?"<span class='glyphicon "+p+"'></span>":"",l="btn "+l),r=m("<button type='button' class='"+l+"' "+t+" "+s+">"+r+g+"</button>").appendTo(b),q=f.options?f.options:{},m.extend(q,{text:g?!0:!1,icons:{primary:h?"":p}}),r.button(q)):"select"==h?(q=f.options?f.options:[],"function"===typeof q&&
(q=q.call(a.element[0],{colModel:c})),r=m.paramquery.select({options:q,attr:" class='"+l+"' "+t+" "+s,prepend:f.prepend,groupIndx:f.groupIndx,valueIndx:f.valueIndx,labelIndx:f.labelIndx}),r=m(r).appendTo(b)):"string"==typeof h?r=m(h).appendTo(b):"function"==typeof h&&(r=h.call(a.element[0],{colModel:c,cls:l}),r=m(r).appendTo(b));if(D)for(f=0;f<D.length;f++){var l=D[f],w;for(w in l)r.bind(w,l[w])}}},_destroy:function(){this.element.empty().removeClass("pq-toolbar").enableSelection()},_disable:function(){null==
this.$disable&&(this.$disable=m("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))},_enable:function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)},_setOption:function(m,k){"disabled"==m&&(!0==k?this._disable():this._enable())}})})(jQuery);
(function(m){var n=function(a){this.focusSelection=null};n.prototype.inViewRow=function(a){var b=this.that,e=b.options,d=b.rowIndxOffset,f=b.initV,h=b.finalV;if(a<e.freezeRows)return!0;if(e.groupModel){if((b=b.dataGM)&&b.length)for(;f<=h;f++)if(e=b[f].rowIndx-d,null!=e&&e==a)return!0;return!1}return a>=f&&a<=h};var k=function(a){this.that=a;this.options=a=a.options;this.selection=[];this.hclass=" pq-state-select "+(a.bootstrap.on?"active":"ui-state-highlight")};m.paramquery.cRows=k;var a=function(a){var b=
a.options;this.that=a;this.selection=[];this.hclass=" pq-state-select "+(b.bootstrap.on?"active":"ui-state-highlight")};m.paramquery.cCells=a;a=a.prototype=new n;n=k.prototype=new n;n.isSelected=function(a){return(a=a.rowData||this.that.getRowData(a))?!0===a.pq_rowselect:null};n._boundRow=function(a){a=this.that.getRow({rowIndxPage:a});if(null==a||0==a.length)return!1;a.addClass(this.hclass);return a};n.selectRange=function(a){var b=a.range,e=b.r1,b=b.r2;a=a.evt;var d=[];if(e>b)var f=e,e=b,b=f;for(;e<=
b;e++)d.push({rowIndx:e,evt:a});this.add({rows:d,evt:a})};a.removeAll=function(a){var b=this.that,e=b.options,d=e.groupModel?!0:!1;a=d?b.dataGM:e.dataModel.data;var f=b.pdata,h=b.iGenerateView.colDef,k=e.freezeRows,m=b.initV,g=b.finalV,l,n=this.hclass;if(a){for(var s=0;s<=g;s++)if(s>=k&&s<m)s=m-1;else{var t=d?a[s].rowIndx:s,r=f[t];if(null!=r&&(l=r.pq_cellselect))for(var w=0,r=h.length;w<r;w++){var y=h[w],u=y.colIndx;l[y.column.dataIndx]&&b.getCell({rowIndxPage:t,colIndx:u}).removeClass(n)}}a=e.dataModel.data;
s=0;for(r=a.length;s<r;s++)if(l=a[s])l.pq_cellselect=void 0}};n.removeAll=function(a){a=a||{};var b=this.that,e=b.initV,d=a.all,f=b.options,h=f.groupModel?!0:!1,k=f.freezeRows,m=b.finalV,g=b.pdata,l=this.hclass;if(a.refresh){a=h?b.dataGM:f.dataModel.data;for(var n=0;n<=m;n++)if(n>=k&&n<e)n=e-1;else{var s=h?a[n].rowIndx:n,t=g[s];t&&t.pq_rowselect&&b.getRow({rowIndxPage:s}).removeClass(l)}}a=d?f.dataModel.data:g;n=0;for(b=a.length;n<b;n++)if(e=a[n])e.pq_rowselect=void 0};a.isSelected=function(a){var b=
this.that,e=a.rowData||b.getRowData(a),d=a.dataIndx;a=a.colIndx;if(null==a&&null==d||null==e)return null;d=null==d?b.colModel[a].dataIndx:d;return!0==(e.pq_cellselect&&e.pq_cellselect[d])};n.getSelection=function(){for(var a=this.that,b=a.selection().address(),e=[],d=0,f=b.length;d<f;d++){var h=b[d];if("row"==h.type)for(var k=h.r2,h=h.r1;h<=k;h++){var m=a.getRowData({rowIndx:h});e.push({rowIndx:h,rowData:m})}}return e};a.getSelection=function(){for(var a=this.that,b=a.selection(),e=a.colModel,b=b.address(),
d=[],f=0,h=b.length;f<h;f++){var k=b[f],m=k.type;if("block"==m||"cell"==m||"column"==m)for(var m=k.r2,g=k.c1,l=k.c2,k=k.r1;k<=m;k++)for(var n=a.getRowData({rowIndx:k}),s=g;s<=l;s++)d.push({rowIndx:k,rowData:n,colIndx:s,dataIndx:e[s].dataIndx})}return d};a.inViewCell=function(a,b){var e=this.that,d=e.options.freezeCols;return this.inViewRow(a)?b<d||b>=e.initH&&b<=e.finalH:!1};a._add=function(a){var b=this.that;a=b.normalize(a);var e=a.rowIndxPage,d=a.rowData,f,h=a.colIndx,k=a.dataIndx,m=this.isSelected({rowData:d,
dataIndx:k});if(null==m)return!1;var g=this.inViewCell(e,h);!1===m&&(g&&(b=b.getCell({rowIndxPage:e,colIndx:h}))&&b.addClass(this.hclass),f=(d.pq_cellselect=d.pq_cellselect||{})[k]=!0);if(f)return a};n._add=function(a){var b=this.that.normalize(a),e;a=b.rowIndx;var d=b.rowIndxPage,f=b.rowData,h=this.isSelected({rowData:f});b.rowIndxPage=d;if(null==h)return!1;b=this.inViewRow(d);!1===h&&(b&&this._boundRow(d),e=f.pq_rowselect=!0);if(e)return{rowIndx:a,rowData:f}};a.add=function(a){this._add(a)};n.add=
function(a){var b=a.rows;if(b&&"function"==typeof b.push){a=0;for(var e=b.length;a<e;a++){var d=b[a];d.trigger=!1;this._add(d)}}else this._add(a)};n._remove=function(a){var b=this.that,e=b.normalize(a);a=e.rowIndx;var d=e.rowIndxPage,f=e.rowData,e=e.$tr;if(this.isSelected({rowData:f}))return this.inViewRow(d)&&(e=b.getRow({rowIndxPage:d}))&&(e.removeClass(this.hclass),e.removeAttr("tabindex")),f.pq_rowselect=!1,{rowIndx:a,rowData:f}};n.remove=function(a){var b=a.rows;if(b&&"function"==typeof b.push){a=
0;for(var e=b.length;a<e;a++){var d=b[a];d.trigger=!1;this._remove(d)}}else this._remove(a)};a.selectBlock=function(a){var b=this.that,e=this.hclass,d=a.range,f=d.r1,h=d.c1,k=d.r2,d=d.c2,q=b.initH,g=b.finalH,l=b.options.freezeCols,n=[],s=b.colModel,t=[];a=a.remove?!0:!1;for(var r=h;r<=d;r++)n[r]=s[r].dataIndx;for(;f<=k;f++)if(s=b.normalize({rowIndx:f}),r=s.rowData,s=s.rowIndxPage,r){var w=r.pq_cellselect=r.pq_cellselect||{};if(this.inViewRow(s))for(r=h;r<=d;r++){var y=n[r];if(a&&w[y]||!a&&!w[y]){if(r<
l||r>=q&&r<=g){var u=b.getCell({rowIndxPage:s,colIndx:r});u.length&&t.push(u[0])}w[y]=a?void 0:!0}}else for(r=h;r<=d;r++)y=n[r],w[y]=a?void 0:!0}if(t.length)m(t)[a?"removeClass":"addClass"](e)}})(jQuery);
(function(m){var n=!0;m(function(){var a=m("<input type='checkbox' style='position:fixed;left:-50px;top:-50px;'/>").appendTo(document.body);a[0].indeterminate=!0;a.on("change",function(){n=!1});a.click();a.remove()});var k=(m.paramquery.cCheckBoxColumn=function(a,c){var b=this;this.that=a;this.options=a.options;this.column=c;c.cb=m.extend({},{all:!1,header:!1,select:!1,check:!0,uncheck:!1},c.cb);this.dataIndx=c.dataIndx;var e=a.element,d=a.eventNamespace;a.on("dataAvailable",function(){a.one("dataReady",
function(){return b._onDataReady()})}).on("dataReady",function(){b.setValCBox()});e.on("change"+d,function(a){var c=a.target;if("checkbox"==c.type&&m(c).closest(".pq-grid")[0]==this)return b.onCheckBoxChange(a)});a.on("cellKeyDown",function(a,c){return b.onCellKeyDown(a,c)});a.on("refreshHeader",function(a,c){return b.refreshHeader(a,c)})}).prototype=new m.paramquery.cClass;k.hasHeaderChkBox=function(){return this.column.cb.header};k.setValCBox=function(){if(this.hasHeaderChkBox()){var a=this.that,
c=this.options,b=this.dataIndx,e=this.column.cb,d=e.all,f=a.rowIndxOffset,f="remote"!=c.pageModel.type&&d?0:f,c=d?c.dataModel.data:a.pdata,d=null,h=0,k=0;if(c){for(var m=0,g=0,l=c.length;g<l;g++){var n=c[g],s=g+f;a.isEditableRow({rowIndx:s})&&a.isEditableCell({rowIndx:s,dataIndx:b})&&(m++,n[b]===e.check?h++:k++)}h==m&&m?d=!0:k==m&&(d=!1);this.$inp&&this.$inp.pqval({val:d})}}};k.onHeaderChange=function(a){for(var c=m(a.target),b=this.that,e=this.column,d=e.dataIndx,f=b.options,h=e.cb,k=h.all,n=k?f.dataModel.data:
b.pdata,g=b.rowIndxOffset,g="remote"!=f.pageModel.type&&k?0:g,f=[],e={column:e,dataIndx:d,source:"header"},c=c[0].checked,k=0,l=n.length;k<l;k++){var D=k+g,s=n[k],t={},r={};t[d]=c?h.check:h.uncheck;r[d]=s[d];f.push({rowIndx:D,rowData:s,newRow:t,oldRow:r,type:"update"})}d={rowList:f,history:!h.select,source:"checkbox"};e.check=c;e.rows=f;if(!1===b._trigger("beforeCheck",a,e)||!1===b._digestData(d))return b.refreshHeader(),!1;b.refresh({header:!1});f=e.rows=d.rowList;b._trigger("check",a,e);h.select&&
b.selection({type:"row",method:c?"add":"remove",rows:f})};k.refreshHeader=function(a,c){var b=this;if(this.hasHeaderChkBox()){var e=this.that;if(e.pdata&&(e=e.getCellHeader({dataIndx:this.dataIndx}))){var d=this.$inp=e.find("input");this.setValCBox();if(n)d.on("click",function(a){null==d.data("pq_value")&&(d[0].checked=!0,d.data("pq_value",!0),b.onHeaderChange(a))});d.on("change",function(a){b.onHeaderChange(a)})}}};k._onDataReady=function(){var a=this.that,c=this.options,b=c.dataModel.data,c="remote"==
c.pageModel.type?a.rowIndxOffset:0,e=this.column,d=e.cb,f=e.dataIndx;if(null!=f&&b){for(var h=[],k=0,m=b.length;k<m;k++){var g=b[k];g[f]===d.check&&h.push({rowIndx:k+c,rowData:g})}if(!1!==a._trigger("check",null,{rows:h,column:e,dataIndx:f,source:"dataAvailable"})&&d.select)for(k=0;k<m;k++)g=b[k],g[f]===d.check&&(g.pq_rowselect=!0)}this.setValCBox()};k.rowSelect=function(a,c){var b=this.that,e=c.rows,d=c.rowData,f=this.dataIndx;if(e)for(var h=0,k=e.length;h<k;h++){var d=e[h],m=d.rowIndx,d=d.rowData;
d[f]=!0;b.refreshCell({rowIndx:m,dataIndx:f})}else d&&(d[f]=!0,m=c.rowIndx,b.refreshCell({rowIndx:m,dataIndx:f}));this.setValCBox()};k.rowUnSelect=function(a,c){var b=this.that,e=c.rows,d=c.rowData,f=this.dataIndx;if(e)for(var h=0,k=e.length;h<k;h++){var d=e[h],m=d.rowIndx,d=d.rowData;d[f]=!1;b.refreshCell({rowIndx:m,dataIndx:f})}else d&&(d[f]=!1,m=c.rowIndx,b.refreshCell({rowIndx:m,dataIndx:f}));this.setValCBox()};k.onCheckBoxChange=function(a){var c=this.that,b=this.column.cb,e=m(a.target),d=e.closest(".pq-grid-cell");
if(d.length){var d=c.getCellIndices({$td:d}),d=c.normalize(d),f=d.rowData,h=d.rowIndx,k=d.dataIndx;if(k==this.dataIndx){var e=e[0].checked,n={},g={};n[k]=e?b.check:b.uncheck;g[k]=f[k];f=[{rowData:f,rowIndx:h,oldRow:g,newRow:n,type:"update"}];d.check=e;d.rows=f;if(!1===c._trigger("beforeCheck",a,d))return c.refreshCell({rowIndx:h,dataIndx:k}),!1;f={source:"checkbox",history:!b.select,rowList:f};if(!1===c._digestData(f))return c.refreshCell({rowIndx:h,dataIndx:k}),!1;c.refreshRow({rowIndx:h});f=d.rows=
f.rowList;c._trigger("check",a,d);b.select&&c.selection({type:"row",method:e?"add":"remove",rows:f});this.setValCBox()}}};k.onCellKeyDown=function(a,c){if(c.dataIndx==this.dataIndx&&(13==a.keyCode||32==a.keyCode))return m(a.originalEvent.target).find("input").click(),!1}})(jQuery);
(function(){for(var m=0,n=["moz","webkit"],k=0;!window.requestAnimationFrame&&k<n.length;k++)window.requestAnimationFrame=window[n[k]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[k]+"CancelAnimationFrame"]||window[n[k]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var c=(new Date).getTime(),c=Math.max(0,16-(c-m));return window.setTimeout(function(){m=(new Date).getTime();a()},c)});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();
(function(m){function n(a){this.that=a;var c=this;this.borderBottomExtra=this.borderBottom=this.borderLeftExtra=this.borderLeft=this.borderTopExtra=this.borderTop=this.borderRightExtra=this.borderRight=this.scrollLeft=this.scrollTop=0;this.maxBorder=5E3;this.rowht=a.options.rowHeight;this.colwd=60;a.on("contMouseDown",function(a,e){return c._onContMouseDown(a,e)}).on("mouseDrag",function(a,e){return c._onMouseDrag(a,e)}).on("mouseStop",function(a,e){return c._onMouseStop(a,e)}).on("mousePQUp",function(a,
e){return c._onMousePQUp(a,e)}).on("rowMouseDown",function(a,e){return c._onRowMouseDown(a,e)}).on("cellMouseDown",function(a,e){return c._onCellMouseDown(a,e)}).on("refresh",function(b,c){setTimeout(function(){a.focus()},0)}).on("cellMouseEnter",function(a,e){return c._onCellMouseEnter(a,e)}).on("rowMouseEnter",function(a,e){return c._onRowMouseEnter(a,e)})}m.paramquery.cMouseSelection=n;var k=n.prototype=new m.paramquery.cClass;k.inViewPort=function(a){var c=this.that.iRefresh,b=c.getEContHt(),
c=c.getEContWd()+1;a=a[0];var e=this.scrollLeft;if(b>=a.offsetTop+a.offsetHeight+this.marginTop)if("TD"==a.nodeName.toUpperCase()){if(c>=a.offsetLeft+a.offsetWidth+e)return!0}else return!0};k._onCellMouseDown=function(a,c){var b=this.that,e=c.rowIndx,d=b.iSelection,f=c.colIndx,h=b.options.selectionModel,k=h.mode;if("cell"!=h.type)b.focus(c);else if(null!=f)return d=d.address()[0],a.shiftKey&&"single"!=k&&d?(k=d.firstR,d=d.firstC,b.range({r1:k,c1:d,r2:e,c2:f,firstR:k,firstC:d}).select()):(this.mousedown=
{r1:e,c1:f},b.range({r1:e,c1:f,firstR:e,firstC:f}).select()),b.focus(c),!0};k._onCellMouseEnter=function(a,c){var b=this.that,e=b.options.selectionModel,d=e.type,e=e.mode;if(this.mousedown&&"single"!=e){if("cell"==d){var d=this.mousedown,e=d.r1,f=d.c1,h=c.rowIndx,k=c.colIndx;if(e==h&&f==k||d.r2==h&&d.c2==k)return;this.mousedown.r2=h;this.mousedown.c2=k;b.scrollCell({rowIndx:h,colIndx:k});b.range({r1:e,c1:f,r2:h,c2:k,firstR:e,firstC:f}).select()}b.focus(c)}};k._onRowMouseEnter=function(a,c){var b=
this.that,e=b.options.selectionModel,d=e.mode;"row"==e.type&&this.mousedown&&"single"!=d&&(e=this.mousedown.r1,d=c.rowIndx,e==d?b.range({r1:e,firstR:e}).select():this.mousedown.r2!=d&&(this.mousedown.r2=d,b.scrollRow({rowIndx:d}),b.range({r1:e,r2:d,firstR:e}).select()))};k._onRowMouseDown=function(a,c){var b=this.that,e=c.rowIndx,d=b.iSelection,f=b.options.selectionModel,h=0<=a.originalEvent.target.className.indexOf("pq-grid-number-cell"),k=f.mode;if(("row"==f.type||f.row&&h)&&null!=e)return f=b.iSelection.address(),
a.shiftKey?((d=f.length)&&"row"==f[d-1].type&&(d=f[d-1],d.r1=d.firstR,d.r2=e,d.c1=d.c2=d.type=void 0),b.range(f).select()):(a.ctrlKey||a.metaKey)&&"single"!=k?d.add({r1:e,firstR:e}):(this.mousedown={r1:e,y1:a.pageY,x1:a.pageX},b.range({r1:e,firstR:e}).select()),h&&setTimeout(function(){b.focus({rowIndxPage:c.rowIndxPage,colIndx:b.getFirstVisibleCI(!0)})},0),!0};k._onContMouseDown=function(a,c){this.that.options.swipeModel.on&&(this._stopSwipe(!0),this.swipedown={x:a.pageX,y:a.pageY});return!0};k._onMousePQUp=
function(a,c){this.mousedown=null};k._stopSwipe=function(a){a&&(this.swipedownPrev=this.swipedown=null);window.clearInterval(this.intID);window.cancelAnimationFrame(this.intID);this.intID=null};k._onMouseStop=function(a,c){var b=this,e=this.that;if(this.swipedownPrev){var d=e.options.swipeModel,e=this.swipedownPrev,f=e.ts,h=(new Date).getTime()-f,k=a.pageX,m=a.pageY,g=k-e.x,l=m-e.y;if(Math.sqrt(g*g+l*l)/h>d.ratio){var n=0,s=d.repeat;b._stopSwipe();var t=function(){n+=d.speed;s--;b._onMouseDrag({pageX:k+
n*g/h,pageY:m+n*l/h});0<s?b.intID=window.requestAnimationFrame(t):b._stopSwipe(!0)};t()}else b.swipedown=null,b.swipedownPrev=null}};k._onMouseDrag=function(a,c){var b=this.that.options;if(this.swipedown){var e=this.swipedown,d=e.x,f=e.y,h=a.pageX,k=a.pageY;this.swipedownPrev={x:d,y:f,ts:(new Date).getTime()};var m=b.scrollModel.smooth;if(!b.virtualY||m)this.scrollVertSmooth(f,k),this.syncScrollBarVert();b.virtualX&&!m||"flex"===b.width||(this.scrollHorSmooth(d,h),this.syncScrollBarHor());e.x=h;e.y=
k}return!0};k.updateTableY=function(a){if(0==a)return!1;var c=this.that,b=this.getTableForVertScroll(),c=c.iRefresh.getEContHt();if(!b||!b.length)return!1;var e=b.data("offsetHeight")-1,d=this.scrollTop-a;this.setScrollTop(0>d?0:0>a&&0<c-e+d?e-c:d,b,c);return!0};k.setScrollTop=function(a,c,b){0<=a&&(this.scrollTop=a=Math.round(a),c.parent("div").scrollTop(a))};k.getScrollLeft=function(a){return this.scrollLeft};k.getScrollTop=function(a){return this.scrollTop};k.setScrollLeft=function(a,c,b,e){0<=
a&&(this.scrollLeft=a=Math.round(a),b=b?b.parent():m(),b=b.add(c?c.parent("div"):m()),b.scrollLeft(a))};k.scrollVertSmooth=function(a,c){a!=c&&this.updateTableY(c-a)};k.scrollHorSmooth=function(a,c){if(a!=c){var b=this.that,e=b.options,d=c-a,f=this.getTableForHorScroll(),h=this.getTableHeaderForHorScroll(),b=b.iRefresh.getEContWd();if(f||h){var k=f?f:h,e=e.virtualX?this.getScrollWidth(k):k.data("scrollWidth"),d=this.scrollLeft-d;this.setScrollLeft(0>d?0:0>e-b-d?e-b:d,f,h,b)}}};k.syncViewWithScrollBarVert=
function(a){if(null!=a){var c=this.that,b=this.getTableForVertScroll();if(b&&b.length){c.options.editModel.indices&&c.blurEditor({force:!0});var e=b.data("offsetHeight"),c=c.iRefresh.getEContHt();if((a*=e-c)||0===a)0>a&&(a=0),this.setScrollTop(a,b,c)}}};k.syncViewWithScrollBarHor=function(a){if(null!=a){var c=this.that,b=this.getTableForHorScroll(),e=this.getTableHeaderForHorScroll();if(b||e){var d=c.options;d.editModel.indices&&c.blurEditor({force:!0});var f=b?b:e,d=d.virtualX?this.getScrollWidth(f):
f.data("scrollWidth"),c=c.iRefresh.getEContWd();a*=d-c;d&&c&&(0>a&&(a=0),this.setScrollLeft(a,b,e,c))}}};k.resetMargins=function(){this.scrollTop=this.scrollLeft=0};k.syncHeaderViewWithScrollBarHor=function(a){if(null!=a){var c=this.that,b=this.getTableHeaderForHorScroll();if(b){var e=c.options,d=e.freezeCols;e.editModel.indices&&c.blurEditor({force:!0});var e=b.data("scrollWidth"),f=c.iRefresh.getEContWd();a=c.calcWidthCols(d,a+d);e&&f&&(0>a&&(a=0),b.css("marginLeft",-a))}}};k.syncScrollBarVert=
function(){var a=this.that,c=this.getTableForVertScroll();if(c&&c.length){var c=c.data("offsetHeight"),b=a.iRefresh.getEContHt(),c=this.scrollTop/(c-b);0<=c&&1>=c&&a.vscroll.widget().hasClass("pq-sb-vert")&&a.vscroll.option("ratio",c)}};k.syncScrollBarHor=function(){var a=this.that,c=a.options,b=this.getTableForHorScroll(),e=this.getTableHeaderForHorScroll();if(b||e)b=b?b:e,c=c.virtualX?this.getScrollWidth(b):b.data("scrollWidth"),b=a.iRefresh.getEContWd(),c=this.scrollLeft/(c-b),0<=c&&1>=c&&a.hscroll.widget().hasClass("pq-sb-horiz")&&
a.hscroll.option("ratio",c)};k.getTableForVertScroll=function(){var a=this.that,c=a.pqpanes;if((a=a.$tbl)&&a.length)return c.h&&c.v?a=m([a[2],a[3]]):c.v?a=m([a[0],a[1]]):c.h&&(a=m(a[1])),a};k.getTableForHorScroll=function(){var a=this.that,c=a.pqpanes,b=[],e=a.$tbl;if(e&&e.length)return c.h&&c.v?b.push(e[1],e[3]):c.v?b.push(e[1]):c.h?b.push(e[0],e[1]):b.push(e[0]),a.tables.length&&(a=a.tables[0].$tbl,c.v?b.push(a[1]):b.push(a[0])),m(b)};k.getTableHeaderForHorScroll=function(){var a=this.that,c=a.pqpanes;
if((a=a.$tbl_header)&&a.length)return a=c.vH?m(a[1]):m(a[0]),a.parent()};k.scrollRowNonVirtual=function(a){var c=this.that,b=c.options,e=a.rowIndxPage,d=a.rowIndx;a=c.iRefresh.getEContHt();e=null==e?d-c.rowIndxOffset:e;b=parseInt(b.freezeRows);if(!(e<b)){var b=c.get$Tbl(e),f=c.getRow({rowIndxPage:e})[0];f&&(c=b[0].offsetTop+1,e=f.offsetHeight,d=this.getScrollTop(),f=f.offsetTop,0>c+f-d?(c=c+f+-1,this.setScrollTop(0>c?0:c,b,a),this.syncScrollBarVert()):f+e-d>a&&(this.setScrollTop(e+f-a,b,a),this.syncScrollBarVert()))}};
k.scrollColumnNonVirtual=function(a){var c=this.that,b=a.colIndx,b=null==b?c.getColIndx({dataIndx:a.dataIndx}):b,e=c.options.freezeCols;if(!(b<e)){a=c._calcRightEdgeCol(b).width;var b=c._calcRightEdgeCol(b-1).width,e=c._calcRightEdgeCol(e-1).width,d=this.getTableForHorScroll(),f=this.getTableHeaderForHorScroll(),c=c.iRefresh.getEContWd(),h=this.scrollLeft;a-h>c?(this.setScrollLeft(a-c,d,f,c),this.syncScrollBarHor()):b-e<h&&(this.setScrollLeft(b-e,d,f,c),this.syncScrollBarHor())}}})(jQuery);
(function(m){var n=null,k=!1,a="",c=m.paramquery.pqGrid.prototype,b=c.options,e={on:!0,header:!0,zIndex:1E4},d={on:!0},f={on:!0,compare:"byVal",select:!0,validate:!0,allowInvalid:!0,type:"replace"};b.pasteModel=b.pasteModel||f;b.copyModel=b.copyModel||e;b.cutModel=b.cutModel||d;c._setGlobalStr=function(b){a=b};c.copy=function(){n=new h(this);n.copy();n=null};c.paste=function(a){n=new h(this);n.paste(a);n=null};c.cut=function(){n=new h(this);n.copy({cut:!0,source:"cut"});n=null};c.clear=function(){this.iSelection.clear()};
var h=function(a,b){this.that=a},c=h.prototype;c.createClipBoard=function(){var a=m("#pq-grid-excel-div"),a=this.that.options.copyModel,b=m("#pq-grid-excel");0==b.length&&(a=m("<div id='pq-grid-excel-div'  style='position:fixed;top:20px;left:20px;height:1px;width:1px;overflow:hidden;z-index:"+a.zIndex+";'/>").appendTo(document.body),b=m("<textarea id='pq-grid-excel' autocomplete='off' spellcheck='false' style='overflow:hidden;height:10000px;width:10000px;opacity:0' />").appendTo(a),b.css({opacity:0}));
b.select()};c.destroyClipBoard=function(){this.clearClipBoard();var a=this.that,b=m(window).scrollTop(),c=m(window).scrollLeft();a.focus();var a=m(window).scrollTop(),e=m(window).scrollLeft();b==a&&c==e||window.scrollTo(c,b)};c.clearClipBoard=function(){m("#pq-grid-excel").val("")};c.copy=function(a){return this.that.iSelection.copy(a)};c.paste=function(b){b=b||{};var c=this.that,e=b.dest,d=b.clip,f=d?d.length?d.val():"":a,f=f.replace(/\n$/,""),d=f.split("\n"),h=d.length,k,p=c.colModel,n=c.readCell,
u=c.options.pasteModel,v="row",x=!1,B=p.length;if(u.on&&0!=f.length&&0!=h){f={rows:d};if(!1===c._trigger("beforePaste",null,f))return!1;var z=u.type,A,E,C,v=(e?c.range(e):c.selection())._areas;v.length?(C=v[0],v="row"==C.type?"row":"cell",A=C.r1,E=C.r2,e=C.c1,C=C.c2):(v="cell",C=e=E=A=0);var H,I;"replace"==z?(H=A,I=E-A+1<h?"extend":"repeat"):"append"==z?(H=E+1,I="extend"):"prepend"==z&&(H=A,I="extend");var F,h="extend"==I?h:E-A+1,L;A=0;b=b.rowList||[];for(var N=E=0;N<h;N++){var P=d[A],K=N+H,G="replace"==
z?c.getRowData({rowIndx:K}):null,J=G?{}:null,O={};void 0===P&&"repeat"===I&&(A=0,P=d[A]);A++;var M=P.split("\t");if(!k)if("cell"==v){k=M.length;F=C-e+1<M.length?"extend":"repeat";k="extend"==F?k:C-e+1;if(isNaN(k))throw"lenH NaN. assert failed.";k+e>B&&(k=B-e)}else k=B,e=0;var T=0,Q=0,P=0;L=k;for(Q=0;Q<L;Q++){var V=p[Q+e],R=M[T],W=V.dataIndx;V.hidden?"extend"==F&&L+e<B&&L++:(void 0===R&&"repeat"===F&&(T=0,R=M[T]),T++,O[W]=R,J&&(J[W]=n(G,V)))}!1==m.isEmptyObject(O)&&(M="update",null==G&&(x=!0,M="add"),
b.push({newRow:O,rowIndx:K,rowData:G,oldRow:J,type:M}),E++)}c._digestData({rowList:b,source:"paste",allowInvalid:u.allowInvalid,validate:u.validate});c[x?"refreshView":"refresh"]();u.select&&("cell"==v?c.range({r1:H,c1:e,r2:H+E-1,c2:"extend"==F?e+k-1+P:C}).select():c.range({r1:H,r2:H+E-1}).select());c._trigger("paste",null,f)}};m(document).unbind(".pqExcel").bind("keydown.pqExcel",function(a){if(a.ctrlKey||a.metaKey){var b=m(a.target);if(b.hasClass("pq-grid-row")||b.hasClass("pq-grid-cell")||b.is("#pq-grid-excel")||
b.hasClass("pq-grid-cont")){var c=b.closest(".pq-grid");if(n||b.length&&c.length){if(!n){try{var e=c.pqGrid("getInstance").grid;if(e.option("selectionModel.native"))return!0}catch(d){return!0}n=new h(e,b);n.createClipBoard()}"67"==a.keyCode||"99"==a.keyCode?n.copy({clip:m("#pq-grid-excel")}):"88"==a.keyCode?n.copy({cut:!0,clip:m("#pq-grid-excel")}):"86"==a.keyCode||"118"==a.keyCode?(k=!0,n.clearClipBoard(),window.setTimeout(function(){n&&(n.paste({clip:m("#pq-grid-excel")}),n.destroyClipBoard(),n=
null);k=!1},0)):(b=m("#pq-grid-excel"),b.length&&document.activeElement==b[0]&&n.that._onKeyPressDown(a))}}}else if(b=a.keyCode,c=m.ui.keyCode,b==c.UP||b==c.DOWN||b==c.LEFT||b==c.RIGHT||b==c.PAGE_UP||b==c.PAGE_DOWN){if(p)return!1;b=m(a.target);if(b.hasClass("pq-grid-row")||b.hasClass("pq-grid-cell"))p=!0}}).bind("keyup.pqExcel",function(a){var b=a.keyCode;k||!n||a.ctrlKey||a.metaKey||-1==m.inArray(b,[17,91,93,224])||(n.destroyClipBoard(),n=null);p&&(a=m(a.target),a.hasClass("pq-grid-row")||a.hasClass("pq-grid-cell")||
(p=!1))});var p=!1})(jQuery);
(function(m){var n=m.paramquery.pqGrid.prototype.options,k={on:!0,checkEditable:!0,checkEditableAdd:!1,allowInvalid:!0};n.historyModel=n.historyModel||k;n=(m.paramquery.cHistory=function(a){var c=this;this.that=a;this.options=a.options;this.records=[];this.id=this.counter=0;a.on("keyDown",function(a,e){return c._onKeyDown(a,e)}).on("dataAvailable",function(a,e){"filter"!=e.source&&c.reset()})}).prototype=new m.paramquery.cClass;n._onKeyDown=function(a,c){var b=a.ctrlKey||a.metaKey;if(b&&"90"==a.keyCode)return this.undo(),
!1;if(b&&"89"==a.keyCode)return this.redo(),!1};n.resetUndo=function(){if(0==this.counter)return!1;this.counter=0;this.that._trigger("history",null,{type:"resetUndo",num_undo:0,num_redo:this.records.length-this.counter,canUndo:!1,canRedo:!0})};n.reset=function(){if(0==this.counter&&0==this.records.length)return!1;this.records=[];this.id=this.counter=0;this.that._trigger("history",null,{num_undo:0,num_redo:0,type:"reset",canUndo:!1,canRedo:!1})};n.increment=function(){var a=this.records,c=a.length;
this.id=c?a[c-1].id+1:0};n.push=function(a){var c=this.canRedo(),b=this.records,e=this.counter;b.length>e&&b.splice(e,b.length-e);b[e]=m.extend({id:this.id},a);this.counter++;a=this.that;var d,f;1==this.counter&&(d=!0);c&&this.counter==b.length&&(f=!1);a._trigger("history",null,{type:"add",canUndo:d,canRedo:f,num_undo:this.counter,num_redo:0})};n.canUndo=function(){return 0<this.counter?!0:!1};n.canRedo=function(){return this.counter<this.records.length?!0:!1};n.undo=function(){var a=this.canRedo(),
c=this.that,b=!1,e=this.options.historyModel,d=this.records;if(0<this.counter)this.counter--;else return!1;for(var d=d[this.counter].rowList,f=[],h=0,k=d.length;h<k;h++){var m=d[h],g=m.newRow,l=m.rowData,n=m.type,s=m.oldRow,m=m.rowIndx;"update"==n?(m=c.getRowIndx({rowData:l}).rowIndx,f.push({type:n,rowIndx:m,rowData:l,oldRow:g,newRow:s})):"add"==n?(b=!0,f.push({type:"delete",rowData:g})):"delete"==n&&(b=!0,f.push({type:"add",rowIndx:m,newRow:l}))}c._digestData({history:!1,source:"undo",checkEditable:e.checkEditable,
checkEditableAdd:e.checkEditableAdd,allowInvalid:e.allowInvalid,rowList:f});c[b?"refreshView":"refresh"]({source:"undo"});var t,r;!1===a&&(t=!0);0==this.counter&&(r=!1);c._trigger("history",null,{canUndo:r,canRedo:t,type:"undo",num_undo:this.counter,num_redo:this.records.length-this.counter});return!0};n.redo=function(){var a=this.canUndo(),c=this.that,b=this.options.historyModel,e=this.counter,d=this.records;if(e==d.length)return!1;for(var f=!1,e=d[e].rowList,h=[],k=0,m=e.length;k<m;k++){var g=e[k],
l=g.newRow,n=g.rowData,s=g.type,t=g.oldRow,g=g.rowIndx;"update"==s?(g=c.getRowIndx({rowData:n}).rowIndx,h.push({type:s,rowIndx:g,rowData:n,oldRow:t,newRow:l})):"add"==s?(f=!0,h.push({type:"add",rowIndx:g,newRow:l})):"delete"==s&&(f=!0,h.push({type:"delete",rowData:n}))}c._digestData({history:!1,source:"redo",checkEditable:b.checkEditable,checkEditableAdd:b.checkEditableAdd,allowInvalid:b.allowInvalid,rowList:h});c[f?"refreshView":"refresh"]({source:"redo"});this.counter<d.length&&this.counter++;var r,
w;!1==a&&(r=!0);this.counter==this.records.length&&(w=!1);c._trigger("history",null,{canUndo:r,canRedo:w,type:"redo",num_undo:this.counter,num_redo:this.records.length-this.counter});return!0};m.paramquery.pqGrid.prototype.history=function(a){return this.iHistory[a.method](a)}})(jQuery);
(function(m){m.paramquery.filter=function(){var a={begin:{text:"Begins With",TR:!0,string:!0},between:{text:"Between",TR:!0,string:!0,date:!0,number:!0},notbegin:{text:"Does not begin with",TR:!0,string:!0},contain:{text:"Contains",TR:!0,string:!0},notcontain:{text:"Does not contain",TR:!0,string:!0},equal:{text:"Equal To",TR:!0,string:!0,bool:!0},notequal:{text:"Not Equal To",TR:!0,string:!0},empty:{text:"Empty",TR:!1,string:!0,bool:!0},notempty:{text:"Not Empty",TR:!1,string:!0,bool:!0},end:{text:"Ends With",
TR:!0,string:!0},notend:{text:"Does not end with",TR:!0,string:!0},less:{text:"Less Than",TR:!0,number:!0,date:!0},lte:{text:"Less than or equal",TR:!0,number:!0,date:!0},range:{TR:!0,string:!0,number:!0,date:!0},regexp:{TR:!0,string:!0,number:!0,date:!0},great:{text:"Great Than",TR:!0,number:!0,date:!0},gte:{text:"Greater than or equal",TR:!0,number:!0,date:!0}};return{conditions:a,getAllConditions:function(){var c=[],b;for(b in a)c.push(b);return c}(),getConditions:function(c){var b=[],e;for(e in a)a[e][c]&&
b.push(e);return b},getTRConditions:function(){var c=[],b;for(b in a)a[b].TR&&c.push(b);return c}(),getWTRConditions:function(){var c=[],b;for(b in a)a[b].TR||c.push(b);return c}()}}();m.paramquery.filter.rules={};m.paramquery.filter.rules.en={begin:"Begins With",between:"Between",notbegin:"Does not begin with",contain:"Contains",notcontain:"Does not contain",equal:"Equal To",notequal:"Not Equal To",empty:"Empty",notempty:"Not Empty",end:"Ends With",notend:"Does not end with",less:"Less Than",lte:"Less than or equal",
great:"Great Than",gte:"Greater than or equal"};var n=function(a){this.that=a};m.paramquery.cFilterData=n;var k=n.prototype;n.conditions={equal:function(a,c){if(a==c)return!0},contain:function(a,c){if(-1!=a.indexOf(c))return!0},notcontain:function(a,c){if(-1==a.indexOf(c))return!0},empty:function(a){if(0==a.length)return!0},notempty:function(a){if(0<a.length)return!0},begin:function(a,c){if(0==(a+"").indexOf(c))return!0},notbegin:function(a,c){if(0!=a.indexOf(c))return!0},end:function(a,c){var b=
a.lastIndexOf(c);if(-1!=b&&b+c.length==a.length)return!0},notend:function(a,c){var b=a.lastIndexOf(c);if(-1==b||b+c.length!=a.length)return!0},regexp:function(a,c){if(c.test(a))return c.lastIndex=0,!0},notequal:function(a,c){if(a!=c)return!0},great:function(a,c){if(a>c)return!0},gte:function(a,c){if(a>=c)return!0},between:function(a,c,b){if(a>=c&&a<=b)return!0},range:function(a,c){if(-1!=m.inArray(a,c))return!0},less:function(a,c){if(a<c)return!0},lte:function(a,c){if(a<=c)return!0}};n.convert=function(a,
c){a=null==a?"":a;"string"==c?a=m.trim(a).toUpperCase():"date"==c?a=Date.parse(a):"integer"==c?a=parseInt(a):"float"==c?a=parseFloat(a):"bool"==c&&(a=String(a).toLowerCase());return a};k.isMatchCellSingle=function(a,c){var b=a.dataType,e=a.value,d=a.value2,f=a.cbFn,h=c[a.dataIndx],h="regexp"==a.condition?null==h?"":h:n.convert(h,b);return f(h,e,d)?!0:!1};k.isMatchRow=function(a,c,b){if(0==c.length)return!0;for(var e=0;e<c.length;e++){var d=this.isMatchCell(c[e],a);if("OR"==b&&d)return!0;if("AND"==
b&&!d)return!1}if("AND"==b)return!0;if("OR"==b)return!1};k.getQueryStringFilter=function(){var a=this.that,c=a.options,b=c.stringify,c=c.filterModel,e=c.mode,a=this.getFilterData({CM:a.colModel,location:"remote"}),d="";c&&c.on&&a&&(a.length?(c={mode:e,data:a},d=!1===b?c:JSON.stringify(c)):d="");return d};k.filterLocalData=function(a){a=a||{};var c=this.that,b=a.apply;a=this.getFilterData({CM:!1===b?a.CM:c.colModel});var e=c.options,d=e.dataModel,f=c.iSort,h=d.data,k=d.dataUF,m=e.filterModel,g=m.multiple,
e=m?m.mode:null;h||(h=d.data=[]);k||(k=d.dataUF=[]);!1===b&&(h=h.slice());if(k.length)h.push.apply(h,k),0==f.readSorter().length&&f.sortLocalData(h),k=d.dataUF=[];else if(a.length)f.saveOrder();else return{data:h,dataUF:k};this.isMatchCell=g?this.isMatchCellMultiple:this.isMatchCellSingle;if(m.on&&e&&a&&a.length&&h.length)for(d=h.length-1;0<=d;d--)this.isMatchRow(h[d],a,e)||k.push(h.splice(d,1)[0]);!1!==b&&(c._queueATriggers.filter={ui:{type:"local",filter:a}});return{data:h,dataUF:k}};k.getFilterData=
function(a){var c=a.CM;if(!c)throw"CM N/A";var b=c.length,e=a.location;a=this.that.options.filterModel.multiple;for(var d=m.paramquery.filter.getAllConditions,f=m.paramquery.filter.getTRConditions,h=[],k=m.paramquery.cFilterData,n=function(a,b,c){return"function"==typeof a?!0:"between"==a?null!=b&&""!==b||null!=c&&""!==c?!0:!1:-1!=m.inArray(a,d)?null!=b&&""!==b||-1==m.inArray(a,f)?!0:!1:!0},g=function(a,b){return"remote"==e?(null==a?"":a).toString():k.convert(a,b)},l=0;l<b;l++){var D=c[l],s=D.dataIndx,
t=D.dataType,t=t&&"function"!=typeof t?t:"string",r=D.filter;if(a){if((r=D.filterModel)&&r.on){for(var w=[],y=r.mode,u=r.filters,D=0;D<u.length;D++){var r=u[D],v=r.value,x=r.condition;n(x,v)&&(v=g(v,t),w.push({value:v,condition:x}))}h.push({dataIndx:s,mode:y,dataType:t,filters:w})}}else if(r&&r.on&&(v=r.value,w=r.value2,x=r.condition,n(x,v,w))){if("between"==x)""===v||null==v?(x="lte",v=g(w,t)):""===w||null==w?(x="gte",v=g(v,t)):(v=g(v,t),w=g(w,t));else if("regexp"==x)if("remote"==e)v=v.toString();
else{if("string"==typeof v)try{var B=r.modifiers,B=B?B:"gi",v=new RegExp(v,B)}catch(z){v=/.*/}}else if("range"==x)if(null==v)continue;else if("string"==typeof v)v=g(v,t),v=v.split(/\s*,\s*/);else{if(v&&"function"==typeof v.push){if(0==v.length)continue;v=v.slice();D=0;for(r=v.length;D<r;D++)v[D]=g(v[D],t)}}else v=g(v,t);h.push({dataIndx:s,value:v,value2:w,condition:x,dataType:t,cbFn:"remote"==e?"":"function"==typeof x?x:k.conditions[x]})}}return h}})(jQuery);
(function(m){m=(m.paramquery.cSort=function(m){this.that=m;this.sorters=[];this.cancel=!1}).prototype;m.cancelSort=function(){this.cancel=!0};m.resumeSort=function(){this.cancel=!1};m.readSorter=function(){var m=this.that.options,k=m.groupModel,a=k?k.dataIndx:null,c=k?k.dir:null,b=[];if(k&&a)for(k=0;k<a.length;k++)b.push({dataIndx:a[k],dir:c&&c[k]?c[k]:"up"});a=m.sortModel;m=a.sorter;a=a.single;m&&m.length&&(a&&(m=[m[0]]),b=b.concat(m));return b};m.setSingle=function(m){this.single=m};m.getSingle=
function(){return this.single};m.readSingle=function(){return this.that.options.sortModel.single};m.writeSingle=function(m){this.that.options.sortModel.single=m};m.setCancel=function(m){this.cancel=m};m.getCancel=function(){return this.cancel};m.readCancel=function(){return this.that.options.sortModel.cancel};m.writeCancel=function(m){this.that.options.sortModel.cancel=m};m.writeSorter=function(m){var k=this.that.options,a=k.sortModel,c=k.groupModel,k=c?c.dataIndx:null,b=c?c.dir:null;if(k){b||(c.dir=
[]);for(c=0;c<k.length;c++){var e=m[c];if(k[c]!=e.dataIndx)throw"gDataIndx!=sorter.dataIndx";b[c]=e.dir}m.splice(0,k.length)}a.sorter=m};m.refreshSorter=function(m){m=m||{};var k=m.sorter,a=k[0].dataIndx,c=k[0].dir,b=m.single,k=m.cancel,e=this.that.options.groupModel,d=e?e.dataIndx:null,f=d?d.length:0,h=-1;m=this.readSorter();if(null==b)throw"sort single N/A";if(e)for(e=0;e<d.length;e++)d[e]==a&&(h=e);-1<h?m[h].dir="up"===m[h].dir?"down":"up":null!=a&&(b?m[f]&&m[f].dataIndx==a?(a=m[f].dir,a="up"===
a?"down":k&&"down"===a?"":"up",""===a?m.length--:m[f].dir=a):m[f]={dataIndx:a,dir:c?c:"up"}:(f=this.inSorters(m,a),-1<f?(a=m[f].dir,"up"==a?m[f].dir="down":k&&"down"==a?m.splice(f,1):1==m.length?m[f].dir="up":m.splice(f,1)):m.push({dataIndx:a,dir:"up"})));return m};m.saveOrder=function(m){var k=this.that.options.dataModel;m=k.data;if(!(!m||!m.length||k.dataUF&&k.dataUF.length||this.getSorter().length&&null!=m[0].pq_order))for(var k=0,a=m.length;k<a;k++)m[k].pq_order=k};m.getQueryStringSort=function(){if(this.cancel)return"";
var m=this.sorters,k=this.that.options.stringify;return m.length?!1===k?m:JSON.stringify(m):""};m.getSorter=function(){return this.sorters};m.setSorter=function(m){this.sorters=m.slice(0)};m.inSorters=function(m,k){for(var a=-1,c=0;c<m.length;c++)if(m[c].dataIndx==k){a=c;break}return a};m.sortLocalData=function(m){for(var k=this.that,a=k.colModel,c=this.sorters,b=0;b<c.length;b++){var e=c[b],d=k.getColIndx({dataIndx:e.dataIndx}),d=a[d],f=d.sortType;e.dataType=d.dataType;e.sortType=f}c.length||(c=
[{dataIndx:"pq_order",dir:"up",dataType:"integer"}]);return this._sortLocalData(c,m)};m._sortLocalData=function(m,k){function a(a,b,c,e){a=a[c];b=b[c];a=a?parseInt(a,10):0;b=b?parseInt(b,10):0;return(a-b)*e}function c(a,b,c,e){a=a[c];b=b[c];a=a?Date.parse(a):0;b=b?Date.parse(b):0;return(a-b)*e}function b(a,b,c,e){a=(a[c]+"").replace(/,/g,"");b=(b[c]+"").replace(/,/g,"");a=a?parseFloat(a):0;b=b?parseFloat(b):0;return(a-b)*e}function e(a,b,c,e){a=a[c];b=b[c];a=a?a:"";b=b?b:"";c=0;a>b?c=1:a<b&&(c=-1);
return c*e}function d(a,b,c,e){a=a[c];b=b[c];a=a?a.toUpperCase():"";b=b?b.toUpperCase():"";c=0;a>b?c=1:a<b&&(c=-1);return c*e}function f(a,b,c,e){a=a[c];b=b[c];c=0;if(a&&!b||!1===a&&null===b)c=1;else if(b&&!a||!1===b&&null===a)c=-1;return c*e}if(null==k||0==k.length)return[];if(!m||!m.length)return k;var h=this.that,p=h.columns,q=h.readCell;(function(){for(var g=[],h=[],D=[],s=m.length,t=0;t<s;t++){var r=m[t],w=r.dataIndx,y="up"==r.dir?1:-1,u=r.sortType,r=r.dataType;h[t]=w;D[t]=y;g[t]="integer"==
r?a:"float"==r?b:"function"==typeof r?function(a){return function(b,c,e,d){return a(b[e],c[e])*d}}(r):u?function(a){return function(b,c,e,d){return a(b,c,e)*d}}(u):"date"==r?c:"stringi"==r?d:"bool"==r?f:e;if((y=p[w])&&y.nested)for(t=0,u=k.length;t<u;t++)r=k[t],r[w]=q(r,y)}k=k.sort(function(a,b){for(var c=0,e=0;e<s&&(c=g[e](a,b,h[e],D[e]),0==c);e++);return c})})();return k}})(jQuery);
(function(m){function n(a){this.that=a;this.mc=null;var c=this,d=a.options;this.DM=d.dataModel;if(d.mergeCells)a.on("dataReady columnOrder",function(a,b){d.mergeCells&&"pager"!==b.source&&c.initMergeCells(d.mergeCells)})}function k(a,c,d){var f=0,h=a.length;for(d=d>h?h:d;c<d;c++)!0!==a[c].hidden&&f++;return f}function a(a,c,d){var f=0,h=a.length;for(d=d>h?h:d;c<d;c++)!0!==a[c].pq_hidden&&f++;return f}m.paramquery.cMerge=n;var c=n.prototype=new m.paramquery.cClass;c.initMergeCells=function(b){for(var c=
this.that,d=c.colModel,f=this.DM.data,h=[],m=[],n=0,g=b.length;n<g;n++){var l=b[n],D=l.r1,s=f[D],t=l.c1,r=d[t],w=l.rc,y=l.cc;if(r&&s){if(r.hidden){a:{for(r=t;r<t+y;r++){var u=d[r];if(!u){r=-1;break a}if(!u.hidden)break a}r=void 0}y-=r-t;t=r}r=k(d,t,t+y);if(s.pq_hidden){a:{for(s=D;s<D+w;s++){u=f[s];if(!u){s=-1;break a}if(!u.pq_hidden)break a}s=void 0}w-=s-D;D=s}s=a(f,D,D+w);if(1<r&&1<=s||1<=r&&1<s)for(h[n]={r1:D,c1:t,rc:w,cc:y},m[D]=m[D]||[],m[D][t]={show:!0,rowspan:s,colspan:r,o_rowspan:w,o_colspan:y,
style:l.style,cls:l.cls,attr:l.attr,r1:D,c1:t},l=0;l<w;l++)for(m[D+l]=m[D+l]||[],s=0;s<y;s++)if(0!=l||0!=s)m[D+l][t+s]={show:!1,r1:D,c1:t}}}c._mergeCells=0<m.length;this.mc=m;this.mc2=h};c.isHidden=function(a,c){var d,f=this.mc;return f&&f[a]&&(d=f[a][c])&&!d.show?!0:!1};c.setData=function(a,c,d){var f,h=this.mc;h[a]&&(f=h[a][c])&&(f.data=d)};c.getData=function(a,c,d){var f,h=this.mc;if(h[a]&&(f=h[a][c]))return(a=f.data)?a[d]:null};c.removeData=function(a,c,d){var f,h=this.mc;h&&h[a]&&(f=h[a][c])&&
(a=f.data)&&(a[d]=null)};c.ismergedCell=function(a,c){var d=this.mc,f;return d&&d[a]&&(f=d[a][c])?f.show?{rowspan:f.o_rowspan,colspan:f.o_colspan}:!0:!1};c.isRootCell=function(a,c,d){var f=this.mc,h;if(f&&f[a]&&(h=f[a][c])){var k=h.r1;h=h.c1;if(d){if(d=f[k][h],d.a_r1==a&&d.a_c1==c)return!0}else if(k==a&&h==c)return!0}return!1};c.getRootCell=function(a,c,d){var f=this.that,h=this.mc,k;if(h&&h[a]&&(k=h[a][c])){a=k.r1;c=k.c1;d&&(c=h[a][c],a=c.a_r1,c=c.a_c1);d=f.colModel[c];var h=f.rowIndxOffset,m=a-
h;0>m&&(m=0,a=h);return{rowIndxPage:m,colIndx:c,column:d,dataIndx:d.dataIndx,rowData:f.pdata[m],rowIndx:a,rowspan:k.rowspan,colspan:k.colspan}}};c.inflateRange=function(a,c,d,f){var h=this.that,k=!1,m=h.options.dataModel.data.length-1,h=h.colModel.length-1,g=this.mc2;if(!g)return[a,c,d,f];var l=0,n=g.length;a:for(;l<n;l++){var s=g[l],t=s.r1,r=s.c1,w=t+s.rc-1,s=r+s.cc-1,w=w>m?m:w,s=s>h?h:s,y=t<=d&&w>d,u=r<c&&s>=c,v=r<=f&&s>f;if((t<a&&w>=a||y)&&s>=c&&r<=f||(u||v)&&w>=a&&t<=d){k=!0;a=t<a?t:a;c=r<c?r:
c;d=w>d?w:d;f=s>f?s:f;break a}}return k?this.inflateRange(a,c,d,f):[a,c,d,f]};m.paramquery.pqGrid.prototype.calcVisibleRows=a;c.renderCell=function(b){var c=this.that,d=b.rowIndx,f=b.rowIndxPage,h=b.colIndx,m,n=this.mc,g;if(n[d]&&(g=n[d][h])){var l=g.r1,D=g.c1;m=c.options;var s=c.colModel,t=m.freezeCols,r=m.freezeRows,w=c.initH,y=c.initV;if(g.show||h==D&&f==y&&l>=r||h==D&&d==y&&l>=r||d==l&&h==w&&D>=t||d==y&&h==w&&D>=t&&l>=r){m=l-c.rowIndxOffset;var c=c.pdata,f=this.DM.data,u=k(s,0,t);g=a(c,0,r);m=
{rowData:f[l],rowIndx:l,colIndx:D,column:s[D],rowIndxPage:m};var n=n[l][D],v=n.colspan,x=n.rowspan;t&&h<t&&h+v>u?(D=v-k(s,t,w),s=k(s,h,t),v=Math.max(D,s)):v-=k(s,D,h);r&&d<r&&d+x>g?(l=x-a(c,r,y),r=a(c,d,r),x=Math.max(l,r)):x-=a(f,l,d);n.a_r1=d;n.a_c1=h;m.rowspan=x;m.colspan=v;m.style=n.style;m.attr=n.attr;m.cls=n.cls}else return null}return m?m:b}})(jQuery);
(function(){var m=window.pq=window.pq||{};m.extend=function(a,c,d){var f=function(){};f.prototype=a.prototype;var f=c.prototype=new f,h=a.prototype,k;for(k in d){var m=h[k],g=d[k];f[k]=m?function(a,b){return function(){this._super=function(){return a.apply(this,arguments)};var c=b.apply(this,arguments);this._super=void 0;return c}}(m,g):g}f.constructor=c;f._base=a;f._bp=function(a){var b=arguments;Array.prototype.shift.call(b);return h[a].apply(this,b)}};var n=m.Range=function(a,c,d){if(null==a)throw"invalid param";
this.that=a;if(!1==this instanceof n)return new n(a,c,d);this._type=d?d:"range";this.init(c)},k=n.prototype;k._areas=[];k.init=function(a){if(a)if("function"==typeof a.push)for(var c=0,d=a.length;c<d;c++)this.init(a[c]);else if(a=this._normal(a,!0))c=this._areas,c.length?c.push(a):this._areas=[a]};k.address=function(){this.dirty&&this.refresh();return this._areas};k.areas=function(a){this.dirty&&this.refresh();var c=this.that,d=this._areas,d=null==a?d:d[a];return m.Range(c,d,"area")};k.select=function(){var a=
this.that,c=a.iSelection,d=c._areas[0],f=this._areas,h=f[0];if(!h)return this;var k=h.r1,m=h.c1;if(c.dirty||1!=f.length||"block"!=f[0].type||!d||"cell"!=d.type&&"block"!=d.type||k!=d.r1||m!=d.c1)for(c.removeAll({trigger:!1}),k=0,m=f.length;k<m;k++)c.add(f[k],!1);else{var g=d.r1,l=d.c1,n=d.r2,d=d.c2,s=h.r2,h=h.c2,a=a.iCells;if(s==n&&h==d)return this;h>d?a.selectBlock({range:{r1:k,c1:d+1,r2:s,c2:h}}):h<d&&a.selectBlock({range:{r1:Math.max(k,g),c1:h+1,r2:Math.max(s,n),c2:d},remove:!0});s>n?a.selectBlock({range:{r1:n+
1,c1:m,r2:s,c2:h}}):s<n&&a.selectBlock({range:{r1:s+1,c1:Math.max(m,l),r2:n,c2:Math.max(h,d)},remove:!0});c._areas=f}c._trigger();return this};k.resize=function(a,c){var d=this._areas[0];return n(this.that,{r1:d.r1,c1:d.c1,rc:a,cc:c})};k.cut=function(a){a=a||{};a.cut=!0;return this.copy(a)};k.copy=function(a){a=a||{};this.dirty&&this.refresh();var c=this.that,d=a.dest,f=a.cut?!0:!1,h=null==a.copy?!0:a.copy,k=a.source||(f?"cut":"copy"),m=null==a.history?!0:a.history,g=null==a.allowInvalid?!0:a.allowInvalid,
l=[],n=[],s=c.colModel,t=c.readCell,r=c.iMerge,w=this._areas;if(w.length){var y=this._areas[0],u=y.type,v=y.r1,x=y.c1,B=y.r2,y=y.c2,z=0;do{for(;v<=B;v++){for(var A=[],E=c.getRowData({rowIndx:v}),C={},H={},I=x;I<=y;I++){var F=s[I];if(!1===F.copy)break;var L=t(E,F,r,v,I);h&&A.push(L);f&&(F=F.dataIndx,C[F]=void 0,H[F]=L)}f&&l.push({rowIndx:v,rowData:E,oldRow:H,newRow:C,type:"update"});A=A.join("\t");n.push(A)}z++;y=w[z];if("row"==u&&y&&"row"==y.type)v=y.r1,x=y.c1,B=y.r2,y=y.c2;else break}while(1);h&&
(A=n.join("\n"),a.clip?(a=a.clip,a.val(A),a.select()):c._setGlobalStr(A));d?c.paste({dest:d,rowList:l,history:m,allowInvalid:g}):f&&!1!==c._digestData({rowList:l,source:k,history:m,allowInvalid:g})&&c.refresh({source:"cut"})}};k.clear=function(){return this.copy({copy:!1,cut:!0,source:"clear"})};k.add=function(a){this.init(a)};k._countArea=function(a){var c=a.r1,d=a.c1,f=a.r2,h=a.c2;return"cell"==a.type?1:(f-c+1)*(h-d+1)};k.count=function(){this.dirty&&this.refresh();for(var a="range"==this._type,
c=this._areas,d=0,f=c.length,h=0;h<f;h++)d+=a?this._countArea(c[h]):1;return d};k.rows=function(a){this.dirty&&this.refresh();var c=this.that,d=[],f=this._areas[0];if(f){var h=f.r1,k=f.c1,n=f.r2,g=f.c2,f=f.type,n=null==a?n:h+a;for(a=null==a?h:h+a;a<=n;a++)d.push({r1:a,c1:k,r2:a,c2:g,type:f})}return m.Range(c,d,"row")};k.columns=function(a){this.dirty&&this.refresh();var c=this.that,d=[],f=this._areas[0];if(f){var h=f.r1,k=f.c1,n=f.r2,g=f.c2,f=f.type,g=null==a?g:k+a;for(a=null==a?k:k+a;a<=g;a++)d.push({r1:h,
c1:a,r2:n,c2:a,type:f})}return m.Range(c,d,"column")};k.cell=function(a,c){this.dirty&&this.refresh();var d=this.that,f=[],h=this._areas[0];h&&(f=h.r1+a,h=h.c1+c,f=[f,h,f,h]);return m.Range(d,f,"cell")};k.item=function(a){this.dirty&&this.refresh();for(var c=0,d=!1,f=this._areas,h=0,k=f.length;h<k;h++){var m=f[h],g=this._countArea(m);if(c+g>a){d=!0;a-=c;break}else c+=g}if(d){if(m)var l=m.r1,n=m.c1,c=m.c2-n+1,l=l+Math.floor(a/c),n=n+a%c;return{r1:l,c1:n}}};k._normal=function(a,c){if(a.type)return a;
if("function"==a.push){for(var d=0,f=a.length;d<f;d++)this._normal(a[d],c);return a}var d=this.that,h=d.options,f=h.dataModel.data,h=h.pageModel,k="remote"==h.type?h.totalRecords:f.length-1,m=d.colModel.length-1,f=a.r1,h=a.c1,f=f>k?k:f,h=h>m?m:h,g=a.rc,l=a.cc,n=a.r2,s=a.c2,n=g?f+g-1:n>k?k:n,s=l?h+l-1:s>m?m:s;f>n&&(g=f,f=n,n=g);h>s&&(g=h,h=s,s=g);if(null!=f||null!=h)return null==f?(f=0,n=k,s=null==s?h:s,k="column"):null==h?(h=0,n=null==n?f:n,s=m,k="row"):null==n?(k="cell",n=f,s=h):k="block",c&&(d=
d.iMerge.inflateRange(f,h,n,s),f=d[0],h=d[1],n=d[2],s=d[3]),a.r1=f,a.c1=h,a.r2=n,a.c2=s,a.type=a.type||k,a};k.value=function(a){a=a||{};a=a.val;this.dirty&&this.refresh();var c=this.that,d=c.colModel,f=[],h=this._areas;if(void 0===a&&h.length){var k=h[0],m=k.r1,g=k.c1;return c.getCellData({rowIndx:m,colIndx:g})}for(var l=0;l<h.length;l++)for(var k=h[l],m=k.r1,g=k.c1,n=k.r2,k=k.c2;m<=n;m++){for(var s=c.normalize({rowIndx:m}),t=s.rowData,s=s.rowIndx,r={},w={},y=g;y<=k;y++){var u=d[y].dataIndx;w[u]=
a;r[u]=t[u]}f.push({rowData:t,rowIndx:s,type:"update",newRow:w,oldRow:r})}f.length&&(c._digestData({rowList:f,source:"range"}),c.refresh())};var a=m.Selection=function(b,c){if(null==b)throw"invalid param";if(!1==this instanceof a)return new a(b,c);this.that=b;var d=this;b.on("dataReady columnOrder",function(a,b){"pager"!=b.source&&(d.dirty=!0)});this._base(b,c)},c={isDirty:function(){return this.dirty},_trigger:function(){this.dirty&&this.refresh();this.that._trigger("selectChange",null,{selection:this})},
removeAll:function(a){a=a||{};var c=this.that;c.iCells.removeAll({refresh:!0});c.iRows.removeAll({refresh:!0,all:!0});this._areas=[];!1!==a.trigger&&this._trigger()}};k.indexOf=function(a){this.dirty&&this.refresh();a=this._normal(a);var c=a.type,d=a.r1,f=a.c1,h=a.r2;a=a.c2;for(var k=this._areas,m=0,g=k.length;m<g;m++){var l=k[m],n=l;if(c==l.type&&d>=n.r1&&h<=n.r2&&f==n.c1&&a==n.c2)return m}return-1};c.add=function(a,c){var d=this.that,f=this._normal(a,!0),h=d.iCells,d=d.iRows,k=f.r1,m=f.c1,g=f.r2,
l=f.type;0<=this.indexOf(f)||("row"==l?(h=this._areas,h.length&&(h=h[h.length-1],l=h.type,"row"==l&&k<=h.r2&&(this.dirty=!0)),g>k?d.selectRange({range:f}):d.add({rowIndx:k})):"column"==l||"block"==l?h.selectBlock({range:f}):"cell"==l&&h.add({rowIndx:k,colIndx:m}),this._super(f),!1!==c&&this._trigger())};k.removeRow=function(a,c){var d=a.r1,f=a.r2,h=this._areas,k=this._areas[c],m=k.r1,g=k.r2;d==m&&f==g?h.splice(c,1):d>m?(k.r2=d-1,f<g&&(d=this._normal({r1:f+1,r2:g}),h.splice(c+1,0,d))):f<g&&(d>m&&(d=
this._normal({r1:f+1,r2:g}),h.splice(c,0,d)),k.r1=f+1)};c.removeRow=function(a,c){var d=this.that,f=this._normal(a),h=this.indexOf(f);-1<h&&"row"==f.type&&f.r1==f.r2&&(d.iRows.remove({rowIndx:f.r1}),this._super(a,h),!1!==c&&this._trigger())};c.selectAll=function(a){a=a||{};var c=this.that,d=a.all,f=d?0:c.rowIndxOffset,h=c.colModel.length-1,k=f+(d?c.options.dataModel.data.length-1:c.pdata.length-1);"cell"==a.type?(a={r1:f,c1:0},a.r2=k,a.c2=h,c.range(a).select()):(a={r1:f},a.r2=k,d||this.removeRows({all:!1,
trigger:!1}),c.iRows.selectRange({range:a}),c=d?[]:this._areas,c.push({r1:f,c1:0,r2:k,c2:h,type:"row"}),this._areas=c,this._trigger());return this};c.removeRows=function(a){a=a||{};var c=a.all;this.that.iRows.removeAll({refresh:!0,all:a.all});c?this._areas=[]:this.refresh();!1!==a.trigger&&this._trigger()};c.refresh=function(){for(var a=this.that,c=[],d=a.colModel.length-1,a=a.options.dataModel.data,f=0,h=a.length;f<h;f++){var k=a[f],m;k&&(k.pq_cellselect=void 0,k.pq_rowselect?m?m.r2=f:m={r1:f,r2:f,
c1:0,c2:d,type:"row"}:m&&(c.push(m),m=null))}m&&c.push(m);this.dirty=!1;this._areas=c};m.extend(n,a,c)})();
